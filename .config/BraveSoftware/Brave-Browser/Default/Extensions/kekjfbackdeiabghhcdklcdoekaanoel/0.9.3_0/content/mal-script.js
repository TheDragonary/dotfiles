/*! For license information please see mal-script.js.LICENSE.txt */
(()=>{var t={72176:(t,e,n)=>{"use strict";function i(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function s(t,e){return t.require(e)}n.d(e,{l$:()=>s,KV:()=>i}),t=n.hmd(t)},21170:(t,e,n)=>{"use strict";n.d(e,{ph:()=>u,yW:()=>c});var i=n(72176),s=n(71235);t=n.hmd(t);const r=(0,s.Rf)(),a={nowSeconds:()=>Date.now()/1e3},o=(0,i.KV)()?function(){try{return(0,i.l$)(t,"perf_hooks").performance}catch(t){return}}():function(){const{performance:t}=r;if(t&&t.now)return{now:()=>t.now(),timeOrigin:Date.now()-t.now()}}(),l=void 0===o?a:{nowSeconds:()=>(o.timeOrigin+o.now())/1e3},c=a.nowSeconds.bind(a),u=l.nowSeconds.bind(l);let h;(()=>{const{performance:t}=r;if(!t||!t.now)return void(h="none");const e=36e5,n=t.now(),i=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-i):e,a=s<e,o=t.timing&&t.timing.navigationStart,l="number"==typeof o?Math.abs(o+n-i):e;a||l<e?s<=l?(h="timeOrigin",t.timeOrigin):h="navigationStart":h="dateNow"})()},71235:(t,e,n)=>{"use strict";function i(t){return t&&t.Math==Math?t:void 0}n.d(e,{Rf:()=>r,YO:()=>a,n2:()=>s});const s="object"==typeof globalThis&&i(globalThis)||"object"==typeof window&&i(window)||"object"==typeof self&&i(self)||"object"==typeof n.g&&i(n.g)||function(){return this}()||{};function r(){return s}function a(t,e,n){const i=n||s,r=i.__SENTRY__=i.__SENTRY__||{};return r[t]||(r[t]=e())}},2262:(t,e,n)=>{"use strict";n.d(e,{iH:()=>ht,qj:()=>nt});var i=n(3577);const s=t=>{const e=new Set(t);return e.w=0,e.n=0,e},r=t=>(t.w&c)>0,a=t=>(t.n&c)>0,o=new WeakMap;let l=0,c=1;const u=30;let h;const d=Symbol(""),m=Symbol("");let p=!0;const f=[];function g(t,e,n){if(p&&h){let e=o.get(t);e||o.set(t,e=new Map);let i=e.get(n);i||e.set(n,i=s()),_(i)}}function _(t,e){let n=!1;l<=u?a(t)||(t.n|=c,n=!r(t)):n=!t.has(h),n&&(t.add(h),h.deps.push(t))}function y(t,e,n,r,a,l){const c=o.get(t);if(!c)return;let u=[];if("clear"===e)u=[...c.values()];else if("length"===n&&(0,i.kJ)(t)){const t=Number(r);c.forEach(((e,n)=>{("length"===n||n>=t)&&u.push(e)}))}else switch(void 0!==n&&u.push(c.get(n)),e){case"add":(0,i.kJ)(t)?(0,i.S0)(n)&&u.push(c.get("length")):(u.push(c.get(d)),(0,i._N)(t)&&u.push(c.get(m)));break;case"delete":(0,i.kJ)(t)||(u.push(c.get(d)),(0,i._N)(t)&&u.push(c.get(m)));break;case"set":(0,i._N)(t)&&u.push(c.get(d))}if(1===u.length)u[0]&&v(u[0]);else{const t=[];for(const e of u)e&&t.push(...e);v(s(t))}}function v(t,e){const n=(0,i.kJ)(t)?t:[...t];for(const t of n)t.computed&&b(t);for(const t of n)t.computed||b(t)}function b(t,e){(t!==h||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const w=(0,i.fY)("__proto__,__v_isRef,__isVue"),E=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(i.yk)),S=N(),x=N(!0),k=T();function T(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=ot(this);for(let t=0,e=this.length;t<e;t++)g(n,0,t+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(ot)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){f.push(p),p=!1;const n=ot(this)[e].apply(this,t);return function(){const t=f.pop();p=void 0===t||t}(),n}})),t}function $(t){const e=ot(this);return g(e,0,t),e.hasOwnProperty(t)}function N(t=!1,e=!1){return function(n,s,r){if("__v_isReactive"===s)return!t;if("__v_isReadonly"===s)return t;if("__v_isShallow"===s)return e;if("__v_raw"===s&&r===(t?e?et:tt:e?Q:Z).get(n))return n;const a=(0,i.kJ)(n);if(!t){if(a&&(0,i.RI)(k,s))return Reflect.get(k,s,r);if("hasOwnProperty"===s)return $}const o=Reflect.get(n,s,r);return((0,i.yk)(s)?E.has(s):w(s))?o:(t||g(n,0,s),e?o:ut(o)?a&&(0,i.S0)(s)?o:o.value:(0,i.Kn)(o)?t?it(o):nt(o):o)}}function R(t=!1){return function(e,n,s,r){let a=e[n];if(rt(a)&&ut(a)&&!ut(s))return!1;if(!t&&(at(s)||rt(s)||(a=ot(a),s=ot(s)),!(0,i.kJ)(e)&&ut(a)&&!ut(s)))return a.value=s,!0;const o=(0,i.kJ)(e)&&(0,i.S0)(n)?Number(n)<e.length:(0,i.RI)(e,n),l=Reflect.set(e,n,s,r);return e===ot(r)&&(o?(0,i.aU)(s,a)&&y(e,"set",n,s):y(e,"add",n,s)),l}}const A={get:S,set:R(),deleteProperty:function(t,e){const n=(0,i.RI)(t,e),s=(t[e],Reflect.deleteProperty(t,e));return s&&n&&y(t,"delete",e,void 0),s},has:function(t,e){const n=Reflect.has(t,e);return(0,i.yk)(e)&&E.has(e)||g(t,0,e),n},ownKeys:function(t){return g(t,0,(0,i.kJ)(t)?"length":d),Reflect.ownKeys(t)}},P={get:x,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},I=t=>t,L=t=>Reflect.getPrototypeOf(t);function D(t,e,n=!1,i=!1){const s=ot(t=t.__v_raw),r=ot(e);n||(e!==r&&g(s,0,e),g(s,0,r));const{has:a}=L(s),o=i?I:n?ct:lt;return a.call(s,e)?o(t.get(e)):a.call(s,r)?o(t.get(r)):void(t!==s&&t.get(e))}function O(t,e=!1){const n=this.__v_raw,i=ot(n),s=ot(t);return e||(t!==s&&g(i,0,t),g(i,0,s)),t===s?n.has(t):n.has(t)||n.has(s)}function C(t,e=!1){return t=t.__v_raw,!e&&g(ot(t),0,d),Reflect.get(t,"size",t)}function M(t){t=ot(t);const e=ot(this);return L(e).has.call(e,t)||(e.add(t),y(e,"add",t,t)),this}function U(t,e){e=ot(e);const n=ot(this),{has:s,get:r}=L(n);let a=s.call(n,t);a||(t=ot(t),a=s.call(n,t));const o=r.call(n,t);return n.set(t,e),a?(0,i.aU)(e,o)&&y(n,"set",t,e):y(n,"add",t,e),this}function j(t){const e=ot(this),{has:n,get:i}=L(e);let s=n.call(e,t);s||(t=ot(t),s=n.call(e,t)),i&&i.call(e,t);const r=e.delete(t);return s&&y(e,"delete",t,void 0),r}function B(){const t=ot(this),e=0!==t.size,n=t.clear();return e&&y(t,"clear",void 0,void 0),n}function F(t,e){return function(n,i){const s=this,r=s.__v_raw,a=ot(r),o=e?I:t?ct:lt;return!t&&g(a,0,d),r.forEach(((t,e)=>n.call(i,o(t),o(e),s)))}}function G(t,e,n){return function(...s){const r=this.__v_raw,a=ot(r),o=(0,i._N)(a),l="entries"===t||t===Symbol.iterator&&o,c="keys"===t&&o,u=r[t](...s),h=n?I:e?ct:lt;return!e&&g(a,0,c?m:d),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function Y(t){return function(...e){return"delete"!==t&&this}}function q(){const t={get(t){return D(this,t)},get size(){return C(this)},has:O,add:M,set:U,delete:j,clear:B,forEach:F(!1,!1)},e={get(t){return D(this,t,!1,!0)},get size(){return C(this)},has:O,add:M,set:U,delete:j,clear:B,forEach:F(!1,!0)},n={get(t){return D(this,t,!0)},get size(){return C(this,!0)},has(t){return O.call(this,t,!0)},add:Y("add"),set:Y("set"),delete:Y("delete"),clear:Y("clear"),forEach:F(!0,!1)},i={get(t){return D(this,t,!0,!0)},get size(){return C(this,!0)},has(t){return O.call(this,t,!0)},add:Y("add"),set:Y("set"),delete:Y("delete"),clear:Y("clear"),forEach:F(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((s=>{t[s]=G(s,!1,!1),n[s]=G(s,!0,!1),e[s]=G(s,!1,!0),i[s]=G(s,!0,!0)})),[t,n,e,i]}const[W,z,H,K]=q();function V(t,e){const n=e?t?K:H:t?z:W;return(e,s,r)=>"__v_isReactive"===s?!t:"__v_isReadonly"===s?t:"__v_raw"===s?e:Reflect.get((0,i.RI)(n,s)&&s in e?n:e,s,r)}const J={get:V(!1,!1)},X={get:V(!0,!1)},Z=new WeakMap,Q=new WeakMap,tt=new WeakMap,et=new WeakMap;function nt(t){return rt(t)?t:st(t,!1,A,J,Z)}function it(t){return st(t,!0,P,X,tt)}function st(t,e,n,s,r){if(!(0,i.Kn)(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const a=r.get(t);if(a)return a;const o=function(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((0,i.W7)(t))}(t);if(0===o)return t;const l=new Proxy(t,2===o?s:n);return r.set(t,l),l}function rt(t){return!(!t||!t.__v_isReadonly)}function at(t){return!(!t||!t.__v_isShallow)}function ot(t){const e=t&&t.__v_raw;return e?ot(e):t}const lt=t=>(0,i.Kn)(t)?nt(t):t,ct=t=>(0,i.Kn)(t)?it(t):t;function ut(t){return!(!t||!0!==t.__v_isRef)}function ht(t){return n=!1,ut(e=t)?e:new dt(e,n);var e,n}class dt{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ot(t),this._value=e?t:lt(t)}get value(){return function(t){p&&h&&_((t=ot(t)).dep||(t.dep=s()))}(this),this._value}set value(t){const e=this.__v_isShallow||at(t)||rt(t);t=e?t:ot(t),(0,i.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:lt(t),function(t,e){const n=(t=ot(t)).dep;n&&v(n)}(this))}}},3577:(t,e,n)=>{"use strict";function i(t,e){const n=Object.create(null),i=t.split(",");for(let t=0;t<i.length;t++)n[i[t]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,{Kn:()=>u,RI:()=>a,S0:()=>p,W7:()=>m,_N:()=>l,aU:()=>v,fY:()=>i,kJ:()=>o,l7:()=>s,yk:()=>c});const s=Object.assign,r=Object.prototype.hasOwnProperty,a=(t,e)=>r.call(t,e),o=Array.isArray,l=t=>"[object Map]"===d(t),c=t=>"symbol"==typeof t,u=t=>null!==t&&"object"==typeof t,h=Object.prototype.toString,d=t=>h.call(t),m=t=>d(t).slice(8,-1),p=t=>"string"==typeof t&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,f=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},g=/-(\w)/g,_=(f((t=>t.replace(g,((t,e)=>e?e.toUpperCase():"")))),/\B([A-Z])/g),y=(f((t=>t.replace(_,"-$1").toLowerCase())),f((t=>t.charAt(0).toUpperCase()+t.slice(1)))),v=(f((t=>t?`on${y(t)}`:"")),(t,e)=>!Object.is(t,e))},27856:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,n){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,n)}function n(t,i,s){return n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,n,i){var s=[null];s.push.apply(s,n);var r=new(Function.bind.apply(t,s));return i&&e(r,i.prototype),r},n.apply(null,arguments)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,s,r=[],a=!0,o=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){o=!0,s=t}finally{try{a||null==n.return||n.return()}finally{if(o)throw s}}return r}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var o=Object.entries,l=Object.setPrototypeOf,c=Object.isFrozen,u=Object.getPrototypeOf,h=Object.getOwnPropertyDescriptor,d=Object.freeze,m=Object.seal,p=Object.create,f="undefined"!=typeof Reflect&&Reflect,g=f.apply,_=f.construct;g||(g=function(t,e,n){return t.apply(e,n)}),d||(d=function(t){return t}),m||(m=function(t){return t}),_||(_=function(t,e){return n(t,s(e))});var y,v=A(Array.prototype.forEach),b=A(Array.prototype.pop),w=A(Array.prototype.push),E=A(String.prototype.toLowerCase),S=A(String.prototype.toString),x=A(String.prototype.match),k=A(String.prototype.replace),T=A(String.prototype.indexOf),$=A(String.prototype.trim),N=A(RegExp.prototype.test),R=(y=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _(y,e)});function A(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return g(t,e,i)}}function P(t,e,n){n=n||E,l&&l(t,null);for(var i=e.length;i--;){var s=e[i];if("string"==typeof s){var r=n(s);r!==s&&(c(e)||(e[i]=r),s=r)}t[s]=!0}return t}function I(t){var e,n=p(null),s=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){l=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(o(t));try{for(s.s();!(e=s.n()).done;){var a=i(e.value,2),l=a[0],c=a[1];n[l]=c}}catch(t){s.e(t)}finally{s.f()}return n}function L(t,e){for(;null!==t;){var n=h(t,e);if(n){if(n.get)return A(n.get);if("function"==typeof n.value)return A(n.value)}t=u(t)}return function(t){return console.warn("fallback value for",t),null}}var D=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),O=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),M=d(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),j=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=d(["#text"]),F=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G=d(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Y=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W=m(/\{\{[\w\W]*|[\w\W]*\}\}/gm),z=m(/<%[\w\W]*|[\w\W]*%>/gm),H=m(/\${[\w\W]*}/gm),K=m(/^data-[\-\w.\u00B7-\uFFFF]/),V=m(/^aria-[\-\w]+$/),J=m(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),X=m(/^(?:\w+script|data):/i),Z=m(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Q=m(/^html$/i),tt=function(){return"undefined"==typeof window?null:window},et=function(e,n){if("object"!==t(e)||"function"!=typeof e.createPolicy)return null;var i=null,s="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(s)&&(i=n.currentScript.getAttribute(s));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt(),i=function(t){return e(t)};if(i.version="3.0.1",i.removed=[],!n||!n.document||9!==n.document.nodeType)return i.isSupported=!1,i;var r=n.document,a=n.document,l=n.DocumentFragment,c=n.HTMLTemplateElement,u=n.Node,h=n.Element,m=n.NodeFilter,p=n.NamedNodeMap,f=void 0===p?n.NamedNodeMap||n.MozNamedAttrMap:p,g=n.HTMLFormElement,_=n.DOMParser,y=n.trustedTypes,A=h.prototype,nt=L(A,"cloneNode"),it=L(A,"nextSibling"),st=L(A,"childNodes"),rt=L(A,"parentNode");if("function"==typeof c){var at=a.createElement("template");at.content&&at.content.ownerDocument&&(a=at.content.ownerDocument)}var ot=et(y,r),lt=ot?ot.createHTML(""):"",ct=a,ut=ct.implementation,ht=ct.createNodeIterator,dt=ct.createDocumentFragment,mt=ct.getElementsByTagName,pt=r.importNode,ft={};i.isSupported="function"==typeof o&&"function"==typeof rt&&ut&&void 0!==ut.createHTMLDocument;var gt,_t,yt=W,vt=z,bt=H,wt=K,Et=V,St=X,xt=Z,kt=J,Tt=null,$t=P({},[].concat(s(D),s(O),s(C),s(U),s(B))),Nt=null,Rt=P({},[].concat(s(F),s(G),s(Y),s(q))),At=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Pt=null,It=null,Lt=!0,Dt=!0,Ot=!1,Ct=!0,Mt=!1,Ut=!1,jt=!1,Bt=!1,Ft=!1,Gt=!1,Yt=!1,qt=!0,Wt=!1,zt=!0,Ht=!1,Kt={},Vt=null,Jt=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xt=null,Zt=P({},["audio","video","img","source","image","track"]),Qt=null,te=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ee="http://www.w3.org/1998/Math/MathML",ne="http://www.w3.org/2000/svg",ie="http://www.w3.org/1999/xhtml",se=ie,re=!1,ae=null,oe=P({},[ee,ne,ie],S),le=["application/xhtml+xml","text/html"],ce=null,ue=a.createElement("form"),he=function(t){return t instanceof RegExp||t instanceof Function},de=function(e){ce&&ce===e||(e&&"object"===t(e)||(e={}),e=I(e),gt=gt=-1===le.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,_t="application/xhtml+xml"===gt?S:E,Tt="ALLOWED_TAGS"in e?P({},e.ALLOWED_TAGS,_t):$t,Nt="ALLOWED_ATTR"in e?P({},e.ALLOWED_ATTR,_t):Rt,ae="ALLOWED_NAMESPACES"in e?P({},e.ALLOWED_NAMESPACES,S):oe,Qt="ADD_URI_SAFE_ATTR"in e?P(I(te),e.ADD_URI_SAFE_ATTR,_t):te,Xt="ADD_DATA_URI_TAGS"in e?P(I(Zt),e.ADD_DATA_URI_TAGS,_t):Zt,Vt="FORBID_CONTENTS"in e?P({},e.FORBID_CONTENTS,_t):Jt,Pt="FORBID_TAGS"in e?P({},e.FORBID_TAGS,_t):{},It="FORBID_ATTR"in e?P({},e.FORBID_ATTR,_t):{},Kt="USE_PROFILES"in e&&e.USE_PROFILES,Lt=!1!==e.ALLOW_ARIA_ATTR,Dt=!1!==e.ALLOW_DATA_ATTR,Ot=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ct=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Mt=e.SAFE_FOR_TEMPLATES||!1,Ut=e.WHOLE_DOCUMENT||!1,Ft=e.RETURN_DOM||!1,Gt=e.RETURN_DOM_FRAGMENT||!1,Yt=e.RETURN_TRUSTED_TYPE||!1,Bt=e.FORCE_BODY||!1,qt=!1!==e.SANITIZE_DOM,Wt=e.SANITIZE_NAMED_PROPS||!1,zt=!1!==e.KEEP_CONTENT,Ht=e.IN_PLACE||!1,kt=e.ALLOWED_URI_REGEXP||kt,se=e.NAMESPACE||ie,At=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&he(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(At.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&he(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(At.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(At.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(Dt=!1),Gt&&(Ft=!0),Kt&&(Tt=P({},s(B)),Nt=[],!0===Kt.html&&(P(Tt,D),P(Nt,F)),!0===Kt.svg&&(P(Tt,O),P(Nt,G),P(Nt,q)),!0===Kt.svgFilters&&(P(Tt,C),P(Nt,G),P(Nt,q)),!0===Kt.mathMl&&(P(Tt,U),P(Nt,Y),P(Nt,q))),e.ADD_TAGS&&(Tt===$t&&(Tt=I(Tt)),P(Tt,e.ADD_TAGS,_t)),e.ADD_ATTR&&(Nt===Rt&&(Nt=I(Nt)),P(Nt,e.ADD_ATTR,_t)),e.ADD_URI_SAFE_ATTR&&P(Qt,e.ADD_URI_SAFE_ATTR,_t),e.FORBID_CONTENTS&&(Vt===Jt&&(Vt=I(Vt)),P(Vt,e.FORBID_CONTENTS,_t)),zt&&(Tt["#text"]=!0),Ut&&P(Tt,["html","head","body"]),Tt.table&&(P(Tt,["tbody"]),delete Pt.tbody),d&&d(e),ce=e)},me=P({},["mi","mo","mn","ms","mtext"]),pe=P({},["foreignobject","desc","title","annotation-xml"]),fe=P({},["title","style","font","a","script"]),ge=P({},O);P(ge,C),P(ge,M);var _e=P({},U);P(_e,j);var ye=function(t){w(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},ve=function(t,e){try{w(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){w(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!Nt[t])if(Ft||Gt)try{ye(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},be=function(t){var e,n;if(Bt)t="<remove></remove>"+t;else{var i=x(t,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===gt&&se===ie&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var s=ot?ot.createHTML(t):t;if(se===ie)try{e=(new _).parseFromString(s,gt)}catch(t){}if(!e||!e.documentElement){e=ut.createDocument(se,"template",null);try{e.documentElement.innerHTML=re?lt:s}catch(t){}}var r=e.body||e.documentElement;return t&&n&&r.insertBefore(a.createTextNode(n),r.childNodes[0]||null),se===ie?mt.call(e,Ut?"html":"body")[0]:Ut?e.documentElement:r},we=function(t){return ht.call(t.ownerDocument||t,t,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},Ee=function(e){return"object"===t(u)?e instanceof u:e&&"object"===t(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Se=function(t,e,n){ft[t]&&v(ft[t],(function(t){t.call(i,e,n,ce)}))},xe=function(t){var e,n;if(Se("beforeSanitizeElements",t,null),(n=t)instanceof g&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof f)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore||"function"!=typeof n.hasChildNodes))return ye(t),!0;var s=_t(t.nodeName);if(Se("uponSanitizeElement",t,{tagName:s,allowedTags:Tt}),t.hasChildNodes()&&!Ee(t.firstElementChild)&&(!Ee(t.content)||!Ee(t.content.firstElementChild))&&N(/<[/\w]/g,t.innerHTML)&&N(/<[/\w]/g,t.textContent))return ye(t),!0;if(!Tt[s]||Pt[s]){if(!Pt[s]&&Te(s)){if(At.tagNameCheck instanceof RegExp&&N(At.tagNameCheck,s))return!1;if(At.tagNameCheck instanceof Function&&At.tagNameCheck(s))return!1}if(zt&&!Vt[s]){var r=rt(t)||t.parentNode,a=st(t)||t.childNodes;if(a&&r)for(var o=a.length-1;o>=0;--o)r.insertBefore(nt(a[o],!0),it(t))}return ye(t),!0}return t instanceof h&&!function(t){var e=rt(t);e&&e.tagName||(e={namespaceURI:se,tagName:"template"});var n=E(t.tagName),i=E(e.tagName);return!!ae[t.namespaceURI]&&(t.namespaceURI===ne?e.namespaceURI===ie?"svg"===n:e.namespaceURI===ee?"svg"===n&&("annotation-xml"===i||me[i]):Boolean(ge[n]):t.namespaceURI===ee?e.namespaceURI===ie?"math"===n:e.namespaceURI===ne?"math"===n&&pe[i]:Boolean(_e[n]):t.namespaceURI===ie?!(e.namespaceURI===ne&&!pe[i])&&!(e.namespaceURI===ee&&!me[i])&&!_e[n]&&(fe[n]||!ge[n]):!("application/xhtml+xml"!==gt||!ae[t.namespaceURI]))}(t)?(ye(t),!0):"noscript"!==s&&"noembed"!==s||!N(/<\/no(script|embed)/i,t.innerHTML)?(Mt&&3===t.nodeType&&(e=t.textContent,e=k(e,yt," "),e=k(e,vt," "),e=k(e,bt," "),t.textContent!==e&&(w(i.removed,{element:t.cloneNode()}),t.textContent=e)),Se("afterSanitizeElements",t,null),!1):(ye(t),!0)},ke=function(t,e,n){if(qt&&("id"===e||"name"===e)&&(n in a||n in ue))return!1;if(Dt&&!It[e]&&N(wt,e));else if(Lt&&N(Et,e));else if(!Nt[e]||It[e]){if(!(Te(t)&&(At.tagNameCheck instanceof RegExp&&N(At.tagNameCheck,t)||At.tagNameCheck instanceof Function&&At.tagNameCheck(t))&&(At.attributeNameCheck instanceof RegExp&&N(At.attributeNameCheck,e)||At.attributeNameCheck instanceof Function&&At.attributeNameCheck(e))||"is"===e&&At.allowCustomizedBuiltInElements&&(At.tagNameCheck instanceof RegExp&&N(At.tagNameCheck,n)||At.tagNameCheck instanceof Function&&At.tagNameCheck(n))))return!1}else if(Qt[e]);else if(N(kt,k(n,xt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==T(n,"data:")||!Xt[t])if(Ot&&!N(St,k(n,xt,"")));else if(n)return!1;return!0},Te=function(t){return t.indexOf("-")>0},$e=function(e){var n,s,r,a;Se("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Nt};for(a=o.length;a--;){var c=n=o[a],u=c.name,h=c.namespaceURI;if(s="value"===u?n.value:$(n.value),r=_t(u),l.attrName=r,l.attrValue=s,l.keepAttr=!0,l.forceKeepAttr=void 0,Se("uponSanitizeAttribute",e,l),s=l.attrValue,!l.forceKeepAttr&&(ve(u,e),l.keepAttr))if(Ct||!N(/\/>/i,s)){Mt&&(s=k(s,yt," "),s=k(s,vt," "),s=k(s,bt," "));var d=_t(e.nodeName);if(ke(d,r,s)){if(!Wt||"id"!==r&&"name"!==r||(ve(u,e),s="user-content-"+s),ot&&"object"===t(y)&&"function"==typeof y.getAttributeType)if(h);else switch(y.getAttributeType(d,r)){case"TrustedHTML":s=ot.createHTML(s);break;case"TrustedScriptURL":s=ot.createScriptURL(s)}try{h?e.setAttributeNS(h,u,s):e.setAttribute(u,s),b(i.removed)}catch(t){}}}else ve(u,e)}Se("afterSanitizeAttributes",e,null)}},Ne=function t(e){var n,i=we(e);for(Se("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)Se("uponSanitizeShadowNode",n,null),xe(n)||(n.content instanceof l&&t(n.content),$e(n));Se("afterSanitizeShadowDOM",e,null)};return i.sanitize=function(t){var e,n,s,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((re=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Ee(t)){if("function"!=typeof t.toString)throw R("toString is not a function");if("string"!=typeof(t=t.toString()))throw R("dirty is not a string, aborting")}if(!i.isSupported)return t;if(jt||de(o),i.removed=[],"string"==typeof t&&(Ht=!1),Ht){if(t.nodeName){var c=_t(t.nodeName);if(!Tt[c]||Pt[c])throw R("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)1===(n=(e=be("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?e=n:e.appendChild(n);else{if(!Ft&&!Mt&&!Ut&&-1===t.indexOf("<"))return ot&&Yt?ot.createHTML(t):t;if(!(e=be(t)))return Ft?null:Yt?lt:""}e&&Bt&&ye(e.firstChild);for(var h=we(Ht?t:e);s=h.nextNode();)xe(s)||(s.content instanceof l&&Ne(s.content),$e(s));if(Ht)return t;if(Ft){if(Gt)for(a=dt.call(e.ownerDocument);e.firstChild;)a.appendChild(e.firstChild);else a=e;return(Nt.shadowroot||Nt.shadowrootmod)&&(a=pt.call(r,a,!0)),a}var d=Ut?e.outerHTML:e.innerHTML;return Ut&&Tt["!doctype"]&&e.ownerDocument&&e.ownerDocument.doctype&&e.ownerDocument.doctype.name&&N(Q,e.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+e.ownerDocument.doctype.name+">\n"+d),Mt&&(d=k(d,yt," "),d=k(d,vt," "),d=k(d,bt," ")),ot&&Yt?ot.createHTML(d):d},i.setConfig=function(t){de(t),jt=!0},i.clearConfig=function(){ce=null,jt=!1},i.isValidAttribute=function(t,e,n){ce||de({});var i=_t(t),s=_t(e);return ke(i,s,n)},i.addHook=function(t,e){"function"==typeof e&&(ft[t]=ft[t]||[],w(ft[t],e))},i.removeHook=function(t){if(ft[t])return b(ft[t])},i.removeHooks=function(t){ft[t]&&(ft[t]=[])},i.removeAllHooks=function(){ft={}},i}()}()},56387:(t,e,n)=>{var i;!function(s){var r=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o="object"==typeof process&&"function"==typeof process.nextTick,l="function"==typeof Symbol,c="object"==typeof Reflect,u="function"==typeof setImmediate?setImmediate:setTimeout,h=l?c&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(t){var e=Object.getOwnPropertyNames(t);return e.push.apply(e,Object.getOwnPropertySymbols(t)),e}:Object.keys;function d(){this._events={},this._conf&&m.call(this,this._conf)}function m(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners!==s&&(this._maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),t.ignoreErrors&&(this.ignoreErrors=t.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(t,e){var n="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+e+"."),"undefined"!=typeof process&&process.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=t,process.emitWarning(i)}else console.error(n),console.trace&&console.trace()}var f=function(t,e,n){var i=arguments.length;switch(i){case 0:return[];case 1:return[t];case 2:return[t,e];case 3:return[t,e,n];default:for(var s=new Array(i);i--;)s[i]=arguments[i];return s}};function g(t,e){for(var n={},i=t.length,r=e?value.length:0,a=0;a<i;a++)n[t[a]]=a<r?e[a]:s;return n}function _(t,e,n){var i,s;if(this._emitter=t,this._target=e,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(i=n.on,s=n.off),e.addEventListener?(i=e.addEventListener,s=e.removeEventListener):e.addListener?(i=e.addListener,s=e.removeListener):e.on&&(i=e.on,s=e.off),!i&&!s)throw Error("target does not implement any known event API");if("function"!=typeof i)throw TypeError("on method must be a function");if("function"!=typeof s)throw TypeError("off method must be a function");this._on=i,this._off=s;var r=t._observers;r?r.push(this):t._observers=[this]}function y(t,e,n,i){var a=Object.assign({},e);if(!t)return a;if("object"!=typeof t)throw TypeError("options must be an object");var o,l,c,u=Object.keys(t),h=u.length;function d(t){throw Error('Invalid "'+o+'" option value'+(t?". Reason: "+t:""))}for(var m=0;m<h;m++){if(o=u[m],!i&&!r.call(e,o))throw Error('Unknown "'+o+'" option');(l=t[o])!==s&&(c=n[o],a[o]=c?c(l,d):l)}return a}function v(t,e){return"function"==typeof t&&t.hasOwnProperty("prototype")||e("value must be a constructor"),t}function b(t){var e="value must be type of "+t.join("|"),n=t.length,i=t[0],s=t[1];return 1===n?function(t,n){if(typeof t===i)return t;n(e)}:2===n?function(t,n){var r=typeof t;if(r===i||r===s)return t;n(e)}:function(i,s){for(var r=typeof i,a=n;a-- >0;)if(r===t[a])return i;s(e)}}Object.assign(_.prototype,{subscribe:function(t,e,n){var i=this,s=this._target,r=this._emitter,a=this._listeners,o=function(){var i=f.apply(null,arguments),a={data:i,name:e,original:t};n?!1!==n.call(s,a)&&r.emit.apply(r,[a.name].concat(i)):r.emit.apply(r,[e].concat(i))};if(a[t])throw Error("Event '"+t+"' is already listening");this._listenersCount++,r._newListener&&r._removeListener&&!i._onNewListener?(this._onNewListener=function(n){n===e&&null===a[t]&&(a[t]=o,i._on.call(s,t,o))},r.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===e&&!r.hasListeners(n)&&a[t]&&(a[t]=null,i._off.call(s,t,o))},a[t]=null,r.on("removeListener",this._onRemoveListener)):(a[t]=o,i._on.call(s,t,o))},unsubscribe:function(t){var e,n,i,s=this,r=this._listeners,a=this._emitter,o=this._off,l=this._target;if(t&&"string"!=typeof t)throw TypeError("event must be a string");function c(){s._onNewListener&&(a.off("newListener",s._onNewListener),a.off("removeListener",s._onRemoveListener),s._onNewListener=null,s._onRemoveListener=null);var t=x.call(a,s);a._observers.splice(t,1)}if(t){if(!(e=r[t]))return;o.call(l,t,e),delete r[t],--this._listenersCount||c()}else{for(i=(n=h(r)).length;i-- >0;)t=n[i],o.call(l,t,r[t]);this._listeners={},this._listenersCount=0,c()}}});var w=b(["function"]),E=b(["object","function"]);function S(t,e,n){var i,s,r,a=0,o=new t((function(l,c,u){function h(){s&&(s=null),a&&(clearTimeout(a),a=0)}n=y(n,{timeout:0,overload:!1},{timeout:function(t,e){return("number"!=typeof(t*=1)||t<0||!Number.isFinite(t))&&e("timeout must be a positive number"),t}}),i=!n.overload&&"function"==typeof t.prototype.cancel&&"function"==typeof u;var d=function(t){h(),l(t)},m=function(t){h(),c(t)};i?e(d,m,u):(s=[function(t){m(t||Error("canceled"))}],e(d,m,(function(t){if(r)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof t)throw TypeError("onCancel callback must be a function");s.push(t)})),r=!0),n.timeout>0&&(a=setTimeout((function(){var t=Error("timeout");t.code="ETIMEDOUT",a=0,o.cancel(t),c(t)}),n.timeout))}));return i||(o.cancel=function(t){if(s){for(var e=s.length,n=1;n<e;n++)s[n](t);s[0](t),s=null}}),o}function x(t){var e=this._observers;if(!e)return-1;for(var n=e.length,i=0;i<n;i++)if(e[i]._target===t)return i;return-1}function k(t,e,n,i,s){if(!n)return null;if(0===i){var r=typeof e;if("string"===r){var a,o,l=0,c=0,u=this.delimiter,d=u.length;if(-1!==(o=e.indexOf(u))){a=new Array(5);do{a[l++]=e.slice(c,o),c=o+d}while(-1!==(o=e.indexOf(u,c)));a[l++]=e.slice(c),e=a,s=l}else e=[e],s=1}else"object"===r?s=e.length:(e=[e],s=1)}var m,p,f,g,_,y,v,b=null,w=e[i],E=e[i+1];if(i===s)n._listeners&&("function"==typeof n._listeners?(t&&t.push(n._listeners),b=[n]):(t&&t.push.apply(t,n._listeners),b=[n]));else{if("*"===w){for(o=(y=h(n)).length;o-- >0;)"_listeners"!==(m=y[o])&&(v=k(t,e,n[m],i+1,s))&&(b?b.push.apply(b,v):b=v);return b}if("**"===w){for((_=i+1===s||i+2===s&&"*"===E)&&n._listeners&&(b=k(t,e,n,s,s)),o=(y=h(n)).length;o-- >0;)"_listeners"!==(m=y[o])&&("*"===m||"**"===m?(n[m]._listeners&&!_&&(v=k(t,e,n[m],s,s))&&(b?b.push.apply(b,v):b=v),v=k(t,e,n[m],i,s)):v=k(t,e,n[m],m===E?i+2:i,s),v&&(b?b.push.apply(b,v):b=v));return b}n[w]&&(b=k(t,e,n[w],i+1,s))}if((p=n["*"])&&k(t,e,p,i+1,s),f=n["**"])if(i<s)for(f._listeners&&k(t,e,f,s,s),o=(y=h(f)).length;o-- >0;)"_listeners"!==(m=y[o])&&(m===E?k(t,e,f[m],i+2,s):m===w?k(t,e,f[m],i+1,s):((g={})[m]=f[m],k(t,e,{"**":g},i+1,s)));else f._listeners?k(t,e,f,s,s):f["*"]&&f["*"]._listeners&&k(t,e,f["*"],s,s);return b}function T(t,e,n){var i,s,r=0,a=0,o=this.delimiter,l=o.length;if("string"==typeof t)if(-1!==(i=t.indexOf(o))){s=new Array(5);do{s[r++]=t.slice(a,i),a=i+l}while(-1!==(i=t.indexOf(o,a)));s[r++]=t.slice(a)}else s=[t],r=1;else s=t,r=t.length;if(r>1)for(i=0;i+1<r;i++)if("**"===s[i]&&"**"===s[i+1])return;var c,u=this.listenerTree;for(i=0;i<r;i++)if(u=u[c=s[i]]||(u[c]={}),i===r-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(e):u._listeners.push(e),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,p.call(this,u._listeners.length,c))):u._listeners=e,!0;return!0}function $(t,e,n,i){for(var s,r,a,o,l=h(t),c=l.length,u=t._listeners;c-- >0;)s=t[r=l[c]],a="_listeners"===r?n:n?n.concat(r):[r],o=i||"symbol"==typeof r,u&&e.push(o?a:a.join(this.delimiter)),"object"==typeof s&&$.call(this,s,e,a,o);return e}function N(t){for(var e,n,i,s=h(t),r=s.length;r-- >0;)(e=t[n=s[r]])&&(i=!0,"_listeners"===n||N(e)||delete t[n]);return i}function R(t,e,n){this.emitter=t,this.event=e,this.listener=n}function A(t,e,n){if(!0===n)r=!0;else if(!1===n)i=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var i=n.async,r=n.promisify,a=n.nextTick,l=n.objectify}if(i||a||r){var c=e,h=e._origin||e;if(a&&!o)throw Error("process.nextTick is not supported");r===s&&(r="AsyncFunction"===e.constructor.name),e=function(){var t=arguments,e=this,n=this.event;return r?a?Promise.resolve():new Promise((function(t){u(t)})).then((function(){return e.event=n,c.apply(e,t)})):(a?process.nextTick:u)((function(){e.event=n,c.apply(e,t)}))},e._async=!0,e._origin=h}return[e,l?new R(this,t,e):this]}function P(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,m.call(this,t)}R.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},P.EventEmitter2=P,P.prototype.listenTo=function(t,e,n){if("object"!=typeof t)throw TypeError("target musts be an object");var i=this;function r(e){if("object"!=typeof e)throw TypeError("events must be an object");var s,r=n.reducers,a=x.call(i,t);s=-1===a?new _(i,t,n):i._observers[a];for(var o,l=h(e),c=l.length,u="function"==typeof r,d=0;d<c;d++)o=l[d],s.subscribe(o,e[o]||o,u?r:r&&r[o])}return n=y(n,{on:s,off:s,reducers:s},{on:w,off:w,reducers:E}),a(e)?r(g(e)):r("string"==typeof e?g(e.split(/\s+/)):e),this},P.prototype.stopListeningTo=function(t,e){var n=this._observers;if(!n)return!1;var i,s=n.length,r=!1;if(t&&"object"!=typeof t)throw TypeError("target should be an object");for(;s-- >0;)i=n[s],t&&i._target!==t||(i.unsubscribe(e),r=!0);return r},P.prototype.delimiter=".",P.prototype.setMaxListeners=function(t){t!==s&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},P.prototype.getMaxListeners=function(){return this._maxListeners},P.prototype.event="",P.prototype.once=function(t,e,n){return this._once(t,e,!1,n)},P.prototype.prependOnceListener=function(t,e,n){return this._once(t,e,!0,n)},P.prototype._once=function(t,e,n,i){return this._many(t,1,e,n,i)},P.prototype.many=function(t,e,n,i){return this._many(t,e,n,!1,i)},P.prototype.prependMany=function(t,e,n,i){return this._many(t,e,n,!0,i)},P.prototype._many=function(t,e,n,i,s){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0==--e&&r.off(t,a),n.apply(this,arguments)}return a._origin=n,this._on(t,a,i,s)},P.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var t,e,n,i,s,r,a=arguments[0],o=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(o&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,l)for(i=0;i<n;i++)if("symbol"==typeof a[i]){r=!0;break}r||(a=a.join(this.delimiter))}var c,u=arguments.length;if(this._all&&this._all.length)for(i=0,n=(c=this._all.slice()).length;i<n;i++)switch(this.event=a,u){case 1:c[i].call(this,a);break;case 2:c[i].call(this,a,arguments[1]);break;case 3:c[i].call(this,a,arguments[1],arguments[2]);break;default:c[i].apply(this,arguments)}if(o)c=[],k.call(this,c,t,this.listenerTree,0,n);else{if("function"==typeof(c=this._events[a])){switch(this.event=a,u){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(u-1),s=1;s<u;s++)e[s-1]=arguments[s];c.apply(this,e)}return!0}c&&(c=c.slice())}if(c&&c.length){if(u>3)for(e=new Array(u-1),s=1;s<u;s++)e[s-1]=arguments[s];for(i=0,n=c.length;i<n;i++)switch(this.event=a,u){case 1:c[i].call(this);break;case 2:c[i].call(this,arguments[1]);break;case 3:c[i].call(this,arguments[1],arguments[2]);break;default:c[i].apply(this,e)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},P.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||d.call(this);var t,e,n,i,s,r,a=arguments[0],o=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(o&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(i=a.length,l)for(s=0;s<i;s++)if("symbol"==typeof a[s]){e=!0;break}e||(a=a.join(this.delimiter))}var c,u=[],h=arguments.length;if(this._all)for(s=0,i=this._all.length;s<i;s++)switch(this.event=a,h){case 1:u.push(this._all[s].call(this,a));break;case 2:u.push(this._all[s].call(this,a,arguments[1]));break;case 3:u.push(this._all[s].call(this,a,arguments[1],arguments[2]));break;default:u.push(this._all[s].apply(this,arguments))}if(o?(c=[],k.call(this,c,t,this.listenerTree,0)):c=this._events[a],"function"==typeof c)switch(this.event=a,h){case 1:u.push(c.call(this));break;case 2:u.push(c.call(this,arguments[1]));break;case 3:u.push(c.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(h-1),r=1;r<h;r++)n[r-1]=arguments[r];u.push(c.apply(this,n))}else if(c&&c.length){if(c=c.slice(),h>3)for(n=new Array(h-1),r=1;r<h;r++)n[r-1]=arguments[r];for(s=0,i=c.length;s<i;s++)switch(this.event=a,h){case 1:u.push(c[s].call(this));break;case 2:u.push(c[s].call(this,arguments[1]));break;case 3:u.push(c[s].call(this,arguments[1],arguments[2]));break;default:u.push(c[s].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},P.prototype.on=function(t,e,n){return this._on(t,e,!1,n)},P.prototype.prependListener=function(t,e,n){return this._on(t,e,!0,n)},P.prototype.onAny=function(t){return this._onAny(t,!1)},P.prototype.prependAny=function(t){return this._onAny(t,!0)},P.prototype.addListener=P.prototype.on,P.prototype._onAny=function(t,e){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),e?this._all.unshift(t):this._all.push(t),this},P.prototype._on=function(t,e,n,i){if("function"==typeof t)return this._onAny(t,e),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");this._events||d.call(this);var r,a=this;return i!==s&&(e=(r=A.call(this,t,e,i))[0],a=r[1]),this._newListener&&this.emit("newListener",t,e),this.wildcard?(T.call(this,t,e,n),a):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),n?this._events[t].unshift(e):this._events[t].push(e),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,p.call(this,this._events[t].length,t))):this._events[t]=e,a)},P.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();if(!(i=k.call(this,null,s,this.listenerTree,0)))return this}else{if(!this._events[t])return this;n=this._events[t],i.push({_listeners:n})}for(var r=0;r<i.length;r++){var o=i[r];if(n=o._listeners,a(n)){for(var l=-1,c=0,u=n.length;c<u;c++)if(n[c]===e||n[c].listener&&n[c].listener===e||n[c]._origin&&n[c]._origin===e){l=c;break}if(l<0)continue;return this.wildcard?o._listeners.splice(l,1):this._events[t].splice(l,1),0===n.length&&(this.wildcard?delete o._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,e),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete o._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,e))}return this.listenerTree&&N(this.listenerTree),this},P.prototype.offAny=function(t){var e,n=0,i=0;if(t&&this._all&&this._all.length>0){for(n=0,i=(e=this._all).length;n<i;n++)if(t===e[n])return e.splice(n,1),this._removeListener&&this.emit("removeListenerAny",t),this}else{if(e=this._all,this._removeListener)for(n=0,i=e.length;n<i;n++)this.emit("removeListenerAny",e[n]);this._all=[]}return this},P.prototype.removeListener=P.prototype.off,P.prototype.removeAllListeners=function(t){if(t===s)return!this._events||d.call(this),this;if(this.wildcard){var e,n=k.call(this,null,t,this.listenerTree,0);if(!n)return this;for(e=0;e<n.length;e++)n[e]._listeners=null;this.listenerTree&&N(this.listenerTree)}else this._events&&(this._events[t]=null);return this},P.prototype.listeners=function(t){var e,n,i,r,a,o=this._events;if(t===s){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!o)return[];for(r=(e=h(o)).length,i=[];r-- >0;)"function"==typeof(n=o[e[r]])?i.push(n):i.push.apply(i,n);return i}if(this.wildcard){if(!(a=this.listenerTree))return[];var l=[],c="string"==typeof t?t.split(this.delimiter):t.slice();return k.call(this,l,c,a,0),l}return o&&(n=o[t])?"function"==typeof n?[n]:n:[]},P.prototype.eventNames=function(t){var e=this._events;return this.wildcard?$.call(this,this.listenerTree,[],null,t):e?h(e):[]},P.prototype.listenerCount=function(t){return this.listeners(t).length},P.prototype.hasListeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return k.call(this,e,n,this.listenerTree,0),e.length>0}var i=this._events,r=this._all;return!!(r&&r.length||i&&(t===s?h(i).length:i[t]))},P.prototype.listenersAny=function(){return this._all?this._all:[]},P.prototype.waitFor=function(t,e){var n=this,i=typeof e;return"number"===i?e={timeout:e}:"function"===i&&(e={filter:e}),S((e=y(e,{timeout:0,filter:s,handleError:!1,Promise,overload:!1},{filter:w,Promise:v})).Promise,(function(i,s,r){function a(){var r=e.filter;if(!r||r.apply(n,arguments))if(n.off(t,a),e.handleError){var o=arguments[0];o?s(o):i(f.apply(null,arguments).slice(1))}else i(f.apply(null,arguments))}r((function(){n.off(t,a)})),n._on(t,a,!1)}),{timeout:e.timeout,overload:e.overload})};var I=P.prototype;Object.defineProperties(P,{defaultMaxListeners:{get:function(){return I._maxListeners},set:function(t){if("number"!=typeof t||t<0||Number.isNaN(t))throw TypeError("n must be a non-negative number");I._maxListeners=t},enumerable:!0},once:{value:function(t,e,n){return S((n=y(n,{Promise,timeout:0,overload:!1},{Promise:v})).Promise,(function(n,i,s){var r;if("function"==typeof t.addEventListener)return r=function(){n(f.apply(null,arguments))},s((function(){t.removeEventListener(e,r)})),void t.addEventListener(e,r,{once:!0});var a,o=function(){a&&t.removeListener("error",a),n(f.apply(null,arguments))};"error"!==e&&(a=function(n){t.removeListener(e,o),i(n)},t.once("error",a)),s((function(){a&&t.removeListener("error",a),t.removeListener(e,o)})),t.once(e,o)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(I,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(i=function(){return P}.call(e,n,e,t))===s||(t.exports=i)}()},58339:(t,e,n)=>{"use strict";n.r(e),n.d(e,{request:()=>_,settings:()=>y,storage:()=>g,type:()=>v});var i=n(58339),s=n(9375),r=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const a={set(t,e){return r(this,void 0,void 0,(function*(){const n={};return n[t]=e,new Promise(((e,i)=>{o(t).set(n,(function(){chrome.runtime.lastError?i(chrome.runtime.lastError):e()}))}))}))},get(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{o(t).get(t,(function(i){chrome.runtime.lastError?n(chrome.runtime.lastError):e(i[t])}))}))}))},remove(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{o(t).remove(t,(function(){chrome.runtime.lastError?n(chrome.runtime.lastError):e()}))}))}))},list(t="local"){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{"local"===t?chrome.storage.local.get(null,(function(t){e(t)})):chrome.storage.sync.get(null,(function(t){e(t)}))}))}))},addStyle(t){return r(this,void 0,void 0,(function*(){try{const e=document.createElement("style");e.textContent=t,(document.head||document.body||document.documentElement||document).appendChild(e)}catch(t){console.log(`Could not add css:${t}`)}}))},version:()=>chrome.runtime.getManifest().version,lang(t,e){if(i.settings.get("forceEn")&&"undefined"!=typeof i18n){let n=i18n[t];if(void 0!==e)for(let t=0;t<e.length;t++)n=n.replace(`$${t+1}`,e[t]);return n}return chrome.i18n.getMessage(t,e)},assetUrl:t=>chrome.extension.getURL(`assets/${t}`),injectCssResource(t,e){alert("injectCssResource not supported in webextension")},injectjsResource(t,e){const n=document.createElement("script");n.src=chrome.extension.getURL(`vendor/${t}`),n.onload=function(){this.remove()},e.get(0).appendChild(n)},updateDom(t){const e=document.createElement("script");e.text="\n        document.getElementsByTagName('head')[0].onclick = function(e){\n          try{\n            componentHandler.upgradeDom();\n          }catch(e){\n            console.log(e);\n            setTimeout(function(){\n              componentHandler.upgradeDom();\n            },500);\n          }\n        }",e.onload=function(){this.remove()},t.get(0).appendChild(e)},storageOnChanged(t){chrome.storage.onChanged.addListener(t)}};function o(t){return s.syncRegex.test(t)?chrome.storage.sync:chrome.storage.local}var l=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const c={xhr(t,e){return l(this,void 0,void 0,(function*(){if(void 0!==c.sendMessage)return c.sendMessage({name:"xhr",method:t,url:e}).then((t=>{if(429===t.status)throw"Rate limit Timeout";return t}));throw"Could not send xhr"}))},sendMessage(t){return l(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{chrome.runtime.sendMessage(t,(function(t){e(t)}))}))}))},notification(t){this.sendMessage({name:"notification",options:t})},database(t,e){return this.sendMessage({name:"database",options:{call:t,param:e}})}};var u=n(2262),h=n(58339),d=n(9e4),m=n(9375),p=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const f={options:(0,u.qj)({autoTrackingModeanime:"video",readerTracking:!0,autoTrackingModemanga:"instant",enablePages:{},forceEn:!1,rpc:!0,presenceLargeImage:"cover",presenceShowButtons:!0,presenceShowMalsync:!1,userscriptModeButton:!1,syncMode:"MAL",syncModeSimkl:"MAL",localSync:!0,delay:0,videoDuration:85,malTags:!1,malContinue:!0,malResume:!0,usedPage:!0,epPredictions:!0,theme:"auto",themeSidebars:!0,themeColor:"#000000",themeOpacity:100,themeImage:"",minimalWindow:!1,posLeft:"left",miniMALonMal:!1,floatButtonStealth:!1,minimizeBigPopup:!1,floatButtonCorrection:!0,floatButtonHide:!1,autoCloseMinimal:!1,outWay:!0,miniMalWidth:"550px",miniMalHeight:"90%",malThumbnail:100,friendScore:!0,loadPTWForProgress:!1,quicklinks:["9anime","Crunchyroll","Gogoanime","Twistmoe","Mangadex","MangaNato","MangaFox","MangaSee","MangaFire","YugenAnime","Zoro","Funimation","Hulu","Netflix","Hidive","Vrv","VIZ","MangaPlus","MangaReader","marin","ComicK"],quicklinksPosition:"default",autofull:!1,autoresume:!1,autoNextEp:!1,highlightAllEp:!1,checkForFiller:!0,crashReport:!0,introSkip:85,introSkipFwd:[17,39],introSkipBwd:[17,37],nextEpShort:[],correctionShort:[67],syncShort:[],progressInterval:120,progressIntervalDefaultAnime:"en/sub",progressIntervalDefaultManga:"en/sub",progressNotificationsAnime:!0,progressNotificationsManga:!0,bookMarksList:!1,customDomains:[],anilistUpdateUi:!0,anilistToken:"",anilistOptions:{displayAdultContent:!0,scoreFormat:"POINT_10"},kitsuToken:"",kitsuOptions:{titleLanguagePreference:"canonical",sfwFilter:!1,ratingSystem:"regular"},simklToken:"",malToken:"",malRefresh:"",shikiToken:"",shikiOptions:{locale:"ru"}}),debounceArray:{},isInit:(0,u.iH)(!1),init(){return p(this,void 0,void 0,(function*(){const t=[];for(const e in this.options){const n=yield h.storage.get(`settings/${e}`);void 0!==n&&(this.options[e]=n,t[e]=/(token|refresh)/i.test(e)&&n?"********":n)}let e;return d.log("Settings",t),h.storage.storageOnChanged(((t,n)=>{if("sync"===n)for(const e in t){const n=t[e];/^settings\//i.test(e)&&(this.options[e.replace("settings/","")]=n.newValue,d.info(`Update ${e} option to ${n.newValue}`))}if("local"===n&&t.rateLimit)try{clearTimeout(e),t.rateLimit.newValue?(d.log("Rate limited"),$(".type-rate").length||m.flashm("Rate limited. Retrying in a moment",{error:!0,type:"rate",permanent:!0})):e=setTimeout((()=>{d.log("No Rate limited"),$(".type-rate").remove()}),5e3)}catch(t){d.error(t)}})),this.isInit.value=!0,this}))},get(t){if(!this.isInit.value)throw"Settings not initialized";return this.options[t]},set(t,e){if(!Object.prototype.hasOwnProperty.call(this.options,t)){const e=Error(`${t} is not a defined option`);throw d.error(e),e}return this.options[t]=e,h.storage.set(`settings/${t}`,e)},setDebounce(t,e){this.options[t]=e,clearTimeout(this.debounceArray[t]),this.debounceArray[t]=setTimeout((()=>{this.set(t,e),delete this.debounceArray[t]}),1e3)},getAsync(t){return p(this,void 0,void 0,(function*(){const e=yield h.storage.get(`settings/${t}`);return void 0===e&&void 0!==this.options[t]?this.options[t]:e}))}},g=a,_=c,y=f,v="webextension"},9e4:(t,e,n)=>{"use strict";n.r(e),n.d(e,{debug:()=>a,error:()=>s,info:()=>r,log:()=>i,m:()=>o});const i=Function.prototype.bind.call(console.log,console,"%cMAL-Sync","background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;"),s=Function.prototype.bind.call(console.error,console,"%cMAL-Sync","background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;"),r=Function.prototype.bind.call(console.info,console,"%cMAL-Sync","background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;"),a=Function.prototype.bind.call(console.debug,console,"%cMAL-Sync","background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;"),o=(t,e="",n=[])=>{let i="white";e||(e=function(t){if(!t)return"#ffffff";t=String(t);let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);let n="#";for(let t=0;t<3;t++)n+=`00${(e>>8*t&255).toString(16)}`.substr(-2);return n}(t)),"#"===e[0]&&(i=parseInt(e.replace("#",""),16)>8388607.5?"#000":"#fff");const s=`background-color: ${e}; color: ${i}; padding: 2px 10px; border-radius: 3px; margin-left: -5px; border-left: 1px solid white;`;n.push({name:t,style:s});const r={m:(t,e="")=>o(t,e,[...n])},a=n.reduce(((t,e)=>`${t}%c${e.name}`),""),l=n.map((t=>t.style));return r.log=Function.prototype.bind.call(console.log,console,`%cM ${a}`,"background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;",...l),r.error=Function.prototype.bind.call(console.error,console,`%cM ${a}`,"background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;",...l),r.info=Function.prototype.bind.call(console.info,console,`%cM ${a}`,"background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;",...l),r.debug=Function.prototype.bind.call(console.debug,console,`%cM ${a}`,"background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;",...l),r}},9375:(t,e,n)=>{"use strict";n.r(e),n.d(e,{absoluteLink:()=>w,canHideTabs:()=>G,changeDetect:()=>k,checkDoubleExecution:()=>A,clearCache:()=>at,elementInViewport:()=>Z,episode:()=>g,favicon:()=>m,flashConfirm:()=>K,flashm:()=>H,fullUrlChangeDetect:()=>x,generateUniqueID:()=>d,getAsyncWaitUntilTrue:()=>N,getBaseText:()=>h,getContinueWaching:()=>C,getEntrySettings:()=>U,getResumeWaching:()=>D,getStatusText:()=>q,getTooltip:()=>B,getUrlFromTags:()=>P,getselect:()=>b,handleMalImages:()=>j,htmlDecode:()=>nt,isDomainMatching:()=>lt,isFirefox:()=>it,lazyload:()=>X,makeDomainCompatible:()=>rt,notifications:()=>W,pageUrl:()=>tt,parseHtml:()=>E,planTo:()=>f,rateLimitExclude:()=>y,returnYYYYMMDD:()=>et,setContinueWaching:()=>O,setEntrySettings:()=>M,setResumeWaching:()=>L,setUrlInTags:()=>I,sortAlphabetically:()=>ot,status:()=>v,statusTag:()=>Y,syncRegex:()=>_,timeCache:()=>z,timeDiffToText:()=>F,upperCaseFirstLetter:()=>ct,urlChangeDetect:()=>S,urlParam:()=>u,urlPart:()=>l,urlStrip:()=>c,wait:()=>Q,waitForPageToBeVisible:()=>st,waitUntilTrue:()=>T,watching:()=>p});var i=n(19947),s=n(58339),r=n(9e4),a=n(9375),o=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};function l(t,e){if(!t)return"";const n=t.split("/");return n[e]?n[e].replace(/[#?].*/,""):""}function c(t){return t.replace(/[#?].*/,"")}function u(t,e){const n=new RegExp(`[?&]${e}=([^&#]*)`).exec(t);return null===n?null:decodeURI(n[1])||0}function h(t){let e=t.text();return t.children().each((function(){e=e.replace(i.$(this).text(),"")})),e}function d(t=10){const e=new Uint32Array(t);return window.crypto.getRandomValues(e),Array.from(e,(t=>t.toString(16))).join("")}function m(t){if(!t)return"";const e=t.match(/^(https?:\/\/)?[^/]+/);return e&&(t=e[0]),`https://favicon.malsync.moe/?domain=${t}`}function p(t){return"manga"===t?"Reading":"Watching"}function f(t){return"manga"===t?"Plan to Read":"Plan to Watch"}function g(t){return"manga"===t?s.storage.lang("UI_Chapter"):s.storage.lang("UI_Episode")}const _=/(^settings\/.*|^updateCheckTime$|^tempVersion$|^local:\/\/|^list-tagSettings$)/,y=/^https:\/\/api.malsync.moe\/(shark|mal\/|nc\/mal\/.*\/progress$)/i;var v;function b(t,e){let n=t.split(`name="${e}"`)[1].split("</select>")[0];if(n.indexOf('selected="selected"')>-1){n=n.split("<option");for(let t=0;t<n.length;++t)if(n[t].indexOf('selected="selected"')>-1)return n[t].split('value="')[1].split('"')[0]}return""}function w(t,e){return void 0===t||t.startsWith("http")||("/"!==t.charAt(0)&&(t=`/${t}`),t=e+t),t}function E(t){return(new DOMParser).parseFromString(`<!doctype html><body>${t}`,"text/html").body.textContent}function S(t){let e=window.location.href;return setInterval((function(){e!==window.location.href&&(e=window.location.href,t())}),100)}function x(t,e=!1){let n="";const i=setInterval((function(){const i=e?c(window.location.href):window.location.href;n!==i&&(n=i,t())}),100);return Number(i)}function k(t,e,n=!1){let i=e();const s=setInterval((function(){const n=e();void 0!==n&&i!==n&&(i=e(),t())}),500);return n&&t(),Number(s)}function T(t,e,n=100){const i=setInterval((function(){t()&&(clearInterval(i),e())}),n);return i}function N(t,e=100){let n,i;const s=()=>{clearTimeout(n),i&&i("AsyncWait stopped")};return{asyncWaitUntilTrue:()=>(s(),new Promise(((s,r)=>{i=r,n=T(t,(()=>s()),e)}))),reset:s}}!function(t){t[t.watching=1]="watching",t[t.completed=2]="completed",t[t.onhold=3]="onhold",t[t.dropped=4]="dropped",t[t.planToWatch=6]="planToWatch"}(v||(v={}));const R=Math.random();function A(){$(".mal-sync-double-detect").length&&$(".mal-sync-double-detect").each((function(t){$(this).text()!==R.toString()&&alert("Double execution detected! Please run MAL-Sync once only.")})),$("body").after(i.html(`<div class="mal-sync-double-detect" style="display: none;">${R.toString()}</div>`))}function P(t){return/malSync::[\d\D]+::/.test(t)?e(t.split("malSync::")[1].split("::")[0]):/last::[\d\D]+::/.test(t)?e(t.split("last::")[1].split("::")[0]):void 0;function e(t){try{return atob(t)}catch(e){return t}}}function I(t,e){if(""===t)return e.replace(/,?(malSync|last)::[^ \n]+?::/,"");if(!s.settings.get("malTags"))return e;const n=`malSync::${btoa(t)}::`;return/(last|malSync)::[\d\D]+::/.test(e)?e.replace(/(last|malSync)::[^^]*?::/,n):`${e},${n}`}function L(t,e,n,i){return o(this,void 0,void 0,(function*(){return s.storage.set(`resume/${n}/${i}`,{url:t,ep:e})}))}function D(t,e){return o(this,void 0,void 0,(function*(){if(s.settings.get("malResume"))return s.storage.get(`resume/${t}/${e}`)}))}function O(t,e,n,i){return o(this,void 0,void 0,(function*(){return s.storage.set(`continue/${n}/${i}`,{url:t,ep:e})}))}function C(t,e){return o(this,void 0,void 0,(function*(){if(s.settings.get("malContinue"))return s.storage.get(`continue/${t}/${e}`)}))}function M(t,e,n,i=""){return o(this,void 0,void 0,(function*(){const r={};if(n){for(const t in n)switch(t){case"u":case"p":r[t]=n[t]}s.settings.get("malTags")?i=I(JSON.stringify(r),i):yield s.storage.set(`tagSettings/${t}/${e}`,JSON.stringify(r))}return Object.values(r).find((t=>Boolean(t)))||(i=I("",i),s.settings.get("malTags")||(yield s.storage.remove(`tagSettings/${t}/${e}`))),i}))}function U(t,e,n=""){return o(this,void 0,void 0,(function*(){const i={u:null,c:null,r:null,p:""};if(s.settings.get("malTags")){const t=P(n);if(t)if("{"===t[0])try{const e=JSON.parse(t);for(const t in i)e[t]&&(i[t]=e[t])}catch(t){r.error(t)}else i.u=t}else{let n=yield s.storage.get(`tagSettings/${t}/${e}`);if(n){n=JSON.parse(n);for(const t in i)n[t]&&(i[t]=n[t])}}const a=yield C(t,e);a&&(i.c=a);const o=yield D(t,e);return o&&(i.r=o),s.settings.get("usedPage")||(i.u=null),i}))}function j(t){return-1!==t.indexOf("questionmark")?s.storage.assetUrl("questionmark.gif"):t}function B(t,e="",n="top"){const i=Math.floor(1e3*Math.random()+1);return`<div id="tt${i}" class="icon material-icons" style="font-size:16px; line-height: 0; color: #7f7f7f; padding-bottom: 20px; padding-left: 3px; ${e}">contact_support</div>  <div class="mdl-tooltip mdl-tooltip--${n} mdl-tooltip--large" for="tt${i}">${t}</div>`}function F(t){let e="";t/=1e3;const n=Math.floor(t/31536e3);t-=31536e3*n,n&&(e+=`${n}y `);const i=Math.floor(t/86400);t-=86400*i,i&&(e+=`${i}d `);const s=Math.floor(t/3600)%24;t-=3600*s,s&&i<2&&(e+=`${s}h `);const r=Math.floor(t/60)%60;return t-=60*r,r&&!i&&s<3&&(e+=`${r}min `),e}function G(){return"undefined"!=typeof browser&&void 0!==browser.tabs.hide}function Y(t,e,n){const i={anime:{1:{class:"watching",text:"CW",title:s.storage.lang(`UI_Status_watching_${e}`)},2:{class:"completed",text:"CMPL",title:s.storage.lang("UI_Status_Completed")},3:{class:"on-hold",text:"HOLD",title:s.storage.lang("UI_Status_OnHold")},4:{class:"dropped",text:"DROP",title:s.storage.lang("UI_Status_Dropped")},6:{class:"plantowatch",text:"PTW",title:s.storage.lang(`UI_Status_planTo_${e}`)},23:{class:"rewatching",text:"RE",title:s.storage.lang(`UI_Status_Rewatching_${e}`)}},manga:{1:{class:"reading",text:"CR",title:s.storage.lang(`UI_Status_watching_${e}`)},2:{class:"completed",text:"CMPL",title:s.storage.lang("UI_Status_Completed")},3:{class:"on-hold",text:"HOLD",title:s.storage.lang("UI_Status_OnHold")},4:{class:"dropped",text:"DROP",title:s.storage.lang("UI_Status_Dropped")},6:{class:"plantoread",text:"PTR",title:s.storage.lang(`UI_Status_planTo_${e}`)},23:{class:"rewatching",text:"RE",title:s.storage.lang(`UI_Status_Rewatching_${e}`)}}};if($.each([1,2,3,4,6,23],(function(t,e){i.anime[i.anime[e].title]=i.anime[e],i.manga[i.manga[e].title]=i.manga[e]})),t&&i[e][t]){const s=i[e][t];return` <a href="https://myanimelist.net/ownlist/${e}/${n}/edit?hideLayout=1" title="${s.title}" class="Lightbox_AddEdit button_edit ${s.class}">${s.text}</a>`}return!1}function q(t,e){switch(e){case 1:return s.storage.lang(`UI_Status_watching_${t}`);case 2:return s.storage.lang("UI_Status_Completed");case 3:return s.storage.lang("UI_Status_OnHold");case 4:return s.storage.lang("UI_Status_Dropped");case 6:return s.storage.lang(`UI_Status_planTo_${t}`);case 7:return s.storage.lang("UI_Status_All");case 23:return s.storage.lang(`UI_Status_Rewatching_${t}`);default:return""}}function W(t,e,n,i=""){const a={type:"basic",title:e,message:n,iconUrl:i};r.log("Notification",t,a),s.storage.get("notificationHistory").then((e=>{void 0===e&&(e=[]),"object"==typeof e&&(e.length>=10&&e.shift(),e.push({url:t,title:a.title,message:a.message,iconUrl:a.iconUrl,timestamp:Date.now()}),s.storage.set("notificationHistory",e))}));try{return chrome.notifications.create(t,a)}catch(t){r.error(t)}}function z(t,e,n){return o(this,void 0,void 0,(function*(){const i=yield s.storage.get(t);if("object"==typeof i&&(new Date).getTime()<i.timestamp)return i.data;const r=yield e();return s.storage.set(t,{data:r,timestamp:(new Date).getTime()+n}).then((()=>r))}))}function H(t,e){i.$("#flash-div-top").length||function(){s.storage.addStyle('.flashinfo{\n                    transition: max-height 2s, opacity 2s 2s;\n                 }\n                 .mini-stealth .flashinfo{\n                    opacity: 0;\n                 }\n                  #flashinfo-div.hover.mini-stealth .flashinfo.type-update{\n                    opacity: 0.7;\n                 }\n                 #flashinfo-div.hover .flashinfo{\n                    opacity: 1;\n                 }\n                 .flashinfo:hover{\n                    max-height:5000px !important;\n                    z-index: 2147483647;\n                    opacity: 1;\n                    transition: max-height 2s;\n                 }\n                 .flashinfo .synopsis{\n                    transition: max-height 2s, max-width 2s ease 2s;\n                 }\n                 .flashinfo:hover .synopsis{\n                    max-height:9999px !important;\n                    max-width: 500px !important;\n                    transition: max-height 2s;\n                 }\n                 #flashinfo-div{\n                  z-index: 2;\n                  transition: 2s;\n                 }\n                 #flashinfo-div:hover, #flashinfo-div.hover{\n                  z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error {\n                   z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error .type-update{\n                  overflow: visible !important;\n                  opacity: 1 !important;\n                 }\n                 #flashinfo-div.player-error .player-error{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-missing-permissions{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-default{\n                  display: none !important\n                 }\n\n                 #flash-div-top, #flash-div-bottom, #flashinfo-div{\n                    font-family: "Helvetica","Arial",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 400;\n                    line-height: 17px;\n                 }\n                 #flash-div-top h2, #flash-div-bottom h2, #flashinfo-div h2{\n                    font-family: "Helvetica","Arial",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 700;\n                    line-height: 17px;\n                    padding: 0;\n                    margin: 0;\n                 }\n                 #flash-div-top a, #flash-div-bottom a, #flashinfo-div a{\n                    color: #DF6300;\n                 }');let t="";s.settings.get("floatButtonStealth")&&(t="mini-stealth"),i.$("body").after(i.html(`<div id="flash-div-top" style="text-align: center;pointer-events: none;position: fixed;top:-5px;width:100%;z-index: 2147483647;left: 0;"></div>        <div id="flash-div-bottom" style="text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;z-index: 2147483647;left: 0;"><div id="flash" style="display:none;  background-color: red;padding: 20px; margin: 0 auto;max-width: 60%;          -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;background:rgba(227,0,0,0.6);"></div></div>        <div id="flashinfo-div" class="${t}" style="text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;left: 0;">`))}(),r.log("[Flash] Message:",t);let n="#323232";void 0!==e&&void 0!==e.error&&e.error&&(n="#3e0808");let a="#flash-div-bottom";void 0!==e&&void 0!==e.position&&e.position&&(a=`#flash-div-${e.position}`);let o="flash";if(void 0!==e&&void 0!==e.type&&e.type){const t=`type-${e.type}`;i.$(`${a} .${t}, #flashinfo-div .${t}`).removeClass(t).fadeOut({duration:1e3,queue:!1,complete(){i.$(this).remove()}}),o+=` ${t}`}let l,c=`<div class="${o}" style="display:none;">        <div style="display:table; pointer-events: all; padding: 14px 24px 14px 24px; margin: 0 auto; margin-top: 5px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${n}; ">          ${t}        </div>      </div>`;return void 0!==e&&void 0!==e.hoverInfo&&e.hoverInfo?(o+=" flashinfo",c=`<div class="${o}" style="display:none; max-height: 5000px; overflow: hidden;"><div style="display:table; pointer-events: all; margin: 0 auto; margin-top: -2px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${n}; position: relative;"><div style="max-height: 60vh; overflow-y: auto; padding: 14px 24px 14px 24px;">${t}</div></div></div>`,i.$("#flashinfo-div").addClass("hover"),l=i.$(i.html(c)).appendTo("#flashinfo-div"),void 0!==e&&void 0!==e.minimized&&e.minimized&&l.css("max-height","8px")):l=i.$(i.html(c)).appendTo(a),void 0!==e&&void 0!==e.permanent&&e.permanent?l.slideDown(800):void 0!==e&&void 0!==e.hoverInfo&&e.hoverInfo?l.slideDown(800).delay(4e3).queue((function(){i.$("#flashinfo-div").removeClass("hover"),l.css("max-height","8px")})):l.slideDown(800).delay(4e3).slideUp(800,(()=>{i.$(this).remove()})),l}function K(t,e,n=(()=>{}),r=(()=>{}),a=!1){return o(this,void 0,void 0,(function*(){return new Promise((function(o,l){let c=s.storage.lang("Ok"),u=s.storage.lang("Cancel");a&&(c=s.storage.lang("Yes"),u=s.storage.lang("No"));const h=H(t=`<div style="text-align: center;">${t}</div><div style="display: flex; justify-content: space-around;"><button class="Yes" style="background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;">${c}</button><button class="Cancel" style="background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;">${u}</button></div>`,{permanent:!0,position:"top",type:e});h.find(".Yes").click((function(t){o(!0),i.$(t.target).parentsUntil(".flash").fadeOut(300,(function(){i.$(this).remove()})),n()})),h.find(".Cancel").click((function(t){o(!1),i.$(t.target).parentsUntil(".flash").fadeOut(300,(function(){i.$(this).remove()})),r()}))}))}))}let V=!1,J=[];function X(t,e=".mdl-layout__content"){function n(t,e){if(!i.$(t).is(":visible"))return!1;if(i.$(t).hasClass("lazyBack"))i.$(t).css("background-image",`url(${t.getAttribute("data-src")})`).removeClass("lazyBack");else{const n=new Image,i=t.getAttribute("data-src");n.onload=function(){t.parent?t.parent.replaceChild(n,t):t.src=i,e&&e()},n.src=i}}for(let t=0;t<J.length;t++)$(J[t]).addClass("init");J=[];const s=t.find("img.lazy.init, .lazyBack.init"),r=function(){for(let t=0;t<J.length;t++)a.elementInViewport(J[t],600)&&n(J[t],(function(){J.splice(t,t)})),$(J[t]).length||J.splice(t,t)};for(let t=0;t<s.length;t++)J.push(s[t]),$(s[t]).removeClass("init");r(),V||(V=!0,t.find(e).scroll((function(){r()})))}function Z(t,e=0){const n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.top-e<=(window.innerHeight||document.documentElement.clientHeight)}function Q(t){return new Promise((e=>{setTimeout(e,t)}))}function tt(t,e,n){switch(t){case"mal":return`https://myanimelist.net/${e}/${n}`;case"anilist":return`https://anilist.co/${e}/${n}`;case"kitsu":return`https://kitsu.io/${e}/${n}`;case"simkl":return`https://simkl.com/${e}/${n}`;default:throw`${t} not a valid page`}}function et(t=0){const e=new Date;e.setDate(e.getDate()+t);const n=e.getMonth()<9?`0${e.getMonth()+1}`:e.getMonth()+1,i=e.getDate()<10?`0${e.getDate()}`:e.getDate();return`${e.getFullYear()}-${n}-${i}`}function nt(t){return $("<textarea/>").html(i.html(t)).text()}function it(){return Boolean("undefined"!=typeof browser&&"undefined"!=typeof chrome)}function st(){const t=()=>Boolean(!document.visibilityState||"visible"===document.visibilityState);if(t())return Promise.resolve();r.log("Page in background");const{asyncWaitUntilTrue:e}=N((()=>t()));return e().then((()=>{r.log("Page is visible")}))}function rt(t){return t.split("/").length<4&&(t+="/"),t.replace(/\?.*/,"?")}function at(){return o(this,void 0,void 0,(function*(){const t=yield s.storage.list();let e=0;i.$.each(t,(function(t,n){a.syncRegex.test(String(t))||/(^tagSettings\/.*)/.test(String(t))||(s.storage.remove(String(t)),e++)})),a.flashm(`Cache Cleared [${e}]`)}))}function ot(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}function lt(t,e){const n=new URL(t),{host:i}=n;return i===e||i.endsWith(`.${e}`)}function ct(t){return!t||t.length<2?t:t.charAt(0).toUpperCase()+t.slice(1)}},19947:(t,e,n)=>{"use strict";n.r(e),n.d(e,{$:()=>s,html:()=>r});var i=n(27856);const s=jQuery;function r(t){return i.sanitize(t,{SAFE_FOR_JQUERY:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["target"]})}},16245:t=>{"use strict";t.exports=JSON.parse('[{"name":"9anime","domain":"https://9anime.to","database":"9anime","search":{"anime":"https://9anime.to/filter?keyword={searchtermPlus}","manga":null}},{"name":"Crunchyroll","domain":"https://www.crunchyroll.com","database":"Crunchyroll","search":{"anime":"https://www.crunchyroll.com/search?q={searchtermPlus}","manga":null}},{"name":"Vrv","domain":"https://vrv.co","database":"Vrv","search":{"anime":"https://vrv.co/?q={searchterm}","manga":null}},{"name":"Mangadex","domain":"https://www.mangadex.org","database":"Mangadex","search":{"anime":null,"manga":"https://mangadex.org/titles?q={searchterm}"}},{"name":"Gogoanime","domain":"https://gogoanime.tv","database":"Gogoanime","search":{"anime":"https://www1.gogoanime.ai/search.html?keyword={searchterm}","manga":null}},{"name":"Twistmoe","domain":"https://twist.moe","database":"Twistmoe","search":{"anime":"home","manga":null}},{"name":"TurkAnime","domain":"https://www.turkanime.co","database":null,"search":{"anime":"home","manga":null}},{"name":"animepahe","domain":"https://animepahe.com","database":"animepahe","search":{"anime":"home","manga":null}},{"name":"Netflix","domain":"https://www.netflix.com","database":"Netflix","search":{"anime":"https://www.netflix.com/search?q={searchterm}","manga":null}},{"name":"Animeflv","domain":"https://animeflv.net","database":null,"search":{"anime":"https://www3.animeflv.net/browse?q={searchtermPlus}","manga":null}},{"name":"Jkanime","domain":"https://jkanime.net","database":null,"search":{"anime":"https://jkanime.net/buscar/{searchterm}","manga":null}},{"name":"Proxer","domain":"https://proxer.me","database":null,"search":{"anime":"https://proxer.me/search?s=search&name={searchterm}&typ=all-anime&tags=&notags=#top","manga":"https://proxer.me/search?s=search&name={searchterm}&typ=all-manga&tags=&notags=#top"}},{"name":"Wakanim","domain":"https://www.wakanim.tv","database":null,"search":{"anime":"https://www.wakanim.tv/de/v2/catalogue/search?search={searchterm}","manga":null}},{"name":"Emby","domain":"http://app.emby.media","database":null,"search":{"anime":"home","manga":null}},{"name":"Plex","domain":"http://app.plex.tv","database":null,"search":{"anime":"home","manga":null}},{"name":"Aniflix","domain":"https://www1.aniflix.tv","database":null,"search":{"anime":"home","manga":null}},{"name":"KickAssAnime","domain":"https://kaas.am","database":null,"search":{"anime":"home","manga":null}},{"name":"Shinden","domain":"https://shinden.pl","database":null,"search":{"anime":"home","manga":null}},{"name":"Voiranime","domain":"https://voiranime.com","database":null,"search":{"anime":"https://voiranime.com/?s={searchtermPlus}","manga":null}},{"name":"MangaNato","domain":"https://manganato.com","database":"MangaNato","search":{"anime":null,"manga":"https://manganato.com/search/story/{searchterm(_)[noSpecial]}"}},{"name":"VIZ","domain":"https://www.viz.com","database":"VIZ","search":{"anime":null,"manga":"https://www.viz.com/search?search={searchtermPlus}"}},{"name":"NekoSama","domain":"https://neko-sama.fr","database":null,"search":{"anime":"home","manga":null}},{"name":"AnimeOdcinki","domain":"https://anime-odcinki.pl","database":null,"search":{"anime":"https://anime-odcinki.pl/szukaj/{searchtermPlus}","manga":null}},{"name":"AnimeZone","domain":"https://www.animezone.pl","database":null,"search":{"anime":"home","manga":null}},{"name":"serimanga","domain":"https://serimanga.com","database":null,"search":{"anime":null,"manga":"https://serimanga.com/mangalar?search={searchtermPlus}"}},{"name":"mangadenizi","domain":"https://mangadenizi.com","database":null,"search":{"anime":null,"manga":"home"}},{"name":"moeclip","domain":"https://moeclip.com","database":null,"search":{"anime":"https://moeclip.com/search/{searchtermPlus}","manga":null}},{"name":"mangalivre","domain":"https://mangalivre.net","database":null,"search":{"anime":null,"manga":"home"}},{"name":"tmofans","domain":"https://lectortmo.com","database":null,"search":{"anime":null,"manga":"https://lectortmo.com/library?_pg=1&title={searchtermPlus}"}},{"name":"unionmangas","domain":"https://unionleitor.top","database":null,"search":{"anime":null,"manga":"home"}},{"name":"MangaPlus","domain":"https://mangaplus.shueisha.co.jp","database":"MangaPlus","search":{"anime":null,"manga":"https://mangaplus.shueisha.co.jp/search_result?keyword={searchterm}"}},{"name":"JapScan","domain":"https://www.japscan.ws","database":null,"search":{"anime":null,"manga":"home"}},{"name":"AnimesVision","domain":"https://animes.vision","database":null,"search":{"anime":"home","manga":null}},{"name":"Hulu","domain":"https://www.hulu.com","database":"Hulu","search":{"anime":"home","manga":null}},{"name":"Hidive","domain":"https://www.hidive.com","database":"Hidive","search":{"anime":"https://www.hidive.com/search?q={searchtermPlus}","manga":null}},{"name":"FallenAngels","domain":"https://manga.fascans.com","database":null,"search":{"anime":null,"manga":"home"}},{"name":"Amazon Prime Video","domain":"https://www.primevideo.com","database":null,"search":{"anime":"home","manga":null}},{"name":"MangaKatana","domain":"http://mangakatana.com","database":null,"search":{"anime":null,"manga":"http://mangakatana.com/?search={searchtermPlus}&search_by=book_name"}},{"name":"manga4life","domain":"https://manga4life.com","database":null,"search":{"anime":null,"manga":"https://manga4life.com/search/?name={searchterm}"}},{"name":"bato","domain":"https://bato.to","database":null,"search":{"anime":null,"manga":"https://bato.to/search?word={searchtermPlus}"}},{"name":"MangaPark","domain":"https://mangapark.net","database":null,"search":{"anime":null,"manga":"https://mangapark.net/search?word={searchterm}"}},{"name":"AnimesHouse","domain":"https://animeshouse.net","database":null,"search":{"anime":"home","manga":null}},{"name":"AnimeXin","domain":"https://animexinax.com","database":null,"search":{"anime":"https://animexinax.com/?s={searchtermPlus}","manga":null}},{"name":"MonosChinos","domain":"https://monoschinos2.com","database":null,"search":{"anime":"https://monoschinos2.com/buscar?q={searchtermPlus}","manga":null}},{"name":"AnimeFire","domain":"https://animefire.net","database":null,"search":{"anime":"home","manga":null}},{"name":"OtakuFR","domain":"https://otakufr.co","database":null,"search":{"anime":"https://otakufr.co/toute-la-liste-affiches/?q={searchtermPlus}","manga":null}},{"name":"Samehadaku","domain":"https://samehadaku.vip","database":null,"search":{"anime":"https://samehadaku.vip/?s={searchtermPlus}","manga":null}},{"name":"Tsuki Mangs","domain":"https://www.tsukimangas.com","database":null,"search":{"anime":null,"manga":"home"}},{"name":"mangatx","domain":"https://mangatx.com","database":null,"search":{"anime":null,"manga":"https://mangatx.com/?s={searchtermPlus}&post_type=wp-manga&post_type=wp-manga"}},{"name":"manhuafast","domain":"https://manhuafast.com","database":null,"search":{"anime":null,"manga":"https://manhuafast.com/?s={searchtermPlus}&post_type=wp-manga&post_type=wp-manga"}},{"name":"TRanimeizle","domain":"https://www.tranimeizle.net/","database":null,"search":{"anime":"home","manga":null}},{"name":"Anihub","domain":"https://anihub.tv","database":null,"search":{"anime":"home","manga":null}},{"name":"AnimeStreamingFR","domain":"https://beta.animestreamingfr.fr","database":null,"search":{"anime":"https://beta.animestreamingfr.fr/catalogue/search?query={searchtermPlus}","manga":null}},{"name":"Furyosquad","domain":"https://furyosquad.com/","database":null,"search":{"anime":null,"manga":"home"}},{"name":"AnimeId","domain":"https://www.animeid.tv","database":null,"search":{"anime":"home","manga":null}},{"name":"MyAnimeList","domain":"https://myanimelist.net","database":null,"search":{"anime":"https://myanimelist.net/anime.php?q={searchterm}","manga":"https://myanimelist.net/manga.php?q={searchterm}"}},{"name":"AnimeUnity","domain":"https://animeunity.it","database":null,"search":{"anime":"home","manga":null}},{"name":"MangaHere","domain":"http://www.mangahere.cc","database":null,"search":{"anime":null,"manga":"http://www.mangahere.cc/search?title={searchtermPlus}"}},{"name":"MangaFox","domain":"http://fanfox.net","database":"MangaFox","search":{"anime":null,"manga":"http://fanfox.net/search?title={searchtermPlus}"}},{"name":"YayAnimes","domain":"https://yayanimes.net","database":null,"search":{"anime":"https://yayanimes.net/?s={searchtermPlus}","manga":null}},{"name":"DesuOnline","domain":"https://desu-online.pl","database":null,"search":{"anime":"https://desu-online.pl/?s={searchtermPlus}","manga":null}},{"name":"WuxiaWorld","domain":"https://wuxiaworld.site","database":null,"search":{"anime":null,"manga":"https://wuxiaworld.site/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"LeviatanScans","domain":"https://en.leviatanscans.com","database":null,"search":{"anime":null,"manga":"https://en.leviatanscans.com/?s={searchtermPlus}"}},{"name":"ReaperScans","domain":"https://reaperscans.com","database":null,"search":{"anime":null,"manga":"home"}},{"name":"LynxScans","domain":"https://lynxscans.com","database":null,"search":{"anime":null,"manga":"https://lynxscans.com/comics?query={searchtermPlus}"}},{"name":"SKScans","domain":"https://skscans.com","database":null,"search":{"anime":null,"manga":"https://skscans.com/?s={searchtermPlus}"}},{"name":"ZeroScans","domain":"https://zeroscans.com","database":null,"search":{"anime":null,"manga":"home"}},{"name":"DeathTollScans","domain":"https://reader.deathtollscans.net","database":null,"search":{"anime":null,"manga":"home"}},{"name":"SenseScans","domain":"https://sensescans.com","database":null,"search":{"anime":null,"manga":"home"}},{"name":"ManhuaPlus","domain":"https://manhuaplus.com","database":null,"search":{"anime":null,"manga":"https://manhuaplus.com/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"Readm","domain":"https://readm.org","database":null,"search":{"anime":null,"manga":"home"}},{"name":"tioanime","domain":"https://tioanime.com","database":null,"search":{"anime":"https://tioanime.com/directorio?q={searchtermPlus}","manga":null}},{"name":"YugenAnime","domain":"https://yugen.to","database":"YugenAnime","search":{"anime":"https://yugenanime.ro/search/?q={searchtermPlus}","manga":null}},{"name":"MangaSee","domain":"https://mangasee123.com","database":"MangaSee","search":{"anime":null,"manga":"https://mangasee123.com/search/?name={searchterm}"}},{"name":"AnimeTribes","domain":"https://animetribes.ru","database":null,"search":{"anime":"home","manga":null}},{"name":"Okanime","domain":"https://okanime.tv","database":null,"search":{"anime":"https://okanime.tv/search?search={searchtermPlus}","manga":null}},{"name":"bs.to","domain":"https://bs.to","database":null,"search":{"anime":"home","manga":null}},{"name":"AsuraScans","domain":"https://asura.gg","database":null,"search":{"anime":null,"manga":"https://www.asurascans.com/?s={searchtermPlus}"}},{"name":"NaniScans","domain":"https://naniscans.com","database":null,"search":{"anime":null,"manga":"home"}},{"name":"Jellyfin","domain":"https://jellyfin.org/","database":null,"search":{"anime":"home","manga":null}},{"name":"An1me","domain":"https://an1me.nl","database":null,"search":{"anime":"https://an1me.nl/?s={searchtermPlus}&post_type=wp-manga","manga":null}},{"name":"MangaJar","domain":"https://mangajar.com","database":null,"search":{"anime":null,"manga":"https://mangajar.com/search?q={searchtermPlus}"}},{"name":"AnimeDao","domain":"https://animedao.to","database":null,"search":{"anime":"https://animedao.to/search/?search={searchtermPlus}","manga":null}},{"name":"Otakustv","domain":"https://www.otakustv.com","database":null,"search":{"anime":"https://www.otakustv.com/buscador.php?buscador={searchterm}","manga":null}},{"name":"Komga","domain":"https://komga.org","database":null,"search":{"anime":null,"manga":"home"}},{"name":"AnimeWho","domain":"https://animewho.com","database":null,"search":{"anime":"home","manga":null}},{"name":"AnimeSuge","domain":"https://animesuge.to","database":null,"search":{"anime":"home","manga":null}},{"name":"Toonily","domain":"https://toonily.net","database":null,"search":{"anime":null,"manga":"https://toonily.net/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"Fumetsu","domain":"https://fumetsu.pl","database":null,"search":{"anime":"home","manga":null}},{"name":"NonstopScans","domain":"https://www.nonstopscans.com","database":null,"search":{"anime":null,"manga":"https://www.nonstopscans.com/?s={searchtermPlus}"}},{"name":"FrixySubs","domain":"https://frixysubs.pl","database":null,"search":{"anime":"home","manga":null}},{"name":"Guya & Cubari","domain":"https://guya.moe","database":null,"search":{"anime":null,"manga":"home"}},{"name":"MangaHub","domain":"https://mangahub.io","database":null,"search":{"anime":null,"manga":"https://mangahub.io/search?q={searchterm}"}},{"name":"ComicK","domain":"https://comick.app","database":"Comick","search":{"anime":null,"manga":"https://comick.app/search?q={searchterm}"}},{"name":"Japanread","domain":"https://www.japanread.cc/","database":null,"search":{"anime":null,"manga":"https://www.japanread.cc/manga-list?q={searchterm}"}},{"name":"Bentomanga","domain":"https://www.bentomanga.com","database":null,"search":{"anime":null,"manga":"https://www.bentomanga.com/manga_list?search={searchterm}"}},{"name":"MangaSushi","domain":"https://mangasushi.net","database":null,"search":{"anime":null,"manga":"https://mangasushi.net/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"HunlightScans","domain":"https://hunlight-scans.info/","database":null,"search":{"anime":null,"manga":"https://hunlight-scans.info/comics?query={searchtermPlus}"}},{"name":"TritiniaScans","domain":"https://tritinia.com","database":null,"search":{"anime":null,"manga":"https://tritinia.com/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"ReadManhua","domain":"https://readmanhua.net","database":null,"search":{"anime":null,"manga":"https://readmanhua.net/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"FlameScans","domain":"https://flamescans.org","database":null,"search":{"anime":null,"manga":"https://flamescans.org/?s={searchtermPlus}"}},{"name":"ImmortalUpdates","domain":"https://immortalupdates.com","database":null,"search":{"anime":null,"manga":"https://immortalupdates.com/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"Zoro","domain":"https://zoro.to","database":"Zoro","search":{"anime":"https://zoro.to/search?keyword={searchtermPlus}","manga":null}},{"name":"Funimation","domain":"https://www.funimation.com","database":"Funimation","search":{"anime":"https://www.funimation.com/search/?q={searchterm}","manga":null}},{"name":"Kitsune","domain":"https://beta.kitsune.tv","database":null,"search":{"anime":"https://kitsune.tv/shows?q={searchterm}","manga":null}},{"name":"AnimesOnline","domain":"https://animesonline.org","database":null,"search":{"anime":"https://animesonline.org/?s={searchtermPlus}","manga":null}},{"name":"LHTranslation","domain":"https://lhtranslation.net","database":null,"search":{"anime":null,"manga":"https://lhtranslation.net/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"MangasOrigines","domain":"https://mangas-origines.fr/","database":null,"search":{"anime":null,"manga":"https://mangas-origines.fr/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"shiro","domain":"https://shiro.is","database":null,"search":{"anime":"https://shiro.is/browse/?title={searchterm}","manga":null}},{"name":"BlueSolo","domain":"https://www.bluesolo.org","database":null,"search":{"anime":null,"manga":"home"}},{"name":"DisasterScans","domain":"https://disasterscans.com","database":null,"search":{"anime":null,"manga":"https://disasterscans.com/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"DynastyScans","domain":"https://dynasty-scans.com","database":null,"search":{"anime":null,"manga":"https://dynasty-scans.com/search?q={searchtermPlus}"}},{"name":"SugarBabies","domain":"https://sugarbbscan.com/","database":null,"search":{"anime":null,"manga":"https://sugarbbscan.com/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"Aniworld","domain":"https://aniworld.to","database":null,"search":{"anime":"https://aniworld.to/search?q={searchterm}","manga":null}},{"name":"BetterAnime","domain":"https://betteranime.net","database":null,"search":{"anime":"https://betteranime.net/pesquisa?titulo={searchtermPlus}","manga":null}},{"name":"BilibiliComics","domain":"https://www.bilibilicomics.com","database":null,"search":{"anime":null,"manga":"https://www.bilibilicomics.com/search?keyword={searchterm( )[noLowercase]}"}},{"name":"MangaReader","domain":"https://mangareader.to","database":"MangaReader","search":{"anime":null,"manga":"https://mangareader.to/search?keyword={searchtermPlus}"}},{"name":"AnimeOnsen","domain":"https://animeonsen.xyz","database":null,"search":{"anime":"https://www.animeonsen.xyz/search/{searchterm}","manga":null}},{"name":"Puray","domain":"https://puray.moe","database":null,"search":{"anime":"home","manga":null}},{"name":"Animetoast","domain":"https://www.animetoast.cc","database":null,"search":{"anime":"https://www.animetoast.cc/?s={searchterm}","manga":null}},{"name":"MuitoMang","domain":"https://muitomanga.com","database":null,"search":{"anime":null,"manga":"https://muitomanga.com/buscar?q={searchtermPlus}"}},{"name":"RealmScans","domain":"https://realmscans.com","database":null,"search":{"anime":null,"manga":"https://realmscans.com/?s={searchtermPlus}"}},{"name":"LuminousScans","domain":"https://luminousscans.com","database":null,"search":{"anime":null,"manga":"https://luminousscans.com/?s={searchtermPlus}"}},{"name":"Animeworld","domain":"https://www.animeworld.tv","database":null,"search":{"anime":"home","manga":null}},{"name":"MangaBuddy","domain":"https://mangabuddy.com","database":null,"search":{"anime":null,"manga":"https://mangabuddy.com/search?q={searchtermPlus}"}},{"name":"Vostfree","domain":"https://vostfree.cx","database":null,"search":{"anime":"https://vostfree.tv/index.php?do=search&subaction=search&story={searchterm}","manga":null}},{"name":"VoidScans","domain":"https://void-scans.com","database":null,"search":{"anime":null,"manga":"https://void-scans.com/?s={searchtermPlus}"}},{"name":"ToonAnime","domain":"https://vvww.toonanime.cc","database":null,"search":{"anime":"https://vvww.toonanime.cc/?story={searchtermPlus}&do=search&subaction=search","manga":null}},{"name":"ADKami","domain":"https://www.adkami.com/","database":null,"search":{"anime":"https://www.adkami.com/video?search={searchtermPlus}","manga":null}},{"name":"Kaguya","domain":"https://kaguya.live","database":null,"search":{"anime":"https://kaguya.live/browse?keyword={searchtermPlus}","manga":null}},{"name":"Hdrezka","domain":"https://hdrezka.ag","database":null,"search":{"anime":"https://hdrezka.ag/search/?do=search&subaction=search&q={searchterm}","manga":null}},{"name":"ADN","domain":"https://animationdigitalnetwork.fr","database":null,"search":{"anime":"https://animationdigitalnetwork.fr/video?search={searchterm}","manga":null}},{"name":"Aniyan","domain":"https://aniyan.net","database":"Aniyan","search":{"anime":"https://aniyan.net/?s={searchtermPlus}","manga":null}},{"name":"marin","domain":"https://marin.moe","database":"Marin","search":{"anime":"https://marin.moe/anime?search={searchterm}","manga":null}},{"name":"Isekaiscan","domain":"https://isekaiscan.com","database":null,"search":{"anime":null,"manga":"https://isekaiscan.com/?s={searchtermPlus}&post_type=wp-manga"}},{"name":"FRAnime","domain":"https://franime.fr","database":null,"search":{"anime":"https://franime.fr/recherche?search={searchtermPlus}","manga":null}},{"name":"FMTeam","domain":"https://fmteam.fr/","database":null,"search":{"anime":null,"manga":"home"}},{"name":"Animelon","domain":"https://www.animelon.com","database":null,"search":{"anime":"https://www.animelon.com/search?searchTerm={searchTerm}","manga":null}},{"name":"MangaFire","domain":"https://mangafire.to","database":"MangaFire","search":{"anime":null,"manga":"https://mangafire.to/filter?keyword={searchtermPlus}"}},{"name":"Pactedanime","domain":"https://pactedanime.com","database":null,"search":{"anime":"https://pactedanime.com/?s={searchtermPlus}","manga":null}},{"name":"projectsuki","domain":"https://projectsuki.com","database":null,"search":{"anime":null,"manga":"https://projectsuki.com/search?q={searchtermPlus}"}}]')}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};n.r(t),n.d(t,{FunctionToString:()=>Cn,InboundFilters:()=>Ln});var e,i,s,r={};n.r(r),n.d(r,{Breadcrumbs:()=>_i,Dedupe:()=>zi,GlobalHandlers:()=>Ui,HttpContext:()=>Xi,LinkedErrors:()=>qi,TryCatch:()=>Li}),(i=e||(e={}))[i.NoState=0]="NoState",i[i.Watching=1]="Watching",i[i.Completed=2]="Completed",i[i.Onhold=3]="Onhold",i[i.Dropped=4]="Dropped",i[i.PlanToWatch=6]="PlanToWatch",i[i.All=7]="All",i[i.Rewatching=23]="Rewatching",function(t){t[t.NoScore=0]="NoScore",t[t.R1=1]="R1",t[t.R2=2]="R2",t[t.R3=3]="R3",t[t.R4=4]="R4",t[t.R5=5]="R5",t[t.R6=6]="R6",t[t.R7=7]="R7",t[t.R8=8]="R8",t[t.R9=9]="R9",t[t.R10=10]="R10"}(s||(s={}));var a=n(9e4);let o;if(function(){try{return localStorage.getItem("x"),!0}catch(t){return a.info("Local storage is not available",t),!1}}())o=localStorage;else{let t={};o={getItem:e=>e in t?t[e]:null,setItem(e,n){t[e]=n},removeItem(e){e in t&&delete t[e]},clear(){t={}}}}const l=o;var c=n(58339),u=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};class h{constructor(t,e,n=!0,i=0){return this.key=t,this.ttl=e,this.localStorage=n,this.refetchTtl=i,this}containsValue(t){return null!=t}valueValid(t,e){return!(!t||!t.timestamp)&&(new Date).getTime()<t.timestamp+e}ttlValid(t){return this.valueValid(t,this.ttl)}refetchTtlValid(t){return this.valueValid(t,this.refetchTtl)}hasValue(){return u(this,void 0,void 0,(function*(){const t=yield this.getStorage();return!(!this.containsValue(t)||!this.ttlValid(t))}))}hasValueAndIsNotEmpty(){return u(this,void 0,void 0,(function*(){const t=yield this.getStorage();return!!(this.containsValue(t)&&void 0!==t.data&&null!==t.data&&Object.keys(t.data).length&&this.ttlValid(t))}))}fullState(){return u(this,void 0,void 0,(function*(){const t=yield this.getStorage(),e=this.containsValue(t)&&this.refetchTtlValid(t),n=this.ttlValid(t);return{value:t,hasValue:e,isValid:n,refetch:e&&!n}}))}getValue(){return u(this,void 0,void 0,(function*(){return(yield this.getStorage()).data}))}setValue(t){return u(this,void 0,void 0,(function*(){const e={data:t,timestamp:(new Date).getTime()};return this.localStorage?l.setItem(this.key,JSON.stringify(e)):c.storage.set(this.key,e)}))}clearValue(){return u(this,void 0,void 0,(function*(){return this.localStorage?l.removeItem(this.key):c.storage.remove(this.key)}))}getStorage(){return u(this,void 0,void 0,(function*(){return this.localStorage?JSON.parse(l.getItem(this.key)):c.storage.get(this.key)}))}}n(58339);var d=n(56387),m=n(9e4),p=n(58339);const f=Math.floor(1e9*Math.random()),g=new d.EventEmitter2({wildcard:!0});function _(t,...e){m.m("Global").m("Emit").debug(t,...e),g.emit(`${t}`,...e),void 0!==p&&p&&"webextension"===p.type&&chrome.runtime.sendMessage({name:"emitter",item:{event:t,params:e,id:f}})}void 0!==p&&p&&"webextension"===p.type&&chrome.runtime.onMessage.addListener(((t,e,n)=>{t.name&&"emitter"===t.name&&(m.m("Global").m("Event").debug(t.item.id,t.item.event,t.item.params),t.item.id!==f&&g.emit(t.item.event,...t.item.params))}));var y=n(58339);class v extends Error{constructor(t){super(t),this.name="NotAutenticatedError"}}class b extends Error{constructor(t){super(t),this.name="UrlNotSupportedError"}}class w extends Error{constructor(t){super(t),this.name="ServerOfflineError"}}class E extends Error{constructor(t){super(t),this.name="NotFoundError"}}class S extends Error{constructor(t){super(t),this.name="UnexpectedResponseError"}}function x(t){try{return JSON.parse(t)}catch(t){throw new S(t.message)}}function k(t,e){return t instanceof v?y.storage.lang("Error_Authenticate",[e]):t instanceof w?"Server Offline":t instanceof b?`Incorrect url provided [${t.message}]`:t instanceof E?"Could not find this entry":t.message}var T=n(58339),N=n(9e4),R=n(9375),A=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};Object.seal(g);class P{constructor(t=1,e="anime",n="default"){return this.status=t,this.listType=e,this.sort=n,this.done=!1,this.loading=!1,this.firstLoaded=!1,this.seperateRewatching=!1,this.modes={frontend:!1,sortAiring:!1,initProgress:!1,cached:!1},this.username="",this.offset=0,this.templist=[],this.api=T,this.cacheObj=void 0,this.status=Number(this.status),this.logger=N.m("[S]","#348fff"),this}setTemplist(t){return this.templist=t,this}getTemplist(){return this.templist}setSort(t){if(this.firstLoaded||this.loading)throw"To late to change sort";this.sort=t}isDone(){return this.done}isLoading(){return this.loading}isFirstLoaded(){return this.firstLoaded}getCompleteList(){return A(this,void 0,void 0,(function*(){do{yield this.getNext()}while(!this.done);return this.modes.sortAiring&&(yield this.sortAiringList()),this.modes.cached&&this.getCache().setValue(this.templist.slice(0,18)),this.firstLoaded=!0,this.templist}))}getNextPage(){return A(this,void 0,void 0,(function*(){return this.done?this.templist:!this.modes.frontend||1!==this.status||"default"!==this.sort&&"unread"!==this.sort?(yield this.getNext(),this.modes.cached&&this.getCache().setValue(this.templist.slice(0,24)),this.firstLoaded=!0,this.templist):(this.modes.sortAiring=!0,this.getCompleteList())}))}getNext(){return A(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.getPart();this.templist=this.templist.concat(t),this.loading=!1}))}getCached(){return A(this,void 0,void 0,(function*(){if(yield this.getCache().hasValue()){const t=yield this.getCache().getValue();return t.forEach((t=>{(t=this.fn(t)).watchedEp="",t.score=""})),t}return[]}))}initFrontendMode(){this.modes.frontend=!0,this.updateListener=g.on("update.*",(t=>{if(N.log("update",t),t.cacheKey){const e=this.templist.find((e=>e.cacheKey===t.cacheKey));N.log(e),e&&t.state&&(e.watchedEp=t.state.episode,e.score=t.state.score,e.status=t.state.status)}}),{objectify:!0})}destroy(){this.updateListener&&this.updateListener.off()}getUsername(){return this.getUserObject().then((t=>t.username))}getSortingOptions(t=!1){const e=[{icon:"filter_list",title:T.storage.lang("settings_progress_default"),value:"default"}];return 1===this.status&&"manga"===this.listType&&e.push({icon:"adjust",title:T.storage.lang("list_sorting_unread"),value:"unread"}),this._getSortingOptions().forEach((n=>{if(!t){if(n.asc){const t=Object.assign({},n);delete t.asc,t.value+="_asc",t.title+=" Ascending",e.push(t)}delete n.asc}e.push(n)})),e}flashmError(t){R.flashm(this.errorMessage(t),{error:!0,type:"error"})}errorMessage(t){return k(t,this.authenticationUrl)}fn(t,e=""){return A(this,void 0,void 0,(function*(){let n=null;return t.fn={continueUrl:()=>null!==n?n:R.getContinueWaching(t.type,t.cacheKey).then((e=>{const i=parseInt(t.watchedEp.toString());return void 0===e||e.ep!==i+1?"":(n=e.url,n)})),initProgress:()=>new at(t.cacheKey,t.type).init().then((e=>{t.fn.progress=e})),progress:!1},t.options=yield R.getEntrySettings(t.type,t.cacheKey,t.tags),e&&(t.options.u=e),(this.modes.sortAiring||this.modes.initProgress)&&(yield t.fn.initProgress()),t}))}initProgress(){return A(this,void 0,void 0,(function*(){const t=[];this.templist.forEach((e=>{t.push(e.fn.initProgress())})),yield Promise.all(t)}))}sortAiringList(){return A(this,void 0,void 0,(function*(){if("unread"===this.sort)return void this.sortUnread();const t=[];let e=[],n=[];function i(t,e){let n=t.fn.progress.getPredictionTimestamp(),i=e.fn.progress.getPredictionTimestamp();return n||(n=999999999999),i||(i=n),n-i}this.templist.forEach((i=>{const s=i.fn.progress;"anime"===this.listType?s&&s.isAiring()&&s.getPredictionTimestamp()?i.watchedEp<s.getCurrentEpisode()?e.push(i):n.push(i):t.push(i):s&&s.isAiring()&&s.getCurrentEpisode()&&i.watchedEp&&i.watchedEp<s.getCurrentEpisode()&&i.watchedEp+6>s.getCurrentEpisode()?e.push(i):t.push(i)})),e=e.sort(i).reverse(),n=n.sort(i),this.templist=e.concat(n,t)}))}sortUnread(){this.templist=this.templist.sort((function(t,e){let n=1e4,i=1e4;if(t.fn.progress&&t.fn.progress.getCurrentEpisode()){const e=t.fn.progress.getCurrentEpisode()-t.watchedEp;e>0&&(n=e)}if(e.fn.progress&&e.fn.progress.getCurrentEpisode()){const t=e.fn.progress.getCurrentEpisode()-e.watchedEp;t>0&&(i=t)}return n-i}))}getCache(){return this.cacheObj||(this.cacheObj=new h(`list/${this.name}/${this.listType}/${this.status}/${this.sort}`,1728e5)),this.cacheObj}}n(19947),n(9375),n(58339);const I="10093a3f9f0174b6b5577c40e9accdae";var L=n(58339),D=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const O="https://api.myanimelist.net/v2/",C="https://malsync.moe/mal/oauth";function M(t){return D(this,void 0,void 0,(function*(){let e=O+t.path;t.fields&&t.fields.length&&(e+=e.includes("?")?"&":"?",e+=`fields=${t.fields.join(",")}`);const n={Authorization:`Bearer ${L.settings.get("malToken")}`,"Content-Type":"application/x-www-form-urlencoded"};let i="";if(t.dataObj){const e=[];for(const n in t.dataObj){const i=encodeURIComponent(n),s=encodeURIComponent(t.dataObj[n]);e.push(`${i}=${s}`)}i=e.join("&")}return L.request.xhr(t.type,{url:e,headers:n,data:i}).then((e=>D(this,void 0,void 0,(function*(){var n,i,s;if(e.status>499&&e.status<600||0===e.status)throw new w(`Server Offline status: ${e.status}`);let r;try{r=JSON.parse(e.responseText)}catch(t){if(U(e.responseText))throw new Error("Your IP has been banned on MAL, change your IP or wait for it to get unbanned");throw t}if(r&&r.error)switch(r.error){case"forbidden":case"invalid_token":if(yield function(t){return D(this,void 0,void 0,(function*(){const e=t.m("Refresh");e.log("Refresh Access Token");const n=L.settings.get("malRefresh");return!!n&&L.request.xhr("POST",{url:"https://myanimelist.net/v1/oauth2/token",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:`client_id=${I}&grant_type=refresh_token&refresh_token=${n}`}).then((t=>{try{return x(t.responseText)}catch(e){if(U(t.responseText))throw new Error("Your IP has been banned on MAL, change your IP or wait for it to get unbanned");throw e}})).then((t=>t&&t.refresh_token&&t.access_token?(L.settings.set("malToken",t.access_token),L.settings.set("malRefresh",t.refresh_token),!0):t&&t.error?(e.error(t.error,"|",t.message),L.settings.set("malRefresh",""),!1):(e.error("Something went wrong"),!1)))}))}(this.logger))return this.apiCall(t);throw new v(null!==(n=r.message)&&void 0!==n?n:r.error);case"not_found":throw new E(null!==(i=r.message)&&void 0!==i?i:r.error);case"invalid_content":throw new Error("This Entry is currently pending approval. It cant be saved to mal for now");default:throw new Error(null!==(s=r.message)&&void 0!==s?s:r.error)}if(400===e.status)throw new Error("Invalid Parameters");return r}))))}))}function U(t){return Boolean(t.includes("Request blocked")||t.includes("your IP has been banned"))}var j,B;!function(t){t[t.watching=e.Watching]="watching",t[t.completed=e.Completed]="completed",t[t.on_hold=e.Onhold]="on_hold",t[t.dropped=e.Dropped]="dropped",t[t.plan_to_watch=e.PlanToWatch]="plan_to_watch"}(j||(j={})),function(t){t[t.reading=e.Watching]="reading",t[t.completed=e.Completed]="completed",t[t.on_hold=e.Onhold]="on_hold",t[t.dropped=e.Dropped]="dropped",t[t.plan_to_read=e.PlanToWatch]="plan_to_read"}(B||(B={}));var F=n(58339),G=n(9e4),Y=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const q=class extends P{constructor(){super(...arguments),this.name="MyAnimeList",this.authenticationUrl=C,this.limit=100,this.apiCall=M}getUserObject(){return Y(this,void 0,void 0,(function*(){return this.apiCall({type:"GET",path:"users/@me"}).then((t=>({username:t.name,picture:t.picture,href:`https://myanimelist.net/profile/${t.name}`})))}))}deauth(){return F.settings.set("malToken","").then((()=>F.settings.set("malRefresh","")))}_getSortingOptions(){return[{icon:"sort_by_alpha",title:F.storage.lang("list_sorting_alpha"),value:"alpha"},{icon:"history",title:F.storage.lang("list_sorting_history"),value:"updated"},{icon:"score",title:F.storage.lang("list_sorting_score"),value:"score"},{icon:"calendar_month",title:F.storage.lang("list_sorting_airing_date"),value:"airing_date"}]}getOrder(t){switch(t){case"alpha":return`${this.listType}_title`;case"updated":return"list_updated_at";case"score":return"list_score";case"airing_date":return`${this.listType}_start_date`;default:return 1===this.status||6===this.status?this.getOrder("updated"):this.getOrder("alpha")}}getPart(){return Y(this,void 0,void 0,(function*(){this.limit=100,this.modes.frontend&&(this.limit=24);const t=this.getOrder(this.sort);let e="";t&&(e=`&sort=${t}`),G.log("[UserList][MAL]",`username: ${this.username}`,`status: ${this.status}`,`offset: ${this.offset}`,`sorting: ${e}`);let n="";return 7!==this.status&&(n="manga"===this.listType?`&status=${B[this.status]}`:`&status=${j[this.status]}`),this.apiCall({type:"GET",path:`users/@me/${this.listType}list?nsfw=true&limit=${this.limit}&offset=${this.offset}${n}${e}`,fields:["list_status{tags,is_rewatching,is_rereading,start_date,finish_date}","num_episodes","num_chapters","num_volumes"]}).then((t=>(t.paging&&t.paging.next?this.offset+=this.limit:this.done=!0,this.prepareData(t.data))))}))}prepareData(t){var e,n,i,s,r,a,o,l;return Y(this,void 0,void 0,(function*(){const c=[];for(let u=0;u<t.length;u++){const h=t[u];"anime"===this.listType?c.push(yield this.fn({uid:h.node.id,malId:h.node.id,apiCacheKey:h.node.id,cacheKey:h.node.id,type:this.listType,title:h.node.title,url:`https://myanimelist.net/${this.listType}/${h.node.id}`,watchedEp:h.list_status.num_episodes_watched,totalEp:h.node.num_episodes,status:parseInt(j[h.list_status.status]),score:h.list_status.score,image:null!==(n=null===(e=h.node.main_picture)||void 0===e?void 0:e.medium)&&void 0!==n?n:"",imageLarge:(null===(i=h.node.main_picture)||void 0===i?void 0:i.large)||(null===(s=h.node.main_picture)||void 0===s?void 0:s.medium)||"",tags:h.list_status.tags.length?h.list_status.tags.join(","):"",airingState:h.anime_airing_status})):c.push(yield this.fn({uid:h.node.id,malId:h.node.id,apiCacheKey:h.node.id,cacheKey:h.node.id,type:this.listType,title:h.node.title,url:`https://myanimelist.net/${this.listType}/${h.node.id}`,watchedEp:h.list_status.num_chapters_read,totalEp:h.node.num_chapters,status:parseInt(B[h.list_status.status]),score:h.list_status.score,image:null!==(a=null===(r=h.node.main_picture)||void 0===r?void 0:r.medium)&&void 0!==a?a:"",imageLarge:(null===(o=h.node.main_picture)||void 0===o?void 0:o.large)||(null===(l=h.node.main_picture)||void 0===l?void 0:l.medium)||"",tags:h.list_status.tags.length?h.list_status.tags.join(","):"",airingState:h.anime_airing_status}))}return console.log(c),c}))}};var W,z=n(9e4),H=n(58339);z.m("anilist","#3db4f2"),function(t){t[t.CURRENT=e.Watching]="CURRENT",t[t.PLANNING=e.PlanToWatch]="PLANNING",t[t.COMPLETED=e.Completed]="COMPLETED",t[t.DROPPED=e.Dropped]="DROPPED",t[t.PAUSED=e.Onhold]="PAUSED",t[t.REPEATING=e.Rewatching]="REPEATING"}(W||(W={})),n(58339),n(9e4);var K,V=n(9e4);n(58339),V.m("kitsu","#d65e43"),n(58339),n(9e4),n(9e4),n(58339),n(58339),n(9e4),n(58339),function(t){t[t.watching=e.Watching]="watching",t[t.planned=e.PlanToWatch]="planned",t[t.completed=e.Completed]="completed",t[t.dropped=e.Dropped]="dropped",t[t.on_hold=e.Onhold]="on_hold",t[t.rewatching=e.Rewatching]="rewatching"}(K||(K={})),n(58339),n(9e4),n(58339),n(9e4),n(9375),n(58339);var J=n(58339),X=n(9e4),Z=n(9375),Q=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};function tt(t,e){return Q(this,void 0,void 0,(function*(){if(!e)return{};const n=yield J.request.xhr("GET",`https://api.malsync.moe/nc/mal/${t}/${e}/pr`);return JSON.parse(n.responseText)}))}var et=n(58339);function nt(t,e=!0){if(!t)return"";const n=Date.now();let i,s;if(n>t?(s=!1,i=n-t):(s=!0,i=t-n),i<3e4)return et.storage.lang("bookmarksItem_now");let r=function(t){let e="";return 1===t.y?e+=` ${t.y} ${et.storage.lang("bookmarksItem_Year")}`:t.y>1&&(e+=` ${t.y} ${et.storage.lang("bookmarksItem_Years")}`),1===t.d?e+=` ${t.d} ${et.storage.lang("bookmarksItem_Day")}`:t.d>1&&(e+=` ${t.d} ${et.storage.lang("bookmarksItem_Days")}`),1===t.h?e+=` ${t.h} ${et.storage.lang("bookmarksItem_Hour")}`:t.h>1&&(e+=` ${t.h} ${et.storage.lang("bookmarksItem_Hours")}`),1===t.m?e+=` ${t.m} ${et.storage.lang("bookmarksItem_min")}`:t.m>1&&(e+=` ${t.m} ${et.storage.lang("bookmarksItem_mins")}`),1===t.s?e+=` ${t.s} ${et.storage.lang("bookmarksItem_sec")}`:t.s>1&&(e+=` ${t.s} ${et.storage.lang("bookmarksItem_secs")}`),e.trim()}((a=function(t){let e,n,i,s;s=Math.floor(t/1e3),i=Math.floor(s/60),s%=60,n=Math.floor(i/60),i%=60,e=Math.floor(n/24),n%=24;const r=Math.floor(e/365);return e%=365,{y:r,d:e,h:n,m:i,s}}(i)).y>1?a.d>182?{y:a.y+1,d:0,h:0,m:0,s:0}:{y:a.y,d:0,h:0,m:0,s:0}:a.y?{y:a.y,d:a.d,h:0,m:0,s:0}:a.d>3?a.h>11?{y:0,d:a.d+1,h:0,m:0,s:0}:{y:0,d:a.d,h:0,m:0,s:0}:a.d?{y:0,d:a.d,h:a.h,m:0,s:0}:a.h>5?a.m>29?{y:0,d:0,h:a.h+1,m:0,s:0}:{y:0,d:0,h:a.h,m:0,s:0}:a.h?{y:0,d:0,h:a.h,m:a.m,s:0}:a.m>14?{y:0,d:0,h:0,m:a.m,s:0}:{y:0,d:0,h:0,m:a.m,s:a.s});var a;return!s&&e&&(r=et.storage.lang("bookmarksItem_ago",[r])),r}var it=n(9e4),st=n(58339),rt=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};class at{constructor(t,e){return this.cacheKey=t,this.type=e,this.releaseItem=void 0,this.logger=it.m("progress").m(t.toString()),this}initReleaseProgress(t){return rt(this,void 0,void 0,(function*(){t&&(yield function(t,e,n="default",i=X.m("release")){return Q(this,void 0,void 0,(function*(){if(n||(n="default"),(i=i.m(t.uid.toString())).log(t.title,t.cacheKey,t.apiCacheKey,`Mode: ${n}`),!t.apiCacheKey)return void i.log("No Api Cache Id");if(!J.settings.get("epPredictions"))return void i.log("epPredictions disabled");const s=yield J.storage.get(`release/${e}/${t.cacheKey}`);i.m("Load").log(s);let r,a=!1;if(s&&s.mode&&s.mode!==n&&(a=!0),s&&s.timestamp&&Date.now()-s.timestamp<12e4&&!a)return void i.log("Up to date");if(s&&s.finished&&s.timestamp&&Date.now()-s.timestamp<6048e5&&!a)return void i.log("Fininshed");if(s&&!s.value&&s.timestamp&&Date.now()-s.timestamp<864e5&&!a)return void i.log("Nulled");a&&i.log("Update forced"),"off"===n&&(i.log("Disabled"),t.xhr=[]),void 0!==t.xhr?r=t.xhr:(r=yield tt(e,t.apiCacheKey),yield Z.wait(500)),i.log(r);const o=function(t,e,n){const i={};if(!t.length)return null;let s;if("default"===e?(i.mainId="anime"===n?J.settings.get("progressIntervalDefaultAnime"):J.settings.get("progressIntervalDefaultManga"),i.fallback="en/sub"):i.mainId=e,i.fallbackPrediction="jp/dub",i.mainId){const e=t.find((t=>t.id===i.mainId));e&&(s=e)}if(i.fallback&&!s){const e=t.find((t=>t.id===i.fallback));e&&(s=e)}if(i.fallbackPrediction&&s&&!s.predicition&&s.lastEp&&s.lastEp.timestamp){const e=t.find((t=>t.id===i.fallbackPrediction)),n=s.lastEp.timestamp+6048e5;n&&e&&e.predicition&&(s.lastEp.total===e.lastEp.total?Math.abs(n-e.predicition.timestamp)<108e6&&(s.predicition={timestamp:n,probability:"medium"}):e.lastEp.total&&s.lastEp.total===e.lastEp.total-1&&Math.abs(n-(e.predicition.timestamp-6048e5))<108e6&&(s.predicition={timestamp:n,probability:"medium"}))}if(i.fallbackPrediction&&!s){const e=t.find((t=>t.id===i.fallbackPrediction));e&&e.lastEp&&e.predicition&&0===e.lastEp.total&&(s=e,s.predicition.probability="medium")}return s||null}(r,n,e);o||i.log("No value for the selected mode");let l=!1;o&&o.state&&"complete"===o.state&&(l=!0),i.m("Save").log(o),s&&s.value&&function(t,e,n,i){Q(this,void 0,void 0,(function*(){try{if("anime"===i&&!J.settings.get("progressNotificationsAnime")||"manga"===i&&!J.settings.get("progressNotificationsManga"))return;if(t&&n&&n&&e.lastEp&&void 0!==e.lastEp.total&&n.lastEp&&n.lastEp.total&&e.lang===n.lang&&e.type===n.type&&e.lastEp.total<n.lastEp.total&&t.watchedEp+1===n.lastEp.total){let e;e=t.single?{title:t.title,text:J.storage.lang(`syncPage_malObj_nextEp_${i}`,[n.lastEp.total]),sticky:!0,image:yield t.single.getImage(),url:t.single.getStreamingUrl()?t.single.getStreamingUrl():t.single.getUrl()}:{title:t.title,text:J.storage.lang(`syncPage_malObj_nextEp_${i}`,[n.lastEp.total]),sticky:!0,image:t.image,url:t.options&&t.options.u?t.options.u:t.url},J.request.notification(e)}}catch(t){X.error("Could not check notification Progress",t)}}))}(t,s.value,o,e),yield J.storage.set(`release/${e}/${t.cacheKey}`,{timestamp:Date.now(),value:o,mode:n,finished:l})}))}(t,this.type,t.progressMode));const e=yield st.storage.get(`release/${this.type}/${this.cacheKey}`);this.logger.m("Init Release").log(e),e&&(function(t){if(t&&t.timestamp){const e=(new Date).getTime()-t.timestamp;if(t.finished&&e<6048e5)return!1;if(!t.value&&e<864e5)return!1;if(e<864e5)return!1}return!0}(e)?this.logger.log("Too old"):this.releaseItem=e)}))}getProgressCurrentEpisode(){const t=this.releaseItem;return t&&t.value&&t.value.lastEp&&t.value.lastEp.total?t.value.lastEp.total:null}isProgressFinished(){const t=this.releaseItem;return!(!t||!t.finished)}getProgressPrediction(){const t=this.releaseItem;return t&&t.value&&t.value.predicition&&t.value.predicition.timestamp?t.value.predicition.timestamp:null}getProgressLastTimestamp(){const t=this.releaseItem;return t&&t.value&&t.value.lastEp&&t.value.lastEp.timestamp?t.value.lastEp.timestamp:null}init(t=!1){return rt(this,void 0,void 0,(function*(){return yield Promise.all([this.initReleaseProgress(t)]),this}))}getCurrentEpisode(){return st.settings.get("epPredictions")?this.getProgressCurrentEpisode():null}isFinished(){return this.isProgressFinished()}isAiring(){return!this.isFinished()}getPredictionTimestamp(){return!this.getProgressPrediction()||(new Date).getTime()>this.getProgressPrediction()?NaN:this.getProgressPrediction()}getPrediction(){return nt(this.getPredictionTimestamp())}getPredictionText(){const t=this.getPrediction();return t?st.storage.lang(`prediction_Episode_${this.type}`,[t]):""}getLastTimestamp(){return this.getProgressLastTimestamp()}getLast(t=!0){return nt(this.getLastTimestamp(),t)}getLastText(){const t=this.getLast(!1);return t?st.storage.lang(`prediction_Last_${this.type}`,[t]):""}getAuto(){const t=this.getPrediction();if(t)return t;return this.getLast()||""}getAutoText(){const t=this.getPredictionText();if(t)return t;return this.getLastText()||""}getColor(){return"#f57c00"}getBars(t,e){const n=this.getCurrentEpisode(),i={totalWidth:100,epWidth:0,predWidth:0};if(!e)if(i.totalWidth=0,t&&(!n||t>=n))e=Math.ceil(1.2*t);else{if(!n||t&&!(t<n))return i;e=Math.ceil(1.2*n)}return t&&(i.epWidth=t/e*100,i.epWidth>100&&(i.epWidth=100)),n&&(i.predWidth=n/e*100,i.predWidth>100&&(i.predWidth=100)),i}}class ot extends Error{constructor(t){const e=t.split("/");let n=t;e.length>2&&e[2],super(n),this.url=t,this.name="MissingPlayerError"}}class lt extends Error{constructor(t){super(t),this.name="SafeError"}}class ct extends Error{constructor(t){super(t),this.name="MissingDataError"}}class ut extends Error{constructor(t){super(t),this.name="CustomDomainError"}}var ht=n(58339);const dt={ui:{module:"dropdown"},getOptions:()=>[{value:0,label:ht.storage.lang("UI_Score_Not_Rated")},{value:100,label:ht.storage.lang("UI_Score_Masterpiece")},{value:90,label:ht.storage.lang("UI_Score_Great")},{value:80,label:ht.storage.lang("UI_Score_VeryGood")},{value:70,label:ht.storage.lang("UI_Score_Good")},{value:60,label:ht.storage.lang("UI_Score_Fine")},{value:50,label:ht.storage.lang("UI_Score_Average")},{value:40,label:ht.storage.lang("UI_Score_Bad")},{value:30,label:ht.storage.lang("UI_Score_VeryBad")},{value:20,label:ht.storage.lang("UI_Score_Horrible")},{value:10,label:ht.storage.lang("UI_Score_Appalling")}],valueToOptionValue:t=>t?t<10?10:10*Math.round(t/10):0,optionValueToValue:t=>t?Number(t):0};var mt=n(9e4),pt=n(58339),ft=n(9375),gt=n(19947),_t=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};Object.seal(g);class yt{constructor(t){return this.url=t,this.type=null,this.rewatchingSupport=!0,this.ids={mal:NaN,ani:NaN,kitsu:{id:NaN,slug:""},simkl:NaN},this.options=null,this.progress=!1,this.updateProgress=!1,this._onList=!1,this._authenticated=!1,this.handleUrl(t),this.logger=mt.m("[S]","#348fff"),this}getType(){return this.type}getUrl(){return this.url}supportsRewatching(){return this.rewatchingSupport}getApiCacheKey(){return this.getKey(["ANILIST"])}getRulesCacheKey(){return this.getKey(["ANILIST","KITSU"],!1)}setStatus(t){return t=Number(t),this._setStatus(t),this}getStatus(){return this.isOnList()?this._getStatus():e.NoState}getScoreMode(){return dt}setScore(t){return(t=parseInt(`${t}`))||(t=0),this._setScore(t),this}getScore(){return this._getScore()||0}setAbsoluteScore(t){return t=parseInt(`${t}`),this._setAbsoluteScore(t),this}getAbsoluteScore(){return this._getAbsoluteScore()||0}setEpisode(t){return t=parseInt(`${t}`),this.getTotalEpisodes()&&t>this.getTotalEpisodes()&&(t=this.getTotalEpisodes()),this._setEpisode(t),this}getEpisode(){return this._getEpisode()}setVolume(t){return this._setVolume(t),this}getVolume(){return this._getVolume()}setStreamingUrl(t){return this.options&&(this.options.u=t),this}getStreamingUrl(){if(this.options&&this.options.u)return this.options.u}cleanTags(){this.options=null}initProgress(){return _t(this,void 0,void 0,(function*(){const t=yield tt(this.getType(),this.getApiCacheKey());return new at(this.getCacheKey(),this.getType()).init({uid:this.getCacheKey(),apiCacheKey:this.getApiCacheKey(),title:this.getTitle(),cacheKey:this.getCacheKey(),progressMode:this.getProgressMode(),watchedEp:this.getEpisode(),single:this,xhr:t}).then((e=>{this.updateProgress=!1,this.progress=e,this.progressXhr=t}))}))}getProgress(){return!!this.progress&&this.progress}getProgressFormated(){const t=[],e=new Intl.DisplayNames("en",{type:"language"});return mt.log(this.progressXhr),this.progressXhr&&Object.keys(this.progressXhr).length&&this.progressXhr.forEach((n=>{t.push({type:n.type,key:n.id,state:n.state,label:e.of(n.lang.replace(/^jp$/,"ja"))||n.lang,dropped:"dropped"===n.state||"discontinued"===n.state,episode:n.lastEp&&n.lastEp.total?n.lastEp.total:0,lastEp:n.lastEp,predicition:n.prediction})})),t}getProgressOptions(){return this.getProgressFormated().filter((t=>"complete"!==t.state))}getProgressCompleted(){return this.getProgressFormated().filter((t=>"complete"===t.state))}getProgressMode(){return this.options&&this.options.p?this.options.p:""}setProgressMode(t){this.options&&(this.options.p=t,this.updateProgress=!0),pt.settings.get("malTags")||ft.setEntrySettings(this.type,this.getCacheKey(),this.options,this._getTags()).then((()=>this.initProgress()))}getProgressKey(){let t=this.getProgressMode();if(t||(t="anime"===this.getType()?pt.settings.get("progressIntervalDefaultAnime"):pt.settings.get("progressIntervalDefaultManga")),!t)return null;const e=/^([^/]*)\/(.*)$/.exec(t);return e?{key:t,lang:e[1],type:e[2]}:null}getPageRelations(){const t=this.shortName,e=[];return this.ids.mal&&"MAL"!==t&&e.push({name:"MAL",icon:"https://cdn.myanimelist.net/images/favicon.ico",link:`https://myanimelist.net/${this.type}/${this.ids.mal}`}),this.ids.ani&&"AniList"!==t&&e.push({name:"AniList",icon:"https://anilist.co/img/icons/favicon-32x32.png",link:`https://anilist.co/${this.type}/${this.ids.ani}`}),this.ids.kitsu.id&&"Kitsu"!==t&&e.push({name:"Kitsu",icon:"https://kitsu.io/favicon-32x32-3e0ecb6fc5a6ae681e65dcbc2bdf1f17.png",link:`https://kitsu.io/${this.type}/${this.ids.kitsu.id}`}),this.ids.simkl&&"Simkl"!==t&&e.push({name:"Simkl",icon:"https://eu.simkl.in/img_favicon/v2/favicon-32x32.png",link:`https://simkl.com/${this.type}/${this.ids.simkl}`}),e}fillRelations(){return Promise.resolve()}update(){return this.logger.log("[SINGLE]","Update info",this.ids),this.lastError=null,this._update().catch((t=>{throw this.lastError=t,t})).then((()=>(this.persistanceState=this.getStateEl(),ft.getEntrySettings(this.type,this.getCacheKey(),this._getTags())))).then((t=>{this.options=t,this.registerEvent(),this.emitUpdate("state")}))}sync(){return _t(this,void 0,void 0,(function*(){return this.logger.log("[SINGLE]","Sync",this.ids),this.lastError=null,this._setTags(yield ft.setEntrySettings(this.type,this.getCacheKey(),this.options,this._getTags())),this._sync().catch((t=>{throw this.lastError=t,t})).then((()=>{this.undoState=this.persistanceState,this.updateProgress&&this.initProgress(),this._onList=!0,this.emitUpdate()}))}))}emitUpdate(t="update"){_(`${t}.${this.getCacheKey()}`,{id:this.getPageId(),type:this.getType(),cacheKey:this.getCacheKey(),state:this.getStateEl(),meta:{title:this.getTitle(),image:this.getImage(),malId:this.getMalId(),totalEp:this.getTotalEpisodes(),url:this.getUrl()}})}delete(){return _t(this,void 0,void 0,(function*(){return this._delete().then((()=>{this._onList=!1,_(`delete.${this.getCacheKey()}`,{id:this.getPageId(),type:this.getType(),cacheKey:this.getCacheKey()})}))}))}registerEvent(){this.globalUpdateEvent||(this.globalUpdateEvent=g.on(`update.${this.getCacheKey()}`,(t=>this.updateEvent(t))))}updateEvent(t){this.isDirty()?this.logger.log("Ignore event"):t&&t.state&&(this.setStateEl(t.state),this.persistanceState=this.getStateEl(),g.emit("syncPage_fillUi"))}isDirty(){return JSON.stringify(this.persistanceState)!==JSON.stringify(this.getStateEl())||this.updateProgress}undo(){if(this.logger.log("[SINGLE]","Undo",this.undoState),!this.undoState)throw new lt("No undo state found");if(!this.undoState.onList){if(void 0===this.delete)throw new Error("Deleting an entry is not supported");return this.delete().then((()=>{this.setStateEl(this.undoState),this.undoState=null}))}return this.setStateEl(this.undoState),this.sync().then((()=>{this.undoState=null}))}getTitle(t=!1){return this._getTitle(t)}getTotalEpisodes(){let t=this._getTotalEpisodes();return t||(t=0),t}getTotalVolumes(){return this._getTotalVolumes()}isOnList(){return this._onList}isAuthenticated(){return this._authenticated}getDisplayUrl(){return this._getDisplayUrl()}getMalUrl(){return Number.isNaN(this.ids.mal)?null:`https://myanimelist.net/${this.getType()}/${this.ids.mal}`}getMalId(){return Number.isNaN(this.ids.mal)?null:this.ids.mal}getIds(){return this.ids}getImage(){return this._getImage()}getRating(){return this._getRating().then((t=>t||"N/A"))}setResumeWatching(t,e){return ft.setResumeWaching(t,e,this.type,this.getCacheKey())}getResumeWatching(){return this.options&&this.options.r?this.options.r:null}setContinueWatching(t,e){return ft.setContinueWaching(t,e,this.type,this.getCacheKey())}getContinueWatching(){return this.options&&this.options.c?this.options.c:null}increaseRewatchCount(){}getStateEl(){return{onList:this.isOnList(),episode:this.getEpisode(),volume:this.getVolume(),status:this.getStatus(),score:this.getScore(),absoluteScore:this.getAbsoluteScore()}}setStateEl(t){this._onList=t.onList,this.setEpisode(t.episode),this.setVolume(t.volume),this.setStatus(t.status),this.setScore(t.score),t.absoluteScore&&this.setAbsoluteScore(t.absoluteScore)}getStateDiff(){const t=this.getStateEl();if(t&&this.undoState){const e={};for(const n in t)t[n]!==this.undoState[n]&&(e[n]=t[n]);return e}}checkSync(t,n){return _t(this,void 0,void 0,(function*(){const i=this.getEpisode(),s=this.getStatus(),r=this.getVolume();return s===e.Completed?1===t&&this.startRewatchingMessage():!(i>=t&&!(void 0!==n&&(r||n>1||!t)&&n>r))&&(t&&t===this.getTotalEpisodes()?(s===e.Rewatching?yield this.finishRewatchingMessage():yield this.finishWatchingMessage(),!0):s===e.Watching||s===e.Rewatching||this.startWatchingMessage())}))}startWatchingMessage(){return _t(this,void 0,void 0,(function*(){return ft.flashConfirm(pt.storage.lang(`syncPage_flashConfirm_start_${this.getType()}`),"add").then((t=>(t&&this.setStatus(e.Watching),t)))}))}finishWatchingMessage(){return _t(this,void 0,void 0,(function*(){const t=this.getScoreCheckboxValue();let n='<div><select id="finish_score" style="margin-top:5px; color:white; background-color:#4e4e4e; border: none;">';return this.getScoreCheckbox().forEach((e=>{n+=`<option value="${e.value}" ${t===e.value?"selected":""}>${e.label}</option>`})),n+="</select></div>",ft.flashConfirm(pt.storage.lang("syncPage_flashConfirm_complete")+n,"complete").then((t=>(t&&(this.setStatus(e.Completed),Number(gt.$("#finish_score").val())>0&&(this.logger.log(`finish_score: ${gt.$("#finish_score :selected").val()}`),this.handleScoreCheckbox(gt.$("#finish_score :selected").val()))),t)))}))}startRewatchingMessage(){return _t(this,void 0,void 0,(function*(){return ft.flashConfirm(pt.storage.lang(`syncPage_flashConfirm_rewatch_start_${this.getType()}`),"add").then((t=>(t&&this.setStatus(e.Rewatching),t)))}))}finishRewatchingMessage(){return _t(this,void 0,void 0,(function*(){return ft.flashConfirm(pt.storage.lang(`syncPage_flashConfirm_rewatch_finish_${this.getType()}`),"complete").then((t=>(t&&(this.setStatus(e.Completed),this.increaseRewatchCount()),t)))}))}getScoreCheckbox(){return this.getScoreMode().getOptions()}getScoreCheckboxValue(){return this.getScoreMode().valueToOptionValue(this.getAbsoluteScore())}handleScoreCheckbox(t){this.setAbsoluteScore(this.getScoreMode().optionValueToValue(t))}getDisplayScoreCheckbox(){const t=this.getScoreCheckboxValue(),e=this.getScoreCheckbox().filter((e=>e.value===t));return e.length?e[0].label:""}getStatusCheckbox(){const t=[{value:"1",label:pt.storage.lang(`UI_Status_watching_${this.getType()}`)},{value:"2",label:pt.storage.lang("UI_Status_Completed")},{value:"3",label:pt.storage.lang("UI_Status_OnHold")},{value:"4",label:pt.storage.lang("UI_Status_Dropped")},{value:"6",label:pt.storage.lang(`UI_Status_planTo_${this.getType()}`)}];return this.rewatchingSupport&&t.push({value:"23",label:pt.storage.lang(`UI_Status_Rewatching_${this.getType()}`)}),t}handleStatusCheckbox(t){this.setStatus(t)}getStatusCheckboxValue(){return this.getStatus()}getKey(t,e=!0){return e&&this.ids.mal?this.ids.mal:this.ids.ani&&t.includes("ANILIST")?`anilist:${this.ids.ani}`:this.ids.kitsu.id&&t.includes("KITSU")?`kitsu:${this.ids.kitsu.id}`:this.ids.simkl&&t.includes("SIMKL")?`simkl:${this.ids.simkl}`:this.ids.mal}getLastError(){return this.lastError}getLastErrorMessage(){return this.errorMessage(this.getLastError())}flashmError(t){ft.flashm(this.errorMessage(t),{error:!0,type:"error"})}errorMessage(t){return k(t,this.authenticationUrl)}}var vt=n(9375),bt=n(9e4),wt=n(9375),Et=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const St=class extends yt{constructor(t){return super(t),this.url=t,this.displayUrl="",this.pending=!1,this.shortName="MAL",this.authenticationUrl=C,this.apiCall=M,this.logger=bt.m(this.shortName,"#2e51a2"),this}handleUrl(t){if(t.match(/myanimelist\.net\/(anime|manga)\/\d*/i))return this.type="anime"===wt.urlPart(t,3)?"anime":"manga",void(this.ids.mal=Number(wt.urlPart(t,4)));throw new b(t)}getCacheKey(){return this.ids.mal}getPageId(){return this.ids.mal}_getStatus(){let t;return t="manga"===this.type?parseInt(B[this.animeInfo.my_list_status.status]):parseInt(j[this.animeInfo.my_list_status.status]),this.getRewatching()&&2===t?23:t}_setStatus(t){23===t?(t=2,this.setRewatching(!0)):this.setRewatching(!1),"manga"!==this.type?this.animeInfo.my_list_status.status=j[t]:this.animeInfo.my_list_status.status=B[t]}increaseRewatchCount(){"manga"===this.type?this.animeInfo.my_list_status.num_times_reread++:this.animeInfo.my_list_status.num_times_rewatched++}_getScore(){return this.animeInfo.my_list_status.score}_setScore(t){this.animeInfo.my_list_status.score=t}_getAbsoluteScore(){return 10*this.getScore()}_setAbsoluteScore(t){t?t<10?this.setScore(1):this.setScore(Math.round(t/10)):this.setScore(0)}_getEpisode(){return"manga"===this.type?this.animeInfo.my_list_status.num_chapters_read:this.animeInfo.my_list_status.num_watched_episodes}_setEpisode(t){t||(t=0),"manga"!==this.type?this.animeInfo.my_list_status.num_watched_episodes=t:this.animeInfo.my_list_status.num_chapters_read=t}_getVolume(){return"manga"===this.type?this.animeInfo.my_list_status.num_volumes_read:0}_setVolume(t){"manga"===this.type&&(this.animeInfo.my_list_status.num_volumes_read=t)}_getTags(){return this.animeInfo.my_list_status.tags.length?this.animeInfo.my_list_status.tags.join(","):""}_setTags(t){t&&","!==t.trim()?this.animeInfo.my_list_status.tags=t.split(","):this.animeInfo.my_list_status.tags=[]}getRewatching(){return"manga"===this.type?this.animeInfo.my_list_status.is_rereading:this.animeInfo.my_list_status.is_rewatching}setRewatching(t){"manga"!==this.type?this.animeInfo.my_list_status.is_rewatching=t:this.animeInfo.my_list_status.is_rereading=t}_getTitle(){return this.animeInfo.title}_getTotalEpisodes(){return"manga"===this.type?this.animeInfo.num_chapters:this.animeInfo.num_episodes}_getTotalVolumes(){return"manga"===this.type?this.animeInfo.num_volumes:0}_getDisplayUrl(){return this.url}_getImage(){var t,e;return null!==(e=null===(t=this.animeInfo.main_picture)||void 0===t?void 0:t.medium)&&void 0!==e?e:""}_getRating(){return Promise.resolve(this.animeInfo.mean)}_update(){return Et(this,void 0,void 0,(function*(){return this.apiCall({type:"GET",path:`${this.type}/${this.ids.mal}`,fields:["my_list_status{tags,is_rewatching,is_rereading,num_times_rewatched,num_times_reread,start_date,finish_date}","num_episodes","mean","num_chapters","num_volumes"]}).catch((t=>{throw t instanceof v&&(this._authenticated=!1),t})).then((t=>{this.logger.m("Api").log(t),this._authenticated=!0,this.animeInfo=t,this._onList=!0,this.animeInfo.my_list_status||(this._onList=!1,"manga"===this.type?this.animeInfo.my_list_status={is_rereading:!1,num_chapters_read:0,num_volumes_read:0,score:0,status:"plan_to_read",tags:[]}:this.animeInfo.my_list_status={is_rewatching:!1,num_watched_episodes:0,score:0,status:"plan_to_watch",tags:[]}),this.animeInfo.my_list_status&&void 0!==this.animeInfo.my_list_status.num_episodes_watched&&(this.animeInfo.my_list_status.num_watched_episodes=this.animeInfo.my_list_status.num_episodes_watched,delete this.animeInfo.my_list_status.num_episodes_watched)}))}))}_sync(){return Et(this,void 0,void 0,(function*(){void 0===this.animeInfo.my_list_status.start_date&&1===this._getStatus()&&this._getEpisode()>0&&(this.animeInfo.my_list_status.start_date=(0,vt.returnYYYYMMDD)()),void 0===this.animeInfo.my_list_status.finish_date&&2===this._getStatus()&&(this.animeInfo.my_list_status.finish_date=(0,vt.returnYYYYMMDD)(),void 0===this.animeInfo.my_list_status.start_date&&(this.animeInfo.my_list_status.start_date=(0,vt.returnYYYYMMDD)()));const t={};for(const e in this.animeInfo.my_list_status)switch(e){case"priority":case"num_watched_episodes":case"num_volumes_read":case"num_chapters_read":case"score":case"is_rewatching":case"is_rereading":case"num_times_rewatched":case"num_times_reread":case"rewatch_value":case"reread_value":case"tags":case"comments":case"status":case"start_date":case"finish_date":t[e]=this.animeInfo.my_list_status[e]}return this.logger.m("Sync").log(this.ids.mal,t),this.apiCall({type:"PUT",path:`${this.type}/${this.ids.mal}/my_list_status`,dataObj:t}).then((t=>{this.logger.m("Sync").log("res",t)}))}))}_delete(){return this.apiCall({type:"DELETE",path:`${this.type}/${this.ids.mal}/my_list_status`})}fillRelations(){return Et(this,void 0,void 0,(function*(){const t=new h(`fillRelations/${this.ids.mal}/${this.getType()}`,6048e5);return t.hasValueAndIsNotEmpty().then((e=>e?t.getValue().then((t=>{t&&t.da&&parseInt(t.da)&&(this.ids.ani=parseInt(t.da))})):function(t,e){const n={id:t,type:e.toUpperCase()};return H.request.xhr("POST",{url:"https://graphql.anilist.co",headers:{"Content-Type":"application/json",Accept:"application/json"},data:JSON.stringify({query:"\n  query ($id: Int, $type: MediaType) {\n    Media (idMal: $id, type: $type) {\n      id\n      idMal\n    }\n  }\n  ",variables:n})}).then((t=>{if(404===t.status)return NaN;const e=x(t.responseText);return z.log(e),e.data.Media.id}))}(this.ids.mal,this.getType()).then((e=>(e&&parseInt(e)&&(this.ids.ani=parseInt(e)),t.setValue({da:e}))))))}))}};var xt=n(58339),kt=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};class Tt extends P{constructor(){super(...arguments),this.name="MyAnimeList",this.authenticationUrl="https://myanimelist.net/login.php"}getUserObject(){return kt(this,void 0,void 0,(function*(){throw"no"}))}_getSortingOptions(){return[{icon:"sort_by_alpha",title:"Alphabetic",value:xt.storage.lang("list_sorting_alpha"),asc:!0},{icon:"history",title:xt.storage.lang("list_sorting_history"),value:"updated",asc:!0},{icon:"score",title:xt.storage.lang("list_sorting_score"),value:"score",asc:!0}]}getOrder(t){let e="";switch(t.endsWith("_asc")&&(e="-"),t.replace("_asc","")){case"alpha":return e+1;case"updated":return e+5;case"score":return e+4;default:return 1===this.status||6===this.status?this.getOrder("updated"):this.getOrder("alpha")}}getPart(){return kt(this,void 0,void 0,(function*(){throw"no"}))}prepareData(t){return kt(this,void 0,void 0,(function*(){const e=[];for(let n=0;n<t.length;n++){const i=t[n];"anime"===this.listType?e.push(yield this.fn({uid:i.anime_id,malId:i.anime_id,apiCacheKey:i.anime_id,cacheKey:i.anime_id,type:this.listType,title:i.anime_title,url:`https://myanimelist.net${i.anime_url}`,watchedEp:i.num_watched_episodes,totalEp:i.anime_num_episodes,status:i.status,score:i.score,image:i.anime_image_path,tags:i.tags,airingState:i.anime_airing_status})):e.push(yield this.fn({uid:i.manga_id,malId:i.manga_id,apiCacheKey:i.manga_id,cacheKey:i.manga_id,type:this.listType,title:i.manga_title,url:`https://myanimelist.net${i.manga_url}`,watchedEp:i.num_read_chapters,totalEp:i.manga_num_chapters,status:i.status,score:i.score,image:i.manga_image_path,tags:i.tags,airingState:i.anime_airing_status}))}return e}))}}var $t=n(58339),Nt=n(9e4),Rt=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const At=n(16245);function Pt(t,e,n){return function(t,e){let n=e.trim(),i=[];const s=t.match(/{searchterm(\(.\))?(\[[^[\]]*\])?}/);if(!s)return t;const[r,a,o]=s;return o&&(i=o.substring(1,o.length-1).split(",")),i.includes("noLowercase")||(n=n.toLowerCase()),i.includes("noSpecial")?n=n.replace(/[^a-zA-Z\d ]/g,"").replace(/ +/g," ").trim():i.includes("specialReplace")&&(n=n.replace(/[^a-zA-Z\d ]/g," ").replace(/ +/g," ").trim()),n=i.includes("noEncode")?n.replace(/\//g," "):encodeURIComponent(n),a&&(n=n.replace(/(%20| )/g,a[1])),t.replace(r,n)}(t.replace("{searchtermPlus}","{searchterm(+)}").replace("{searchtermMinus}","{searchterm(-)}").replace("{searchtermUnderscore}","{searchterm(_)}").replace("{searchtermRaw}","{searchterm[noEncode,noLowercase]}").replace("{cacheId}",n),e)}function It(t,e,n){return Rt(this,void 0,void 0,(function*(){let i=function(){const t=$t.settings.get("quicklinks").map((t=>{return(e=t)?e.custom?e:At.find((t=>t.name===e)):null;var e})).filter((t=>t));return JSON.parse(JSON.stringify(t))}();if(e)try{i=yield function(t,e,n){return Rt(this,void 0,void 0,(function*(){const i=yield function(t,e){return Rt(this,void 0,void 0,(function*(){const n=`https://api.malsync.moe/mal/${t}/${e}`;return $t.request.xhr("GET",n).then((t=>Rt(this,void 0,void 0,(function*(){if(Nt.log("malSync response",t),400===t.status)return{};if(200===t.status){const e=JSON.parse(t.responseText);return e&&e.Sites?e.Sites:{}}throw new Error("malsync offline")}))))}))}(e,n);return t.map((t=>(t.database&&i[t.database]&&(t.databaseLinks=i[t.database]),t)))}))}(i,t,e)}catch(t){Nt.m("API Problem").error(t)}return function(t,e,n,i){return t.filter((t=>t.search&&t.search[e])).map((t=>{const s=[];let r;return t.databaseLinks?(r="link",Object.values(t.databaseLinks).forEach((t=>{s.push({name:t.title,url:t.url})}))):"home"===t.search[e]?(r="home",s.push({name:"Homepage",url:t.domain})):(r="search",s.push({name:"Quicksearch",url:Pt(t.search[e],n,i),fn:n=>Pt(t.search[e],n,i)})),{name:t.name,domain:t.domain,group:r,links:s}}))}(i,t,n,e)}))}var Lt=n(9375),Dt=n(9e4),Ot=n(58339),Ct=n(19947),Mt=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};class Ut{constructor(t){let e;this.url=t,this.page=null,this.id=null,this.type=null,this.username=null,t.indexOf("myanimelist.net/anime.php")>-1&&(e=`/anime/${Lt.urlParam(this.url,"id")}`,window.history.replaceState(null,null,e),this.url=Lt.absoluteLink(e,"https://myanimelist.net")),t.indexOf("myanimelist.net/manga.php")>-1&&(e=`/manga/${Lt.urlParam(this.url,"id")}`,window.history.replaceState(null,null,e),this.url=Lt.absoluteLink(e,"https://myanimelist.net"));const n=Lt.urlPart(this.url,3);"anime"!==n&&"manga"!==n||(this.page="detail",this.id=Number(Lt.urlPart(this.url,4)),this.type=n),"animelist"!==n&&"mangalist"!==n||(this.page="bookmarks",this.username=Lt.urlPart(this.url,4),this.type="animelist"===n?"anime":"manga"),"character"===n&&(this.page="character"),"people"===n&&(this.page="people"),"search"===n&&(this.page="search")}init(){return Mt(this,void 0,void 0,(function*(){switch(yield(0,vt.waitForPageToBeVisible)(),Dt.log(this),this.page){case"detail":this.thumbnails(),this.streamingUI(),this.malToKiss(),this.related(),this.friendScore(),this.relatedTag();break;case"bookmarks":$(document).ready((()=>{$("#mal_cs_powered").length?this.page="classic":this.page="modern",this.init()}));break;case"modern":case"classic":this.bookmarks();break;case"character":this.relatedTag();case"people":case"search":this.thumbnails();break;default:Dt.log("This page has no scipt")}}))}thumbnails(){if(Dt.log("Lazyloaded Images"),this.url.indexOf("/pics")>-1)return;if(this.url.indexOf("/pictures")>-1)return;if("0"===Ot.settings.get("malThumbnail"))return;const t=parseInt(Ot.settings.get("malThumbnail")),e=Math.floor(t/144*100),n=t+4,i=e+4;Ot.storage.addStyle(`.picSurround img:not(.noKal){height: ${t}px !important; width: ${e}px !important;}`),Ot.storage.addStyle(".picSurround img.lazyloaded.kal{width: auto !important;}"),Ot.storage.addStyle(`.picSurround:not(.noKal) a{height: ${n}px; width: ${i}px; overflow: hidden; display: flex; justify-content: center;}`),Ot.storage.addStyle(`.picSurround img[src*="userimages"]{max-width: ${e}px !important}`);let s=0;try{$(window).load((function(){r()}))}catch(t){Dt.info(t)}try{window.onload=function(){r()}}catch(t){Dt.info(t)}try{document.onload=function(){r()}}catch(t){Dt.info(t)}try{$(document).ready((function(){r()}))}catch(t){Dt.info(t)}function r(){if(s)return;s=1;const t=document.querySelectorAll(".picSurround img:not(.kal)");let e="";for(let n=0;n<t.length;n++){const i=/\/r\/\d*x\d*/g;e=t[n].hasAttribute("data-src")?t[n].getAttribute("data-src"):t[n].getAttribute("src"),i.test(e)||/voiceactors.*v.jpg$/g.test(e)||-1!==e.indexOf("questionmark")?(e=Lt.handleMalImages(e),e.indexOf("100x140")>-1||(t[n].setAttribute("data-src",e),e=e.replace(/v.jpg$/g,".jpg"),t[n].setAttribute("data-srcset",e.replace(i,"")),t[n].classList.add("lazyload")),t[n].classList.add("kal")):(t[n].closest(".picSurround").classList.add("noKal"),t[n].classList.add("kal"),t[n].classList.add("noKal"))}}}bookmarksHDimages(){const t=document.querySelectorAll('img[src*="/96x136/"]');for(let e=0;e<t.length;e++){const n=/\/r\/\d*x\d*/g,i=t[e].getAttribute("src");t[e].setAttribute("src",i.replace(n,""))}}setEpPrediction(t){t&&t.isAiring()&&t.getCurrentEpisode()&&($(".mal-sync-pre-remove, .mal-sync-ep-pre").remove(),$("#addtolist").prev().before(Ct.html(`<div class="mal-sync-pre-remove">${t.getAutoText()}</div>`)),$('[id="curEps"], [id="totalChaps"]').before(Ct.html(`<span class="mal-sync-ep-pre" title="${t.getAutoText()}">[<span style="border-bottom: 1px dotted ${t.getColor()};">${t.getCurrentEpisode()}</span>]</span> `)))}getImage(){return $(".leftside img").first().attr("src")||""}getTitle(){return($('meta[property="og:title"]').first().attr("content").trim()||"").replace(/(^watch|episode \d*$)/gi,"").trim()}malToKiss(){return Mt(this,void 0,void 0,(function*(){$(document).ready((()=>{Dt.log("malToKiss");const t=this.getTitle();It(this.type,this.id,t).then((t=>{let e="";t.forEach((t=>{let n="";t.links.forEach((t=>{n+=`<div class="mal_links" style="word-break: break-all;"><a target="_blank" href="${t.url}">${t.name}</a></div>`})),e+=`<h2 id="${t.name}Links" class="mal_links"><img src="${Lt.favicon(t.domain)}"> ${t.name}<span title="${t.name}" class="remove-mal-sync" style="float: right; font-weight: 100; line-height: 2; cursor: pointer; color: grey;">x</span></h2>`,e+=n,e+='<br class="mal_links" />'})),"below"===Ot.settings.get("quicklinksPosition")?$('h2:contains("External Links")').length?$('h2:contains("External Links")').before(Ct.html(e)):$('h2:contains("Information")').parent().find("div.mt16").last().before(Ct.html(e)):$('h2:contains("Information")').before(Ct.html(e)),$(".remove-mal-sync").click((function(){const t=$(this).attr("title");!function(t){const e=$t.settings.get("quicklinks");$t.settings.set("quicklinks",function(t,e){return e?t.filter((t=>!(!t||t===e||"object"==typeof t&&t.name===e))):t}(e,t))}(String(t)),window.location.reload()}))}))}))}))}streamingUI(){return Mt(this,void 0,void 0,(function*(){Dt.log("Streaming UI");const t=new St(this.url);try{yield t.update()}catch(t){return void Dt.error("Could not get Single",t)}this.pageRelation(t);const e=t.getStreamingUrl();e&&$(document).ready((function(){return Mt(this,void 0,void 0,(function*(){$(".breadcrumb").first().append(Ct.html(`\n        <div class="data title progress" id="mal-sync-stream-div" style="padding-left: 5px; display: inline-block; position: relative; top: -12px; height: 0px;">\n          <a class="mal-sync-stream" title="${e?e.split("/")[2]:""}" target="_blank" style="margin: 0 0; display: inline-block; height: 0;" href="${e}">\n            <img style="display: block;" src="${Lt.favicon(e?e.split("/")[2]:"")}">\n          </a>\n        </div>`));const n=t.getResumeWatching(),i=t.getContinueWatching();Dt.log("Resume",n,"Continue",i),i&&i.ep===t.getEpisode()+1?$("#mal-sync-stream-div").append(Ct.html(`<a class="nextStream" title="${Ot.storage.lang(`overview_Continue_${t.getType()}`)}" target="_blank" style="margin: 0 5px 0 0; color: #BABABA; display: inline-block; height: 0;" href="${i.url}">\n              <img style="display: block;" src="${Ot.storage.assetUrl("double-arrow-16px.png")}" width="16" height="16">\n            </a>`)):n&&n.ep===t.getEpisode()&&$("#mal-sync-stream-div").append(Ct.html(`<a class="resumeStream" title="${Ot.storage.lang(`overview_Resume_Episode_${t.getType()}`)}" target="_blank" style="margin: 0 5px 0 0; color: #BABABA; display: inline-block; height: 0;" href="${n.url}">\n              <img style="display: block;" src="${Ot.storage.assetUrl("arrow-16px.png")}" width="16" height="16">\n            </a>`))}))})),yield t.initProgress(),this.setEpPrediction(t.getProgress()),setInterval((()=>{this.setEpPrediction(t.getProgress())}),6e4)}))}pageRelation(t){return Mt(this,void 0,void 0,(function*(){yield t.fillRelations(),t.getPageRelations().forEach((t=>{$("#horiznav_nav > ul").append(Ct.html(`\n          <li style="position: relative; height: 12px; display: inline-block;">\n            <a href="${t.link}" target="_blank" title="${t.name}" class="link" style="position: absolute; bottom: -5px; width: 16px; text-align: center;">\n              <img src="${t.icon}" width="16" width="16">\n            </a>\n          </li>\n        `))}))}))}bookmarks(){Dt.log(`Bookmarks [${this.username}][${this.page}]`);const t=this,e=new q(7,this.type),n=new Tt(7,this.type);let i;if("modern"===this.page)i={bookReady(e){Lt.waitUntilTrue((function(){return"none"===$("#loading-spinner").css("display")}),(function(){return Mt(this,void 0,void 0,(function*(){e(yield n.prepareData($.parseJSON($(".list-table").attr("data-items")))),Lt.changeDetect((()=>{$(".tags span a").each((function(e){if(void 0!==Lt.getUrlFromTags($(this).text())){const e=$(this).parent().parent().parent().parent();$(this).parent().remove(),s(t.type,e.find(".title .link").first().attr("href"),$(this).text(),parseInt(e.find(".progress .link").first().text()),e.find(".title .link").first().attr("href").split("/")[1])}}))}),(()=>$(".list-table > *").length))}))}))},getElement:t=>$(`.list-item a[href^="${t}"]`).parent().parent(".list-table-data"),streamingSelector:".data.title .link",cleanTags(){$(".tags span a").each((function(t){void 0!==Lt.getUrlFromTags($(this).text())&&$(this).parent().remove()}))},predictionPos(t,e){t.find(".data.progress span, .data.chapter span").first().after(Ct.html(e))}};else{if("classic"!==this.page)return void Dt.error("Bookmark type unknown");i={bookReady(t){e.getCompleteList().then((e=>{t(e)})).catch((t=>{Dt.error(t),e.flashmError(t)}))},getElement:t=>$(`a[href^="${t}"]`),streamingSelector:"span",cleanTags(){$('span[id^="tagLinks"] a').each((function(t){void 0!==Lt.getUrlFromTags($(this).text())&&$(this).remove()}))},predictionPos(t,e){t.parent().parent().find('span[id^="epText"] a span, span[id^="chap"]').first().after(Ct.html(e))}}}function s(t,e,n,s,r){return Mt(this,void 0,void 0,(function*(){const a=yield Lt.getEntrySettings(t,r,n);if(a&&a.u){const t=i.getElement(e);t.find(i.streamingSelector).after(Ct.html(`\n          <a class="mal-sync-stream" title="${a.u.split("/")[2]}" target="_blank" style="margin: 0 0;" href="${a.u}">\n            <img src="${Lt.favicon(a.u.split("/")[2])}">\n          </a>`));const n=a.r,r=a.c;Dt.log("Resume",n,"Continue",r),r&&r.ep===s+1?t.find(".mal-sync-stream").after(Ct.html(`<a class="nextStream" title="Continue watching" target="_blank" style="margin: 0 5px 0 0; color: #BABABA;" href="${r.url}">\n              <img src="${Ot.storage.assetUrl("double-arrow-16px.png")}" width="16" height="16">\n            </a>`)):n&&n.ep===s&&t.find(".mal-sync-stream").after(Ct.html(`<a class="resumeStream" title="Resume watching" target="_blank" style="margin: 0 5px 0 0; color: #BABABA;" href="${n.url}">\n              <img src="${Ot.storage.assetUrl("arrow-16px.png")}" width="16" height="16">\n            </a>`))}}))}i.bookReady((function(e){t.bookmarksHDimages(),$.each(e,(function(t,e){return Mt(this,void 0,void 0,(function*(){const t=e.url.replace("https://myanimelist.net",""),{type:n}=e;if(s(n,t,e.tags,parseInt(e.watchedEp),e.cacheKey),yield e.fn.initProgress(),e.fn.progress&&e.fn.progress.isAiring()&&e.fn.progress.getCurrentEpisode()){const n=i.getElement(t);i.predictionPos(n,`<span class="mal-sync-ep-pre" title="${e.fn.progress.getAutoText()}">[<span style="border-bottom: 1px dotted ${e.fn.progress.getColor()};">${e.fn.progress.getCurrentEpisode()}</span>]</span>`)}}))})),i.cleanTags()}))}related(){$(document).ready((function(){$(".anime_detail_related_anime a").each((function(){const t=$(this),e=Lt.absoluteLink(t.attr("href"),"https://myanimelist.net");void 0!==e&&Ot.request.database("entry",{id:Number(Lt.urlPart(e,4)),type:Lt.urlPart(e,3)}).then((e=>{if(e){const n=Lt.statusTag(e.status,e.type,e.uid);n&&t.append(Ct.html(n))}}))}))}))}relatedTag(){const t=this;$(document).ready((function(){$("a.button_edit").each((function(){const e=$(this),n=$(this).attr("href")||"",i=Lt.urlPart(n,4),s=Lt.urlPart(n,5),r=e.attr("title");if(void 0!==r&&r){const n=String(Lt.statusTag(r,i,s));"detail"===t.page?e.parent().find("> a").first().after(Ct.html(n)):e.parent().parent().find("> a").after(Ct.html(n)),e.remove()}}))}))}friendScore(){Ot.settings.get("friendScore")&&$(document).ready((function(){const t=$("h2:contains(Reviews)").prev();if(!t.length)return;const e=$("#horiznav_nav li a").first();if(!e.is("#horiznav_nav li a.horiznav_active"))return;let n=e.attr("href");void 0!==n&&n&&(n=Lt.absoluteLink(n,"https://myanimelist.net"),Ot.request.xhr("GET",`${n}/stats`).then((e=>{const n=$("a[name=members]",$(e.responseText).children());if(!n)return;const i=n.nextAll();let s="";i.each(((t,e)=>{s+=e.outerHTML})),i.length>1&&i.find('a:contains("All Members")').length&&(t.before(Ct.html(n.html())).before(Ct.html(s)).before(Ct.html("<br>")),$('a:contains("All Members")').after(Ct.html(' | <span id="mal-sync-removeFriends" title="remove" style="cursor: pointer; color: #1d439b;">X</span>')),$("#mal-sync-removeFriends").click((function(){Ot.settings.set("friendScore",!1),window.location.reload()})))})))}))}}var jt=n(58339),Bt=n(19947),Ft=n(9e4),Gt=n(9375),Yt=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};function qt(){return Yt(this,void 0,void 0,(function*(){const t=yield jt.storage.get("timestampUpdate/firebaseNotification");(void 0===t||Bt.$.now()-t>6e5)&&(yield Wt(),jt.storage.set("timestampUpdate/firebaseNotification",Bt.$.now()))}))}function Wt(){return Yt(this,void 0,void 0,(function*(){Ft.log("checkNotifications");const t=yield jt.request.xhr("GET","https://kissanimelist.firebaseio.com/Data2/Notification/Current.json"),e=parseInt(JSON.parse(t.responseText));Number.isNaN(e)&&Ft.error("Could not read current Notification number"),Ft.log("Current Notification",e);const n=parseInt(yield jt.storage.get("firebaseNotification")),i=n+1;if(void 0===n||Number.isNaN(n))return void jt.storage.set("firebaseNotification",e);if(e<i)return void Ft.log("No new notifications");const s=`https://kissanimelist.firebaseio.com/Data2/Notification/list/N${i}.json`,r=yield jt.request.xhr("GET",s);if(!r)return;const a=JSON.parse(r.responseText);if(!a)return Ft.info("Notification empty",r.responseText),void jt.storage.set("firebaseNotification",i).then((function(){Wt()}));Bt.$(document).ready((function(){const t=Gt.flashm(`<div style="text-align: left;">${a}</div><button class="okChangelog" style="background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px;cursor: pointer;">Close</button>`,{permanent:!0,position:"top"});t.find(".okChangelog").click((function(){t.remove(),jt.storage.set("firebaseNotification",i).then((function(){Wt()}))}))}))}))}class zt extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}const Ht=Object.prototype.toString;function Kt(t){switch(Ht.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return ie(t,Error)}}function Vt(t,e){return Ht.call(t)===`[object ${e}]`}function Jt(t){return Vt(t,"ErrorEvent")}function Xt(t){return Vt(t,"DOMError")}function Zt(t){return Vt(t,"String")}function Qt(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function te(t){return Vt(t,"Object")}function ee(t){return"undefined"!=typeof Event&&ie(t,Event)}function ne(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function ie(t,e){try{return t instanceof e}catch(t){return!1}}var se;function re(t){return new oe((e=>{e(t)}))}function ae(t){return new oe(((e,n)=>{n(t)}))}!function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(se||(se={}));class oe{__init(){this._state=se.PENDING}__init2(){this._handlers=[]}constructor(t){oe.prototype.__init.call(this),oe.prototype.__init2.call(this),oe.prototype.__init3.call(this),oe.prototype.__init4.call(this),oe.prototype.__init5.call(this),oe.prototype.__init6.call(this);try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}then(t,e){return new oe(((n,i)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(t){i(t)}else n(e)},t=>{if(e)try{n(e(t))}catch(t){i(t)}else i(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new oe(((e,n)=>{let i,s;return this.then((e=>{s=!1,i=e,t&&t()}),(e=>{s=!0,i=e,t&&t()})).then((()=>{s?n(i):e(i)}))}))}__init3(){this._resolve=t=>{this._setResult(se.RESOLVED,t)}}__init4(){this._reject=t=>{this._setResult(se.REJECTED,t)}}__init5(){this._setResult=(t,e)=>{this._state===se.PENDING&&(ne(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===se.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(this._state===se.RESOLVED&&t[1](this._value),this._state===se.REJECTED&&t[2](this._value),t[0]=!0)}))}}}const le=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ce(t,e=!1){const{host:n,path:i,pass:s,port:r,projectId:a,protocol:o,publicKey:l}=t;return`${o}://${l}${e&&s?`:${s}`:""}@${n}${r?`:${r}`:""}/${i?`${i}/`:i}${a}`}function ue(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}var he=n(71235);const de=(0,he.Rf)(),me=80;function pe(t,e={}){try{let n=t;const i=5,s=[];let r=0,a=0;const o=" > ",l=o.length;let c;const u=Array.isArray(e)?e:e.keyAttrs,h=!Array.isArray(e)&&e.maxStringLength||me;for(;n&&r++<i&&(c=fe(n,u),!("html"===c||r>1&&a+s.length*l+c.length>=h));)s.push(c),a+=c.length,n=n.parentNode;return s.reverse().join(o)}catch(t){return"<unknown>"}}function fe(t,e){const n=t,i=[];let s,r,a,o,l;if(!n||!n.tagName)return"";i.push(n.tagName.toLowerCase());const c=e&&e.length?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(c&&c.length)c.forEach((t=>{i.push(`[${t[0]}="${t[1]}"]`)}));else if(n.id&&i.push(`#${n.id}`),s=n.className,s&&Zt(s))for(r=s.split(/\s+/),l=0;l<r.length;l++)i.push(`.${r[l]}`);const u=["type","name","title","alt"];for(l=0;l<u.length;l++)a=u[l],o=n.getAttribute(a),o&&i.push(`[${a}="${o}"]`);return i.join("")}function ge(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.substr(0,e)}...`}function _e(t,e){if(!Array.isArray(t))return"";const n=[];for(let e=0;e<t.length;e++){const i=t[e];try{n.push(String(i))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function ye(t,e=[],n=!1){return e.some((e=>function(t,e,n=!1){return!!Zt(t)&&(Vt(e,"RegExp")?e.test(t):!!Zt(e)&&(n?t===e:t.includes(e)))}(t,e,n)))}function ve(t,e,n){if(!(e in t))return;const i=t[e],s=n(i);if("function"==typeof s)try{we(s,i)}catch(t){}t[e]=s}function be(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function we(t,e){const n=e.prototype||{};t.prototype=e.prototype=n,be(t,"__sentry_original__",e)}function Ee(t){return t.__sentry_original__}function Se(t){if(Kt(t))return{message:t.message,name:t.name,stack:t.stack,...ke(t)};if(ee(t)){const e={type:t.type,target:xe(t.target),currentTarget:xe(t.currentTarget),...ke(t)};return"undefined"!=typeof CustomEvent&&ie(t,CustomEvent)&&(e.detail=t.detail),e}return t}function xe(t){try{return"undefined"!=typeof Element&&ie(t,Element)?pe(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}}function ke(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function Te(t,e=40){const n=Object.keys(Se(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return ge(n[0],e);for(let t=n.length;t>0;t--){const i=n.slice(0,t).join(", ");if(!(i.length>e))return t===n.length?i:ge(i,e)}return""}function $e(t){return Ne(t,new Map)}function Ne(t,e){if(te(t)){const n=e.get(t);if(void 0!==n)return n;const i={};e.set(t,i);for(const n of Object.keys(t))void 0!==t[n]&&(i[n]=Ne(t[n],e));return i}if(Array.isArray(t)){const n=e.get(t);if(void 0!==n)return n;const i=[];return e.set(t,i),t.forEach((t=>{i.push(Ne(t,e))})),i}return t}const Re=50;function Ae(...t){const e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,n=0)=>{const i=[];for(const s of t.split("\n").slice(n)){const t=s.replace(/\(error: (.*)\)/,"$1");for(const n of e){const e=n(t);if(e){i.push(e);break}}}return function(t){if(!t.length)return[];let e=t;const n=e[0].function||"",i=e[e.length-1].function||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==i.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,Re).map((t=>({...t,filename:t.filename||e[0].filename,function:t.function||"?"}))).reverse()}(i)}}const Pe="<anonymous>";function Ie(t){try{return t&&"function"==typeof t&&t.name||Pe}catch(t){return Pe}}function Le(t,e=1/0,n=1/0){try{return Oe("",t,e,n)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function De(t,e=3,n=102400){const i=Le(t,e);return function(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}(i)>n?De(t,e-1,n):i}function Oe(t,e,i=1/0,s=1/0,r=function(){const t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(n){if(t)return!!e.has(n)||(e.add(n),!1);for(let t=0;t<e.length;t++)if(e[t]===n)return!0;return e.push(n),!1},function(n){if(t)e.delete(n);else for(let t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}]}()){const[a,o]=r;if(null===e||["number","boolean","string"].includes(typeof e)&&("number"!=typeof(l=e)||l==l))return e;var l;const c=function(t,e){try{return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==n.g&&e===n.g?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":function(t){return te(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?`[Function: ${Ie(e)}]`:"symbol"==typeof e?`[${String(e)}]`:"bigint"==typeof e?`[BigInt: ${String(e)}]`:`[object ${Object.getPrototypeOf(e).constructor.name}]`}catch(t){return`**non-serializable** (${t})`}}(t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;if(0===i)return c.replace("object ","");if(a(e))return"[Circular ~]";const u=e;if(u&&"function"==typeof u.toJSON)try{return Oe("",u.toJSON(),i-1,s,r)}catch(t){}const h=Array.isArray(e)?[]:{};let d=0;const m=Se(e);for(const t in m){if(!Object.prototype.hasOwnProperty.call(m,t))continue;if(d>=s){h[t]="[MaxProperties ~]";break}const e=m[t];h[t]=Oe(t,e,i-1,s,r),d++}return o(e),h}function Ce(t,e=[]){return[t,e]}function Me(t,e){const[n,i]=t;return[n,[...i,e]]}function Ue(t,e){t[1].forEach((t=>{const n=t[0].type;e(t,n)}))}function je(t,e){return(e||new TextEncoder).encode(t)}function Be(t,e){const[n,i]=t;let s=JSON.stringify(n);function r(t){"string"==typeof s?s="string"==typeof t?s+t:[je(s,e),t]:s.push("string"==typeof t?je(t,e):t)}for(const t of i){const[e,n]=t;if(r(`\n${JSON.stringify(e)}\n`),"string"==typeof n||n instanceof Uint8Array)r(n);else{let t;try{t=JSON.stringify(n)}catch(e){t=JSON.stringify(Le(n))}r(t)}}return"string"==typeof s?s:function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let i=0;for(const e of t)n.set(e,i),i+=e.length;return n}(s)}function Fe(t,e){const n="string"==typeof t.data?je(t.data,e):t.data;return[$e({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const Ge={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay_event",replay_recording:"replay_recording"};function Ye(t){return Ge[t]}function qe(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}const We=6e4;const ze="Sentry Logger ",He=["debug","info","warn","error","log","assert","trace"];function Ke(t){if(!("console"in he.n2))return t();const e=he.n2.console,n={};He.forEach((t=>{const i=e[t]&&e[t].__sentry_original__;t in e&&i&&(n[t]=e[t],e[t]=i)}));try{return t()}finally{Object.keys(n).forEach((t=>{e[t]=n[t]}))}}function Ve(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?He.forEach((n=>{e[n]=(...e)=>{t&&Ke((()=>{he.n2.console[n](`${ze}[${n}]:`,...e)}))}})):He.forEach((t=>{e[t]=()=>{}})),e}let Je;Je="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,he.YO)("logger",Ve):Ve();const Xe=30;function Ze(t,e,n=function(t){const e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(i){if(!(void 0===t||e.length<t))return ae(new zt("Not adding Promise because buffer limit was reached."));const s=i();return-1===e.indexOf(s)&&e.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(t){return new oe(((n,i)=>{let s=e.length;if(!s)return n(!0);const r=setTimeout((()=>{t&&t>0&&n(!1)}),t);e.forEach((t=>{re(t).then((()=>{--s||(clearTimeout(r),n(!0))}),i)}))}))}}}(t.bufferSize||Xe)){let i={};return{send:function(s){const r=[];if(Ue(s,((e,n)=>{const s=Ye(n);if(function(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}(i,s)){const i=Qe(e,n);t.recordDroppedEvent("ratelimit_backoff",s,i)}else r.push(e)})),0===r.length)return re();const a=Ce(s[0],r),o=e=>{Ue(a,((n,i)=>{const s=Qe(n,i);t.recordDroppedEvent(e,Ye(i),s)}))};return n.add((()=>e({body:Be(a,t.textEncoder)}).then((t=>{void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),i=function(t,{statusCode:e,headers:n},i=Date.now()){const s={...t},r=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(r)for(const t of r.trim().split(",")){const[e,n]=t.split(":",2),r=parseInt(e,10),a=1e3*(isNaN(r)?60:r);if(n)for(const t of n.split(";"))s[t]=i+a;else s.all=i+a}else a?s.all=i+function(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const i=Date.parse(`${t}`);return isNaN(i)?We:i-e}(a,i):429===e&&(s.all=i+6e4);return s}(i,t)}),(t=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error("Failed while sending event:",t),o("network_error")})))).then((t=>t),(t=>{if(t instanceof zt)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error("Skipped sending event because buffer is full."),o("queue_overflow"),re();throw t}))},flush:t=>n.drain(t)}}function Qe(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}const tn=(0,he.Rf)();function en(){if(!("fetch"in tn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(t){return!1}}function nn(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function sn(){const t=he.n2,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&n())>>t/4).toString(16)))}function rn(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function an(t){const{message:e,event_id:n}=t;if(e)return e;const i=rn(t);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function on(t,e,n){const i=t.exception=t.exception||{},s=i.values=i.values||[],r=s[0]=s[0]||{};r.value||(r.value=e||""),r.type||(r.type=n||"Error")}function ln(t,e){const n=rn(t);if(!n)return;const i=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...i,...e},e&&"data"in e){const t={...i&&i.data,...e.data};n.mechanism.data=t}}function cn(t){if(t&&t.__sentry_captured__)return!0;try{be(t,"__sentry_captured__",!0)}catch(t){}return!1}function un(t){return Array.isArray(t)?t:[t]}var hn=n(21170),dn=n(72176);function mn(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||(0,hn.ph)(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:sn()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}class pn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(t){const e=new pn;return t&&(e._breadcrumbs=[...t._breadcrumbs],e._tags={...t._tags},e._extra={...t._extra},e._contexts={...t._contexts},e._user=t._user,e._level=t._level,e._span=t._span,e._session=t._session,e._transactionName=t._transactionName,e._fingerprint=t._fingerprint,e._eventProcessors=[...t._eventProcessors],e._requestSession=t._requestSession,e._attachments=[...t._attachments],e._sdkProcessingMetadata={...t._sdkProcessingMetadata}),e}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&mn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if("function"==typeof t){const e=t(this);return e instanceof pn?e:this}return t instanceof pn?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):te(t)&&(this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const i={timestamp:(0,hn.yW)(),...t};return this._breadcrumbs=[...this._breadcrumbs,i].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,e={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const e=this._span.transaction&&this._span.transaction.name;e&&(t.tags={transaction:e,...t.tags})}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...fn(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}_notifyEventProcessors(t,e,n,i=0){return new oe(((s,r)=>{const a=t[i];if(null===e||"function"!=typeof a)s(e);else{const o=a({...e},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.id&&null===o&&Je.log(`Event processor "${a.id}" dropped event`),ne(o)?o.then((e=>this._notifyEventProcessors(t,e,n,i+1).then(s))).then(null,r):this._notifyEventProcessors(t,o,n,i+1).then(s).then(null,r)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?un(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function fn(){return(0,he.YO)("globalEventProcessors",(()=>[]))}function gn(t){fn().push(t)}const _n=4,yn=100;class vn{__init(){this._stack=[{}]}constructor(t,e=new pn,n=_n){this._version=n,vn.prototype.__init.call(this),this.getStackTop().scope=e,t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=pn.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(t){const e=this.pushScope();try{t(e)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:sn(),i=new Error("Sentry syntheticException");return this._withClient(((s,r)=>{s.captureException(t,{originalException:t,syntheticException:i,...e,event_id:n},r)})),n}captureMessage(t,e,n){const i=this._lastEventId=n&&n.event_id?n.event_id:sn(),s=new Error(t);return this._withClient(((r,a)=>{r.captureMessage(t,e,{originalException:t,syntheticException:s,...n,event_id:i},a)})),i}captureEvent(t,e){const n=e&&e.event_id?e.event_id:sn();return"transaction"!==t.type&&(this._lastEventId=n),this._withClient(((i,s)=>{i.captureEvent(t,{...e,event_id:n},s)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:i}=this.getStackTop();if(!n||!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:r=yn}=i.getOptions&&i.getOptions()||{};if(r<=0)return;const a={timestamp:(0,hn.yW)(),...t},o=s?Ke((()=>s(a,e))):a;null!==o&&n.addBreadcrumb(o,r)}setUser(t){const e=this.getScope();e&&e.setUser(t)}setTags(t){const e=this.getScope();e&&e.setTags(t)}setExtras(t){const e=this.getScope();e&&e.setExtras(t)}setTag(t,e){const n=this.getScope();n&&n.setTag(t,e)}setExtra(t,e){const n=this.getScope();n&&n.setExtra(t,e)}setContext(t,e){const n=this.getScope();n&&n.setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();e&&n&&t(e)}run(t){const e=wn(this);try{t(this)}finally{wn(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){return this._callExtensionMethod("startTransaction",t,e)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop(),e=t&&t.scope,n=e&&e.getSession();n&&function(t,e){let n={};"ok"===t.status&&(n={status:"exited"}),mn(t,n)}(n),this._sendSessionUpdate(),e&&e.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:i,environment:s}=n&&n.getOptions()||{},{userAgent:r}=he.n2.navigator||{},a=function(t){const e=(0,hn.ph)(),n={sid:sn(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return $e({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&mn(n,t),n}({release:i,environment:s,...e&&{user:e.getUser()},...r&&{userAgent:r},...t});if(e){const t=e.getSession&&e.getSession();t&&"ok"===t.status&&mn(t,{status:"exited"}),this.endSession(),e.setSession(a)}return a}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop();if(!t)return;const n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_withClient(t){const{scope:e,client:n}=this.getStackTop();n&&t(n,e)}_callExtensionMethod(t,...e){const n=bn().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function bn(){return he.n2.__SENTRY__=he.n2.__SENTRY__||{extensions:{},hub:void 0},he.n2}function wn(t){const e=bn(),n=xn(e);return kn(e,t),n}function En(){const t=bn();return Sn(t)&&!xn(t).isOlderThan(_n)||kn(t,new vn),(0,dn.KV)()?function(t){try{const e=bn().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return xn(t);if(!Sn(n)||xn(n).isOlderThan(_n)){const e=xn(t).getStackTop();kn(n,new vn(e.client,pn.clone(e.scope)))}return xn(n)}catch(e){return xn(t)}}(t):xn(t)}function Sn(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function xn(t){return(0,he.YO)("hub",(()=>new vn),t)}function kn(t,e){return!!t&&((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0)}const Tn=he.n2;let $n,Nn=0;function Rn(){return Nn>0}function An(t,e={},n){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if(Ee(t))return t}catch(e){return t}const i=function(){const i=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const s=i.map((t=>An(t,e)));return t.apply(this,s)}catch(t){throw Nn++,setTimeout((()=>{Nn--})),s=n=>{var s;n.addEventProcessor((t=>(e.mechanism&&(on(t,void 0,void 0),ln(t,e.mechanism)),t.extra={...t.extra,arguments:i},t))),s=t,En().captureException(s,{captureContext:undefined})},En().withScope(s),t}var s};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}catch(t){}we(i,t),be(t,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:()=>t.name})}catch(t){}return i}function Pn(t,e=function(){if($n)return $n;if(nn(Tn.fetch))return $n=Tn.fetch.bind(Tn);const t=Tn.document;let e=Tn.fetch;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const i=n.contentWindow;i&&i.fetch&&(e=i.fetch),t.head.removeChild(n)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return $n=e.bind(Tn)}()){return Ze(t,(function(n){const i={body:n.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n.body.length<=65536,...t.fetchOptions};try{return e(t.url,i).then((t=>({statusCode:t.status,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")}})))}catch(t){return $n=void 0,ae(t)}}))}const In=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class Ln{static __initStatic(){this.id="InboundFilters"}__init(){this.name=Ln.id}constructor(t={}){this._options=t,Ln.prototype.__init.call(this)}setupOnce(t,e){const n=t=>{const n=e();if(n){const e=n.getIntegration(Ln);if(e){const i=n.getClient(),s=i?i.getOptions():{},r=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...In],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(e._options,s);return function(t,e){return e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${an(t)}`),!0):function(t,e){return!(!e||!e.length)&&function(t){if(t.message)return[t.message];if(t.exception)try{const{type:e="",value:n=""}=t.exception.values&&t.exception.values[0]||{};return[`${n}`,`${e}: ${n}`]}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error(`Cannot extract message for event ${an(t)}`),[]}return[]}(t).some((t=>ye(t,e)))}(t,e.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${an(t)}`),!0):function(t,e){if(!e||!e.length)return!1;const n=Dn(t);return!!n&&ye(n,e)}(t,e.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${an(t)}.\nUrl: ${Dn(t)}`),!0):!function(t,e){if(!e||!e.length)return!0;const n=Dn(t);return!n||ye(n,e)}(t,e.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${an(t)}.\nUrl: ${Dn(t)}`),!0)}(t,r)?null:t}}return t};n.id=this.name,t(n)}}function Dn(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(e):null}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error(`Cannot extract url for event ${an(t)}`),null}}let On;Ln.__initStatic();class Cn{constructor(){Cn.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Cn.id}setupOnce(){On=Function.prototype.toString,Function.prototype.toString=function(...t){const e=Ee(this)||this;return On.apply(e,t)}}}Cn.__initStatic();const Mn=[];function Un(t){const e=t.defaultIntegrations||[],n=t.integrations;let i;e.forEach((t=>{t.isDefaultInstance=!0})),i=Array.isArray(n)?[...e,...n]:"function"==typeof n?un(n(e)):e;const s=function(t){const e={};return t.forEach((t=>{const{name:n}=t,i=e[n];i&&!i.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)})),Object.values(e)}(i),r=s.findIndex((t=>"Debug"===t.name));if(-1!==r){const[t]=s.splice(r,1);s.push(t)}return s}const jn=(0,he.Rf)(),Bn={},Fn={};function Gn(t,e){Bn[t]=Bn[t]||[],Bn[t].push(e),function(t){if(!Fn[t])switch(Fn[t]=!0,t){case"console":"console"in jn&&He.forEach((function(t){t in jn.console&&ve(jn.console,t,(function(e){return function(...n){Yn("console",{args:n,level:t}),e&&e.apply(jn.console,n)}}))}));break;case"dom":!function(){if(!("document"in jn))return;const t=Yn.bind(null,"dom"),e=Jn(t,!0);jn.document.addEventListener("click",e,!1),jn.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{const n=jn[e]&&jn[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ve(n,"addEventListener",(function(e){return function(n,i,s){if("click"===n||"keypress"==n)try{const i=this,r=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},a=r[n]=r[n]||{refCount:0};if(!a.handler){const i=Jn(t);a.handler=i,e.call(this,n,i,s)}a.refCount++}catch(t){}return e.call(this,n,i,s)}})),ve(n,"removeEventListener",(function(t){return function(e,n,i){if("click"===e||"keypress"==e)try{const n=this,s=n.__sentry_instrumentation_handlers__||{},r=s[e];r&&(r.refCount--,r.refCount<=0&&(t.call(this,e,r.handler,i),r.handler=void 0,delete s[e]),0===Object.keys(s).length&&delete n.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,i)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in jn))return;const t=XMLHttpRequest.prototype;ve(t,"open",(function(t){return function(...e){const n=this,i=e[1],s=n.__sentry_xhr__={method:Zt(e[0])?e[0].toUpperCase():e[0],url:e[1]};Zt(i)&&"POST"===s.method&&i.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const r=function(){if(4===n.readyState){try{s.status_code=n.status}catch(t){}Yn("xhr",{args:e,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?ve(n,"onreadystatechange",(function(t){return function(...e){return r(),t.apply(n,e)}})):n.addEventListener("readystatechange",r),t.apply(n,e)}})),ve(t,"send",(function(t){return function(...e){return this.__sentry_xhr__&&void 0!==e[0]&&(this.__sentry_xhr__.body=e[0]),Yn("xhr",{args:e,startTimestamp:Date.now(),xhr:this}),t.apply(this,e)}}))}();break;case"fetch":(function(){if(!en())return!1;if(nn(tn.fetch))return!0;let t=!1;const e=tn.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=nn(n.contentWindow.fetch)),e.head.removeChild(n)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return t})()&&ve(jn,"fetch",(function(t){return function(...e){const n={args:e,fetchData:{method:qn(e),url:Wn(e)},startTimestamp:Date.now()};return Yn("fetch",{...n}),t.apply(jn,e).then((t=>(Yn("fetch",{...n,endTimestamp:Date.now(),response:t}),t)),(t=>{throw Yn("fetch",{...n,endTimestamp:Date.now(),error:t}),t}))}}));break;case"history":!function(){if(!function(){const t=tn.chrome,e=t&&t.app&&t.app.runtime,n="history"in tn&&!!tn.history.pushState&&!!tn.history.replaceState;return!e&&n}())return;const t=jn.onpopstate;function e(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const t=zn,e=String(n);zn=e,Yn("history",{from:t,to:e})}return t.apply(this,e)}}jn.onpopstate=function(...e){const n=jn.location.href,i=zn;if(zn=n,Yn("history",{from:i,to:n}),t)try{return t.apply(this,e)}catch(t){}},ve(jn.history,"pushState",e),ve(jn.history,"replaceState",e)}();break;case"error":Xn=jn.onerror,jn.onerror=function(t,e,n,i,s){return Yn("error",{column:i,error:s,line:n,msg:t,url:e}),!!Xn&&Xn.apply(this,arguments)};break;case"unhandledrejection":Zn=jn.onunhandledrejection,jn.onunhandledrejection=function(t){return Yn("unhandledrejection",t),!Zn||Zn.apply(this,arguments)};break;default:("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("unknown instrumentation type:",t)}}(t)}function Yn(t,e){if(t&&Bn[t])for(const n of Bn[t]||[])try{n(e)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${Ie(n)}\nError:`,e)}}function qn(t=[]){return"Request"in jn&&ie(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function Wn(t=[]){return"string"==typeof t[0]?t[0]:"Request"in jn&&ie(t[0],Request)?t[0].url:String(t[0])}let zn;const Hn=1e3;let Kn,Vn;function Jn(t,e=!1){return n=>{if(!n||Vn===n)return;if(function(t){if("keypress"!==t.type)return!1;try{const e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n))return;const i="keypress"===n.type?"input":n.type;(void 0===Kn||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(Vn,n))&&(t({event:n,name:i,global:e}),Vn=n),clearTimeout(Kn),Kn=jn.setTimeout((()=>{Kn=void 0}),Hn)}}let Xn=null,Zn=null;const Qn="7";function ti(t,e={}){const n="string"==typeof e?e:e.tunnel,i="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${function(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){return n={sentry_key:t.publicKey,sentry_version:Qn,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(n[t])}`)).join("&");var n}(t,i)}`}const ei="Not capturing exception because it's already been captured.";class ni{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(t){if(ni.prototype.__init.call(this),ni.prototype.__init2.call(this),ni.prototype.__init3.call(this),ni.prototype.__init4.call(this),this._options=t,t.dsn){this._dsn=function(t){const e="string"==typeof t?function(t){const e=le.exec(t);if(!e)throw new zt(`Invalid Sentry Dsn: ${t}`);const[n,i,s="",r,a="",o]=e.slice(1);let l="",c=o;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const t=c.match(/^\d+/);t&&(c=t[0])}return ue({host:r,pass:s,path:l,projectId:c,port:a,protocol:n,publicKey:i})}(t):ue(t);return function(t){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:e,projectId:n,protocol:i}=t;if(["protocol","publicKey","host","projectId"].forEach((e=>{if(!t[e])throw new zt(`Invalid Sentry Dsn: ${e} missing`)})),!n.match(/^\d+$/))throw new zt(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!function(t){return"http"===t||"https"===t}(i))throw new zt(`Invalid Sentry Dsn: Invalid protocol ${i}`);if(e&&isNaN(parseInt(e,10)))throw new zt(`Invalid Sentry Dsn: Invalid port ${e}`)}(e),e}(t.dsn);const e=ti(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("No DSN provided, client will not do anything.")}captureException(t,e,n){if(cn(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log(ei));let i=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{i=t}))),i}captureMessage(t,e,n,i){let s=n&&n.event_id;const r=Qt(t)?this.eventFromMessage(String(t),e,n):this.eventFromException(t,n);return this._process(r.then((t=>this._captureEvent(t,n,i))).then((t=>{s=t}))),s}captureEvent(t,e,n){if(e&&e.originalException&&cn(e.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log(ei));let i=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((t=>{i=t}))),i}captureSession(t){this._isEnabled()?"string"!=typeof t.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),mn(t,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t)))):re(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,t)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(t){const e={};return t.forEach((t=>{e[t.name]=t,-1===Mn.indexOf(t.name)&&(t.setupOnce(gn,En),Mn.push(t.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log(`Integration installed: ${t.name}`))})),e}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}sendEvent(t,e={}){if(this._dsn){let n=function(t,e,n,i){const s=qe(n),r=t.type||"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const a=function(t,e,n,i){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&{dsn:ce(i)},..."transaction"===t.type&&s&&{trace:$e({...s})}}}(t,s,i,e);return delete t.sdkProcessingMetadata,Ce(a,[[{type:r},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=Me(n,Fe(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(n)}}sendSession(t){if(this._dsn){const e=function(t,e,n,i){const s=qe(n);return Ce({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!i&&{dsn:ce(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const n=`${t}:${e}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}_updateSessionFromEvent(t,e){let n=!1,i=!1;const s=e.exception&&e.exception.values;if(s){i=!0;for(const t of s){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const r="ok"===t.status;(r&&0===t.errors||r&&n)&&(mn(t,{...n&&{status:"crashed"},errors:t.errors||Number(i||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new oe((e=>{let n=0;const i=setInterval((()=>{0==this._numProcessing?(clearInterval(i),e(!0)):(n+=1,t&&n>=t&&(clearInterval(i),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(t,e,n){return function(t,e,n,i){const{normalizeDepth:s=3,normalizeMaxBreadth:r=1e3}=t,a={...e,event_id:e.event_id||n.event_id||sn(),timestamp:e.timestamp||(0,hn.yW)()};!function(t,e){const{environment:n,release:i,dist:s,maxValueLength:r=250}=e;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==i&&(t.release=i),void 0===t.dist&&void 0!==s&&(t.dist=s),t.message&&(t.message=ge(t.message,r));const a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=ge(a.value,r));const o=t.request;o&&o.url&&(o.url=ge(o.url,r))}(a,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(a,t.integrations.map((t=>t.name)));let o=i;n.captureContext&&(o=pn.clone(o).update(n.captureContext));let l=re(a);if(o){if(o.getAttachments){const t=[...n.attachments||[],...o.getAttachments()];t.length&&(n.attachments=t)}l=o.applyToEvent(a,n)}return l.then((t=>"number"==typeof s&&s>0?function(t,e,n){if(!t)return null;const i={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:Le(t.data,e,n)}})))},...t.user&&{user:Le(t.user,e,n)},...t.contexts&&{contexts:Le(t.contexts,e,n)},...t.extra&&{extra:Le(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=Le(t.contexts.trace.data,e,n))),t.spans&&(i.spans=t.spans.map((t=>(t.data&&(t.data=Le(t.data,e,n)),t)))),i}(t,s,r):t))}(this.getOptions(),t,e,n)}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const e=t;"log"===e.logLevel?Je.log(e.message):Je.warn(e)}}))}_processEvent(t,e,n){const i=this.getOptions(),{sampleRate:s}=i;if(!this._isEnabled())return ae(new zt("SDK not enabled, will not capture event.","log"));const r=si(t),a=ii(t),o=t.type||"error",l=`before send for type \`${o}\``;return a&&"number"==typeof s&&Math.random()>s?(this.recordDroppedEvent("sample_rate","error",t),ae(new zt(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"))):this._prepareEvent(t,e,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",o,t),new zt("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const s=function(t,e,n){const{beforeSend:i,beforeSendTransaction:s}=t;return ii(e)&&i?i(e,n):si(e)&&s?s(e,n):e}(i,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(ne(t))return t.then((t=>{if(!te(t)&&null!==t)throw new zt(n);return t}),(t=>{throw new zt(`${e} rejected with ${t}`)}));if(!te(t)&&null!==t)throw new zt(n);return t}(s,l)})).then((i=>{if(null===i)throw this.recordDroppedEvent("before_send",t.type||"error",t),new zt(`${l} returned \`null\`, will not send event.`,"log");const s=n&&n.getSession();!r&&s&&this._updateSessionFromEvent(s,i);const a=i.transaction_info;if(r&&a&&i.transaction!==t.transaction){const t="custom";i.transaction_info={...a,source:t,changes:[...a.changes,{source:t,timestamp:i.timestamp,propagations:a.propagations}]}}return this.sendEvent(i,e),i})).then(null,(t=>{if(t instanceof zt)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new zt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){this._transport&&this._dsn?this._transport.send(t).then(null,(t=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error("Error while sending event:",t)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,i]=e.split(":");return{reason:n,category:i,quantity:t[e]}}))}}function ii(t){return void 0===t.type}function si(t){return"transaction"===t.type}const ri="7.29.0";function ai(t,e){const n=li(t,e),i={type:e&&e.name,value:ui(e)};return n.length&&(i.stacktrace={frames:n}),void 0===i.type&&""===i.value&&(i.value="Unrecoverable error caught"),i}function oi(t,e){return{exception:{values:[ai(t,e)]}}}function li(t,e){const n=e.stacktrace||e.stack||"",i=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(ci.test(t.message))return 1}return 0}(e);try{return t(n,i)}catch(t){}return[]}const ci=/Minified React error #\d+;/i;function ui(t){const e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function hi(t,e,n,i,s){let r;if(Jt(e)&&e.error)return oi(t,e.error);if(Xt(e)||Vt(e,"DOMException")){const s=e;if("stack"in e)r=oi(t,e);else{const e=s.name||(Xt(s)?"DOMError":"DOMException"),a=s.message?`${e}: ${s.message}`:e;r=di(t,a,n,i),on(r,a)}return"code"in s&&(r.tags={...r.tags,"DOMException.code":`${s.code}`}),r}return Kt(e)?oi(t,e):te(e)||ee(e)?(r=function(t,e,n,i){const s=En().getClient(),r=s&&s.getOptions().normalizeDepth,a={exception:{values:[{type:ee(e)?e.constructor.name:i?"UnhandledRejection":"Error",value:`Non-Error ${i?"promise rejection":"exception"} captured with keys: ${Te(e)}`}]},extra:{__serialized__:De(e,r)}};if(n){const e=li(t,n);e.length&&(a.exception.values[0].stacktrace={frames:e})}return a}(t,e,n,s),ln(r,{synthetic:!0}),r):(r=di(t,e,n,i),on(r,`${e}`,void 0),ln(r,{synthetic:!0}),r)}function di(t,e,n,i){const s={message:e};if(i&&n){const i=li(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]})}return s}const mi=["fatal","error","warning","log","info","debug"];function pi(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",i=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+i}}const fi=1024,gi="Breadcrumbs";class _i{static __initStatic(){this.id=gi}__init(){this.name=_i.id}constructor(t){_i.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t}}setupOnce(){var t;this.options.console&&Gn("console",yi),this.options.dom&&Gn("dom",(t=this.options.dom,function(e){let n,i="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>fi&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn(`\`dom.maxStringLength\` cannot exceed ${fi}, but a value of ${s} was configured. Sentry will use ${fi} instead.`),s=fi),"string"==typeof i&&(i=[i]);try{n=e.event.target?pe(e.event.target,{keyAttrs:i,maxStringLength:s}):pe(e.event,{keyAttrs:i,maxStringLength:s})}catch(t){n="<unknown>"}0!==n.length&&En().addBreadcrumb({category:`ui.${e.name}`,message:n},{event:e.event,name:e.name,global:e.global})})),this.options.xhr&&Gn("xhr",vi),this.options.fetch&&Gn("fetch",bi),this.options.history&&Gn("history",wi)}addSentryBreadcrumb(t){this.options.sentry&&En().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:an(t)},{event:t})}}function yi(t){for(let e=0;e<t.args.length;e++)if("ref=Ref<"===t.args[e]){t.args[e+1]="viewRef";break}const e={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,"warn"===n?"warning":mi.includes(n)?n:"log"),message:_e(t.args," ")};var n;if("assert"===t.level){if(!1!==t.args[0])return;e.message=`Assertion failed: ${_e(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1)}En().addBreadcrumb(e,{input:t.args,level:t.level})}function vi(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;const{method:e,url:n,status_code:i,body:s}=t.xhr.__sentry_xhr__||{};En().addBreadcrumb({category:"xhr",data:{method:e,url:n,status_code:i},type:"http"},{xhr:t.xhr,input:s})}}function bi(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?En().addBreadcrumb({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args}):En().addBreadcrumb({category:"fetch",data:{...t.fetchData,status_code:t.response.status},type:"http"},{input:t.args,response:t.response})))}function wi(t){let e=t.from,n=t.to;const i=pi(Tn.location.href);let s=pi(e);const r=pi(n);s.path||(s=i),i.protocol===r.protocol&&i.host===r.host&&(n=r.relative),i.protocol===s.protocol&&i.host===s.host&&(e=s.relative),En().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}_i.__initStatic();class Ei extends ni{constructor(t){t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:ri}],version:ri},super(t),t.sendClientReports&&Tn.document&&Tn.document.addEventListener("visibilitychange",(()=>{"hidden"===Tn.document.visibilityState&&this._flushOutcomes()}))}eventFromException(t,e){return function(t,e,n,i){const s=hi(t,e,n&&n.syntheticException||void 0,i);return ln(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),re(s)}(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return function(t,e,n="info",i,s){const r=di(t,e,i&&i.syntheticException||void 0,s);return r.level=n,i&&i.event_id&&(r.event_id=i.event_id),re(r)}(this._options.stackParser,t,e,n,this._options.attachStacktrace)}sendEvent(t,e){!function(t){let e,n=t[0],i=1;for(;i<t.length;){const s=t[i],r=t[i+1];if(i+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(e=n,n=r(n)):"call"!==s&&"optionalCall"!==s||(n=r(((...t)=>n.call(e,...t))),e=void 0)}}([this.getIntegrationById(gi),"optionalAccess",t=>t.addSentryBreadcrumb,"optionalCall",e=>e(t)]),super.sendEvent(t,e)}_prepareEvent(t,e,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n)}_flushOutcomes(){const t=this._clearOutcomes();if(0===t.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log("Sending outcomes:",t);const e=ti(this._dsn,this._options),n=(i=t,Ce((s=this._options.tunnel&&ce(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:(0,hn.yW)(),discarded_events:i}]]));var i,s;try{"[object Navigator]"===Object.prototype.toString.call(Tn&&Tn.navigator)&&"function"==typeof Tn.navigator.sendBeacon&&!this._options.transportOptions?Tn.navigator.sendBeacon.bind(Tn.navigator)(e,Be(n)):this._sendEnvelope(n)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.error(t)}}}const Si="?";function xi(t,e,n,i){const s={filename:t,function:e,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==i&&(s.colno=i),s}const ki=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ti=/\((\S*)(?::(\d+))(?::(\d+))\)/,$i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ni=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ri=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ai=Ae([30,t=>{const e=ki.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const t=Ti.exec(e[2]);t&&(e[2]=t[1],e[3]=t[2],e[4]=t[3])}const[t,n]=Pi(e[1]||Si,e[2]);return xi(n,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],[50,t=>{const e=$i.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=Ni.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],n=e[1]||Si;return[n,t]=Pi(n,t),xi(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],[40,t=>{const e=Ri.exec(t);return e?xi(e[2],e[1]||Si,+e[3],e[4]?+e[4]:void 0):void 0}]),Pi=(t,e)=>{const n=-1!==t.indexOf("safari-extension"),i=-1!==t.indexOf("safari-web-extension");return n||i?[-1!==t.indexOf("@")?t.split("@")[0]:Si,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Ii=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Li{static __initStatic(){this.id="TryCatch"}__init(){this.name=Li.id}constructor(t){Li.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t}}setupOnce(){this._options.setTimeout&&ve(Tn,"setTimeout",Di),this._options.setInterval&&ve(Tn,"setInterval",Di),this._options.requestAnimationFrame&&ve(Tn,"requestAnimationFrame",Oi),this._options.XMLHttpRequest&&"XMLHttpRequest"in Tn&&ve(XMLHttpRequest.prototype,"send",Ci);const t=this._options.eventTarget;t&&(Array.isArray(t)?t:Ii).forEach(Mi)}}function Di(t){return function(...e){const n=e[0];return e[0]=An(n,{mechanism:{data:{function:Ie(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function Oi(t){return function(e){return t.apply(this,[An(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Ie(t)},handled:!0,type:"instrument"}})])}}function Ci(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((t=>{t in n&&"function"==typeof n[t]&&ve(n,t,(function(e){const n={mechanism:{data:{function:t,handler:Ie(e)},handled:!0,type:"instrument"}},i=Ee(e);return i&&(n.mechanism.data.handler=Ie(i)),An(e,n)}))})),t.apply(this,e)}}function Mi(t){const e=Tn,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ve(n,"addEventListener",(function(e){return function(n,i,s){try{"function"==typeof i.handleEvent&&(i.handleEvent=An(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ie(i),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.apply(this,[n,An(i,{mechanism:{data:{function:"addEventListener",handler:Ie(i),target:t},handled:!0,type:"instrument"}}),s])}})),ve(n,"removeEventListener",(function(t){return function(e,n,i){const s=n;try{const n=s&&s.__sentry_wrapped__;n&&t.call(this,e,n,i)}catch(t){}return t.call(this,e,s,i)}})))}Li.__initStatic();class Ui{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Ui.id}__init2(){this._installFunc={onerror:ji,onunhandledrejection:Bi}}constructor(t){Ui.prototype.__init.call(this),Ui.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...t}}setupOnce(){Error.stackTraceLimit=50;const t=this._options;for(const n in t){const i=this._installFunc[n];i&&t[n]&&(e=n,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.log(`Global Handler attached: ${e}`),i(),this._installFunc[n]=void 0)}var e}}function ji(){Gn("error",(t=>{const[e,n,i]=Yi();if(!e.getIntegration(Ui))return;const{msg:s,url:r,line:a,column:o,error:l}=t;if(Rn()||l&&l.__sentry_own_request__)return;const c=void 0===l&&Zt(s)?function(t,e,n,i){let s=Jt(t)?t.message:t,r="Error";const a=s.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(r=a[1],s=a[2]);return Fi({exception:{values:[{type:r,value:s}]}},e,n,i)}(s,r,a,o):Fi(hi(n,l||s,void 0,i,!1),r,a,o);c.level="error",Gi(e,l,c,"onerror")}))}function Bi(){Gn("unhandledrejection",(t=>{const[e,n,i]=Yi();if(!e.getIntegration(Ui))return;let s=t;try{"reason"in t?s=t.reason:"detail"in t&&"reason"in t.detail&&(s=t.detail.reason)}catch(t){}if(Rn()||s&&s.__sentry_own_request__)return!0;const r=Qt(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:hi(n,s,void 0,i,!0);r.level="error",Gi(e,s,r,"onunhandledrejection")}))}function Fi(t,e,n,i){const s=t.exception=t.exception||{},r=s.values=s.values||[],a=r[0]=r[0]||{},o=a.stacktrace=a.stacktrace||{},l=o.frames=o.frames||[],c=isNaN(parseInt(i,10))?void 0:i,u=isNaN(parseInt(n,10))?void 0:n,h=Zt(e)&&e.length>0?e:function(){try{return de.document.location.href}catch(t){return""}}();return 0===l.length&&l.push({colno:c,filename:h,function:"?",in_app:!0,lineno:u}),t}function Gi(t,e,n,i){ln(n,{handled:!1,type:i}),t.captureEvent(n,{originalException:e})}function Yi(){const t=En(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}Ui.__initStatic();class qi{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=qi.id}constructor(t={}){qi.prototype.__init.call(this),this._key=t.key||"cause",this._limit=t.limit||5}setupOnce(){const t=En().getClient();t&&gn(((e,n)=>{const i=En().getIntegration(qi);return i?function(t,e,n,i,s){if(!(i.exception&&i.exception.values&&s&&ie(s.originalException,Error)))return i;const r=Wi(t,n,s.originalException,e);return i.exception.values=[...r,...i.exception.values],i}(t.getOptions().stackParser,i._key,i._limit,e,n):e}))}}function Wi(t,e,n,i,s=[]){if(!ie(n[i],Error)||s.length+1>=e)return s;const r=ai(t,n[i]);return Wi(t,e,n[i],i,[r,...s])}qi.__initStatic();class zi{constructor(){zi.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=zi.id}setupOnce(t,e){const n=t=>{const n=e().getIntegration(zi);if(n){try{if(function(t,e){return!!e&&(!!function(t,e){const n=t.message,i=e.message;return!(!n&&!i)&&(!(n&&!i||!n&&i)&&(n===i&&(!!Ki(t,e)&&!!Hi(t,e))))}(t,e)||!!function(t,e){const n=Vi(e),i=Vi(t);return!(!n||!i)&&(n.type===i.type&&n.value===i.value&&(!!Ki(t,e)&&!!Hi(t,e)))}(t,e))}(t,n._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){return n._previousEvent=t}return n._previousEvent=t}return t};n.id=this.name,t(n)}}function Hi(t,e){let n=Ji(t),i=Ji(e);if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;if(i.length!==n.length)return!1;for(let t=0;t<i.length;t++){const e=i[t],s=n[t];if(e.filename!==s.filename||e.lineno!==s.lineno||e.colno!==s.colno||e.function!==s.function)return!1}return!0}function Ki(t,e){let n=t.fingerprint,i=e.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;try{return!(n.join("")!==i.join(""))}catch(t){return!1}}function Vi(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Ji(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}zi.__initStatic();class Xi{constructor(){Xi.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Xi.id}setupOnce(){gn((t=>{if(En().getIntegration(Xi)){if(!Tn.navigator&&!Tn.location&&!Tn.document)return t;const e=t.request&&t.request.url||Tn.location&&Tn.location.href,{referrer:n}=Tn.document||{},{userAgent:i}=Tn.navigator||{},s={...e&&{url:e},headers:{...t.request&&t.request.headers,...n&&{Referer:n},...i&&{"User-Agent":i}}};return{...t,request:s}}return t}))}}Xi.__initStatic();const Zi=4;function Qi(t){return Ze(t,(function(e){return new oe(((n,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===Zi&&n({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",t.url);for(const e in t.headers)Object.prototype.hasOwnProperty.call(t.headers,e)&&s.setRequestHeader(e,t.headers[e]);s.send(e.body)}))}))}const ts=[new Ln,new Cn,new Li,new _i,new Ui,new qi,new zi,new Xi];function es(t){t.startSession({ignoreDuration:!0}),t.captureSession()}let ns={};Tn.Sentry&&Tn.Sentry.Integrations&&(ns=Tn.Sentry.Integrations);const is={...ns,...t,...r};var ss=n(58339),rs=n(9e4),as=n(9375),os=function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,o)}l((i=i.apply(t,e||[])).next())}))};const ls=t=>t.replace(/(webpack_require__@)?(moz|chrome)-extension:\/\/[^/]+\//,"~/");function cs(t,e){return Pn(t,((t,e)=>{var n;const i={status:200,headers:{get:t=>""}};return ss.request.xhr(null!==(n=e.method)&&void 0!==n?n:"GET",{url:t,data:e.body}).catch((t=>(i.status=429,i))).then((t=>i))}))}var us=n(58339),hs=n(9e4);let ds;!function(){os(this,void 0,void 0,(function*(){var t;(yield ss.settings.getAsync("crashReport"))?as.isDomainMatching(window.location.href,"wakanim.tv")&&as.isFirefox()?rs.info("Crash reports disabled for wakanim.tv"):as.isDomainMatching(window.location.href,"simkl.com")&&as.isFirefox()?rs.info("Crash reports disabled for simkl.com"):(function(t={}){void 0===t.defaultIntegrations&&(t.defaultIntegrations=ts),void 0===t.release&&("string"==typeof __SENTRY_RELEASE__&&(t.release=__SENTRY_RELEASE__),Tn.SENTRY_RELEASE&&Tn.SENTRY_RELEASE.id&&(t.release=Tn.SENTRY_RELEASE.id)),void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0);const e={...t,stackParser:(n=t.stackParser||Ai,Array.isArray(n)?Ae(...n):n),integrations:Un(t),transport:t.transport||(en()?Pn:Qi)};var n;!function(t,e){!0===e.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Je.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=En(),i=n.getScope();i&&i.update(e.initialScope);const s=new t(e);n.bindClient(s)}(Ei,e),t.autoSessionTracking&&function(){if(void 0===Tn.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Je.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));const t=En();t.captureSession&&(es(t),Gn("history",(({from:t,to:e})=>{void 0!==t&&t!==e&&es(En())})))}()}({dsn:"https://blood@shark.malsync.moe/1337",tunnel:"https://api.malsync.moe/shark",transport:cs,release:`malsync@${ss.storage.version()}`,integrations:[new is.Breadcrumbs({console:!1,dom:!1}),new is.GlobalHandlers({onerror:!1,onunhandledrejection:!1})],environment:"production",autoSessionTracking:!1,ignoreErrors:["SafeError"]}),t=t=>{t.addEventProcessor((t=>os(this,void 0,void 0,(function*(){return t.culprit&&(t.culprit=ls(t.culprit)),t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames&&(t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames.map((t=>(t.filename=ls(t.filename),t)))),t}))))},En().configureScope(t)):rs.info("Crash reports disabled")}))}(),console.log("%cMAL-Sync","font-size: 40px; padding-bottom: 3px; color: white; text-shadow: -1px -1px #2e51a2, 1px -1px #2e51a2, -1px 1px #2e51a2, 1px 1px #2e51a2, 2px 2px #2e51a2, 3px 3px #2e51a2;",`Version: ${us.storage.version()}`),us.settings.init().then((()=>{!function(){if(us.settings.get("userscriptModeButton"))throw"Userscript mode";const t=new Ut(window.location.href);!function(t){const e=hs.m("TabMalUrl");chrome.runtime.onMessage.addListener((function(n,i,s){Date.now()-ds<3e3?"TabMalUrl"===n.action&&(e.log("Response",t.url),s({url:t.url,title:t.getTitle(),image:t.getImage()})):e.log("Focus timeout")}))}(t),t.init(),qt(),$(window).blur((function(){ds=Date.now()}))}()}))})()})();
//# sourceMappingURL=mal-script.js.map