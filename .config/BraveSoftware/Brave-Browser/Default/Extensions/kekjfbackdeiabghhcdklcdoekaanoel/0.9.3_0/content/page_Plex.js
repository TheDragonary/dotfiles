/*! For license information please see page_Plex.js.LICENSE.txt */
(()=>{var e={2262:(e,t,n)=>{"use strict";n.d(t,{iH:()=>de,qj:()=>ne});var o=n(3577);const r=e=>{const t=new Set(e);return t.w=0,t.n=0,t},i=e=>(e.w&c)>0,a=e=>(e.n&c)>0,s=new WeakMap;let l=0,c=1;const u=30;let d;const p=Symbol(""),f=Symbol("");let m=!0;const h=[];function g(e,t,n){if(m&&d){let t=s.get(e);t||s.set(e,t=new Map);let o=t.get(n);o||t.set(n,o=r()),y(o)}}function y(e,t){let n=!1;l<=u?a(e)||(e.n|=c,n=!i(e)):n=!e.has(d),n&&(e.add(d),d.deps.push(e))}function v(e,t,n,i,a,l){const c=s.get(e);if(!c)return;let u=[];if("clear"===t)u=[...c.values()];else if("length"===n&&(0,o.kJ)(e)){const e=Number(i);c.forEach(((t,n)=>{("length"===n||n>=e)&&u.push(t)}))}else switch(void 0!==n&&u.push(c.get(n)),t){case"add":(0,o.kJ)(e)?(0,o.S0)(n)&&u.push(c.get("length")):(u.push(c.get(p)),(0,o._N)(e)&&u.push(c.get(f)));break;case"delete":(0,o.kJ)(e)||(u.push(c.get(p)),(0,o._N)(e)&&u.push(c.get(f)));break;case"set":(0,o._N)(e)&&u.push(c.get(p))}if(1===u.length)u[0]&&A(u[0]);else{const e=[];for(const t of u)t&&e.push(...t);A(r(e))}}function A(e,t){const n=(0,o.kJ)(e)?e:[...e];for(const e of n)e.computed&&b(e);for(const e of n)e.computed||b(e)}function b(e,t){(e!==d||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const w=(0,o.fY)("__proto__,__v_isRef,__isVue"),x=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(o.yk)),E=T(),_=T(!0),S=k();function k(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=se(this);for(let e=0,t=this.length;e<t;e++)g(n,0,e+"");const o=n[t](...e);return-1===o||!1===o?n[t](...e.map(se)):o}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){h.push(m),m=!1;const n=se(this)[t].apply(this,e);return function(){const e=h.pop();m=void 0===e||e}(),n}})),e}function C(e){const t=se(this);return g(t,0,e),t.hasOwnProperty(e)}function T(e=!1,t=!1){return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&i===(e?t?te:ee:t?Q:X).get(n))return n;const a=(0,o.kJ)(n);if(!e){if(a&&(0,o.RI)(S,r))return Reflect.get(S,r,i);if("hasOwnProperty"===r)return C}const s=Reflect.get(n,r,i);return((0,o.yk)(r)?x.has(r):w(r))?s:(e||g(n,0,r),t?s:ue(s)?a&&(0,o.S0)(r)?s:s.value:(0,o.Kn)(s)?e?oe(s):ne(s):s)}}function $(e=!1){return function(t,n,r,i){let a=t[n];if(ie(a)&&ue(a)&&!ue(r))return!1;if(!e&&(ae(r)||ie(r)||(a=se(a),r=se(r)),!(0,o.kJ)(t)&&ue(a)&&!ue(r)))return a.value=r,!0;const s=(0,o.kJ)(t)&&(0,o.S0)(n)?Number(n)<t.length:(0,o.RI)(t,n),l=Reflect.set(t,n,r,i);return t===se(i)&&(s?(0,o.aU)(r,a)&&v(t,"set",n,r):v(t,"add",n,r)),l}}const M={get:E,set:$(),deleteProperty:function(e,t){const n=(0,o.RI)(e,t),r=(e[t],Reflect.deleteProperty(e,t));return r&&n&&v(e,"delete",t,void 0),r},has:function(e,t){const n=Reflect.has(e,t);return(0,o.yk)(t)&&x.has(t)||g(e,0,t),n},ownKeys:function(e){return g(e,0,(0,o.kJ)(e)?"length":p),Reflect.ownKeys(e)}},N={get:_,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},I=e=>e,R=e=>Reflect.getPrototypeOf(e);function D(e,t,n=!1,o=!1){const r=se(e=e.__v_raw),i=se(t);n||(t!==i&&g(r,0,t),g(r,0,i));const{has:a}=R(r),s=o?I:n?ce:le;return a.call(r,t)?s(e.get(t)):a.call(r,i)?s(e.get(i)):void(e!==r&&e.get(t))}function O(e,t=!1){const n=this.__v_raw,o=se(n),r=se(e);return t||(e!==r&&g(o,0,e),g(o,0,r)),e===r?n.has(e):n.has(e)||n.has(r)}function L(e,t=!1){return e=e.__v_raw,!t&&g(se(e),0,p),Reflect.get(e,"size",e)}function U(e){e=se(e);const t=se(this);return R(t).has.call(t,e)||(t.add(e),v(t,"add",e,e)),this}function P(e,t){t=se(t);const n=se(this),{has:r,get:i}=R(n);let a=r.call(n,e);a||(e=se(e),a=r.call(n,e));const s=i.call(n,e);return n.set(e,t),a?(0,o.aU)(t,s)&&v(n,"set",e,t):v(n,"add",e,t),this}function B(e){const t=se(this),{has:n,get:o}=R(t);let r=n.call(t,e);r||(e=se(e),r=n.call(t,e)),o&&o.call(t,e);const i=t.delete(e);return r&&v(t,"delete",e,void 0),i}function F(){const e=se(this),t=0!==e.size,n=e.clear();return t&&v(e,"clear",void 0,void 0),n}function z(e,t){return function(n,o){const r=this,i=r.__v_raw,a=se(i),s=t?I:e?ce:le;return!e&&g(a,0,p),i.forEach(((e,t)=>n.call(o,s(e),s(t),r)))}}function j(e,t,n){return function(...r){const i=this.__v_raw,a=se(i),s=(0,o._N)(a),l="entries"===e||e===Symbol.iterator&&s,c="keys"===e&&s,u=i[e](...r),d=n?I:t?ce:le;return!t&&g(a,0,c?f:p),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:l?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function H(e){return function(...t){return"delete"!==e&&this}}function W(){const e={get(e){return D(this,e)},get size(){return L(this)},has:O,add:U,set:P,delete:B,clear:F,forEach:z(!1,!1)},t={get(e){return D(this,e,!1,!0)},get size(){return L(this)},has:O,add:U,set:P,delete:B,clear:F,forEach:z(!1,!0)},n={get(e){return D(this,e,!0)},get size(){return L(this,!0)},has(e){return O.call(this,e,!0)},add:H("add"),set:H("set"),delete:H("delete"),clear:H("clear"),forEach:z(!0,!1)},o={get(e){return D(this,e,!0,!0)},get size(){return L(this,!0)},has(e){return O.call(this,e,!0)},add:H("add"),set:H("set"),delete:H("delete"),clear:H("clear"),forEach:z(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=j(r,!1,!1),n[r]=j(r,!0,!1),t[r]=j(r,!1,!0),o[r]=j(r,!0,!0)})),[e,n,t,o]}const[V,K,q,G]=W();function J(e,t){const n=t?e?G:q:e?K:V;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,o.RI)(n,r)&&r in t?n:t,r,i)}const Y={get:J(!1,!1)},Z={get:J(!0,!1)},X=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap;function ne(e){return ie(e)?e:re(e,!1,M,Y,X)}function oe(e){return re(e,!0,N,Z,ee)}function re(e,t,n,r,i){if(!(0,o.Kn)(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const s=(l=e).__v_skip||!Object.isExtensible(l)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((0,o.W7)(l));var l;if(0===s)return e;const c=new Proxy(e,2===s?r:n);return i.set(e,c),c}function ie(e){return!(!e||!e.__v_isReadonly)}function ae(e){return!(!e||!e.__v_isShallow)}function se(e){const t=e&&e.__v_raw;return t?se(t):e}const le=e=>(0,o.Kn)(e)?ne(e):e,ce=e=>(0,o.Kn)(e)?oe(e):e;function ue(e){return!(!e||!0!==e.__v_isRef)}function de(e){return n=!1,ue(t=e)?t:new pe(t,n);var t,n}class pe{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:se(e),this._value=t?e:le(e)}get value(){return function(e){m&&d&&y((e=se(e)).dep||(e.dep=r()))}(this),this._value}set value(e){const t=this.__v_isShallow||ae(e)||ie(e);e=t?e:se(e),(0,o.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:le(e),function(e,t){const n=(e=se(e)).dep;n&&A(n)}(this))}}},3577:(e,t,n)=>{"use strict";function o(e,t){const n=Object.create(null),o=e.split(",");for(let e=0;e<o.length;e++)n[o[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,{Kn:()=>u,RI:()=>a,S0:()=>m,W7:()=>f,_N:()=>l,aU:()=>A,fY:()=>o,kJ:()=>s,l7:()=>r,yk:()=>c});const r=Object.assign,i=Object.prototype.hasOwnProperty,a=(e,t)=>i.call(e,t),s=Array.isArray,l=e=>"[object Map]"===p(e),c=e=>"symbol"==typeof e,u=e=>null!==e&&"object"==typeof e,d=Object.prototype.toString,p=e=>d.call(e),f=e=>p(e).slice(8,-1),m=e=>"string"==typeof e&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,h=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},g=/-(\w)/g,y=(h((e=>e.replace(g,((e,t)=>t?t.toUpperCase():"")))),/\B([A-Z])/g),v=(h((e=>e.replace(y,"-$1").toLowerCase())),h((e=>e.charAt(0).toUpperCase()+e.slice(1)))),A=(h((e=>e?`on${v(e)}`:"")),(e,t)=>!Object.is(e,t))},15408:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(87537),r=n.n(o),i=n(23645),a=n.n(i)()(r());a.push([e.id,"#malStatus,\n#malTotal,\n#malEpisodes,\n#malUserRating,\n#malRating,\n#malVolumes,\n#malTotalVol,\n#malTotalCha,\n#AddMal {\n  color: inherit;\n}\n.mal-sync-active {\n  background-color: #002966;\n}\n#malp select option {\n  background-color: #111111;\n}\n#malp #malStatus,\n#malp #malUserRating,\n#malp #malEpisodes,\n#malp #malVolumes,\n#malp #malEpisodes {\n  font-size: inherit;\n  font-family: inherit;\n  background: transparent;\n  border-color: grey;\n  text-decoration: none;\n  outline: medium none;\n  border-width: 0;\n  height: auto;\n  padding: 0;\n  margin: 0;\n  line-height: 1;\n}\n#malp #malEpisodes,\n#malp #malVolumes,\n#malp #malEpisodes {\n  text-align: center;\n  border-bottom-width: 1px;\n}\n#malp #malEpisodes:focus,\n#malp #malVolumes:focus,\n#malp #malEpisodes:focus {\n  border-color: inherit;\n}\n#malSyncProgress.ms-loading {\n  height: 4px;\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  background-color: #ddd;\n}\n#malSyncProgress.ms-loading::before {\n  display: block;\n  position: absolute;\n  content: '';\n  left: -200px;\n  width: 200px;\n  height: 4px;\n  background-color: #2980b9;\n  animation: loading-mal 2s linear infinite;\n}\n@keyframes loading-mal {\n  0% {\n    left: -200px;\n    width: 30%;\n  }\n  50% {\n    width: 30%;\n  }\n  70% {\n    width: 70%;\n  }\n  80% {\n    left: 50%;\n  }\n  95% {\n    left: 120%;\n  }\n  100% {\n    left: 100%;\n  }\n}\n#malSyncProgress.ms-done .ms-progress {\n  width: 100% !important;\n  background-color: #ff4081 !important;\n  transition: background-color 1s !important;\n}\n.miniMAL-Fullscreen .open-info-popup.floatbutton,\n.miniMAL-hide .open-info-popup.floatbutton,\n.miniMAL-Fullscreen #flashinfo-div,\n.miniMAL-hide #flashinfo-div,\n.miniMAL-Fullscreen #flash-div-bottom,\n.miniMAL-hide #flash-div-bottom,\n.miniMAL-Fullscreen #flash-div-top,\n.miniMAL-hide #flash-div-top {\n  display: none !important;\n}\n#malp {\n  max-width: 700px;\n  margin: 0;\n}\n.noApiKey [data-qa-id='moreButton'] {\n  background-color: red;\n}\n#flashinfo-div {\n  z-index: 200000 !important;\n}\n","",{version:3,sources:["webpack://./src/pages/pages.less","webpack://./src/pages/Plex/style.less"],names:[],mappings:"AAIA;;;;;;;;;EASE,cAAA;ACHF;ADMA;EACE,yBAAA;ACJF;ADOA;EAGM,yBAAA;ACPN;ADYA;;;;;EAMI,kBAAA;EACA,oBAAA;EACA,uBAAA;EACA,kBAAA;EACA,qBAAA;EACA,oBAAA;EACA,eAAA;EACA,YAAA;EACA,UAAA;EACA,SAAA;EACA,cAAA;ACXJ;ADLA;;;EAsBI,kBAAA;EACA,wBAAA;ACZJ;ADcI;;;EACE,qBAAA;ACVN;ADgBE;EACE,WAAA;EACA,WAAA;EACA,kBAAA;EACA,gBAAA;EACA,sBAAA;ACdJ;ADgBI;EACE,cAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,YAAA;EACA,WAAA;EACA,yBAAA;EACA,yCAAA;ACdN;ADiBI;EACE;IACE,YAAA;IACA,UAAA;ECfN;EDkBI;IACE,UAAA;EChBN;EDmBI;IACE,UAAA;ECjBN;EDoBI;IACE,SAAA;EClBN;EDqBI;IACE,UAAA;ECnBN;EDsBI;IACE,UAAA;ECpBN;AACF;ADwBE;EAEI,sBAAA;EACA,oCAAA;EACA,0CAAA;ACvBN;AAnFA;;;;;;;;EAMI,wBAAA;AAuFJ;AAnFA;EACE,gBAAA;EACA,SAAA;AAqFF;AAlFA;EAEI,qBAAA;AAmFJ;AA/EA;EACE,0BAAA;AAiFF",sourcesContent:["@textColor: black;\n@activeEp: #002966;\n@inputBackground: #111111;\n\n#malStatus,\n#malTotal,\n#malEpisodes,\n#malUserRating,\n#malRating,\n#malVolumes,\n#malTotalVol,\n#malTotalCha,\n#AddMal {\n  color: @textColor;\n}\n\n.mal-sync-active {\n  background-color: @activeEp;\n}\n\n#malp {\n  select {\n    option {\n      background-color: @inputBackground;\n    }\n  }\n}\n\n#malp {\n  #malStatus,\n  #malUserRating,\n  #malEpisodes,\n  #malVolumes,\n  #malEpisodes {\n    font-size: inherit;\n    font-family: inherit;\n    background: transparent;\n    border-color: grey;\n    text-decoration: none;\n    outline: medium none;\n    border-width: 0;\n    height: auto;\n    padding: 0;\n    margin: 0;\n    line-height: 1;\n  }\n\n  #malEpisodes,\n  #malVolumes,\n  #malEpisodes {\n    text-align: center;\n    border-bottom-width: 1px;\n\n    &:focus {\n      border-color: @textColor;\n    }\n  }\n}\n\n#malSyncProgress {\n  &.ms-loading {\n    height: 4px;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n    background-color: #ddd;\n\n    &::before {\n      display: block;\n      position: absolute;\n      content: '';\n      left: -200px;\n      width: 200px;\n      height: 4px;\n      background-color: #2980b9;\n      animation: loading-mal 2s linear infinite;\n    }\n\n    @keyframes loading-mal {\n      0% {\n        left: -200px;\n        width: 30%;\n      }\n\n      50% {\n        width: 30%;\n      }\n\n      70% {\n        width: 70%;\n      }\n\n      80% {\n        left: 50%;\n      }\n\n      95% {\n        left: 120%;\n      }\n\n      100% {\n        left: 100%;\n      }\n    }\n  }\n\n  &.ms-done {\n    .ms-progress {\n      width: 100% !important;\n      background-color: #ff4081 !important;\n      transition: background-color 1s !important;\n    }\n  }\n}\n\n.boxStyle(@bg) {\n  @gap: 10px;\n\n  #MalData {\n    justify-content: flex-start !important;\n    align-items: stretch !important;\n    gap: @gap;\n\n    .malp-group {\n      display: flex;\n      flex-direction: column !important;\n\n      & > .malp-group-field,\n      & > .malp-group-value-section {\n        flex-grow: 1;\n        background-color: @bg !important;\n        border-radius: 4px;\n        padding: 4px 8px !important;\n      }\n    }\n\n    option {\n      background-color: @bg !important;\n    }\n\n    .malp-group-label {\n      display: block !important;\n    }\n\n    .malp-group-label {\n      display: block !important;\n      font-size: 12px !important;\n    }\n\n    #AddMalDiv {\n      margin-left: @gap;\n      display: inline-block !important;\n      font-size: 0;\n      background-color: @bg !important;\n      border-radius: 4px;\n      padding: 4px 8px !important;\n\n      #AddMal {\n        font-size: 16px;\n      }\n    }\n  }\n}\n","@import './../pages';\n\n@textColor: inherit;\n\n.miniMAL-Fullscreen,\n.miniMAL-hide {\n  .open-info-popup.floatbutton,\n  #flashinfo-div,\n  #flash-div-bottom,\n  #flash-div-top {\n    display: none !important;\n  }\n}\n\n#malp {\n  max-width: 700px;\n  margin: 0;\n}\n\n.noApiKey {\n  [data-qa-id='moreButton'] {\n    background-color: red;\n  }\n}\n\n#flashinfo-div {\n  z-index: 200000 !important;\n}\n"],sourceRoot:""}]);const s=a},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);o&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},87537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),i="/*# ".concat(r," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},27856:function(e){e.exports=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function n(e,o,r){return n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,n,o){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(e,r));return o&&t(i,o.prototype),i},n.apply(null,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var s=Object.entries,l=Object.setPrototypeOf,c=Object.isFrozen,u=Object.getPrototypeOf,d=Object.getOwnPropertyDescriptor,p=Object.freeze,f=Object.seal,m=Object.create,h="undefined"!=typeof Reflect&&Reflect,g=h.apply,y=h.construct;g||(g=function(e,t,n){return e.apply(t,n)}),p||(p=function(e){return e}),f||(f=function(e){return e}),y||(y=function(e,t){return n(e,r(t))});var v,A=M(Array.prototype.forEach),b=M(Array.prototype.pop),w=M(Array.prototype.push),x=M(String.prototype.toLowerCase),E=M(String.prototype.toString),_=M(String.prototype.match),S=M(String.prototype.replace),k=M(String.prototype.indexOf),C=M(String.prototype.trim),T=M(RegExp.prototype.test),$=(v=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y(v,t)});function M(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return g(e,t,o)}}function N(e,t,n){n=n||x,l&&l(e,null);for(var o=t.length;o--;){var r=t[o];if("string"==typeof r){var i=n(r);i!==r&&(c(t)||(t[o]=i),r=i)}e[r]=!0}return e}function I(e){var t,n=m(null),r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(s(e));try{for(r.s();!(t=r.n()).done;){var a=o(t.value,2),l=a[0],c=a[1];n[l]=c}}catch(e){r.e(e)}finally{r.f()}return n}function R(e,t){for(;null!==e;){var n=d(e,t);if(n){if(n.get)return M(n.get);if("function"==typeof n.value)return M(n.value)}e=u(e)}return function(e){return console.warn("fallback value for",e),null}}var D=p(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),O=p(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=p(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U=p(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),P=p(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),B=p(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F=p(["#text"]),z=p(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),j=p(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),H=p(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=p(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),V=f(/\{\{[\w\W]*|[\w\W]*\}\}/gm),K=f(/<%[\w\W]*|[\w\W]*%>/gm),q=f(/\${[\w\W]*}/gm),G=f(/^data-[\-\w.\u00B7-\uFFFF]/),J=f(/^aria-[\-\w]+$/),Y=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=f(/^(?:\w+script|data):/i),X=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Q=f(/^html$/i),ee=function(){return"undefined"==typeof window?null:window},te=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var o=null,r="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(r)&&(o=n.currentScript.getAttribute(r));var i="dompurify"+(o?"#"+o:"");try{return t.createPolicy(i,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee(),o=function(e){return t(e)};if(o.version="3.0.1",o.removed=[],!n||!n.document||9!==n.document.nodeType)return o.isSupported=!1,o;var i=n.document,a=n.document,l=n.DocumentFragment,c=n.HTMLTemplateElement,u=n.Node,d=n.Element,f=n.NodeFilter,m=n.NamedNodeMap,h=void 0===m?n.NamedNodeMap||n.MozNamedAttrMap:m,g=n.HTMLFormElement,y=n.DOMParser,v=n.trustedTypes,M=d.prototype,ne=R(M,"cloneNode"),oe=R(M,"nextSibling"),re=R(M,"childNodes"),ie=R(M,"parentNode");if("function"==typeof c){var ae=a.createElement("template");ae.content&&ae.content.ownerDocument&&(a=ae.content.ownerDocument)}var se=te(v,i),le=se?se.createHTML(""):"",ce=a,ue=ce.implementation,de=ce.createNodeIterator,pe=ce.createDocumentFragment,fe=ce.getElementsByTagName,me=i.importNode,he={};o.isSupported="function"==typeof s&&"function"==typeof ie&&ue&&void 0!==ue.createHTMLDocument;var ge,ye,ve=V,Ae=K,be=q,we=G,xe=J,Ee=Z,_e=X,Se=Y,ke=null,Ce=N({},[].concat(r(D),r(O),r(L),r(P),r(F))),Te=null,$e=N({},[].concat(r(z),r(j),r(H),r(W))),Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ne=null,Ie=null,Re=!0,De=!0,Oe=!1,Le=!0,Ue=!1,Pe=!1,Be=!1,Fe=!1,ze=!1,je=!1,He=!1,We=!0,Ve=!1,Ke=!0,qe=!1,Ge={},Je=null,Ye=N({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ze=null,Xe=N({},["audio","video","img","source","image","track"]),Qe=null,et=N({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tt="http://www.w3.org/1998/Math/MathML",nt="http://www.w3.org/2000/svg",ot="http://www.w3.org/1999/xhtml",rt=ot,it=!1,at=null,st=N({},[tt,nt,ot],E),lt=["application/xhtml+xml","text/html"],ct=null,ut=a.createElement("form"),dt=function(e){return e instanceof RegExp||e instanceof Function},pt=function(t){ct&&ct===t||(t&&"object"===e(t)||(t={}),t=I(t),ge=ge=-1===lt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ye="application/xhtml+xml"===ge?E:x,ke="ALLOWED_TAGS"in t?N({},t.ALLOWED_TAGS,ye):Ce,Te="ALLOWED_ATTR"in t?N({},t.ALLOWED_ATTR,ye):$e,at="ALLOWED_NAMESPACES"in t?N({},t.ALLOWED_NAMESPACES,E):st,Qe="ADD_URI_SAFE_ATTR"in t?N(I(et),t.ADD_URI_SAFE_ATTR,ye):et,Ze="ADD_DATA_URI_TAGS"in t?N(I(Xe),t.ADD_DATA_URI_TAGS,ye):Xe,Je="FORBID_CONTENTS"in t?N({},t.FORBID_CONTENTS,ye):Ye,Ne="FORBID_TAGS"in t?N({},t.FORBID_TAGS,ye):{},Ie="FORBID_ATTR"in t?N({},t.FORBID_ATTR,ye):{},Ge="USE_PROFILES"in t&&t.USE_PROFILES,Re=!1!==t.ALLOW_ARIA_ATTR,De=!1!==t.ALLOW_DATA_ATTR,Oe=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Ue=t.SAFE_FOR_TEMPLATES||!1,Pe=t.WHOLE_DOCUMENT||!1,ze=t.RETURN_DOM||!1,je=t.RETURN_DOM_FRAGMENT||!1,He=t.RETURN_TRUSTED_TYPE||!1,Fe=t.FORCE_BODY||!1,We=!1!==t.SANITIZE_DOM,Ve=t.SANITIZE_NAMED_PROPS||!1,Ke=!1!==t.KEEP_CONTENT,qe=t.IN_PLACE||!1,Se=t.ALLOWED_URI_REGEXP||Se,rt=t.NAMESPACE||ot,Me=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&dt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&dt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Me.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue&&(De=!1),je&&(ze=!0),Ge&&(ke=N({},r(F)),Te=[],!0===Ge.html&&(N(ke,D),N(Te,z)),!0===Ge.svg&&(N(ke,O),N(Te,j),N(Te,W)),!0===Ge.svgFilters&&(N(ke,L),N(Te,j),N(Te,W)),!0===Ge.mathMl&&(N(ke,P),N(Te,H),N(Te,W))),t.ADD_TAGS&&(ke===Ce&&(ke=I(ke)),N(ke,t.ADD_TAGS,ye)),t.ADD_ATTR&&(Te===$e&&(Te=I(Te)),N(Te,t.ADD_ATTR,ye)),t.ADD_URI_SAFE_ATTR&&N(Qe,t.ADD_URI_SAFE_ATTR,ye),t.FORBID_CONTENTS&&(Je===Ye&&(Je=I(Je)),N(Je,t.FORBID_CONTENTS,ye)),Ke&&(ke["#text"]=!0),Pe&&N(ke,["html","head","body"]),ke.table&&(N(ke,["tbody"]),delete Ne.tbody),p&&p(t),ct=t)},ft=N({},["mi","mo","mn","ms","mtext"]),mt=N({},["foreignobject","desc","title","annotation-xml"]),ht=N({},["title","style","font","a","script"]),gt=N({},O);N(gt,L),N(gt,U);var yt=N({},P);N(yt,B);var vt=function(e){w(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},At=function(e,t){try{w(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){w(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Te[e])if(ze||je)try{vt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},bt=function(e){var t,n;if(Fe)e="<remove></remove>"+e;else{var o=_(e,/^[\r\n\t ]+/);n=o&&o[0]}"application/xhtml+xml"===ge&&rt===ot&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var r=se?se.createHTML(e):e;if(rt===ot)try{t=(new y).parseFromString(r,ge)}catch(e){}if(!t||!t.documentElement){t=ue.createDocument(rt,"template",null);try{t.documentElement.innerHTML=it?le:r}catch(e){}}var i=t.body||t.documentElement;return e&&n&&i.insertBefore(a.createTextNode(n),i.childNodes[0]||null),rt===ot?fe.call(t,Pe?"html":"body")[0]:Pe?t.documentElement:i},wt=function(e){return de.call(e.ownerDocument||e,e,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)},xt=function(t){return"object"===e(u)?t instanceof u:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Et=function(e,t,n){he[e]&&A(he[e],(function(e){e.call(o,t,n,ct)}))},_t=function(e){var t,n;if(Et("beforeSanitizeElements",e,null),(n=e)instanceof g&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof h)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore||"function"!=typeof n.hasChildNodes))return vt(e),!0;var r=ye(e.nodeName);if(Et("uponSanitizeElement",e,{tagName:r,allowedTags:ke}),e.hasChildNodes()&&!xt(e.firstElementChild)&&(!xt(e.content)||!xt(e.content.firstElementChild))&&T(/<[/\w]/g,e.innerHTML)&&T(/<[/\w]/g,e.textContent))return vt(e),!0;if(!ke[r]||Ne[r]){if(!Ne[r]&&kt(r)){if(Me.tagNameCheck instanceof RegExp&&T(Me.tagNameCheck,r))return!1;if(Me.tagNameCheck instanceof Function&&Me.tagNameCheck(r))return!1}if(Ke&&!Je[r]){var i=ie(e)||e.parentNode,a=re(e)||e.childNodes;if(a&&i)for(var s=a.length-1;s>=0;--s)i.insertBefore(ne(a[s],!0),oe(e))}return vt(e),!0}return e instanceof d&&!function(e){var t=ie(e);t&&t.tagName||(t={namespaceURI:rt,tagName:"template"});var n=x(e.tagName),o=x(t.tagName);return!!at[e.namespaceURI]&&(e.namespaceURI===nt?t.namespaceURI===ot?"svg"===n:t.namespaceURI===tt?"svg"===n&&("annotation-xml"===o||ft[o]):Boolean(gt[n]):e.namespaceURI===tt?t.namespaceURI===ot?"math"===n:t.namespaceURI===nt?"math"===n&&mt[o]:Boolean(yt[n]):e.namespaceURI===ot?!(t.namespaceURI===nt&&!mt[o])&&!(t.namespaceURI===tt&&!ft[o])&&!yt[n]&&(ht[n]||!gt[n]):!("application/xhtml+xml"!==ge||!at[e.namespaceURI]))}(e)?(vt(e),!0):"noscript"!==r&&"noembed"!==r||!T(/<\/no(script|embed)/i,e.innerHTML)?(Ue&&3===e.nodeType&&(t=e.textContent,t=S(t,ve," "),t=S(t,Ae," "),t=S(t,be," "),e.textContent!==t&&(w(o.removed,{element:e.cloneNode()}),e.textContent=t)),Et("afterSanitizeElements",e,null),!1):(vt(e),!0)},St=function(e,t,n){if(We&&("id"===t||"name"===t)&&(n in a||n in ut))return!1;if(De&&!Ie[t]&&T(we,t));else if(Re&&T(xe,t));else if(!Te[t]||Ie[t]){if(!(kt(e)&&(Me.tagNameCheck instanceof RegExp&&T(Me.tagNameCheck,e)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(e))&&(Me.attributeNameCheck instanceof RegExp&&T(Me.attributeNameCheck,t)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(t))||"is"===t&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&T(Me.tagNameCheck,n)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(n))))return!1}else if(Qe[t]);else if(T(Se,S(n,_e,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==k(n,"data:")||!Ze[e])if(Oe&&!T(Ee,S(n,_e,"")));else if(n)return!1;return!0},kt=function(e){return e.indexOf("-")>0},Ct=function(t){var n,r,i,a;Et("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te};for(a=s.length;a--;){var c=n=s[a],u=c.name,d=c.namespaceURI;if(r="value"===u?n.value:C(n.value),i=ye(u),l.attrName=i,l.attrValue=r,l.keepAttr=!0,l.forceKeepAttr=void 0,Et("uponSanitizeAttribute",t,l),r=l.attrValue,!l.forceKeepAttr&&(At(u,t),l.keepAttr))if(Le||!T(/\/>/i,r)){Ue&&(r=S(r,ve," "),r=S(r,Ae," "),r=S(r,be," "));var p=ye(t.nodeName);if(St(p,i,r)){if(!Ve||"id"!==i&&"name"!==i||(At(u,t),r="user-content-"+r),se&&"object"===e(v)&&"function"==typeof v.getAttributeType)if(d);else switch(v.getAttributeType(p,i)){case"TrustedHTML":r=se.createHTML(r);break;case"TrustedScriptURL":r=se.createScriptURL(r)}try{d?t.setAttributeNS(d,u,r):t.setAttribute(u,r),b(o.removed)}catch(e){}}}else At(u,t)}Et("afterSanitizeAttributes",t,null)}},Tt=function e(t){var n,o=wt(t);for(Et("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)Et("uponSanitizeShadowNode",n,null),_t(n)||(n.content instanceof l&&e(n.content),Ct(n));Et("afterSanitizeShadowDOM",t,null)};return o.sanitize=function(e){var t,n,r,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((it=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!xt(e)){if("function"!=typeof e.toString)throw $("toString is not a function");if("string"!=typeof(e=e.toString()))throw $("dirty is not a string, aborting")}if(!o.isSupported)return e;if(Be||pt(s),o.removed=[],"string"==typeof e&&(qe=!1),qe){if(e.nodeName){var c=ye(e.nodeName);if(!ke[c]||Ne[c])throw $("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof u)1===(n=(t=bt("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?t=n:t.appendChild(n);else{if(!ze&&!Ue&&!Pe&&-1===e.indexOf("<"))return se&&He?se.createHTML(e):e;if(!(t=bt(e)))return ze?null:He?le:""}t&&Fe&&vt(t.firstChild);for(var d=wt(qe?e:t);r=d.nextNode();)_t(r)||(r.content instanceof l&&Tt(r.content),Ct(r));if(qe)return e;if(ze){if(je)for(a=pe.call(t.ownerDocument);t.firstChild;)a.appendChild(t.firstChild);else a=t;return(Te.shadowroot||Te.shadowrootmod)&&(a=me.call(i,a,!0)),a}var p=Pe?t.outerHTML:t.innerHTML;return Pe&&ke["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&T(Q,t.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+p),Ue&&(p=S(p,ve," "),p=S(p,Ae," "),p=S(p,be," ")),se&&He?se.createHTML(p):p},o.setConfig=function(e){pt(e),Be=!0},o.clearConfig=function(){ct=null,Be=!1},o.isValidAttribute=function(e,t,n){ct||pt({});var o=ye(e),r=ye(t);return St(o,r,n)},o.addHook=function(e,t){"function"==typeof t&&(he[e]=he[e]||[],w(he[e],t))},o.removeHook=function(e){if(he[e])return b(he[e])},o.removeHooks=function(e){he[e]&&(he[e]=[])},o.removeAllHooks=function(){he={}},o}()}()},52278:(e,t,n)=>{var o=n(34695),r=n(27672),i=o.Plex;void 0===r._Page&&(r._Page=i),e.exports=o},27672:(e,t,n)=>{"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return e}()},77703:(e,t,n)=>{var o=n(15408);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},58339:(e,t,n)=>{"use strict";n.r(t),n.d(t,{request:()=>y,settings:()=>v,storage:()=>g,type:()=>A});var o=n(58339),r=n(9375),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))};const a={set(e,t){return i(this,void 0,void 0,(function*(){const n={};return n[e]=t,new Promise(((t,o)=>{s(e).set(n,(function(){chrome.runtime.lastError?o(chrome.runtime.lastError):t()}))}))}))},get(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{s(e).get(e,(function(o){chrome.runtime.lastError?n(chrome.runtime.lastError):t(o[e])}))}))}))},remove(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{s(e).remove(e,(function(){chrome.runtime.lastError?n(chrome.runtime.lastError):t()}))}))}))},list(e="local"){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{"local"===e?chrome.storage.local.get(null,(function(e){t(e)})):chrome.storage.sync.get(null,(function(e){t(e)}))}))}))},addStyle(e){return i(this,void 0,void 0,(function*(){try{const t=document.createElement("style");t.textContent=e,(document.head||document.body||document.documentElement||document).appendChild(t)}catch(e){console.log(`Could not add css:${e}`)}}))},version:()=>chrome.runtime.getManifest().version,lang(e,t){if(o.settings.get("forceEn")&&"undefined"!=typeof i18n){let n=i18n[e];if(void 0!==t)for(let e=0;e<t.length;e++)n=n.replace(`$${e+1}`,t[e]);return n}return chrome.i18n.getMessage(e,t)},assetUrl:e=>chrome.extension.getURL(`assets/${e}`),injectCssResource(e,t){alert("injectCssResource not supported in webextension")},injectjsResource(e,t){const n=document.createElement("script");n.src=chrome.extension.getURL(`vendor/${e}`),n.onload=function(){this.remove()},t.get(0).appendChild(n)},updateDom(e){const t=document.createElement("script");t.text="\n        document.getElementsByTagName('head')[0].onclick = function(e){\n          try{\n            componentHandler.upgradeDom();\n          }catch(e){\n            console.log(e);\n            setTimeout(function(){\n              componentHandler.upgradeDom();\n            },500);\n          }\n        }",t.onload=function(){this.remove()},e.get(0).appendChild(t)},storageOnChanged(e){chrome.storage.onChanged.addListener(e)}};function s(e){return r.syncRegex.test(e)?chrome.storage.sync:chrome.storage.local}var l=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))};const c={xhr(e,t){return l(this,void 0,void 0,(function*(){if(void 0!==c.sendMessage)return c.sendMessage({name:"xhr",method:e,url:t}).then((e=>{if(429===e.status)throw"Rate limit Timeout";return e}));throw"Could not send xhr"}))},sendMessage(e){return l(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(function(e){t(e)}))}))}))},notification(e){this.sendMessage({name:"notification",options:e})},database(e,t){return this.sendMessage({name:"database",options:{call:e,param:t}})}};var u=n(2262),d=n(58339),p=n(9e4),f=n(9375),m=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))};const h={options:(0,u.qj)({autoTrackingModeanime:"video",readerTracking:!0,autoTrackingModemanga:"instant",enablePages:{},forceEn:!1,rpc:!0,presenceLargeImage:"cover",presenceShowButtons:!0,presenceShowMalsync:!1,userscriptModeButton:!1,syncMode:"MAL",syncModeSimkl:"MAL",localSync:!0,delay:0,videoDuration:85,malTags:!1,malContinue:!0,malResume:!0,usedPage:!0,epPredictions:!0,theme:"auto",themeSidebars:!0,themeColor:"#000000",themeOpacity:100,themeImage:"",minimalWindow:!1,posLeft:"left",miniMALonMal:!1,floatButtonStealth:!1,minimizeBigPopup:!1,floatButtonCorrection:!0,floatButtonHide:!1,autoCloseMinimal:!1,outWay:!0,miniMalWidth:"550px",miniMalHeight:"90%",malThumbnail:100,friendScore:!0,loadPTWForProgress:!1,quicklinks:["9anime","Crunchyroll","Gogoanime","Twistmoe","Mangadex","MangaNato","MangaFox","MangaSee","MangaFire","YugenAnime","Zoro","Funimation","Hulu","Netflix","Hidive","Vrv","VIZ","MangaPlus","MangaReader","marin","ComicK"],quicklinksPosition:"default",autofull:!1,autoresume:!1,autoNextEp:!1,highlightAllEp:!1,checkForFiller:!0,crashReport:!0,introSkip:85,introSkipFwd:[17,39],introSkipBwd:[17,37],nextEpShort:[],correctionShort:[67],syncShort:[],progressInterval:120,progressIntervalDefaultAnime:"en/sub",progressIntervalDefaultManga:"en/sub",progressNotificationsAnime:!0,progressNotificationsManga:!0,bookMarksList:!1,customDomains:[],anilistUpdateUi:!0,anilistToken:"",anilistOptions:{displayAdultContent:!0,scoreFormat:"POINT_10"},kitsuToken:"",kitsuOptions:{titleLanguagePreference:"canonical",sfwFilter:!1,ratingSystem:"regular"},simklToken:"",malToken:"",malRefresh:"",shikiToken:"",shikiOptions:{locale:"ru"}}),debounceArray:{},isInit:(0,u.iH)(!1),init(){return m(this,void 0,void 0,(function*(){const e=[];for(const t in this.options){const n=yield d.storage.get(`settings/${t}`);void 0!==n&&(this.options[t]=n,e[t]=/(token|refresh)/i.test(t)&&n?"********":n)}let t;return p.log("Settings",e),d.storage.storageOnChanged(((e,n)=>{if("sync"===n)for(const t in e){const n=e[t];/^settings\//i.test(t)&&(this.options[t.replace("settings/","")]=n.newValue,p.info(`Update ${t} option to ${n.newValue}`))}if("local"===n&&e.rateLimit)try{clearTimeout(t),e.rateLimit.newValue?(p.log("Rate limited"),$(".type-rate").length||f.flashm("Rate limited. Retrying in a moment",{error:!0,type:"rate",permanent:!0})):t=setTimeout((()=>{p.log("No Rate limited"),$(".type-rate").remove()}),5e3)}catch(e){p.error(e)}})),this.isInit.value=!0,this}))},get(e){if(!this.isInit.value)throw"Settings not initialized";return this.options[e]},set(e,t){if(!Object.prototype.hasOwnProperty.call(this.options,e)){const t=Error(`${e} is not a defined option`);throw p.error(t),t}return this.options[e]=t,d.storage.set(`settings/${e}`,t)},setDebounce(e,t){this.options[e]=t,clearTimeout(this.debounceArray[e]),this.debounceArray[e]=setTimeout((()=>{this.set(e,t),delete this.debounceArray[e]}),1e3)},getAsync(e){return m(this,void 0,void 0,(function*(){const t=yield d.storage.get(`settings/${e}`);return void 0===t&&void 0!==this.options[e]?this.options[e]:t}))}},g=a,y=c,v=h,A="webextension"},34695:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Plex:()=>y});var o=n(24564),r=n(9375),i=n(9e4),a=n(19947),s=n(58339),l=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))};let c;const u='[data-qa-id="preplay-mainTitle"], [class^="PrePlayPrimaryTitle-primaryTitle"]',d='[class*="MetadataPosterTitle-isSecondary"] [data-qa-id="metadataTitleLink"], [class*="MetadataPosterTitle-isSecondary"] [data-testid="metadataTitleLink"]',p=new o.O;p.addCaptureVariable("auth",'\n    if (window.hasOwnProperty("localStorage")) {\n      return {\n        apiKey: window.localStorage.myPlexAccessToken,\n        users: window.localStorage.users\n      }\n    } else {\n      return undefined;\n    }\n  ');const f={apiKey:null,serverApiKey:null,base:null};let m;function h(e){return l(this,void 0,void 0,(function*(){window.clearInterval(m),e.reset(),$("html").addClass("miniMAL-hide");let t=window.location.href;$(d).attr("href")&&(t=r.absoluteLink($(d).attr("href"),window.location.origin));const n=String(r.urlParam(t,"key"));n&&-1!==n.indexOf("metadata")&&g(decodeURIComponent(n)).then((n=>{let o;try{o=JSON.parse(n.responseText)}catch(e){return void i.error(e)}if(/(anime|asian)/i.test(o.MediaContainer.librarySectionTitle))switch(c=o.MediaContainer.Metadata[0],c.type){case"show":if(i.log("Show",o),!c.skipChildren)return i.log("Series overview. Dont do anything"),void(c=void 0);m=r.waitUntilTrue((function(){return a.$(u).length}),(function(){e.UILoaded=!1,e.handlePage(t),$("html").removeClass("miniMAL-hide")}));break;case"season":i.log("Season",o),m=r.waitUntilTrue((function(){return a.$(u).length}),(function(){e.UILoaded=!1,e.handlePage(t),$("html").removeClass("miniMAL-hide")}));break;case"episode":i.log("Episode",o),e.handlePage(t),$("html").removeClass("miniMAL-hide");break;default:i.log("Not recognized",o)}else i.info("!Not an Anime!")}))}))}function g(e){return l(this,void 0,void 0,(function*(){let t;f.apiKey&&f.base||(yield function(){return l(this,void 0,void 0,(function*(){const e=i.m("auth");return e.log("Start"),new Promise(((t,n)=>{p.addProxy((o=>l(this,void 0,void 0,(function*(){try{const n=p.getCaptureVariable("auth");if(!n)throw"authInfo not found";if(!n.users)throw"users not found";const o=JSON.parse(n.users);if(!n.apiKey){if(o&&o.users&&o.users.length&&(!o.users[0].servers.length||void 0===o.users[0].servers[0].accessToken))return e.log("Switching to no account mode"),f.apiKey=null,f.serverApiKey=null,f.base=window.location.origin,void t("");throw"apiKey not found"}f.apiKey=n.apiKey;const r=o.users.find((e=>e.authToken===f.apiKey));if(!r)throw"User not found";e.log("User found",r.id);const i=r.lastPrimaryServerID;e.log("Server",i);const a=r.servers.find((e=>e.machineIdentifier===i));if(!a)throw"Server not found";if(f.serverApiKey=a.accessToken,e.log("Connections",a.connections),!a.connections.length)throw"No connection found";let l=a.connections[0];if(a.connections.length>1)for(let t=0;t<a.connections.length;t+=1){const n=a.connections[t].uri;e.log(`Trying ${n}`);try{if(200!==(yield s.request.xhr("GET",{url:`${n}/library/sections?X-Plex-Token=${f.apiKey}`,headers:{Accept:"application/json"}})).status)throw"Not reached";e.log(`Reached ${n}`),l=a.connections[t];break}catch(t){e.log(`Ignoring unreachable server url ${n}`)}}f.base=l.uri,e.log("Done",f),t("")}catch(t){e.error(t),n(t)}}))))}))}))}()),t=-1!==e.indexOf("?")?"&":"?";const n=`${f.base+e+t}X-Plex-Token=${f.apiKey}`;return i.log("Api Call",n),s.request.xhr("GET",{url:n,headers:{Accept:"application/json"}}).then((t=>{if(200!==t.status){if(!f.serverApiKey)throw"Could not authenticate";return f.apiKey=f.serverApiKey,f.serverApiKey=null,i.log("Use server apikey"),g(e)}return t}))}))}const y={name:"Plex",domain:"http://app.plex.tv",languages:["Many"],type:"anime",isSyncPage:e=>!(!c||"episode"!==c.type),sync:{getTitle:e=>c.grandparentTitle+(c.parentIndex>1?` Season ${c.parentIndex}`:""),getIdentifier:e=>void 0!==c.parentKey?c.parentKey.split("/")[3]:void 0!==c.grandparentKey?c.grandparentKey.split("/")[3]:c.key.split("/")[3],getOverviewUrl(e){let t=window.location.href.split("?")[0];return t.includes("server/")||(t=(window.location.href.split("#")[0]+a.$('[href^="#!/server"]').first().attr("href")).split("?")[0]),`${t}?key=/library/metadata/${y.sync.getIdentifier(e)}`},getEpisode:e=>c.index},overview:{getTitle:e=>c.parentTitle?c.parentTitle:c.title,getIdentifier:e=>c.key.split("/")[3],uiSelector(e){a.$(u).first().after(a.html(e))}},init(e){s.storage.addStyle(n(77703).toString()),a.$(document).ready((function(){h(e)})),r.changeDetect((()=>h(e)),(()=>$(d).first().attr("href")||String(r.urlParam(window.location.href,"key")))),document.addEventListener("fullscreenchange",(function(){window.fullScreen||window.innerWidth===window.screen.width&&window.innerHeight===window.screen.height?$("html").addClass("miniMAL-Fullscreen"):$("html").removeClass("miniMAL-Fullscreen")})),setInterval((()=>{if(y.isSyncPage(e.url)&&!$("video").length){const t=$('[class*="SeekBar-seekBar-"] [aria-valuemax]').first();if(!t)return void i.m("Player").log("no seekbar");const n=t.attr("aria-valuemax"),o=t.attr("aria-valuenow"),r=Boolean($('[data-qa-id="pauseButton"]').length);i.m("Player").debug(o,n,!r),n&&o&&e.setVideoTime({current:o,duration:n,paused:!r},(()=>{i.log("Not supported during chromecast")}))}}),1e3)}}},9e4:(e,t,n)=>{"use strict";n.r(t),n.d(t,{debug:()=>a,error:()=>r,info:()=>i,log:()=>o,m:()=>s});const o=Function.prototype.bind.call(console.log,console,"%cMAL-Sync","background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;"),r=Function.prototype.bind.call(console.error,console,"%cMAL-Sync","background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;"),i=Function.prototype.bind.call(console.info,console,"%cMAL-Sync","background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;"),a=Function.prototype.bind.call(console.debug,console,"%cMAL-Sync","background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;"),s=(e,t="",n=[])=>{let o="white";t||(t=function(e){if(!e)return"#ffffff";e=String(e);let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let n="#";for(let e=0;e<3;e++)n+=`00${(t>>8*e&255).toString(16)}`.substr(-2);return n}(e)),"#"===t[0]&&(o=parseInt(t.replace("#",""),16)>8388607.5?"#000":"#fff");const r=`background-color: ${t}; color: ${o}; padding: 2px 10px; border-radius: 3px; margin-left: -5px; border-left: 1px solid white;`;n.push({name:e,style:r});const i={m:(e,t="")=>s(e,t,[...n])},a=n.reduce(((e,t)=>`${e}%c${t.name}`),""),l=n.map((e=>e.style));return i.log=Function.prototype.bind.call(console.log,console,`%cM ${a}`,"background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;",...l),i.error=Function.prototype.bind.call(console.error,console,`%cM ${a}`,"background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;",...l),i.info=Function.prototype.bind.call(console.info,console,`%cM ${a}`,"background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;",...l),i.debug=Function.prototype.bind.call(console.debug,console,`%cM ${a}`,"background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;",...l),i}},9375:(e,t,n)=>{"use strict";n.r(t),n.d(t,{absoluteLink:()=>w,canHideTabs:()=>j,changeDetect:()=>S,checkDoubleExecution:()=>M,clearCache:()=>ae,elementInViewport:()=>X,episode:()=>g,favicon:()=>f,flashConfirm:()=>G,flashm:()=>q,fullUrlChangeDetect:()=>_,generateUniqueID:()=>p,getAsyncWaitUntilTrue:()=>C,getBaseText:()=>d,getContinueWaching:()=>L,getEntrySettings:()=>P,getResumeWaching:()=>D,getStatusText:()=>W,getTooltip:()=>F,getUrlFromTags:()=>N,getselect:()=>b,handleMalImages:()=>B,htmlDecode:()=>ne,isDomainMatching:()=>le,isFirefox:()=>oe,lazyload:()=>Z,makeDomainCompatible:()=>ie,notifications:()=>V,pageUrl:()=>ee,parseHtml:()=>x,planTo:()=>h,rateLimitExclude:()=>v,returnYYYYMMDD:()=>te,setContinueWaching:()=>O,setEntrySettings:()=>U,setResumeWaching:()=>R,setUrlInTags:()=>I,sortAlphabetically:()=>se,status:()=>A,statusTag:()=>H,syncRegex:()=>y,timeCache:()=>K,timeDiffToText:()=>z,upperCaseFirstLetter:()=>ce,urlChangeDetect:()=>E,urlParam:()=>u,urlPart:()=>l,urlStrip:()=>c,wait:()=>Q,waitForPageToBeVisible:()=>re,waitUntilTrue:()=>k,watching:()=>m});var o=n(19947),r=n(58339),i=n(9e4),a=n(9375),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))};function l(e,t){if(!e)return"";const n=e.split("/");return n[t]?n[t].replace(/[#?].*/,""):""}function c(e){return e.replace(/[#?].*/,"")}function u(e,t){const n=new RegExp(`[?&]${t}=([^&#]*)`).exec(e);return null===n?null:decodeURI(n[1])||0}function d(e){let t=e.text();return e.children().each((function(){t=t.replace(o.$(this).text(),"")})),t}function p(e=10){const t=new Uint32Array(e);return window.crypto.getRandomValues(t),Array.from(t,(e=>e.toString(16))).join("")}function f(e){if(!e)return"";const t=e.match(/^(https?:\/\/)?[^/]+/);return t&&(e=t[0]),`https://favicon.malsync.moe/?domain=${e}`}function m(e){return"manga"===e?"Reading":"Watching"}function h(e){return"manga"===e?"Plan to Read":"Plan to Watch"}function g(e){return"manga"===e?r.storage.lang("UI_Chapter"):r.storage.lang("UI_Episode")}const y=/(^settings\/.*|^updateCheckTime$|^tempVersion$|^local:\/\/|^list-tagSettings$)/,v=/^https:\/\/api.malsync.moe\/(shark|mal\/|nc\/mal\/.*\/progress$)/i;var A;function b(e,t){let n=e.split(`name="${t}"`)[1].split("</select>")[0];if(n.indexOf('selected="selected"')>-1){n=n.split("<option");for(let e=0;e<n.length;++e)if(n[e].indexOf('selected="selected"')>-1)return n[e].split('value="')[1].split('"')[0]}return""}function w(e,t){return void 0===e||e.startsWith("http")||("/"!==e.charAt(0)&&(e=`/${e}`),e=t+e),e}function x(e){return(new DOMParser).parseFromString(`<!doctype html><body>${e}`,"text/html").body.textContent}function E(e){let t=window.location.href;return setInterval((function(){t!==window.location.href&&(t=window.location.href,e())}),100)}function _(e,t=!1){let n="";const o=setInterval((function(){const o=t?c(window.location.href):window.location.href;n!==o&&(n=o,e())}),100);return Number(o)}function S(e,t,n=!1){let o=t();const r=setInterval((function(){const n=t();void 0!==n&&o!==n&&(o=t(),e())}),500);return n&&e(),Number(r)}function k(e,t,n=100){const o=setInterval((function(){e()&&(clearInterval(o),t())}),n);return o}function C(e,t=100){let n,o;const r=()=>{clearTimeout(n),o&&o("AsyncWait stopped")};return{asyncWaitUntilTrue:()=>(r(),new Promise(((r,i)=>{o=i,n=k(e,(()=>r()),t)}))),reset:r}}!function(e){e[e.watching=1]="watching",e[e.completed=2]="completed",e[e.onhold=3]="onhold",e[e.dropped=4]="dropped",e[e.planToWatch=6]="planToWatch"}(A||(A={}));const T=Math.random();function M(){$(".mal-sync-double-detect").length&&$(".mal-sync-double-detect").each((function(e){$(this).text()!==T.toString()&&alert("Double execution detected! Please run MAL-Sync once only.")})),$("body").after(o.html(`<div class="mal-sync-double-detect" style="display: none;">${T.toString()}</div>`))}function N(e){return/malSync::[\d\D]+::/.test(e)?t(e.split("malSync::")[1].split("::")[0]):/last::[\d\D]+::/.test(e)?t(e.split("last::")[1].split("::")[0]):void 0;function t(e){try{return atob(e)}catch(t){return e}}}function I(e,t){if(""===e)return t.replace(/,?(malSync|last)::[^ \n]+?::/,"");if(!r.settings.get("malTags"))return t;const n=`malSync::${btoa(e)}::`;return/(last|malSync)::[\d\D]+::/.test(t)?t.replace(/(last|malSync)::[^^]*?::/,n):`${t},${n}`}function R(e,t,n,o){return s(this,void 0,void 0,(function*(){return r.storage.set(`resume/${n}/${o}`,{url:e,ep:t})}))}function D(e,t){return s(this,void 0,void 0,(function*(){if(r.settings.get("malResume"))return r.storage.get(`resume/${e}/${t}`)}))}function O(e,t,n,o){return s(this,void 0,void 0,(function*(){return r.storage.set(`continue/${n}/${o}`,{url:e,ep:t})}))}function L(e,t){return s(this,void 0,void 0,(function*(){if(r.settings.get("malContinue"))return r.storage.get(`continue/${e}/${t}`)}))}function U(e,t,n,o=""){return s(this,void 0,void 0,(function*(){const i={};if(n){for(const e in n)switch(e){case"u":case"p":i[e]=n[e]}r.settings.get("malTags")?o=I(JSON.stringify(i),o):yield r.storage.set(`tagSettings/${e}/${t}`,JSON.stringify(i))}return Object.values(i).find((e=>Boolean(e)))||(o=I("",o),r.settings.get("malTags")||(yield r.storage.remove(`tagSettings/${e}/${t}`))),o}))}function P(e,t,n=""){return s(this,void 0,void 0,(function*(){const o={u:null,c:null,r:null,p:""};if(r.settings.get("malTags")){const e=N(n);if(e)if("{"===e[0])try{const t=JSON.parse(e);for(const e in o)t[e]&&(o[e]=t[e])}catch(e){i.error(e)}else o.u=e}else{let n=yield r.storage.get(`tagSettings/${e}/${t}`);if(n){n=JSON.parse(n);for(const e in o)n[e]&&(o[e]=n[e])}}const a=yield L(e,t);a&&(o.c=a);const s=yield D(e,t);return s&&(o.r=s),r.settings.get("usedPage")||(o.u=null),o}))}function B(e){return-1!==e.indexOf("questionmark")?r.storage.assetUrl("questionmark.gif"):e}function F(e,t="",n="top"){const o=Math.floor(1e3*Math.random()+1);return`<div id="tt${o}" class="icon material-icons" style="font-size:16px; line-height: 0; color: #7f7f7f; padding-bottom: 20px; padding-left: 3px; ${t}">contact_support</div>  <div class="mdl-tooltip mdl-tooltip--${n} mdl-tooltip--large" for="tt${o}">${e}</div>`}function z(e){let t="";e/=1e3;const n=Math.floor(e/31536e3);e-=31536e3*n,n&&(t+=`${n}y `);const o=Math.floor(e/86400);e-=86400*o,o&&(t+=`${o}d `);const r=Math.floor(e/3600)%24;e-=3600*r,r&&o<2&&(t+=`${r}h `);const i=Math.floor(e/60)%60;return e-=60*i,i&&!o&&r<3&&(t+=`${i}min `),t}function j(){return"undefined"!=typeof browser&&void 0!==browser.tabs.hide}function H(e,t,n){const o={anime:{1:{class:"watching",text:"CW",title:r.storage.lang(`UI_Status_watching_${t}`)},2:{class:"completed",text:"CMPL",title:r.storage.lang("UI_Status_Completed")},3:{class:"on-hold",text:"HOLD",title:r.storage.lang("UI_Status_OnHold")},4:{class:"dropped",text:"DROP",title:r.storage.lang("UI_Status_Dropped")},6:{class:"plantowatch",text:"PTW",title:r.storage.lang(`UI_Status_planTo_${t}`)},23:{class:"rewatching",text:"RE",title:r.storage.lang(`UI_Status_Rewatching_${t}`)}},manga:{1:{class:"reading",text:"CR",title:r.storage.lang(`UI_Status_watching_${t}`)},2:{class:"completed",text:"CMPL",title:r.storage.lang("UI_Status_Completed")},3:{class:"on-hold",text:"HOLD",title:r.storage.lang("UI_Status_OnHold")},4:{class:"dropped",text:"DROP",title:r.storage.lang("UI_Status_Dropped")},6:{class:"plantoread",text:"PTR",title:r.storage.lang(`UI_Status_planTo_${t}`)},23:{class:"rewatching",text:"RE",title:r.storage.lang(`UI_Status_Rewatching_${t}`)}}};if($.each([1,2,3,4,6,23],(function(e,t){o.anime[o.anime[t].title]=o.anime[t],o.manga[o.manga[t].title]=o.manga[t]})),e&&o[t][e]){const r=o[t][e];return` <a href="https://myanimelist.net/ownlist/${t}/${n}/edit?hideLayout=1" title="${r.title}" class="Lightbox_AddEdit button_edit ${r.class}">${r.text}</a>`}return!1}function W(e,t){switch(t){case 1:return r.storage.lang(`UI_Status_watching_${e}`);case 2:return r.storage.lang("UI_Status_Completed");case 3:return r.storage.lang("UI_Status_OnHold");case 4:return r.storage.lang("UI_Status_Dropped");case 6:return r.storage.lang(`UI_Status_planTo_${e}`);case 7:return r.storage.lang("UI_Status_All");case 23:return r.storage.lang(`UI_Status_Rewatching_${e}`);default:return""}}function V(e,t,n,o=""){const a={type:"basic",title:t,message:n,iconUrl:o};i.log("Notification",e,a),r.storage.get("notificationHistory").then((t=>{void 0===t&&(t=[]),"object"==typeof t&&(t.length>=10&&t.shift(),t.push({url:e,title:a.title,message:a.message,iconUrl:a.iconUrl,timestamp:Date.now()}),r.storage.set("notificationHistory",t))}));try{return chrome.notifications.create(e,a)}catch(e){i.error(e)}}function K(e,t,n){return s(this,void 0,void 0,(function*(){const o=yield r.storage.get(e);if("object"==typeof o&&(new Date).getTime()<o.timestamp)return o.data;const i=yield t();return r.storage.set(e,{data:i,timestamp:(new Date).getTime()+n}).then((()=>i))}))}function q(e,t){o.$("#flash-div-top").length||function(){r.storage.addStyle('.flashinfo{\n                    transition: max-height 2s, opacity 2s 2s;\n                 }\n                 .mini-stealth .flashinfo{\n                    opacity: 0;\n                 }\n                  #flashinfo-div.hover.mini-stealth .flashinfo.type-update{\n                    opacity: 0.7;\n                 }\n                 #flashinfo-div.hover .flashinfo{\n                    opacity: 1;\n                 }\n                 .flashinfo:hover{\n                    max-height:5000px !important;\n                    z-index: 2147483647;\n                    opacity: 1;\n                    transition: max-height 2s;\n                 }\n                 .flashinfo .synopsis{\n                    transition: max-height 2s, max-width 2s ease 2s;\n                 }\n                 .flashinfo:hover .synopsis{\n                    max-height:9999px !important;\n                    max-width: 500px !important;\n                    transition: max-height 2s;\n                 }\n                 #flashinfo-div{\n                  z-index: 2;\n                  transition: 2s;\n                 }\n                 #flashinfo-div:hover, #flashinfo-div.hover{\n                  z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error {\n                   z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error .type-update{\n                  overflow: visible !important;\n                  opacity: 1 !important;\n                 }\n                 #flashinfo-div.player-error .player-error{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-missing-permissions{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-default{\n                  display: none !important\n                 }\n\n                 #flash-div-top, #flash-div-bottom, #flashinfo-div{\n                    font-family: "Helvetica","Arial",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 400;\n                    line-height: 17px;\n                 }\n                 #flash-div-top h2, #flash-div-bottom h2, #flashinfo-div h2{\n                    font-family: "Helvetica","Arial",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 700;\n                    line-height: 17px;\n                    padding: 0;\n                    margin: 0;\n                 }\n                 #flash-div-top a, #flash-div-bottom a, #flashinfo-div a{\n                    color: #DF6300;\n                 }');let e="";r.settings.get("floatButtonStealth")&&(e="mini-stealth"),o.$("body").after(o.html(`<div id="flash-div-top" style="text-align: center;pointer-events: none;position: fixed;top:-5px;width:100%;z-index: 2147483647;left: 0;"></div>        <div id="flash-div-bottom" style="text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;z-index: 2147483647;left: 0;"><div id="flash" style="display:none;  background-color: red;padding: 20px; margin: 0 auto;max-width: 60%;          -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;background:rgba(227,0,0,0.6);"></div></div>        <div id="flashinfo-div" class="${e}" style="text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;left: 0;">`))}(),i.log("[Flash] Message:",e);let n="#323232";void 0!==t&&void 0!==t.error&&t.error&&(n="#3e0808");let a="#flash-div-bottom";void 0!==t&&void 0!==t.position&&t.position&&(a=`#flash-div-${t.position}`);let s="flash";if(void 0!==t&&void 0!==t.type&&t.type){const e=`type-${t.type}`;o.$(`${a} .${e}, #flashinfo-div .${e}`).removeClass(e).fadeOut({duration:1e3,queue:!1,complete(){o.$(this).remove()}}),s+=` ${e}`}let l,c=`<div class="${s}" style="display:none;">        <div style="display:table; pointer-events: all; padding: 14px 24px 14px 24px; margin: 0 auto; margin-top: 5px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${n}; ">          ${e}        </div>      </div>`;return void 0!==t&&void 0!==t.hoverInfo&&t.hoverInfo?(s+=" flashinfo",c=`<div class="${s}" style="display:none; max-height: 5000px; overflow: hidden;"><div style="display:table; pointer-events: all; margin: 0 auto; margin-top: -2px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${n}; position: relative;"><div style="max-height: 60vh; overflow-y: auto; padding: 14px 24px 14px 24px;">${e}</div></div></div>`,o.$("#flashinfo-div").addClass("hover"),l=o.$(o.html(c)).appendTo("#flashinfo-div"),void 0!==t&&void 0!==t.minimized&&t.minimized&&l.css("max-height","8px")):l=o.$(o.html(c)).appendTo(a),void 0!==t&&void 0!==t.permanent&&t.permanent?l.slideDown(800):void 0!==t&&void 0!==t.hoverInfo&&t.hoverInfo?l.slideDown(800).delay(4e3).queue((function(){o.$("#flashinfo-div").removeClass("hover"),l.css("max-height","8px")})):l.slideDown(800).delay(4e3).slideUp(800,(()=>{o.$(this).remove()})),l}function G(e,t,n=(()=>{}),i=(()=>{}),a=!1){return s(this,void 0,void 0,(function*(){return new Promise((function(s,l){let c=r.storage.lang("Ok"),u=r.storage.lang("Cancel");a&&(c=r.storage.lang("Yes"),u=r.storage.lang("No"));const d=q(e=`<div style="text-align: center;">${e}</div><div style="display: flex; justify-content: space-around;"><button class="Yes" style="background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;">${c}</button><button class="Cancel" style="background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;">${u}</button></div>`,{permanent:!0,position:"top",type:t});d.find(".Yes").click((function(e){s(!0),o.$(e.target).parentsUntil(".flash").fadeOut(300,(function(){o.$(this).remove()})),n()})),d.find(".Cancel").click((function(e){s(!1),o.$(e.target).parentsUntil(".flash").fadeOut(300,(function(){o.$(this).remove()})),i()}))}))}))}let J=!1,Y=[];function Z(e,t=".mdl-layout__content"){function n(e,t){if(!o.$(e).is(":visible"))return!1;if(o.$(e).hasClass("lazyBack"))o.$(e).css("background-image",`url(${e.getAttribute("data-src")})`).removeClass("lazyBack");else{const n=new Image,o=e.getAttribute("data-src");n.onload=function(){e.parent?e.parent.replaceChild(n,e):e.src=o,t&&t()},n.src=o}}for(let e=0;e<Y.length;e++)$(Y[e]).addClass("init");Y=[];const r=e.find("img.lazy.init, .lazyBack.init"),i=function(){for(let e=0;e<Y.length;e++)a.elementInViewport(Y[e],600)&&n(Y[e],(function(){Y.splice(e,e)})),$(Y[e]).length||Y.splice(e,e)};for(let e=0;e<r.length;e++)Y.push(r[e]),$(r[e]).removeClass("init");i(),J||(J=!0,e.find(t).scroll((function(){i()})))}function X(e,t=0){const n=e.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.top-t<=(window.innerHeight||document.documentElement.clientHeight)}function Q(e){return new Promise((t=>{setTimeout(t,e)}))}function ee(e,t,n){switch(e){case"mal":return`https://myanimelist.net/${t}/${n}`;case"anilist":return`https://anilist.co/${t}/${n}`;case"kitsu":return`https://kitsu.io/${t}/${n}`;case"simkl":return`https://simkl.com/${t}/${n}`;default:throw`${e} not a valid page`}}function te(e=0){const t=new Date;t.setDate(t.getDate()+e);const n=t.getMonth()<9?`0${t.getMonth()+1}`:t.getMonth()+1,o=t.getDate()<10?`0${t.getDate()}`:t.getDate();return`${t.getFullYear()}-${n}-${o}`}function ne(e){return $("<textarea/>").html(o.html(e)).text()}function oe(){return Boolean("undefined"!=typeof browser&&"undefined"!=typeof chrome)}function re(){const e=()=>Boolean(!document.visibilityState||"visible"===document.visibilityState);if(e())return Promise.resolve();i.log("Page in background");const{asyncWaitUntilTrue:t}=C((()=>e()));return t().then((()=>{i.log("Page is visible")}))}function ie(e){return e.split("/").length<4&&(e+="/"),e.replace(/\?.*/,"?")}function ae(){return s(this,void 0,void 0,(function*(){const e=yield r.storage.list();let t=0;o.$.each(e,(function(e,n){a.syncRegex.test(String(e))||/(^tagSettings\/.*)/.test(String(e))||(r.storage.remove(String(e)),t++)})),a.flashm(`Cache Cleared [${t}]`)}))}function se(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}function le(e,t){const n=new URL(e),{host:o}=n;return o===t||o.endsWith(`.${t}`)}function ce(e){return!e||e.length<2?e:e.charAt(0).toUpperCase()+e.slice(1)}},19947:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$:()=>r,html:()=>i});var o=n(27856);const r=jQuery;function i(e){return o.sanitize(e,{SAFE_FOR_JQUERY:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["target"]})}},24564:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var o=n(9375),r=n(19947),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))};class a{constructor(e=(0,o.generateUniqueID)()){return this.elementId=e,this.capturedVariables=new Map,this}addCaptureVariable(e,t){this.capturedVariables.set(e,[(0,o.generateUniqueID)(),t])}getCaptureVariable(e){const t=r.$(`#${this.elementId}`);if(null===t)return;const n=this.capturedVariables.get(e);if(void 0===n)return;const o=t.attr(`data-${n[0]}`);return void 0!==o?JSON.parse(o):void 0}addProxy(e=undefined){const t=r.$(`#${this.elementId}`);null!==t&&t.remove();const n=(0,o.generateUniqueID)(),i=t=>{t instanceof MessageEvent&&t.data.uniqueId===n&&(window.removeEventListener("message",i),void 0!==e&&e(this))};window.addEventListener("message",i,!1);let a=`\n      {\n        const element = document.getElementById('${this.elementId}');\n    `;this.capturedVariables.forEach(((e,t)=>{const n=(0,o.generateUniqueID)();a+=`\n        const func_${n} = () => {${e[1]}};\n        element.setAttribute('data-${e[0]}', JSON.stringify(func_${n}()));\n      `})),a+=`\n        window.postMessage({"uniqueId": "${n}"}, "*");\n      }\n    `;const s=document.createElement("script"),l=document.createTextNode(a);s.id=this.elementId,s.appendChild(l),r.$("body").append(s)}getProxyVariable(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{this.addProxy((n=>i(this,void 0,void 0,(function*(){t(this.getCaptureVariable(e))}))))}))}))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={id:o,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(52278)})();
//# sourceMappingURL=page_Plex.js.map