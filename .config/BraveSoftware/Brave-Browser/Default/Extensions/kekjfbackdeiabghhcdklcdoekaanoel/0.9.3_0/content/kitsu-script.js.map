{"version":3,"file":"content/kitsu-script.js","mappings":"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","sources":["webpack://MALSync/./node_modules/@sentry/utils/esm/node.js","webpack://MALSync/./node_modules/@sentry/utils/esm/env.js","webpack://MALSync/./node_modules/@sentry/utils/esm/time.js","webpack://MALSync/./node_modules/@sentry/utils/esm/worldwide.js","webpack://MALSync/./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","webpack://MALSync/./node_modules/@vue/shared/dist/shared.esm-bundler.js","webpack://MALSync/./src/kitsu/style.less","webpack://MALSync/./node_modules/css-loader/dist/runtime/api.js","webpack://MALSync/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://MALSync/./node_modules/dompurify/dist/purify.js","webpack://MALSync/./node_modules/eventemitter2/lib/eventemitter2.js","webpack://MALSync/./src/kitsu/style.less?e72b","webpack://MALSync/./src/api/storage/webextension.ts","webpack://MALSync/./src/api/request/requestWebextension.ts","webpack://MALSync/./src/api/settings.ts","webpack://MALSync/./src/api/webextension.ts","webpack://MALSync/./src/utils/console.ts","webpack://MALSync/./src/utils/general.ts","webpack://MALSync/./src/utils/j.ts","webpack://MALSync/webpack/bootstrap","webpack://MALSync/webpack/runtime/compat get default export","webpack://MALSync/webpack/runtime/define property getters","webpack://MALSync/webpack/runtime/global","webpack://MALSync/webpack/runtime/harmony module decorator","webpack://MALSync/webpack/runtime/hasOwnProperty shorthand","webpack://MALSync/webpack/runtime/make namespace object","webpack://MALSync/./src/_provider/definitions.ts","webpack://MALSync/./src/utils/localStore.ts","webpack://MALSync/./src/utils/Cache.ts","webpack://MALSync/./src/utils/emitter.ts","webpack://MALSync/./src/_provider/Errors.ts","webpack://MALSync/./src/_provider/MyAnimeList_api/helper.ts","webpack://MALSync/./src/_provider/listAbstract.ts","webpack://MALSync/./src/_provider/AniList/helper.ts","webpack://MALSync/./src/_provider/Kitsu/helper.ts","webpack://MALSync/./src/_provider/Shikimori/helper.ts","webpack://MALSync/./src/_provider/Kitsu/list.ts","webpack://MALSync/./src/background/releaseProgress.ts","webpack://MALSync/./src/utils/time.ts","webpack://MALSync/./src/utils/progress.ts","webpack://MALSync/./src/utils/errors.ts","webpack://MALSync/./src/_provider/ScoreMode/point10.ts","webpack://MALSync/./src/_provider/singleAbstract.ts","webpack://MALSync/./src/_provider/ScoreMode/point20decimal.ts","webpack://MALSync/./src/_provider/ScoreMode/smiley4.ts","webpack://MALSync/./src/_provider/ScoreMode/point10decimal.ts","webpack://MALSync/./src/_provider/Kitsu/single.ts","webpack://MALSync/./src/utils/quicklinksBuilder.ts","webpack://MALSync/./src/kitsu/kitsuClass.ts","webpack://MALSync/./src/utils/firebaseNotification.ts","webpack://MALSync/./node_modules/@sentry/utils/esm/error.js","webpack://MALSync/./node_modules/@sentry/utils/esm/is.js","webpack://MALSync/./node_modules/@sentry/utils/esm/syncpromise.js","webpack://MALSync/./node_modules/@sentry/utils/esm/dsn.js","webpack://MALSync/./node_modules/@sentry/utils/esm/browser.js","webpack://MALSync/./node_modules/@sentry/utils/esm/string.js","webpack://MALSync/./node_modules/@sentry/utils/esm/object.js","webpack://MALSync/./node_modules/@sentry/utils/esm/stacktrace.js","webpack://MALSync/./node_modules/@sentry/utils/esm/normalize.js","webpack://MALSync/./node_modules/@sentry/utils/esm/memo.js","webpack://MALSync/./node_modules/@sentry/utils/esm/envelope.js","webpack://MALSync/./node_modules/@sentry/utils/esm/ratelimit.js","webpack://MALSync/./node_modules/@sentry/utils/esm/logger.js","webpack://MALSync/./node_modules/@sentry/core/esm/transports/base.js","webpack://MALSync/./node_modules/@sentry/utils/esm/promisebuffer.js","webpack://MALSync/./node_modules/@sentry/utils/esm/supports.js","webpack://MALSync/./node_modules/@sentry/utils/esm/misc.js","webpack://MALSync/./node_modules/@sentry/core/esm/session.js","webpack://MALSync/./node_modules/@sentry/core/esm/scope.js","webpack://MALSync/./node_modules/@sentry/core/esm/hub.js","webpack://MALSync/./node_modules/@sentry/browser/esm/helpers.js","webpack://MALSync/./node_modules/@sentry/browser/esm/transports/utils.js","webpack://MALSync/./node_modules/@sentry/core/esm/exports.js","webpack://MALSync/./node_modules/@sentry/browser/esm/transports/fetch.js","webpack://MALSync/./node_modules/@sentry/core/esm/integrations/inboundfilters.js","webpack://MALSync/./node_modules/@sentry/core/esm/integrations/functiontostring.js","webpack://MALSync/./node_modules/@sentry/core/esm/integration.js","webpack://MALSync/./node_modules/@sentry/utils/esm/instrument.js","webpack://MALSync/./node_modules/@sentry/core/esm/api.js","webpack://MALSync/./node_modules/@sentry/core/esm/baseclient.js","webpack://MALSync/./node_modules/@sentry/core/esm/envelope.js","webpack://MALSync/./node_modules/@sentry/core/esm/utils/prepareEvent.js","webpack://MALSync/./node_modules/@sentry/core/esm/version.js","webpack://MALSync/./node_modules/@sentry/browser/esm/eventbuilder.js","webpack://MALSync/./node_modules/@sentry/utils/esm/severity.js","webpack://MALSync/./node_modules/@sentry/utils/esm/url.js","webpack://MALSync/./node_modules/@sentry/browser/esm/integrations/breadcrumbs.js","webpack://MALSync/./node_modules/@sentry/browser/esm/client.js","webpack://MALSync/./node_modules/@sentry/utils/esm/buildPolyfills/_optionalChain.js","webpack://MALSync/./node_modules/@sentry/utils/esm/clientreport.js","webpack://MALSync/./node_modules/@sentry/browser/esm/stack-parsers.js","webpack://MALSync/./node_modules/@sentry/browser/esm/integrations/trycatch.js","webpack://MALSync/./node_modules/@sentry/browser/esm/integrations/globalhandlers.js","webpack://MALSync/./node_modules/@sentry/browser/esm/integrations/linkederrors.js","webpack://MALSync/./node_modules/@sentry/browser/esm/integrations/dedupe.js","webpack://MALSync/./node_modules/@sentry/browser/esm/integrations/httpcontext.js","webpack://MALSync/./node_modules/@sentry/browser/esm/transports/xhr.js","webpack://MALSync/./node_modules/@sentry/browser/esm/sdk.js","webpack://MALSync/./node_modules/@sentry/browser/esm/index.js","webpack://MALSync/./src/utils/shark.ts","webpack://MALSync/./src/index-webextension/kitsu.ts","webpack://MALSync/./node_modules/@sentry/core/esm/sdk.js"],"sourcesContent":["import { isBrowserBundle } from './env.js';\n\n/**\n * NOTE: In order to avoid circular dependencies, if you add a function to this module and it needs to print something,\n * you must either a) use `console.log` rather than the logger, or b) put your function elsewhere.\n */\n\n/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\nfunction isNodeEnv() {\n  // explicitly check for browser bundles as those can be optimized statically\n  // by terser/rollup.\n  return (\n    !isBrowserBundle() &&\n    Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]'\n  );\n}\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\nfunction dynamicRequire(mod, request) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return mod.require(request);\n}\n\n/**\n * Helper for dynamically loading module that should work with linked dependencies.\n * The problem is that we _should_ be using `require(require.resolve(moduleName, { paths: [cwd()] }))`\n * However it's _not possible_ to do that with Webpack, as it has to know all the dependencies during\n * build time. `require.resolve` is also not available in any other way, so we cannot create,\n * a fake helper like we do with `dynamicRequire`.\n *\n * We always prefer to use local package, thus the value is not returned early from each `try/catch` block.\n * That is to mimic the behavior of `require.resolve` exactly.\n *\n * @param moduleName module name to require\n * @returns possibly required module\n */\nfunction loadModule(moduleName) {\n  let mod;\n\n  try {\n    mod = dynamicRequire(module, moduleName);\n  } catch (e) {\n    // no-empty\n  }\n\n  try {\n    const { cwd } = dynamicRequire(module, 'process');\n    mod = dynamicRequire(module, `${cwd()}/node_modules/${moduleName}`) ;\n  } catch (e) {\n    // no-empty\n  }\n\n  return mod;\n}\n\nexport { dynamicRequire, isNodeEnv, loadModule };\n//# sourceMappingURL=node.js.map\n","/*\n * This module exists for optimizations in the build process through rollup and terser.  We define some global\n * constants, which can be overridden during build. By guarding certain pieces of code with functions that return these\n * constants, we can control whether or not they appear in the final bundle. (Any code guarded by a false condition will\n * never run, and will hence be dropped during treeshaking.) The two primary uses for this are stripping out calls to\n * `logger` and preventing node-related code from appearing in browser bundles.\n *\n * Attention:\n * This file should not be used to define constants/flags that are intended to be used for tree-shaking conducted by\n * users. These fags should live in their respective packages, as we identified user tooling (specifically webpack)\n * having issues tree-shaking these constants across package boundaries.\n * An example for this is the __SENTRY_DEBUG__ constant. It is declared in each package individually because we want\n * users to be able to shake away expressions that it guards.\n */\n\n/**\n * Figures out if we're building a browser bundle.\n *\n * @returns true if this is a browser bundle build.\n */\nfunction isBrowserBundle() {\n  return typeof __SENTRY_BROWSER_BUNDLE__ !== 'undefined' && !!__SENTRY_BROWSER_BUNDLE__;\n}\n\nexport { isBrowserBundle };\n//# sourceMappingURL=env.js.map\n","import { dynamicRequire, isNodeEnv } from './node.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * An object that can return the current timestamp in seconds since the UNIX epoch.\n */\n\n/**\n * A TimestampSource implementation for environments that do not support the Performance Web API natively.\n *\n * Note that this TimestampSource does not use a monotonic clock. A call to `nowSeconds` may return a timestamp earlier\n * than a previously returned value. We do not try to emulate a monotonic behavior in order to facilitate debugging. It\n * is more obvious to explain \"why does my span have negative duration\" than \"why my spans have zero duration\".\n */\nconst dateTimestampSource = {\n  nowSeconds: () => Date.now() / 1000,\n};\n\n/**\n * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n * for accessing a high-resolution monotonic clock.\n */\n\n/**\n * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n * support the API.\n *\n * Wrapping the native API works around differences in behavior from different browsers.\n */\nfunction getBrowserPerformance() {\n  const { performance } = WINDOW;\n  if (!performance || !performance.now) {\n    return undefined;\n  }\n\n  // Replace performance.timeOrigin with our own timeOrigin based on Date.now().\n  //\n  // This is a partial workaround for browsers reporting performance.timeOrigin such that performance.timeOrigin +\n  // performance.now() gives a date arbitrarily in the past.\n  //\n  // Additionally, computing timeOrigin in this way fills the gap for browsers where performance.timeOrigin is\n  // undefined.\n  //\n  // The assumption that performance.timeOrigin + performance.now() ~= Date.now() is flawed, but we depend on it to\n  // interact with data coming out of performance entries.\n  //\n  // Note that despite recommendations against it in the spec, browsers implement the Performance API with a clock that\n  // might stop when the computer is asleep (and perhaps under other circumstances). Such behavior causes\n  // performance.timeOrigin + performance.now() to have an arbitrary skew over Date.now(). In laptop computers, we have\n  // observed skews that can be as long as days, weeks or months.\n  //\n  // See https://github.com/getsentry/sentry-javascript/issues/2590.\n  //\n  // BUG: despite our best intentions, this workaround has its limitations. It mostly addresses timings of pageload\n  // transactions, but ignores the skew built up over time that can aversely affect timestamps of navigation\n  // transactions of long-lived web pages.\n  const timeOrigin = Date.now() - performance.now();\n\n  return {\n    now: () => performance.now(),\n    timeOrigin,\n  };\n}\n\n/**\n * Returns the native Performance API implementation from Node.js. Returns undefined in old Node.js versions that don't\n * implement the API.\n */\nfunction getNodePerformance() {\n  try {\n    const perfHooks = dynamicRequire(module, 'perf_hooks') ;\n    return perfHooks.performance;\n  } catch (_) {\n    return undefined;\n  }\n}\n\n/**\n * The Performance API implementation for the current platform, if available.\n */\nconst platformPerformance = isNodeEnv() ? getNodePerformance() : getBrowserPerformance();\n\nconst timestampSource =\n  platformPerformance === undefined\n    ? dateTimestampSource\n    : {\n        nowSeconds: () => (platformPerformance.timeOrigin + platformPerformance.now()) / 1000,\n      };\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n */\nconst dateTimestampInSeconds = dateTimestampSource.nowSeconds.bind(dateTimestampSource);\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n * availability of the Performance API.\n *\n * See `usingPerformanceAPI` to test whether the Performance API is used.\n *\n * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n * skew can grow to arbitrary amounts like days, weeks or months.\n * See https://github.com/getsentry/sentry-javascript/issues/2590.\n */\nconst timestampInSeconds = timestampSource.nowSeconds.bind(timestampSource);\n\n// Re-exported with an old name for backwards-compatibility.\nconst timestampWithMs = timestampInSeconds;\n\n/**\n * A boolean that is true when timestampInSeconds uses the Performance API to produce monotonic timestamps.\n */\nconst usingPerformanceAPI = platformPerformance !== undefined;\n\n/**\n * Internal helper to store what is the source of browserPerformanceTimeOrigin below. For debugging only.\n */\nlet _browserPerformanceTimeOriginMode;\n\n/**\n * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n * performance API is available.\n */\nconst browserPerformanceTimeOrigin = (() => {\n  // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or\n  // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin\n  // data as reliable if they are within a reasonable threshold of the current time.\n\n  const { performance } = WINDOW;\n  if (!performance || !performance.now) {\n    _browserPerformanceTimeOriginMode = 'none';\n    return undefined;\n  }\n\n  const threshold = 3600 * 1000;\n  const performanceNow = performance.now();\n  const dateNow = Date.now();\n\n  // if timeOrigin isn't available set delta to threshold so it isn't used\n  const timeOriginDelta = performance.timeOrigin\n    ? Math.abs(performance.timeOrigin + performanceNow - dateNow)\n    : threshold;\n  const timeOriginIsReliable = timeOriginDelta < threshold;\n\n  // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n  // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n  // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n  // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n  // Date API.\n  // eslint-disable-next-line deprecation/deprecation\n  const navigationStart = performance.timing && performance.timing.navigationStart;\n  const hasNavigationStart = typeof navigationStart === 'number';\n  // if navigationStart isn't available set delta to threshold so it isn't used\n  const navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;\n  const navigationStartIsReliable = navigationStartDelta < threshold;\n\n  if (timeOriginIsReliable || navigationStartIsReliable) {\n    // Use the more reliable time origin\n    if (timeOriginDelta <= navigationStartDelta) {\n      _browserPerformanceTimeOriginMode = 'timeOrigin';\n      return performance.timeOrigin;\n    } else {\n      _browserPerformanceTimeOriginMode = 'navigationStart';\n      return navigationStart;\n    }\n  }\n\n  // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.\n  _browserPerformanceTimeOriginMode = 'dateNow';\n  return dateNow;\n})();\n\nexport { _browserPerformanceTimeOriginMode, browserPerformanceTimeOrigin, dateTimestampInSeconds, timestampInSeconds, timestampWithMs, usingPerformanceAPI };\n//# sourceMappingURL=time.js.map\n","/** Internal global with common properties and Sentry extensions  */\n\n// The code below for 'isGlobalObj' and 'GLOBAL_OBJ' was copied from core-js before modification\n// https://github.com/zloirock/core-js/blob/1b944df55282cdc99c90db5f49eb0b6eda2cc0a3/packages/core-js/internals/global.js\n// core-js has the following licence:\n//\n// Copyright (c) 2014-2022 Denis Pushkarev\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/** Returns 'obj' if it's the global object, otherwise returns undefined */\nfunction isGlobalObj(obj) {\n  return obj && obj.Math == Math ? obj : undefined;\n}\n\n/** Get's the global object for the current JavaScript runtime */\nconst GLOBAL_OBJ =\n  (typeof globalThis == 'object' && isGlobalObj(globalThis)) ||\n  // eslint-disable-next-line no-restricted-globals\n  (typeof window == 'object' && isGlobalObj(window)) ||\n  (typeof self == 'object' && isGlobalObj(self)) ||\n  (typeof global == 'object' && isGlobalObj(global)) ||\n  (function () {\n    return this;\n  })() ||\n  {};\n\n/**\n * @deprecated Use GLOBAL_OBJ instead or WINDOW from @sentry/browser. This will be removed in v8\n */\nfunction getGlobalObject() {\n  return GLOBAL_OBJ ;\n}\n\n/**\n * Returns a global singleton contained in the global `__SENTRY__` object.\n *\n * If the singleton doesn't already exist in `__SENTRY__`, it will be created using the given factory\n * function and added to the `__SENTRY__` object.\n *\n * @param name name of the global singleton on __SENTRY__\n * @param creator creator Factory function to create the singleton if it doesn't already exist on `__SENTRY__`\n * @param obj (Optional) The global object on which to look for `__SENTRY__`, if not `GLOBAL_OBJ`'s return value\n * @returns the singleton\n */\nfunction getGlobalSingleton(name, creator, obj) {\n  const gbl = (obj || GLOBAL_OBJ) ;\n  const __SENTRY__ = (gbl.__SENTRY__ = gbl.__SENTRY__ || {});\n  const singleton = __SENTRY__[name] || (__SENTRY__[name] = creator());\n  return singleton;\n}\n\nexport { GLOBAL_OBJ, getGlobalObject, getGlobalSingleton };\n//# sourceMappingURL=worldwide.js.map\n","import { extend, isArray, isMap, isIntegerKey, hasOwn, isSymbol, isObject, hasChanged, makeMap, capitalize, toRawType, def, isFunction, NOOP } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n    console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n    constructor(detached = false) {\n        this.detached = detached;\n        /**\n         * @internal\n         */\n        this._active = true;\n        /**\n         * @internal\n         */\n        this.effects = [];\n        /**\n         * @internal\n         */\n        this.cleanups = [];\n        this.parent = activeEffectScope;\n        if (!detached && activeEffectScope) {\n            this.index =\n                (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this) - 1;\n        }\n    }\n    get active() {\n        return this._active;\n    }\n    run(fn) {\n        if (this._active) {\n            const currentEffectScope = activeEffectScope;\n            try {\n                activeEffectScope = this;\n                return fn();\n            }\n            finally {\n                activeEffectScope = currentEffectScope;\n            }\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn(`cannot run an inactive effect scope.`);\n        }\n    }\n    /**\n     * This should only be called on non-detached scopes\n     * @internal\n     */\n    on() {\n        activeEffectScope = this;\n    }\n    /**\n     * This should only be called on non-detached scopes\n     * @internal\n     */\n    off() {\n        activeEffectScope = this.parent;\n    }\n    stop(fromParent) {\n        if (this._active) {\n            let i, l;\n            for (i = 0, l = this.effects.length; i < l; i++) {\n                this.effects[i].stop();\n            }\n            for (i = 0, l = this.cleanups.length; i < l; i++) {\n                this.cleanups[i]();\n            }\n            if (this.scopes) {\n                for (i = 0, l = this.scopes.length; i < l; i++) {\n                    this.scopes[i].stop(true);\n                }\n            }\n            // nested scope, dereference from parent to avoid memory leaks\n            if (!this.detached && this.parent && !fromParent) {\n                // optimized O(1) removal\n                const last = this.parent.scopes.pop();\n                if (last && last !== this) {\n                    this.parent.scopes[this.index] = last;\n                    last.index = this.index;\n                }\n            }\n            this.parent = undefined;\n            this._active = false;\n        }\n    }\n}\nfunction effectScope(detached) {\n    return new EffectScope(detached);\n}\nfunction recordEffectScope(effect, scope = activeEffectScope) {\n    if (scope && scope.active) {\n        scope.effects.push(effect);\n    }\n}\nfunction getCurrentScope() {\n    return activeEffectScope;\n}\nfunction onScopeDispose(fn) {\n    if (activeEffectScope) {\n        activeEffectScope.cleanups.push(fn);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        warn(`onScopeDispose() is called when there is no active effect scope` +\n            ` to be associated with.`);\n    }\n}\n\nconst createDep = (effects) => {\n    const dep = new Set(effects);\n    dep.w = 0;\n    dep.n = 0;\n    return dep;\n};\nconst wasTracked = (dep) => (dep.w & trackOpBit) > 0;\nconst newTracked = (dep) => (dep.n & trackOpBit) > 0;\nconst initDepMarkers = ({ deps }) => {\n    if (deps.length) {\n        for (let i = 0; i < deps.length; i++) {\n            deps[i].w |= trackOpBit; // set was tracked\n        }\n    }\n};\nconst finalizeDepMarkers = (effect) => {\n    const { deps } = effect;\n    if (deps.length) {\n        let ptr = 0;\n        for (let i = 0; i < deps.length; i++) {\n            const dep = deps[i];\n            if (wasTracked(dep) && !newTracked(dep)) {\n                dep.delete(effect);\n            }\n            else {\n                deps[ptr++] = dep;\n            }\n            // clear bits\n            dep.w &= ~trackOpBit;\n            dep.n &= ~trackOpBit;\n        }\n        deps.length = ptr;\n    }\n};\n\nconst targetMap = new WeakMap();\n// The number of effects currently being tracked recursively.\nlet effectTrackDepth = 0;\nlet trackOpBit = 1;\n/**\n * The bitwise track markers support at most 30 levels of recursion.\n * This value is chosen to enable modern JS engines to use a SMI on all platforms.\n * When recursion depth is greater, fall back to using a full cleanup.\n */\nconst maxMarkerBits = 30;\nlet activeEffect;\nconst ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'iterate' : '');\nconst MAP_KEY_ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'Map key iterate' : '');\nclass ReactiveEffect {\n    constructor(fn, scheduler = null, scope) {\n        this.fn = fn;\n        this.scheduler = scheduler;\n        this.active = true;\n        this.deps = [];\n        this.parent = undefined;\n        recordEffectScope(this, scope);\n    }\n    run() {\n        if (!this.active) {\n            return this.fn();\n        }\n        let parent = activeEffect;\n        let lastShouldTrack = shouldTrack;\n        while (parent) {\n            if (parent === this) {\n                return;\n            }\n            parent = parent.parent;\n        }\n        try {\n            this.parent = activeEffect;\n            activeEffect = this;\n            shouldTrack = true;\n            trackOpBit = 1 << ++effectTrackDepth;\n            if (effectTrackDepth <= maxMarkerBits) {\n                initDepMarkers(this);\n            }\n            else {\n                cleanupEffect(this);\n            }\n            return this.fn();\n        }\n        finally {\n            if (effectTrackDepth <= maxMarkerBits) {\n                finalizeDepMarkers(this);\n            }\n            trackOpBit = 1 << --effectTrackDepth;\n            activeEffect = this.parent;\n            shouldTrack = lastShouldTrack;\n            this.parent = undefined;\n            if (this.deferStop) {\n                this.stop();\n            }\n        }\n    }\n    stop() {\n        // stopped while running itself - defer the cleanup\n        if (activeEffect === this) {\n            this.deferStop = true;\n        }\n        else if (this.active) {\n            cleanupEffect(this);\n            if (this.onStop) {\n                this.onStop();\n            }\n            this.active = false;\n        }\n    }\n}\nfunction cleanupEffect(effect) {\n    const { deps } = effect;\n    if (deps.length) {\n        for (let i = 0; i < deps.length; i++) {\n            deps[i].delete(effect);\n        }\n        deps.length = 0;\n    }\n}\nfunction effect(fn, options) {\n    if (fn.effect) {\n        fn = fn.effect.fn;\n    }\n    const _effect = new ReactiveEffect(fn);\n    if (options) {\n        extend(_effect, options);\n        if (options.scope)\n            recordEffectScope(_effect, options.scope);\n    }\n    if (!options || !options.lazy) {\n        _effect.run();\n    }\n    const runner = _effect.run.bind(_effect);\n    runner.effect = _effect;\n    return runner;\n}\nfunction stop(runner) {\n    runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n    trackStack.push(shouldTrack);\n    shouldTrack = false;\n}\nfunction enableTracking() {\n    trackStack.push(shouldTrack);\n    shouldTrack = true;\n}\nfunction resetTracking() {\n    const last = trackStack.pop();\n    shouldTrack = last === undefined ? true : last;\n}\nfunction track(target, type, key) {\n    if (shouldTrack && activeEffect) {\n        let depsMap = targetMap.get(target);\n        if (!depsMap) {\n            targetMap.set(target, (depsMap = new Map()));\n        }\n        let dep = depsMap.get(key);\n        if (!dep) {\n            depsMap.set(key, (dep = createDep()));\n        }\n        const eventInfo = (process.env.NODE_ENV !== 'production')\n            ? { effect: activeEffect, target, type, key }\n            : undefined;\n        trackEffects(dep, eventInfo);\n    }\n}\nfunction trackEffects(dep, debuggerEventExtraInfo) {\n    let shouldTrack = false;\n    if (effectTrackDepth <= maxMarkerBits) {\n        if (!newTracked(dep)) {\n            dep.n |= trackOpBit; // set newly tracked\n            shouldTrack = !wasTracked(dep);\n        }\n    }\n    else {\n        // Full cleanup mode.\n        shouldTrack = !dep.has(activeEffect);\n    }\n    if (shouldTrack) {\n        dep.add(activeEffect);\n        activeEffect.deps.push(dep);\n        if ((process.env.NODE_ENV !== 'production') && activeEffect.onTrack) {\n            activeEffect.onTrack(Object.assign({ effect: activeEffect }, debuggerEventExtraInfo));\n        }\n    }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n    const depsMap = targetMap.get(target);\n    if (!depsMap) {\n        // never been tracked\n        return;\n    }\n    let deps = [];\n    if (type === \"clear\" /* TriggerOpTypes.CLEAR */) {\n        // collection being cleared\n        // trigger all effects for target\n        deps = [...depsMap.values()];\n    }\n    else if (key === 'length' && isArray(target)) {\n        const newLength = Number(newValue);\n        depsMap.forEach((dep, key) => {\n            if (key === 'length' || key >= newLength) {\n                deps.push(dep);\n            }\n        });\n    }\n    else {\n        // schedule runs for SET | ADD | DELETE\n        if (key !== void 0) {\n            deps.push(depsMap.get(key));\n        }\n        // also run for iteration key on ADD | DELETE | Map.SET\n        switch (type) {\n            case \"add\" /* TriggerOpTypes.ADD */:\n                if (!isArray(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                    if (isMap(target)) {\n                        deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n                    }\n                }\n                else if (isIntegerKey(key)) {\n                    // new index added to array -> length changes\n                    deps.push(depsMap.get('length'));\n                }\n                break;\n            case \"delete\" /* TriggerOpTypes.DELETE */:\n                if (!isArray(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                    if (isMap(target)) {\n                        deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n                    }\n                }\n                break;\n            case \"set\" /* TriggerOpTypes.SET */:\n                if (isMap(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                }\n                break;\n        }\n    }\n    const eventInfo = (process.env.NODE_ENV !== 'production')\n        ? { target, type, key, newValue, oldValue, oldTarget }\n        : undefined;\n    if (deps.length === 1) {\n        if (deps[0]) {\n            if ((process.env.NODE_ENV !== 'production')) {\n                triggerEffects(deps[0], eventInfo);\n            }\n            else {\n                triggerEffects(deps[0]);\n            }\n        }\n    }\n    else {\n        const effects = [];\n        for (const dep of deps) {\n            if (dep) {\n                effects.push(...dep);\n            }\n        }\n        if ((process.env.NODE_ENV !== 'production')) {\n            triggerEffects(createDep(effects), eventInfo);\n        }\n        else {\n            triggerEffects(createDep(effects));\n        }\n    }\n}\nfunction triggerEffects(dep, debuggerEventExtraInfo) {\n    // spread into array for stabilization\n    const effects = isArray(dep) ? dep : [...dep];\n    for (const effect of effects) {\n        if (effect.computed) {\n            triggerEffect(effect, debuggerEventExtraInfo);\n        }\n    }\n    for (const effect of effects) {\n        if (!effect.computed) {\n            triggerEffect(effect, debuggerEventExtraInfo);\n        }\n    }\n}\nfunction triggerEffect(effect, debuggerEventExtraInfo) {\n    if (effect !== activeEffect || effect.allowRecurse) {\n        if ((process.env.NODE_ENV !== 'production') && effect.onTrigger) {\n            effect.onTrigger(extend({ effect }, debuggerEventExtraInfo));\n        }\n        if (effect.scheduler) {\n            effect.scheduler();\n        }\n        else {\n            effect.run();\n        }\n    }\n}\nfunction getDepFromReactive(object, key) {\n    var _a;\n    return (_a = targetMap.get(object)) === null || _a === void 0 ? void 0 : _a.get(key);\n}\n\nconst isNonTrackableKeys = /*#__PURE__*/ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n/*#__PURE__*/\nObject.getOwnPropertyNames(Symbol)\n    // ios10.x Object.getOwnPropertyNames(Symbol) can enumerate 'arguments' and 'caller'\n    // but accessing them on Symbol leads to TypeError because Symbol is a strict mode\n    // function\n    .filter(key => key !== 'arguments' && key !== 'caller')\n    .map(key => Symbol[key])\n    .filter(isSymbol));\nconst get$1 = /*#__PURE__*/ createGetter();\nconst shallowGet = /*#__PURE__*/ createGetter(false, true);\nconst readonlyGet = /*#__PURE__*/ createGetter(true);\nconst shallowReadonlyGet = /*#__PURE__*/ createGetter(true, true);\nconst arrayInstrumentations = /*#__PURE__*/ createArrayInstrumentations();\nfunction createArrayInstrumentations() {\n    const instrumentations = {};\n    ['includes', 'indexOf', 'lastIndexOf'].forEach(key => {\n        instrumentations[key] = function (...args) {\n            const arr = toRaw(this);\n            for (let i = 0, l = this.length; i < l; i++) {\n                track(arr, \"get\" /* TrackOpTypes.GET */, i + '');\n            }\n            // we run the method using the original args first (which may be reactive)\n            const res = arr[key](...args);\n            if (res === -1 || res === false) {\n                // if that didn't work, run it again using raw values.\n                return arr[key](...args.map(toRaw));\n            }\n            else {\n                return res;\n            }\n        };\n    });\n    ['push', 'pop', 'shift', 'unshift', 'splice'].forEach(key => {\n        instrumentations[key] = function (...args) {\n            pauseTracking();\n            const res = toRaw(this)[key].apply(this, args);\n            resetTracking();\n            return res;\n        };\n    });\n    return instrumentations;\n}\nfunction hasOwnProperty(key) {\n    const obj = toRaw(this);\n    track(obj, \"has\" /* TrackOpTypes.HAS */, key);\n    return obj.hasOwnProperty(key);\n}\nfunction createGetter(isReadonly = false, shallow = false) {\n    return function get(target, key, receiver) {\n        if (key === \"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */) {\n            return !isReadonly;\n        }\n        else if (key === \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */) {\n            return isReadonly;\n        }\n        else if (key === \"__v_isShallow\" /* ReactiveFlags.IS_SHALLOW */) {\n            return shallow;\n        }\n        else if (key === \"__v_raw\" /* ReactiveFlags.RAW */ &&\n            receiver ===\n                (isReadonly\n                    ? shallow\n                        ? shallowReadonlyMap\n                        : readonlyMap\n                    : shallow\n                        ? shallowReactiveMap\n                        : reactiveMap).get(target)) {\n            return target;\n        }\n        const targetIsArray = isArray(target);\n        if (!isReadonly) {\n            if (targetIsArray && hasOwn(arrayInstrumentations, key)) {\n                return Reflect.get(arrayInstrumentations, key, receiver);\n            }\n            if (key === 'hasOwnProperty') {\n                return hasOwnProperty;\n            }\n        }\n        const res = Reflect.get(target, key, receiver);\n        if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n            return res;\n        }\n        if (!isReadonly) {\n            track(target, \"get\" /* TrackOpTypes.GET */, key);\n        }\n        if (shallow) {\n            return res;\n        }\n        if (isRef(res)) {\n            // ref unwrapping - skip unwrap for Array + integer key.\n            return targetIsArray && isIntegerKey(key) ? res : res.value;\n        }\n        if (isObject(res)) {\n            // Convert returned value into a proxy as well. we do the isObject check\n            // here to avoid invalid value warning. Also need to lazy access readonly\n            // and reactive here to avoid circular dependency.\n            return isReadonly ? readonly(res) : reactive(res);\n        }\n        return res;\n    };\n}\nconst set$1 = /*#__PURE__*/ createSetter();\nconst shallowSet = /*#__PURE__*/ createSetter(true);\nfunction createSetter(shallow = false) {\n    return function set(target, key, value, receiver) {\n        let oldValue = target[key];\n        if (isReadonly(oldValue) && isRef(oldValue) && !isRef(value)) {\n            return false;\n        }\n        if (!shallow) {\n            if (!isShallow(value) && !isReadonly(value)) {\n                oldValue = toRaw(oldValue);\n                value = toRaw(value);\n            }\n            if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n                oldValue.value = value;\n                return true;\n            }\n        }\n        const hadKey = isArray(target) && isIntegerKey(key)\n            ? Number(key) < target.length\n            : hasOwn(target, key);\n        const result = Reflect.set(target, key, value, receiver);\n        // don't trigger if target is something up in the prototype chain of original\n        if (target === toRaw(receiver)) {\n            if (!hadKey) {\n                trigger(target, \"add\" /* TriggerOpTypes.ADD */, key, value);\n            }\n            else if (hasChanged(value, oldValue)) {\n                trigger(target, \"set\" /* TriggerOpTypes.SET */, key, value, oldValue);\n            }\n        }\n        return result;\n    };\n}\nfunction deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n        trigger(target, \"delete\" /* TriggerOpTypes.DELETE */, key, undefined, oldValue);\n    }\n    return result;\n}\nfunction has$1(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n        track(target, \"has\" /* TrackOpTypes.HAS */, key);\n    }\n    return result;\n}\nfunction ownKeys(target) {\n    track(target, \"iterate\" /* TrackOpTypes.ITERATE */, isArray(target) ? 'length' : ITERATE_KEY);\n    return Reflect.ownKeys(target);\n}\nconst mutableHandlers = {\n    get: get$1,\n    set: set$1,\n    deleteProperty,\n    has: has$1,\n    ownKeys\n};\nconst readonlyHandlers = {\n    get: readonlyGet,\n    set(target, key) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\n        }\n        return true;\n    },\n    deleteProperty(target, key) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Delete operation on key \"${String(key)}\" failed: target is readonly.`, target);\n        }\n        return true;\n    }\n};\nconst shallowReactiveHandlers = /*#__PURE__*/ extend({}, mutableHandlers, {\n    get: shallowGet,\n    set: shallowSet\n});\n// Props handlers are special in the sense that it should not unwrap top-level\n// refs (in order to allow refs to be explicitly passed down), but should\n// retain the reactivity of the normal readonly object.\nconst shallowReadonlyHandlers = /*#__PURE__*/ extend({}, readonlyHandlers, {\n    get: shallowReadonlyGet\n});\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction get(target, key, isReadonly = false, isShallow = false) {\n    // #1772: readonly(reactive(Map)) should return readonly + reactive version\n    // of the value\n    target = target[\"__v_raw\" /* ReactiveFlags.RAW */];\n    const rawTarget = toRaw(target);\n    const rawKey = toRaw(key);\n    if (!isReadonly) {\n        if (key !== rawKey) {\n            track(rawTarget, \"get\" /* TrackOpTypes.GET */, key);\n        }\n        track(rawTarget, \"get\" /* TrackOpTypes.GET */, rawKey);\n    }\n    const { has } = getProto(rawTarget);\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n    if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n    }\n    else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n    }\n    else if (target !== rawTarget) {\n        // #3602 readonly(reactive(Map))\n        // ensure that the nested reactive `Map` can do tracking for itself\n        target.get(key);\n    }\n}\nfunction has(key, isReadonly = false) {\n    const target = this[\"__v_raw\" /* ReactiveFlags.RAW */];\n    const rawTarget = toRaw(target);\n    const rawKey = toRaw(key);\n    if (!isReadonly) {\n        if (key !== rawKey) {\n            track(rawTarget, \"has\" /* TrackOpTypes.HAS */, key);\n        }\n        track(rawTarget, \"has\" /* TrackOpTypes.HAS */, rawKey);\n    }\n    return key === rawKey\n        ? target.has(key)\n        : target.has(key) || target.has(rawKey);\n}\nfunction size(target, isReadonly = false) {\n    target = target[\"__v_raw\" /* ReactiveFlags.RAW */];\n    !isReadonly && track(toRaw(target), \"iterate\" /* TrackOpTypes.ITERATE */, ITERATE_KEY);\n    return Reflect.get(target, 'size', target);\n}\nfunction add(value) {\n    value = toRaw(value);\n    const target = toRaw(this);\n    const proto = getProto(target);\n    const hadKey = proto.has.call(target, value);\n    if (!hadKey) {\n        target.add(value);\n        trigger(target, \"add\" /* TriggerOpTypes.ADD */, value, value);\n    }\n    return this;\n}\nfunction set(key, value) {\n    value = toRaw(value);\n    const target = toRaw(this);\n    const { has, get } = getProto(target);\n    let hadKey = has.call(target, key);\n    if (!hadKey) {\n        key = toRaw(key);\n        hadKey = has.call(target, key);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        checkIdentityKeys(target, has, key);\n    }\n    const oldValue = get.call(target, key);\n    target.set(key, value);\n    if (!hadKey) {\n        trigger(target, \"add\" /* TriggerOpTypes.ADD */, key, value);\n    }\n    else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\" /* TriggerOpTypes.SET */, key, value, oldValue);\n    }\n    return this;\n}\nfunction deleteEntry(key) {\n    const target = toRaw(this);\n    const { has, get } = getProto(target);\n    let hadKey = has.call(target, key);\n    if (!hadKey) {\n        key = toRaw(key);\n        hadKey = has.call(target, key);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        checkIdentityKeys(target, has, key);\n    }\n    const oldValue = get ? get.call(target, key) : undefined;\n    // forward the operation before queueing reactions\n    const result = target.delete(key);\n    if (hadKey) {\n        trigger(target, \"delete\" /* TriggerOpTypes.DELETE */, key, undefined, oldValue);\n    }\n    return result;\n}\nfunction clear() {\n    const target = toRaw(this);\n    const hadItems = target.size !== 0;\n    const oldTarget = (process.env.NODE_ENV !== 'production')\n        ? isMap(target)\n            ? new Map(target)\n            : new Set(target)\n        : undefined;\n    // forward the operation before queueing reactions\n    const result = target.clear();\n    if (hadItems) {\n        trigger(target, \"clear\" /* TriggerOpTypes.CLEAR */, undefined, undefined, oldTarget);\n    }\n    return result;\n}\nfunction createForEach(isReadonly, isShallow) {\n    return function forEach(callback, thisArg) {\n        const observed = this;\n        const target = observed[\"__v_raw\" /* ReactiveFlags.RAW */];\n        const rawTarget = toRaw(target);\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n        !isReadonly && track(rawTarget, \"iterate\" /* TrackOpTypes.ITERATE */, ITERATE_KEY);\n        return target.forEach((value, key) => {\n            // important: make sure the callback is\n            // 1. invoked with the reactive map as `this` and 3rd arg\n            // 2. the value received should be a corresponding reactive/readonly.\n            return callback.call(thisArg, wrap(value), wrap(key), observed);\n        });\n    };\n}\nfunction createIterableMethod(method, isReadonly, isShallow) {\n    return function (...args) {\n        const target = this[\"__v_raw\" /* ReactiveFlags.RAW */];\n        const rawTarget = toRaw(target);\n        const targetIsMap = isMap(rawTarget);\n        const isPair = method === 'entries' || (method === Symbol.iterator && targetIsMap);\n        const isKeyOnly = method === 'keys' && targetIsMap;\n        const innerIterator = target[method](...args);\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n        !isReadonly &&\n            track(rawTarget, \"iterate\" /* TrackOpTypes.ITERATE */, isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);\n        // return a wrapped iterator which returns observed versions of the\n        // values emitted from the real iterator\n        return {\n            // iterator protocol\n            next() {\n                const { value, done } = innerIterator.next();\n                return done\n                    ? { value, done }\n                    : {\n                        value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n                        done\n                    };\n            },\n            // iterable protocol\n            [Symbol.iterator]() {\n                return this;\n            }\n        };\n    };\n}\nfunction createReadonlyMethod(type) {\n    return function (...args) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n            console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));\n        }\n        return type === \"delete\" /* TriggerOpTypes.DELETE */ ? false : this;\n    };\n}\nfunction createInstrumentations() {\n    const mutableInstrumentations = {\n        get(key) {\n            return get(this, key);\n        },\n        get size() {\n            return size(this);\n        },\n        has,\n        add,\n        set,\n        delete: deleteEntry,\n        clear,\n        forEach: createForEach(false, false)\n    };\n    const shallowInstrumentations = {\n        get(key) {\n            return get(this, key, false, true);\n        },\n        get size() {\n            return size(this);\n        },\n        has,\n        add,\n        set,\n        delete: deleteEntry,\n        clear,\n        forEach: createForEach(false, true)\n    };\n    const readonlyInstrumentations = {\n        get(key) {\n            return get(this, key, true);\n        },\n        get size() {\n            return size(this, true);\n        },\n        has(key) {\n            return has.call(this, key, true);\n        },\n        add: createReadonlyMethod(\"add\" /* TriggerOpTypes.ADD */),\n        set: createReadonlyMethod(\"set\" /* TriggerOpTypes.SET */),\n        delete: createReadonlyMethod(\"delete\" /* TriggerOpTypes.DELETE */),\n        clear: createReadonlyMethod(\"clear\" /* TriggerOpTypes.CLEAR */),\n        forEach: createForEach(true, false)\n    };\n    const shallowReadonlyInstrumentations = {\n        get(key) {\n            return get(this, key, true, true);\n        },\n        get size() {\n            return size(this, true);\n        },\n        has(key) {\n            return has.call(this, key, true);\n        },\n        add: createReadonlyMethod(\"add\" /* TriggerOpTypes.ADD */),\n        set: createReadonlyMethod(\"set\" /* TriggerOpTypes.SET */),\n        delete: createReadonlyMethod(\"delete\" /* TriggerOpTypes.DELETE */),\n        clear: createReadonlyMethod(\"clear\" /* TriggerOpTypes.CLEAR */),\n        forEach: createForEach(true, true)\n    };\n    const iteratorMethods = ['keys', 'values', 'entries', Symbol.iterator];\n    iteratorMethods.forEach(method => {\n        mutableInstrumentations[method] = createIterableMethod(method, false, false);\n        readonlyInstrumentations[method] = createIterableMethod(method, true, false);\n        shallowInstrumentations[method] = createIterableMethod(method, false, true);\n        shallowReadonlyInstrumentations[method] = createIterableMethod(method, true, true);\n    });\n    return [\n        mutableInstrumentations,\n        readonlyInstrumentations,\n        shallowInstrumentations,\n        shallowReadonlyInstrumentations\n    ];\n}\nconst [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* #__PURE__*/ createInstrumentations();\nfunction createInstrumentationGetter(isReadonly, shallow) {\n    const instrumentations = shallow\n        ? isReadonly\n            ? shallowReadonlyInstrumentations\n            : shallowInstrumentations\n        : isReadonly\n            ? readonlyInstrumentations\n            : mutableInstrumentations;\n    return (target, key, receiver) => {\n        if (key === \"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */) {\n            return !isReadonly;\n        }\n        else if (key === \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */) {\n            return isReadonly;\n        }\n        else if (key === \"__v_raw\" /* ReactiveFlags.RAW */) {\n            return target;\n        }\n        return Reflect.get(hasOwn(instrumentations, key) && key in target\n            ? instrumentations\n            : target, key, receiver);\n    };\n}\nconst mutableCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n    const rawKey = toRaw(key);\n    if (rawKey !== key && has.call(target, rawKey)) {\n        const type = toRawType(target);\n        console.warn(`Reactive ${type} contains both the raw and reactive ` +\n            `versions of the same object${type === `Map` ? ` as keys` : ``}, ` +\n            `which can lead to inconsistencies. ` +\n            `Avoid differentiating between the raw and reactive versions ` +\n            `of an object and only use the reactive version if possible.`);\n    }\n}\n\nconst reactiveMap = new WeakMap();\nconst shallowReactiveMap = new WeakMap();\nconst readonlyMap = new WeakMap();\nconst shallowReadonlyMap = new WeakMap();\nfunction targetTypeMap(rawType) {\n    switch (rawType) {\n        case 'Object':\n        case 'Array':\n            return 1 /* TargetType.COMMON */;\n        case 'Map':\n        case 'Set':\n        case 'WeakMap':\n        case 'WeakSet':\n            return 2 /* TargetType.COLLECTION */;\n        default:\n            return 0 /* TargetType.INVALID */;\n    }\n}\nfunction getTargetType(value) {\n    return value[\"__v_skip\" /* ReactiveFlags.SKIP */] || !Object.isExtensible(value)\n        ? 0 /* TargetType.INVALID */\n        : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n    // if trying to observe a readonly proxy, return the readonly version.\n    if (isReadonly(target)) {\n        return target;\n    }\n    return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);\n}\n/**\n * Return a shallowly-reactive copy of the original object, where only the root\n * level properties are reactive. It also does not auto-unwrap refs (even at the\n * root level).\n */\nfunction shallowReactive(target) {\n    return createReactiveObject(target, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);\n}\n/**\n * Creates a readonly copy of the original object. Note the returned copy is not\n * made reactive, but `readonly` can be called on an already reactive object.\n */\nfunction readonly(target) {\n    return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);\n}\n/**\n * Returns a reactive-copy of the original object, where only the root level\n * properties are readonly, and does NOT unwrap refs nor recursively convert\n * returned properties.\n * This is used for creating the props proxy object for stateful components.\n */\nfunction shallowReadonly(target) {\n    return createReactiveObject(target, true, shallowReadonlyHandlers, shallowReadonlyCollectionHandlers, shallowReadonlyMap);\n}\nfunction createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {\n    if (!isObject(target)) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            console.warn(`value cannot be made reactive: ${String(target)}`);\n        }\n        return target;\n    }\n    // target is already a Proxy, return it.\n    // exception: calling readonly() on a reactive object\n    if (target[\"__v_raw\" /* ReactiveFlags.RAW */] &&\n        !(isReadonly && target[\"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */])) {\n        return target;\n    }\n    // target already has corresponding Proxy\n    const existingProxy = proxyMap.get(target);\n    if (existingProxy) {\n        return existingProxy;\n    }\n    // only specific value types can be observed.\n    const targetType = getTargetType(target);\n    if (targetType === 0 /* TargetType.INVALID */) {\n        return target;\n    }\n    const proxy = new Proxy(target, targetType === 2 /* TargetType.COLLECTION */ ? collectionHandlers : baseHandlers);\n    proxyMap.set(target, proxy);\n    return proxy;\n}\nfunction isReactive(value) {\n    if (isReadonly(value)) {\n        return isReactive(value[\"__v_raw\" /* ReactiveFlags.RAW */]);\n    }\n    return !!(value && value[\"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */]);\n}\nfunction isReadonly(value) {\n    return !!(value && value[\"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */]);\n}\nfunction isShallow(value) {\n    return !!(value && value[\"__v_isShallow\" /* ReactiveFlags.IS_SHALLOW */]);\n}\nfunction isProxy(value) {\n    return isReactive(value) || isReadonly(value);\n}\nfunction toRaw(observed) {\n    const raw = observed && observed[\"__v_raw\" /* ReactiveFlags.RAW */];\n    return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n    def(value, \"__v_skip\" /* ReactiveFlags.SKIP */, true);\n    return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction trackRefValue(ref) {\n    if (shouldTrack && activeEffect) {\n        ref = toRaw(ref);\n        if ((process.env.NODE_ENV !== 'production')) {\n            trackEffects(ref.dep || (ref.dep = createDep()), {\n                target: ref,\n                type: \"get\" /* TrackOpTypes.GET */,\n                key: 'value'\n            });\n        }\n        else {\n            trackEffects(ref.dep || (ref.dep = createDep()));\n        }\n    }\n}\nfunction triggerRefValue(ref, newVal) {\n    ref = toRaw(ref);\n    const dep = ref.dep;\n    if (dep) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            triggerEffects(dep, {\n                target: ref,\n                type: \"set\" /* TriggerOpTypes.SET */,\n                key: 'value',\n                newValue: newVal\n            });\n        }\n        else {\n            triggerEffects(dep);\n        }\n    }\n}\nfunction isRef(r) {\n    return !!(r && r.__v_isRef === true);\n}\nfunction ref(value) {\n    return createRef(value, false);\n}\nfunction shallowRef(value) {\n    return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n    if (isRef(rawValue)) {\n        return rawValue;\n    }\n    return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n    constructor(value, __v_isShallow) {\n        this.__v_isShallow = __v_isShallow;\n        this.dep = undefined;\n        this.__v_isRef = true;\n        this._rawValue = __v_isShallow ? value : toRaw(value);\n        this._value = __v_isShallow ? value : toReactive(value);\n    }\n    get value() {\n        trackRefValue(this);\n        return this._value;\n    }\n    set value(newVal) {\n        const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);\n        newVal = useDirectValue ? newVal : toRaw(newVal);\n        if (hasChanged(newVal, this._rawValue)) {\n            this._rawValue = newVal;\n            this._value = useDirectValue ? newVal : toReactive(newVal);\n            triggerRefValue(this, newVal);\n        }\n    }\n}\nfunction triggerRef(ref) {\n    triggerRefValue(ref, (process.env.NODE_ENV !== 'production') ? ref.value : void 0);\n}\nfunction unref(ref) {\n    return isRef(ref) ? ref.value : ref;\n}\nconst shallowUnwrapHandlers = {\n    get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),\n    set: (target, key, value, receiver) => {\n        const oldValue = target[key];\n        if (isRef(oldValue) && !isRef(value)) {\n            oldValue.value = value;\n            return true;\n        }\n        else {\n            return Reflect.set(target, key, value, receiver);\n        }\n    }\n};\nfunction proxyRefs(objectWithRefs) {\n    return isReactive(objectWithRefs)\n        ? objectWithRefs\n        : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n    constructor(factory) {\n        this.dep = undefined;\n        this.__v_isRef = true;\n        const { get, set } = factory(() => trackRefValue(this), () => triggerRefValue(this));\n        this._get = get;\n        this._set = set;\n    }\n    get value() {\n        return this._get();\n    }\n    set value(newVal) {\n        this._set(newVal);\n    }\n}\nfunction customRef(factory) {\n    return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n    if ((process.env.NODE_ENV !== 'production') && !isProxy(object)) {\n        console.warn(`toRefs() expects a reactive object but received a plain one.`);\n    }\n    const ret = isArray(object) ? new Array(object.length) : {};\n    for (const key in object) {\n        ret[key] = toRef(object, key);\n    }\n    return ret;\n}\nclass ObjectRefImpl {\n    constructor(_object, _key, _defaultValue) {\n        this._object = _object;\n        this._key = _key;\n        this._defaultValue = _defaultValue;\n        this.__v_isRef = true;\n    }\n    get value() {\n        const val = this._object[this._key];\n        return val === undefined ? this._defaultValue : val;\n    }\n    set value(newVal) {\n        this._object[this._key] = newVal;\n    }\n    get dep() {\n        return getDepFromReactive(toRaw(this._object), this._key);\n    }\n}\nfunction toRef(object, key, defaultValue) {\n    const val = object[key];\n    return isRef(val)\n        ? val\n        : new ObjectRefImpl(object, key, defaultValue);\n}\n\nvar _a$1;\nclass ComputedRefImpl {\n    constructor(getter, _setter, isReadonly, isSSR) {\n        this._setter = _setter;\n        this.dep = undefined;\n        this.__v_isRef = true;\n        this[_a$1] = false;\n        this._dirty = true;\n        this.effect = new ReactiveEffect(getter, () => {\n            if (!this._dirty) {\n                this._dirty = true;\n                triggerRefValue(this);\n            }\n        });\n        this.effect.computed = this;\n        this.effect.active = this._cacheable = !isSSR;\n        this[\"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */] = isReadonly;\n    }\n    get value() {\n        // the computed ref may get wrapped by other proxies e.g. readonly() #3376\n        const self = toRaw(this);\n        trackRefValue(self);\n        if (self._dirty || !self._cacheable) {\n            self._dirty = false;\n            self._value = self.effect.run();\n        }\n        return self._value;\n    }\n    set value(newValue) {\n        this._setter(newValue);\n    }\n}\n_a$1 = \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */;\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n    let getter;\n    let setter;\n    const onlyGetter = isFunction(getterOrOptions);\n    if (onlyGetter) {\n        getter = getterOrOptions;\n        setter = (process.env.NODE_ENV !== 'production')\n            ? () => {\n                console.warn('Write operation failed: computed value is readonly');\n            }\n            : NOOP;\n    }\n    else {\n        getter = getterOrOptions.get;\n        setter = getterOrOptions.set;\n    }\n    const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);\n    if ((process.env.NODE_ENV !== 'production') && debugOptions && !isSSR) {\n        cRef.effect.onTrack = debugOptions.onTrack;\n        cRef.effect.onTrigger = debugOptions.onTrigger;\n    }\n    return cRef;\n}\n\nvar _a;\nconst tick = /*#__PURE__*/ Promise.resolve();\nconst queue = [];\nlet queued = false;\nconst scheduler = (fn) => {\n    queue.push(fn);\n    if (!queued) {\n        queued = true;\n        tick.then(flush);\n    }\n};\nconst flush = () => {\n    for (let i = 0; i < queue.length; i++) {\n        queue[i]();\n    }\n    queue.length = 0;\n    queued = false;\n};\nclass DeferredComputedRefImpl {\n    constructor(getter) {\n        this.dep = undefined;\n        this._dirty = true;\n        this.__v_isRef = true;\n        this[_a] = true;\n        let compareTarget;\n        let hasCompareTarget = false;\n        let scheduled = false;\n        this.effect = new ReactiveEffect(getter, (computedTrigger) => {\n            if (this.dep) {\n                if (computedTrigger) {\n                    compareTarget = this._value;\n                    hasCompareTarget = true;\n                }\n                else if (!scheduled) {\n                    const valueToCompare = hasCompareTarget ? compareTarget : this._value;\n                    scheduled = true;\n                    hasCompareTarget = false;\n                    scheduler(() => {\n                        if (this.effect.active && this._get() !== valueToCompare) {\n                            triggerRefValue(this);\n                        }\n                        scheduled = false;\n                    });\n                }\n                // chained upstream computeds are notified synchronously to ensure\n                // value invalidation in case of sync access; normal effects are\n                // deferred to be triggered in scheduler.\n                for (const e of this.dep) {\n                    if (e.computed instanceof DeferredComputedRefImpl) {\n                        e.scheduler(true /* computedTrigger */);\n                    }\n                }\n            }\n            this._dirty = true;\n        });\n        this.effect.computed = this;\n    }\n    _get() {\n        if (this._dirty) {\n            this._dirty = false;\n            return (this._value = this.effect.run());\n        }\n        return this._value;\n    }\n    get value() {\n        trackRefValue(this);\n        // the computed ref may get wrapped by other proxies e.g. readonly() #3376\n        return toRaw(this)._get();\n    }\n}\n_a = \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */;\nfunction deferredComputed(getter) {\n    return new DeferredComputedRefImpl(getter);\n}\n\nexport { EffectScope, ITERATE_KEY, ReactiveEffect, computed, customRef, deferredComputed, effect, effectScope, enableTracking, getCurrentScope, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, pauseTracking, proxyRefs, reactive, readonly, ref, resetTracking, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, track, trigger, triggerRef, unref };\n","/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */\nfunction makeMap(str, expectsLowerCase) {\n    const map = Object.create(null);\n    const list = str.split(',');\n    for (let i = 0; i < list.length; i++) {\n        map[list[i]] = true;\n    }\n    return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val];\n}\n\n/**\n * dev only flag -> name mapping\n */\nconst PatchFlagNames = {\n    [1 /* PatchFlags.TEXT */]: `TEXT`,\n    [2 /* PatchFlags.CLASS */]: `CLASS`,\n    [4 /* PatchFlags.STYLE */]: `STYLE`,\n    [8 /* PatchFlags.PROPS */]: `PROPS`,\n    [16 /* PatchFlags.FULL_PROPS */]: `FULL_PROPS`,\n    [32 /* PatchFlags.HYDRATE_EVENTS */]: `HYDRATE_EVENTS`,\n    [64 /* PatchFlags.STABLE_FRAGMENT */]: `STABLE_FRAGMENT`,\n    [128 /* PatchFlags.KEYED_FRAGMENT */]: `KEYED_FRAGMENT`,\n    [256 /* PatchFlags.UNKEYED_FRAGMENT */]: `UNKEYED_FRAGMENT`,\n    [512 /* PatchFlags.NEED_PATCH */]: `NEED_PATCH`,\n    [1024 /* PatchFlags.DYNAMIC_SLOTS */]: `DYNAMIC_SLOTS`,\n    [2048 /* PatchFlags.DEV_ROOT_FRAGMENT */]: `DEV_ROOT_FRAGMENT`,\n    [-1 /* PatchFlags.HOISTED */]: `HOISTED`,\n    [-2 /* PatchFlags.BAIL */]: `BAIL`\n};\n\n/**\n * Dev only\n */\nconst slotFlagsText = {\n    [1 /* SlotFlags.STABLE */]: 'STABLE',\n    [2 /* SlotFlags.DYNAMIC */]: 'DYNAMIC',\n    [3 /* SlotFlags.FORWARDED */]: 'FORWARDED'\n};\n\nconst GLOBALS_WHITE_LISTED = 'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\n    'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\n    'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt';\nconst isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED);\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n    // Split the content into individual lines but capture the newline sequence\n    // that separated each line. This is important because the actual sequence is\n    // needed to properly take into account the full line length for offset\n    // comparison\n    let lines = source.split(/(\\r?\\n)/);\n    // Separate the lines and newline sequences into separate arrays for easier referencing\n    const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n    lines = lines.filter((_, idx) => idx % 2 === 0);\n    let count = 0;\n    const res = [];\n    for (let i = 0; i < lines.length; i++) {\n        count +=\n            lines[i].length +\n                ((newlineSequences[i] && newlineSequences[i].length) || 0);\n        if (count >= start) {\n            for (let j = i - range; j <= i + range || end > count; j++) {\n                if (j < 0 || j >= lines.length)\n                    continue;\n                const line = j + 1;\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\n                const lineLength = lines[j].length;\n                const newLineSeqLength = (newlineSequences[j] && newlineSequences[j].length) || 0;\n                if (j === i) {\n                    // push underline\n                    const pad = start - (count - (lineLength + newLineSeqLength));\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\n                }\n                else if (j > i) {\n                    if (end > count) {\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\n                        res.push(`   |  ` + '^'.repeat(length));\n                    }\n                    count += lineLength + newLineSeqLength;\n                }\n            }\n            break;\n        }\n    }\n    return res.join('\\n');\n}\n\nfunction normalizeStyle(value) {\n    if (isArray(value)) {\n        const res = {};\n        for (let i = 0; i < value.length; i++) {\n            const item = value[i];\n            const normalized = isString(item)\n                ? parseStringStyle(item)\n                : normalizeStyle(item);\n            if (normalized) {\n                for (const key in normalized) {\n                    res[key] = normalized[key];\n                }\n            }\n        }\n        return res;\n    }\n    else if (isString(value)) {\n        return value;\n    }\n    else if (isObject(value)) {\n        return value;\n    }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*.*?\\*\\//gs;\nfunction parseStringStyle(cssText) {\n    const ret = {};\n    cssText\n        .replace(styleCommentRE, '')\n        .split(listDelimiterRE)\n        .forEach(item => {\n        if (item) {\n            const tmp = item.split(propertyDelimiterRE);\n            tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n        }\n    });\n    return ret;\n}\nfunction stringifyStyle(styles) {\n    let ret = '';\n    if (!styles || isString(styles)) {\n        return ret;\n    }\n    for (const key in styles) {\n        const value = styles[key];\n        const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n        if (isString(value) || typeof value === 'number') {\n            // only render valid values\n            ret += `${normalizedKey}:${value};`;\n        }\n    }\n    return ret;\n}\nfunction normalizeClass(value) {\n    let res = '';\n    if (isString(value)) {\n        res = value;\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            const normalized = normalizeClass(value[i]);\n            if (normalized) {\n                res += normalized + ' ';\n            }\n        }\n    }\n    else if (isObject(value)) {\n        for (const name in value) {\n            if (value[name]) {\n                res += name + ' ';\n            }\n        }\n    }\n    return res.trim();\n}\nfunction normalizeProps(props) {\n    if (!props)\n        return null;\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n        props.class = normalizeClass(klass);\n    }\n    if (style) {\n        props.style = normalizeStyle(style);\n    }\n    return props;\n}\n\n// These tag configs are shared between compiler-dom and runtime-dom, so they\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' +\n    'header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,' +\n    'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' +\n    'data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,' +\n    'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' +\n    'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' +\n    'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' +\n    'option,output,progress,select,textarea,details,dialog,menu,' +\n    'summary,template,blockquote,iframe,tfoot';\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\nconst SVG_TAGS = 'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\n    'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\n    'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\n    'feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\n    'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\n    'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\n    'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\n    'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\n    'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\n    'text,textPath,title,tspan,unknown,use,view';\nconst VOID_TAGS = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isHTMLTag = /*#__PURE__*/ makeMap(HTML_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isSVGTag = /*#__PURE__*/ makeMap(SVG_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isVoidTag = /*#__PURE__*/ makeMap(VOID_TAGS);\n\n/**\n * On the client we only need to offer special cases for boolean attributes that\n * have different names from their corresponding dom properties:\n * - itemscope -> N/A\n * - allowfullscreen -> allowFullscreen\n * - formnovalidate -> formNoValidate\n * - ismap -> isMap\n * - nomodule -> noModule\n * - novalidate -> noValidate\n * - readonly -> readOnly\n */\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs);\n/**\n * The full list is needed during SSR to produce the correct initial markup.\n */\nconst isBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs +\n    `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\n    `loop,open,required,reversed,scoped,seamless,` +\n    `checked,muted,multiple,selected`);\n/**\n * Boolean attributes should be included if the value is truthy or ''.\n * e.g. `<select multiple>` compiles to `{ multiple: '' }`\n */\nfunction includeBooleanAttr(value) {\n    return !!value || value === '';\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n    if (attrValidationCache.hasOwnProperty(name)) {\n        return attrValidationCache[name];\n    }\n    const isUnsafe = unsafeAttrCharRE.test(name);\n    if (isUnsafe) {\n        console.error(`unsafe attribute name: ${name}`);\n    }\n    return (attrValidationCache[name] = !isUnsafe);\n}\nconst propsToAttrMap = {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv'\n};\n/**\n * Known attributes, this is used for stringification of runtime static nodes\n * so that we don't stringify bindings that cannot be set from HTML.\n * Don't also forget to allow `data-*` and `aria-*`!\n * Generated from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\n */\nconst isKnownHtmlAttr = /*#__PURE__*/ makeMap(`accept,accept-charset,accesskey,action,align,allow,alt,async,` +\n    `autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,` +\n    `border,buffered,capture,challenge,charset,checked,cite,class,code,` +\n    `codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,` +\n    `coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,` +\n    `disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,` +\n    `formaction,formenctype,formmethod,formnovalidate,formtarget,headers,` +\n    `height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,` +\n    `ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,` +\n    `manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,` +\n    `open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,` +\n    `referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,` +\n    `selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,` +\n    `start,step,style,summary,tabindex,target,title,translate,type,usemap,` +\n    `value,width,wrap`);\n/**\n * Generated from https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute\n */\nconst isKnownSvgAttr = /*#__PURE__*/ makeMap(`xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,` +\n    `arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,` +\n    `baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,` +\n    `clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,` +\n    `color-interpolation-filters,color-profile,color-rendering,` +\n    `contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,` +\n    `descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,` +\n    `dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,` +\n    `fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,` +\n    `font-family,font-size,font-size-adjust,font-stretch,font-style,` +\n    `font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,` +\n    `glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,` +\n    `gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,` +\n    `horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,` +\n    `k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,` +\n    `lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,` +\n    `marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,` +\n    `mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,` +\n    `name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,` +\n    `overflow,overline-position,overline-thickness,panose-1,paint-order,path,` +\n    `pathLength,patternContentUnits,patternTransform,patternUnits,ping,` +\n    `pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,` +\n    `preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,` +\n    `rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,` +\n    `restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,` +\n    `specularConstant,specularExponent,speed,spreadMethod,startOffset,` +\n    `stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,` +\n    `strikethrough-position,strikethrough-thickness,string,stroke,` +\n    `stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,` +\n    `stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,` +\n    `systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,` +\n    `text-decoration,text-rendering,textLength,to,transform,transform-origin,` +\n    `type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,` +\n    `unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,` +\n    `v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,` +\n    `vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,` +\n    `writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,` +\n    `xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,` +\n    `xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`);\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n    const str = '' + string;\n    const match = escapeRE.exec(str);\n    if (!match) {\n        return str;\n    }\n    let html = '';\n    let escaped;\n    let index;\n    let lastIndex = 0;\n    for (index = match.index; index < str.length; index++) {\n        switch (str.charCodeAt(index)) {\n            case 34: // \"\n                escaped = '&quot;';\n                break;\n            case 38: // &\n                escaped = '&amp;';\n                break;\n            case 39: // '\n                escaped = '&#39;';\n                break;\n            case 60: // <\n                escaped = '&lt;';\n                break;\n            case 62: // >\n                escaped = '&gt;';\n                break;\n            default:\n                continue;\n        }\n        if (lastIndex !== index) {\n            html += str.slice(lastIndex, index);\n        }\n        lastIndex = index + 1;\n        html += escaped;\n    }\n    return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\n// https://www.w3.org/TR/html52/syntax.html#comments\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n    return src.replace(commentStripRE, '');\n}\n\nfunction looseCompareArrays(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let equal = true;\n    for (let i = 0; equal && i < a.length; i++) {\n        equal = looseEqual(a[i], b[i]);\n    }\n    return equal;\n}\nfunction looseEqual(a, b) {\n    if (a === b)\n        return true;\n    let aValidType = isDate(a);\n    let bValidType = isDate(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n    }\n    aValidType = isSymbol(a);\n    bValidType = isSymbol(b);\n    if (aValidType || bValidType) {\n        return a === b;\n    }\n    aValidType = isArray(a);\n    bValidType = isArray(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n    }\n    aValidType = isObject(a);\n    bValidType = isObject(b);\n    if (aValidType || bValidType) {\n        /* istanbul ignore if: this if will probably never be called */\n        if (!aValidType || !bValidType) {\n            return false;\n        }\n        const aKeysCount = Object.keys(a).length;\n        const bKeysCount = Object.keys(b).length;\n        if (aKeysCount !== bKeysCount) {\n            return false;\n        }\n        for (const key in a) {\n            const aHasKey = a.hasOwnProperty(key);\n            const bHasKey = b.hasOwnProperty(key);\n            if ((aHasKey && !bHasKey) ||\n                (!aHasKey && bHasKey) ||\n                !looseEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n    }\n    return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n    return arr.findIndex(item => looseEqual(item, val));\n}\n\n/**\n * For converting {{ interpolation }} values to displayed strings.\n * @private\n */\nconst toDisplayString = (val) => {\n    return isString(val)\n        ? val\n        : val == null\n            ? ''\n            : isArray(val) ||\n                (isObject(val) &&\n                    (val.toString === objectToString || !isFunction(val.toString)))\n                ? JSON.stringify(val, replacer, 2)\n                : String(val);\n};\nconst replacer = (_key, val) => {\n    // can't use isRef here since @vue/shared has no deps\n    if (val && val.__v_isRef) {\n        return replacer(_key, val.value);\n    }\n    else if (isMap(val)) {\n        return {\n            [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val]) => {\n                entries[`${key} =>`] = val;\n                return entries;\n            }, {})\n        };\n    }\n    else if (isSet(val)) {\n        return {\n            [`Set(${val.size})`]: [...val.values()]\n        };\n    }\n    else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n        return String(val);\n    }\n    return val;\n};\n\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\n    ? Object.freeze({})\n    : {};\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\nconst NOOP = () => { };\n/**\n * Always return false.\n */\nconst NO = () => false;\nconst onRE = /^on[^a-z]/;\nconst isOn = (key) => onRE.test(key);\nconst isModelListener = (key) => key.startsWith('onUpdate:');\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n    const i = arr.indexOf(el);\n    if (i > -1) {\n        arr.splice(i, 1);\n    }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === '[object Map]';\nconst isSet = (val) => toTypeString(val) === '[object Set]';\nconst isDate = (val) => toTypeString(val) === '[object Date]';\nconst isRegExp = (val) => toTypeString(val) === '[object RegExp]';\nconst isFunction = (val) => typeof val === 'function';\nconst isString = (val) => typeof val === 'string';\nconst isSymbol = (val) => typeof val === 'symbol';\nconst isObject = (val) => val !== null && typeof val === 'object';\nconst isPromise = (val) => {\n    return isObject(val) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n    // extract \"RawType\" from strings like \"[object RawType]\"\n    return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === '[object Object]';\nconst isIntegerKey = (key) => isString(key) &&\n    key !== 'NaN' &&\n    key[0] !== '-' &&\n    '' + parseInt(key, 10) === key;\nconst isReservedProp = /*#__PURE__*/ makeMap(\n// the leading comma is intentional so empty string \"\" is also included\n',key,ref,ref_for,ref_key,' +\n    'onVnodeBeforeMount,onVnodeMounted,' +\n    'onVnodeBeforeUpdate,onVnodeUpdated,' +\n    'onVnodeBeforeUnmount,onVnodeUnmounted');\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo');\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nconst camelizeRE = /-(\\w)/g;\n/**\n * @private\n */\nconst camelize = cacheStringFunction((str) => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\n});\nconst hyphenateRE = /\\B([A-Z])/g;\n/**\n * @private\n */\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, '-$1').toLowerCase());\n/**\n * @private\n */\nconst capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));\n/**\n * @private\n */\nconst toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);\n// compare whether a value has changed, accounting for NaN.\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, arg) => {\n    for (let i = 0; i < fns.length; i++) {\n        fns[i](arg);\n    }\n};\nconst def = (obj, key, value) => {\n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable: false,\n        value\n    });\n};\n/**\n * \"123-foo\" will be parsed to 123\n * This is used for the .number modifier in v-model\n */\nconst looseToNumber = (val) => {\n    const n = parseFloat(val);\n    return isNaN(n) ? val : n;\n};\n/**\n * Only conerces number-like strings\n * \"123-foo\" will be returned as-is\n */\nconst toNumber = (val) => {\n    const n = isString(val) ? Number(val) : NaN;\n    return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n    return (_globalThis ||\n        (_globalThis =\n            typeof globalThis !== 'undefined'\n                ? globalThis\n                : typeof self !== 'undefined'\n                    ? self\n                    : typeof window !== 'undefined'\n                        ? window\n                        : typeof global !== 'undefined'\n                            ? global\n                            : {}));\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n    return identRE.test(name)\n        ? `__props.${name}`\n        : `__props[${JSON.stringify(name)}]`;\n}\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/*! @license DOMPurify 3.0.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.1/LICENSE */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.DOMPurify = factory());\n})(this, (function () { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    }, _typeof(obj);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (_isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n    if (_i == null) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n\n    var _s, _e;\n\n    try {\n      for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _createForOfIteratorHelper(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n    if (!it) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n\n        var F = function () {};\n\n        return {\n          s: F,\n          n: function () {\n            if (i >= o.length) return {\n              done: true\n            };\n            return {\n              done: false,\n              value: o[i++]\n            };\n          },\n          e: function (e) {\n            throw e;\n          },\n          f: F\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    var normalCompletion = true,\n        didErr = false,\n        err;\n    return {\n      s: function () {\n        it = it.call(o);\n      },\n      n: function () {\n        var step = it.next();\n        normalCompletion = step.done;\n        return step;\n      },\n      e: function (e) {\n        didErr = true;\n        err = e;\n      },\n      f: function () {\n        try {\n          if (!normalCompletion && it.return != null) it.return();\n        } finally {\n          if (didErr) throw err;\n        }\n      }\n    };\n  }\n\n  var entries = Object.entries,\n      setPrototypeOf = Object.setPrototypeOf,\n      isFrozen = Object.isFrozen,\n      getPrototypeOf = Object.getPrototypeOf,\n      getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n  var freeze = Object.freeze,\n      seal = Object.seal,\n      create = Object.create; // eslint-disable-line import/no-mutable-exports\n\n  var _ref = typeof Reflect !== 'undefined' && Reflect,\n      apply = _ref.apply,\n      construct = _ref.construct;\n\n  if (!apply) {\n    apply = function apply(fun, thisValue, args) {\n      return fun.apply(thisValue, args);\n    };\n  }\n\n  if (!freeze) {\n    freeze = function freeze(x) {\n      return x;\n    };\n  }\n\n  if (!seal) {\n    seal = function seal(x) {\n      return x;\n    };\n  }\n\n  if (!construct) {\n    construct = function construct(Func, args) {\n      return _construct(Func, _toConsumableArray(args));\n    };\n  }\n\n  var arrayForEach = unapply(Array.prototype.forEach);\n  var arrayPop = unapply(Array.prototype.pop);\n  var arrayPush = unapply(Array.prototype.push);\n  var stringToLowerCase = unapply(String.prototype.toLowerCase);\n  var stringToString = unapply(String.prototype.toString);\n  var stringMatch = unapply(String.prototype.match);\n  var stringReplace = unapply(String.prototype.replace);\n  var stringIndexOf = unapply(String.prototype.indexOf);\n  var stringTrim = unapply(String.prototype.trim);\n  var regExpTest = unapply(RegExp.prototype.test);\n  var typeErrorCreate = unconstruct(TypeError);\n  function unapply(func) {\n    return function (thisArg) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return apply(func, thisArg, args);\n    };\n  }\n  function unconstruct(func) {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return construct(func, args);\n    };\n  }\n  /* Add properties to a lookup table */\n\n  function addToSet(set, array, transformCaseFunc) {\n    transformCaseFunc = transformCaseFunc ? transformCaseFunc : stringToLowerCase;\n\n    if (setPrototypeOf) {\n      // Make 'in' and truthy checks like Boolean(set.constructor)\n      // independent of any properties defined on Object.prototype.\n      // Prevent prototype setters from intercepting set as a this value.\n      setPrototypeOf(set, null);\n    }\n\n    var l = array.length;\n\n    while (l--) {\n      var element = array[l];\n\n      if (typeof element === 'string') {\n        var lcElement = transformCaseFunc(element);\n\n        if (lcElement !== element) {\n          // Config presets (e.g. tags.js, attrs.js) are immutable.\n          if (!isFrozen(array)) {\n            array[l] = lcElement;\n          }\n\n          element = lcElement;\n        }\n      }\n\n      set[element] = true;\n    }\n\n    return set;\n  }\n  /* Shallow clone an object */\n\n  function clone(object) {\n    var newObject = create(null);\n\n    var _iterator = _createForOfIteratorHelper(entries(object)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _step$value = _slicedToArray(_step.value, 2),\n            property = _step$value[0],\n            value = _step$value[1];\n\n        newObject[property] = value;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return newObject;\n  }\n  /* This method automatically checks if the prop is function\n   * or getter and behaves accordingly. */\n\n  function lookupGetter(object, prop) {\n    while (object !== null) {\n      var desc = getOwnPropertyDescriptor(object, prop);\n\n      if (desc) {\n        if (desc.get) {\n          return unapply(desc.get);\n        }\n\n        if (typeof desc.value === 'function') {\n          return unapply(desc.value);\n        }\n      }\n\n      object = getPrototypeOf(object);\n    }\n\n    function fallbackValue(element) {\n      console.warn('fallback value for', element);\n      return null;\n    }\n\n    return fallbackValue;\n  }\n\n  var html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']); // SVG\n\n  var svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n  var svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']); // List of SVG elements that are disallowed by default.\n  // We still need to know them so that we can do namespace\n  // checks properly in case one wants to add them to\n  // allow-list.\n\n  var svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'fedropshadow', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n  var mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']); // Similarly to SVG, we want to know all MathML elements,\n  // even those that we disallow by default.\n\n  var mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n  var text = freeze(['#text']);\n\n  var html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);\n  var svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n  var mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n  var xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n  var MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n\n  var ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n  var TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\n  var DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n\n  var ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n\n  var IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n  );\n  var IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n  var ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n  );\n  var DOCTYPE_NAME = seal(/^html$/i);\n\n  var getGlobal = function getGlobal() {\n    return typeof window === 'undefined' ? null : window;\n  };\n  /**\n   * Creates a no-op policy for internal use only.\n   * Don't export this function outside this module!\n   * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n   * @param {Document} document The document object (to determine policy name suffix)\n   * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n   * are not supported).\n   */\n\n\n  var _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n    if (_typeof(trustedTypes) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n      return null;\n    } // Allow the callers to control the unique policy name\n    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n    // Policy creation with duplicate names throws in Trusted Types.\n\n\n    var suffix = null;\n    var ATTR_NAME = 'data-tt-policy-suffix';\n\n    if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n      suffix = document.currentScript.getAttribute(ATTR_NAME);\n    }\n\n    var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n    try {\n      return trustedTypes.createPolicy(policyName, {\n        createHTML: function createHTML(html) {\n          return html;\n        },\n        createScriptURL: function createScriptURL(scriptUrl) {\n          return scriptUrl;\n        }\n      });\n    } catch (_) {\n      // Policy creation failed (most likely another DOMPurify script has\n      // already run). Skip creating the policy, as this will only cause errors\n      // if TT are enforced.\n      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n      return null;\n    }\n  };\n\n  function createDOMPurify() {\n    var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n    var DOMPurify = function DOMPurify(root) {\n      return createDOMPurify(root);\n    };\n    /**\n     * Version label, exposed for easier checks\n     * if DOMPurify is up to date or not\n     */\n\n\n    DOMPurify.version = '3.0.1';\n    /**\n     * Array of elements that DOMPurify removed during sanitation.\n     * Empty if nothing was removed.\n     */\n\n    DOMPurify.removed = [];\n\n    if (!window || !window.document || window.document.nodeType !== 9) {\n      // Not running in a browser, provide a factory function\n      // so that you can pass your own Window\n      DOMPurify.isSupported = false;\n      return DOMPurify;\n    }\n\n    var originalDocument = window.document;\n    var document = window.document;\n    var DocumentFragment = window.DocumentFragment,\n        HTMLTemplateElement = window.HTMLTemplateElement,\n        Node = window.Node,\n        Element = window.Element,\n        NodeFilter = window.NodeFilter,\n        _window$NamedNodeMap = window.NamedNodeMap,\n        NamedNodeMap = _window$NamedNodeMap === void 0 ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n        HTMLFormElement = window.HTMLFormElement,\n        DOMParser = window.DOMParser,\n        trustedTypes = window.trustedTypes;\n    var ElementPrototype = Element.prototype;\n    var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n    var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n    var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n    var getParentNode = lookupGetter(ElementPrototype, 'parentNode'); // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n\n    if (typeof HTMLTemplateElement === 'function') {\n      var template = document.createElement('template');\n\n      if (template.content && template.content.ownerDocument) {\n        document = template.content.ownerDocument;\n      }\n    }\n\n    var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n\n    var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n    var _document = document,\n        implementation = _document.implementation,\n        createNodeIterator = _document.createNodeIterator,\n        createDocumentFragment = _document.createDocumentFragment,\n        getElementsByTagName = _document.getElementsByTagName;\n    var importNode = originalDocument.importNode;\n    var hooks = {};\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n\n    DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined';\n    var MUSTACHE_EXPR$1 = MUSTACHE_EXPR,\n        ERB_EXPR$1 = ERB_EXPR,\n        TMPLIT_EXPR$1 = TMPLIT_EXPR,\n        DATA_ATTR$1 = DATA_ATTR,\n        ARIA_ATTR$1 = ARIA_ATTR,\n        IS_SCRIPT_OR_DATA$1 = IS_SCRIPT_OR_DATA,\n        ATTR_WHITESPACE$1 = ATTR_WHITESPACE;\n    var IS_ALLOWED_URI$1 = IS_ALLOWED_URI;\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n\n    /* allowed element names */\n\n    var ALLOWED_TAGS = null;\n    var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(svgFilters), _toConsumableArray(mathMl$1), _toConsumableArray(text)));\n    /* Allowed attribute names */\n\n    var ALLOWED_ATTR = null;\n    var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(mathMl), _toConsumableArray(xml)));\n    /*\n     * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n     * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n     * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n     * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n     */\n\n    var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false\n      }\n    }));\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n\n    var FORBID_TAGS = null;\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n\n    var FORBID_ATTR = null;\n    /* Decide if ARIA attributes are okay */\n\n    var ALLOW_ARIA_ATTR = true;\n    /* Decide if custom data attributes are okay */\n\n    var ALLOW_DATA_ATTR = true;\n    /* Decide if unknown protocols are okay */\n\n    var ALLOW_UNKNOWN_PROTOCOLS = false;\n    /* Decide if self-closing tags in attributes are allowed.\n     * Usually removed due to a mXSS issue in jQuery 3.0 */\n\n    var ALLOW_SELF_CLOSE_IN_ATTR = true;\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n\n    var SAFE_FOR_TEMPLATES = false;\n    /* Decide if document with <html>... should be returned */\n\n    var WHOLE_DOCUMENT = false;\n    /* Track whether config is already set on this instance of DOMPurify. */\n\n    var SET_CONFIG = false;\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n\n    var FORCE_BODY = false;\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n     * string (or a TrustedHTML object if Trusted Types are supported).\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n\n    var RETURN_DOM = false;\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n     * string  (or a TrustedHTML object if Trusted Types are supported) */\n\n    var RETURN_DOM_FRAGMENT = false;\n    /* Try to return a Trusted Type object instead of a string, return a string in\n     * case Trusted Types are not supported  */\n\n    var RETURN_TRUSTED_TYPE = false;\n    /* Output should be free from DOM clobbering attacks?\n     * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n     */\n\n    var SANITIZE_DOM = true;\n    /* Achieve full DOM Clobbering protection by isolating the namespace of named\n     * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n     *\n     * HTML/DOM spec rules that enable DOM Clobbering:\n     *   - Named Access on Window (7.3.3)\n     *   - DOM Tree Accessors (3.1.5)\n     *   - Form Element Parent-Child Relations (4.10.3)\n     *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n     *   - HTMLCollection (4.2.10.2)\n     *\n     * Namespace isolation is implemented by prefixing `id` and `name` attributes\n     * with a constant string, i.e., `user-content-`\n     */\n\n    var SANITIZE_NAMED_PROPS = false;\n    var SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n    /* Keep element content when removing element? */\n\n    var KEEP_CONTENT = true;\n    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n     * of importing it into a new Document and returning a sanitized copy */\n\n    var IN_PLACE = false;\n    /* Allow usage of profiles like html, svg and mathMl */\n\n    var USE_PROFILES = {};\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n\n    var FORBID_CONTENTS = null;\n    var DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n    /* Tags that are safe for data: URIs */\n\n    var DATA_URI_TAGS = null;\n    var DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n    /* Attributes safe for values like \"javascript:\" */\n\n    var URI_SAFE_ATTRIBUTES = null;\n    var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n    var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n    var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n    var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n    /* Document namespace */\n\n    var NAMESPACE = HTML_NAMESPACE;\n    var IS_EMPTY_INPUT = false;\n    /* Allowed XHTML+XML namespaces */\n\n    var ALLOWED_NAMESPACES = null;\n    var DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n    /* Parsing of strict XHTML documents */\n\n    var PARSER_MEDIA_TYPE;\n    var SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n    var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n    var transformCaseFunc;\n    /* Keep a reference to config to pass to hooks */\n\n    var CONFIG = null;\n    /* Ideally, do not touch anything below this line */\n\n    /* ______________________________________________ */\n\n    var formElement = document.createElement('form');\n\n    var isRegexOrFunction = function isRegexOrFunction(testValue) {\n      return testValue instanceof RegExp || testValue instanceof Function;\n    };\n    /**\n     * _parseConfig\n     *\n     * @param  {Object} cfg optional config literal\n     */\n    // eslint-disable-next-line complexity\n\n\n    var _parseConfig = function _parseConfig(cfg) {\n      if (CONFIG && CONFIG === cfg) {\n        return;\n      }\n      /* Shield configuration object from tampering */\n\n\n      if (!cfg || _typeof(cfg) !== 'object') {\n        cfg = {};\n      }\n      /* Shield configuration object from prototype pollution */\n\n\n      cfg = clone(cfg);\n      PARSER_MEDIA_TYPE = // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE; // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n\n      transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n      /* Set configuration parameters */\n\n      ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n      ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n      ALLOWED_NAMESPACES = 'ALLOWED_NAMESPACES' in cfg ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n      URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), // eslint-disable-line indent\n      cfg.ADD_URI_SAFE_ATTR, // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n      ) // eslint-disable-line indent\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n      DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), // eslint-disable-line indent\n      cfg.ADD_DATA_URI_TAGS, // eslint-disable-line indent\n      transformCaseFunc // eslint-disable-line indent\n      ) // eslint-disable-line indent\n      : DEFAULT_DATA_URI_TAGS;\n      FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n      FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n      FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n      USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n\n      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n\n      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n\n      ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n\n      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n\n      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n\n      RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n\n      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n\n      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n\n      FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n\n      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n\n      SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n\n      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n\n      IN_PLACE = cfg.IN_PLACE || false; // Default false\n\n      IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$1;\n      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n      CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n      }\n\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n      }\n\n      if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n        CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n      }\n\n      if (SAFE_FOR_TEMPLATES) {\n        ALLOW_DATA_ATTR = false;\n      }\n\n      if (RETURN_DOM_FRAGMENT) {\n        RETURN_DOM = true;\n      }\n      /* Parse profile info */\n\n\n      if (USE_PROFILES) {\n        ALLOWED_TAGS = addToSet({}, _toConsumableArray(text));\n        ALLOWED_ATTR = [];\n\n        if (USE_PROFILES.html === true) {\n          addToSet(ALLOWED_TAGS, html$1);\n          addToSet(ALLOWED_ATTR, html);\n        }\n\n        if (USE_PROFILES.svg === true) {\n          addToSet(ALLOWED_TAGS, svg$1);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n\n        if (USE_PROFILES.svgFilters === true) {\n          addToSet(ALLOWED_TAGS, svgFilters);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n\n        if (USE_PROFILES.mathMl === true) {\n          addToSet(ALLOWED_TAGS, mathMl$1);\n          addToSet(ALLOWED_ATTR, mathMl);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n      }\n      /* Merge configuration parameters */\n\n\n      if (cfg.ADD_TAGS) {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n\n      if (cfg.ADD_ATTR) {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n\n      if (cfg.ADD_URI_SAFE_ATTR) {\n        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n      }\n\n      if (cfg.FORBID_CONTENTS) {\n        if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n          FORBID_CONTENTS = clone(FORBID_CONTENTS);\n        }\n\n        addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n      }\n      /* Add #text in case KEEP_CONTENT is set to true */\n\n\n      if (KEEP_CONTENT) {\n        ALLOWED_TAGS['#text'] = true;\n      }\n      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n\n\n      if (WHOLE_DOCUMENT) {\n        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n      }\n      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n\n\n      if (ALLOWED_TAGS.table) {\n        addToSet(ALLOWED_TAGS, ['tbody']);\n        delete FORBID_TAGS.tbody;\n      } // Prevent further manipulation of configuration.\n      // Not available in IE8, Safari 5, etc.\n\n\n      if (freeze) {\n        freeze(cfg);\n      }\n\n      CONFIG = cfg;\n    };\n\n    var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n    var HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']); // Certain elements are allowed in both SVG and HTML\n    // namespace. We need to specify them explicitly\n    // so that they don't get erroneously deleted from\n    // HTML namespace.\n\n    var COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n    /* Keep track of all possible SVG and MathML tags\n     * so that we can perform the namespace checks\n     * correctly. */\n\n    var ALL_SVG_TAGS = addToSet({}, svg$1);\n    addToSet(ALL_SVG_TAGS, svgFilters);\n    addToSet(ALL_SVG_TAGS, svgDisallowed);\n    var ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n    addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n    /**\n     *\n     *\n     * @param  {Element} element a DOM element whose namespace is being checked\n     * @returns {boolean} Return false if the element has a\n     *  namespace that a spec-compliant parser would never\n     *  return. Return true otherwise.\n     */\n\n    var _checkValidNamespace = function _checkValidNamespace(element) {\n      var parent = getParentNode(element); // In JSDOM, if we're inside shadow DOM, then parentNode\n      // can be null. We just simulate parent in this case.\n\n      if (!parent || !parent.tagName) {\n        parent = {\n          namespaceURI: NAMESPACE,\n          tagName: 'template'\n        };\n      }\n\n      var tagName = stringToLowerCase(element.tagName);\n      var parentTagName = stringToLowerCase(parent.tagName);\n\n      if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return false;\n      }\n\n      if (element.namespaceURI === SVG_NAMESPACE) {\n        // The only way to switch from HTML namespace to SVG\n        // is via <svg>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'svg';\n        } // The only way to switch from MathML to SVG is via`\n        // svg if parent is either <annotation-xml> or MathML\n        // text integration points.\n\n\n        if (parent.namespaceURI === MATHML_NAMESPACE) {\n          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n        } // We only allow elements that are defined in SVG\n        // spec. All others are disallowed in SVG namespace.\n\n\n        return Boolean(ALL_SVG_TAGS[tagName]);\n      }\n\n      if (element.namespaceURI === MATHML_NAMESPACE) {\n        // The only way to switch from HTML namespace to MathML\n        // is via <math>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'math';\n        } // The only way to switch from SVG to MathML is via\n        // <math> and HTML integration points\n\n\n        if (parent.namespaceURI === SVG_NAMESPACE) {\n          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n        } // We only allow elements that are defined in MathML\n        // spec. All others are disallowed in MathML namespace.\n\n\n        return Boolean(ALL_MATHML_TAGS[tagName]);\n      }\n\n      if (element.namespaceURI === HTML_NAMESPACE) {\n        // The only way to switch from SVG to HTML is via\n        // HTML integration points, and from MathML to HTML\n        // is via MathML text integration points\n        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n\n        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        } // We disallow tags that are specific for MathML\n        // or SVG and should never appear in HTML namespace\n\n\n        return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n      } // For XHTML and XML documents that support custom namespaces\n\n\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return true;\n      } // The code should never reach this place (this means\n      // that the element somehow got namespace that is not\n      // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n      // Return false just in case.\n\n\n      return false;\n    };\n    /**\n     * _forceRemove\n     *\n     * @param  {Node} node a DOM node\n     */\n\n\n    var _forceRemove = function _forceRemove(node) {\n      arrayPush(DOMPurify.removed, {\n        element: node\n      });\n\n      try {\n        // eslint-disable-next-line unicorn/prefer-dom-node-remove\n        node.parentNode.removeChild(node);\n      } catch (_) {\n        node.remove();\n      }\n    };\n    /**\n     * _removeAttribute\n     *\n     * @param  {String} name an Attribute name\n     * @param  {Node} node a DOM node\n     */\n\n\n    var _removeAttribute = function _removeAttribute(name, node) {\n      try {\n        arrayPush(DOMPurify.removed, {\n          attribute: node.getAttributeNode(name),\n          from: node\n        });\n      } catch (_) {\n        arrayPush(DOMPurify.removed, {\n          attribute: null,\n          from: node\n        });\n      }\n\n      node.removeAttribute(name); // We void attribute values for unremovable \"is\"\" attributes\n\n      if (name === 'is' && !ALLOWED_ATTR[name]) {\n        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n          try {\n            _forceRemove(node);\n          } catch (_) {}\n        } else {\n          try {\n            node.setAttribute(name, '');\n          } catch (_) {}\n        }\n      }\n    };\n    /**\n     * _initDocument\n     *\n     * @param  {String} dirty a string of dirty markup\n     * @return {Document} a DOM, filled with the dirty markup\n     */\n\n\n    var _initDocument = function _initDocument(dirty) {\n      /* Create a HTML document */\n      var doc;\n      var leadingWhitespace;\n\n      if (FORCE_BODY) {\n        dirty = '<remove></remove>' + dirty;\n      } else {\n        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n        var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n        leadingWhitespace = matches && matches[0];\n      }\n\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n        // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n        dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n      }\n\n      var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      /*\n       * Use the DOMParser API by default, fallback later if needs be\n       * DOMParser not work for svg when has multiple root element.\n       */\n\n      if (NAMESPACE === HTML_NAMESPACE) {\n        try {\n          doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n        } catch (_) {}\n      }\n      /* Use createHTMLDocument in case DOMParser is not available */\n\n\n      if (!doc || !doc.documentElement) {\n        doc = implementation.createDocument(NAMESPACE, 'template', null);\n\n        try {\n          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n        } catch (_) {// Syntax error if dirtyPayload is invalid xml\n        }\n      }\n\n      var body = doc.body || doc.documentElement;\n\n      if (dirty && leadingWhitespace) {\n        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n      }\n      /* Work on whole document or just its body */\n\n\n      if (NAMESPACE === HTML_NAMESPACE) {\n        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n      }\n\n      return WHOLE_DOCUMENT ? doc.documentElement : body;\n    };\n    /**\n     * _createIterator\n     *\n     * @param  {Document} root document/fragment to create iterator for\n     * @return {Iterator} iterator instance\n     */\n\n\n    var _createIterator = function _createIterator(root) {\n      return createNodeIterator.call(root.ownerDocument || root, root, // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n    };\n    /**\n     * _isClobbered\n     *\n     * @param  {Node} elm element to check for clobbering attacks\n     * @return {Boolean} true if clobbered, false if safe\n     */\n\n\n    var _isClobbered = function _isClobbered(elm) {\n      return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n    };\n    /**\n     * _isNode\n     *\n     * @param  {Node} obj object to check whether it's a DOM node\n     * @return {Boolean} true is object is a DOM node\n     */\n\n\n    var _isNode = function _isNode(object) {\n      return _typeof(Node) === 'object' ? object instanceof Node : object && _typeof(object) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n    };\n    /**\n     * _executeHook\n     * Execute user configurable hooks\n     *\n     * @param  {String} entryPoint  Name of the hook's entry point\n     * @param  {Node} currentNode node to work on with the hook\n     * @param  {Object} data additional hook parameters\n     */\n\n\n    var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n      if (!hooks[entryPoint]) {\n        return;\n      }\n\n      arrayForEach(hooks[entryPoint], function (hook) {\n        hook.call(DOMPurify, currentNode, data, CONFIG);\n      });\n    };\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     *\n     * @param   {Node} currentNode to check for permission to exist\n     * @return  {Boolean} true if node was killed, false if left alive\n     */\n\n\n    var _sanitizeElements = function _sanitizeElements(currentNode) {\n      var content;\n      /* Execute a hook if present */\n\n      _executeHook('beforeSanitizeElements', currentNode, null);\n      /* Check if element is clobbered or can clobber */\n\n\n      if (_isClobbered(currentNode)) {\n        _forceRemove(currentNode);\n\n        return true;\n      }\n      /* Now let's check the element's type and name */\n\n\n      var tagName = transformCaseFunc(currentNode.nodeName);\n      /* Execute a hook if present */\n\n      _executeHook('uponSanitizeElement', currentNode, {\n        tagName: tagName,\n        allowedTags: ALLOWED_TAGS\n      });\n      /* Detect mXSS attempts abusing namespace confusion */\n\n\n      if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n        _forceRemove(currentNode);\n\n        return true;\n      }\n      /* Remove element if anything forbids its presence */\n\n\n      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n        /* Check if we have a custom element to handle */\n        if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) return false;\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) return false;\n        }\n        /* Keep content except for bad-listed elements */\n\n\n        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n          var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n          var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n          if (childNodes && parentNode) {\n            var childCount = childNodes.length;\n\n            for (var i = childCount - 1; i >= 0; --i) {\n              parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n            }\n          }\n        }\n\n        _forceRemove(currentNode);\n\n        return true;\n      }\n      /* Check whether element has a valid namespace */\n\n\n      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n        _forceRemove(currentNode);\n\n        return true;\n      }\n      /* Make sure that older browsers don't get noscript mXSS */\n\n\n      if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n        _forceRemove(currentNode);\n\n        return true;\n      }\n      /* Sanitize element content to be template-safe */\n\n\n      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n        /* Get the element's text content */\n        content = currentNode.textContent;\n        content = stringReplace(content, MUSTACHE_EXPR$1, ' ');\n        content = stringReplace(content, ERB_EXPR$1, ' ');\n        content = stringReplace(content, TMPLIT_EXPR$1, ' ');\n\n        if (currentNode.textContent !== content) {\n          arrayPush(DOMPurify.removed, {\n            element: currentNode.cloneNode()\n          });\n          currentNode.textContent = content;\n        }\n      }\n      /* Execute a hook if present */\n\n\n      _executeHook('afterSanitizeElements', currentNode, null);\n\n      return false;\n    };\n    /**\n     * _isValidAttribute\n     *\n     * @param  {string} lcTag Lowercase tag name of containing element.\n     * @param  {string} lcName Lowercase attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid, otherwise false.\n     */\n    // eslint-disable-next-line complexity\n\n\n    var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n      /* Make sure attribute cannot clobber */\n      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n        return false;\n      }\n      /* Allow valid data-* attributes: At least one character after \"-\"\n          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n          We don't need to check the value; it's always URI safe. */\n\n\n      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$1, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$1, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n        if ( // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        _basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n          return false;\n        }\n        /* Check value is safe. First, is attr inert? If so, is safe */\n\n      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE$1, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$1, stringReplace(value, ATTR_WHITESPACE$1, ''))) ; else if (!value) ; else {\n        return false;\n      }\n\n      return true;\n    };\n    /**\n     * _basicCustomElementCheck\n     * checks if at least one dash is included in tagName, and it's not the first char\n     * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n     * @param {string} tagName name of the tag of the node to sanitize\n     */\n\n\n    var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n      return tagName.indexOf('-') > 0;\n    };\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param  {Node} currentNode to sanitize\n     */\n\n\n    var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n      var attr;\n      var value;\n      var lcName;\n      var l;\n      /* Execute a hook if present */\n\n      _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n      var attributes = currentNode.attributes;\n      /* Check if we have attributes; if not we might have a text node */\n\n      if (!attributes) {\n        return;\n      }\n\n      var hookEvent = {\n        attrName: '',\n        attrValue: '',\n        keepAttr: true,\n        allowedAttributes: ALLOWED_ATTR\n      };\n      l = attributes.length;\n      /* Go backwards over all attributes; safely remove bad ones */\n\n      while (l--) {\n        attr = attributes[l];\n        var _attr = attr,\n            name = _attr.name,\n            namespaceURI = _attr.namespaceURI;\n        value = name === 'value' ? attr.value : stringTrim(attr.value);\n        lcName = transformCaseFunc(name);\n        /* Execute a hook if present */\n\n        hookEvent.attrName = lcName;\n        hookEvent.attrValue = value;\n        hookEvent.keepAttr = true;\n        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n\n        _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n\n        value = hookEvent.attrValue;\n        /* Did the hooks approve of the attribute? */\n\n        if (hookEvent.forceKeepAttr) {\n          continue;\n        }\n        /* Remove attribute */\n\n\n        _removeAttribute(name, currentNode);\n        /* Did the hooks approve of the attribute? */\n\n\n        if (!hookEvent.keepAttr) {\n          continue;\n        }\n        /* Work around a security issue in jQuery 3.0 */\n\n\n        if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n          _removeAttribute(name, currentNode);\n\n          continue;\n        }\n        /* Sanitize attribute content to be template-safe */\n\n\n        if (SAFE_FOR_TEMPLATES) {\n          value = stringReplace(value, MUSTACHE_EXPR$1, ' ');\n          value = stringReplace(value, ERB_EXPR$1, ' ');\n          value = stringReplace(value, TMPLIT_EXPR$1, ' ');\n        }\n        /* Is `value` valid for this attribute? */\n\n\n        var lcTag = transformCaseFunc(currentNode.nodeName);\n\n        if (!_isValidAttribute(lcTag, lcName, value)) {\n          continue;\n        }\n        /* Full DOM Clobbering protection via namespace isolation,\n         * Prefix id and name attributes with `user-content-`\n         */\n\n\n        if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n          // Remove the attribute with this value\n          _removeAttribute(name, currentNode); // Prefix the value and later re-create the attribute with the sanitized value\n\n\n          value = SANITIZE_NAMED_PROPS_PREFIX + value;\n        }\n        /* Handle attributes that require Trusted Types */\n\n\n        if (trustedTypesPolicy && _typeof(trustedTypes) === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n          if (namespaceURI) ; else {\n            switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n              case 'TrustedHTML':\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n\n              case 'TrustedScriptURL':\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n            }\n          }\n        }\n        /* Handle invalid data-* attribute set by try-catching it */\n\n\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n\n          arrayPop(DOMPurify.removed);\n        } catch (_) {}\n      }\n      /* Execute a hook if present */\n\n\n      _executeHook('afterSanitizeAttributes', currentNode, null);\n    };\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param  {DocumentFragment} fragment to iterate over recursively\n     */\n\n\n    var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n      var shadowNode;\n\n      var shadowIterator = _createIterator(fragment);\n      /* Execute a hook if present */\n\n\n      _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n      while (shadowNode = shadowIterator.nextNode()) {\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeShadowNode', shadowNode, null);\n        /* Sanitize tags and elements */\n\n\n        if (_sanitizeElements(shadowNode)) {\n          continue;\n        }\n        /* Deep shadow DOM detected */\n\n\n        if (shadowNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(shadowNode.content);\n        }\n        /* Check attributes, sanitize if necessary */\n\n\n        _sanitizeAttributes(shadowNode);\n      }\n      /* Execute a hook if present */\n\n\n      _executeHook('afterSanitizeShadowDOM', fragment, null);\n    };\n    /**\n     * Sanitize\n     * Public method providing core sanitation functionality\n     *\n     * @param {String|Node} dirty string or DOM node\n     * @param {Object} configuration object\n     */\n    // eslint-disable-next-line complexity\n\n\n    DOMPurify.sanitize = function (dirty) {\n      var cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var body;\n      var importedNode;\n      var currentNode;\n      var returnNode;\n      /* Make sure we have a string to sanitize.\n        DO NOT return early, as this will return the wrong type if\n        the user has requested a DOM object rather than a string */\n\n      IS_EMPTY_INPUT = !dirty;\n\n      if (IS_EMPTY_INPUT) {\n        dirty = '<!-->';\n      }\n      /* Stringify, in case dirty is an object */\n\n\n      if (typeof dirty !== 'string' && !_isNode(dirty)) {\n        // eslint-disable-next-line no-negated-condition\n        if (typeof dirty.toString !== 'function') {\n          throw typeErrorCreate('toString is not a function');\n        } else {\n          dirty = dirty.toString();\n\n          if (typeof dirty !== 'string') {\n            throw typeErrorCreate('dirty is not a string, aborting');\n          }\n        }\n      }\n      /* Return dirty HTML if DOMPurify cannot run */\n\n\n      if (!DOMPurify.isSupported) {\n        return dirty;\n      }\n      /* Assign config vars */\n\n\n      if (!SET_CONFIG) {\n        _parseConfig(cfg);\n      }\n      /* Clean up removed elements */\n\n\n      DOMPurify.removed = [];\n      /* Check if dirty is correctly typed for IN_PLACE */\n\n      if (typeof dirty === 'string') {\n        IN_PLACE = false;\n      }\n\n      if (IN_PLACE) {\n        /* Do some early pre-sanitization to avoid unsafe root nodes */\n        if (dirty.nodeName) {\n          var tagName = transformCaseFunc(dirty.nodeName);\n\n          if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n            throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n          }\n        }\n      } else if (dirty instanceof Node) {\n        /* If dirty is a DOM element, append to an empty document to avoid\n           elements being stripped by the parser */\n        body = _initDocument('<!---->');\n        importedNode = body.ownerDocument.importNode(dirty, true);\n\n        if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n          /* Node is already a body, use as is */\n          body = importedNode;\n        } else if (importedNode.nodeName === 'HTML') {\n          body = importedNode;\n        } else {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          body.appendChild(importedNode);\n        }\n      } else {\n        /* Exit directly if we have nothing to do */\n        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1) {\n          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        }\n        /* Initialize the document to work on */\n\n\n        body = _initDocument(dirty);\n        /* Check we have a DOM node from the data */\n\n        if (!body) {\n          return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n        }\n      }\n      /* Remove first element node (ours) if FORCE_BODY is set */\n\n\n      if (body && FORCE_BODY) {\n        _forceRemove(body.firstChild);\n      }\n      /* Get node iterator */\n\n\n      var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n      /* Now start iterating over the created document */\n\n\n      while (currentNode = nodeIterator.nextNode()) {\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(currentNode)) {\n          continue;\n        }\n        /* Shadow DOM detected, sanitize it */\n\n\n        if (currentNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(currentNode.content);\n        }\n        /* Check attributes, sanitize if necessary */\n\n\n        _sanitizeAttributes(currentNode);\n      }\n      /* If we sanitized `dirty` in-place, return it. */\n\n\n      if (IN_PLACE) {\n        return dirty;\n      }\n      /* Return sanitized string or DOM */\n\n\n      if (RETURN_DOM) {\n        if (RETURN_DOM_FRAGMENT) {\n          returnNode = createDocumentFragment.call(body.ownerDocument);\n\n          while (body.firstChild) {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            returnNode.appendChild(body.firstChild);\n          }\n        } else {\n          returnNode = body;\n        }\n\n        if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmod) {\n          /*\n            AdoptNode() is not used because internal state is not reset\n            (e.g. the past names map of a HTMLFormElement), this is safe\n            in theory but we would rather not risk another attack vector.\n            The state that is cloned by importNode() is explicitly defined\n            by the specs.\n          */\n          returnNode = importNode.call(originalDocument, returnNode, true);\n        }\n\n        return returnNode;\n      }\n\n      var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n      /* Serialize doctype if allowed */\n\n      if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n        serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n      }\n      /* Sanitize final string template-safe */\n\n\n      if (SAFE_FOR_TEMPLATES) {\n        serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$1, ' ');\n        serializedHTML = stringReplace(serializedHTML, ERB_EXPR$1, ' ');\n        serializedHTML = stringReplace(serializedHTML, TMPLIT_EXPR$1, ' ');\n      }\n\n      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n    };\n    /**\n     * Public method to set the configuration once\n     * setConfig\n     *\n     * @param {Object} cfg configuration object\n     */\n\n\n    DOMPurify.setConfig = function (cfg) {\n      _parseConfig(cfg);\n\n      SET_CONFIG = true;\n    };\n    /**\n     * Public method to remove the configuration\n     * clearConfig\n     *\n     */\n\n\n    DOMPurify.clearConfig = function () {\n      CONFIG = null;\n      SET_CONFIG = false;\n    };\n    /**\n     * Public method to check if an attribute value is valid.\n     * Uses last set config, if any. Otherwise, uses config defaults.\n     * isValidAttribute\n     *\n     * @param  {string} tag Tag name of containing element.\n     * @param  {string} attr Attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n     */\n\n\n    DOMPurify.isValidAttribute = function (tag, attr, value) {\n      /* Initialize shared config vars if necessary. */\n      if (!CONFIG) {\n        _parseConfig({});\n      }\n\n      var lcTag = transformCaseFunc(tag);\n      var lcName = transformCaseFunc(attr);\n      return _isValidAttribute(lcTag, lcName, value);\n    };\n    /**\n     * AddHook\n     * Public method to add DOMPurify hooks\n     *\n     * @param {String} entryPoint entry point for the hook to add\n     * @param {Function} hookFunction function to execute\n     */\n\n\n    DOMPurify.addHook = function (entryPoint, hookFunction) {\n      if (typeof hookFunction !== 'function') {\n        return;\n      }\n\n      hooks[entryPoint] = hooks[entryPoint] || [];\n      arrayPush(hooks[entryPoint], hookFunction);\n    };\n    /**\n     * RemoveHook\n     * Public method to remove a DOMPurify hook at a given entryPoint\n     * (pops it from the stack of hooks if more are present)\n     *\n     * @param {String} entryPoint entry point for the hook to remove\n     * @return {Function} removed(popped) hook\n     */\n\n\n    DOMPurify.removeHook = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        return arrayPop(hooks[entryPoint]);\n      }\n    };\n    /**\n     * RemoveHooks\n     * Public method to remove all DOMPurify hooks at a given entryPoint\n     *\n     * @param  {String} entryPoint entry point for the hooks to remove\n     */\n\n\n    DOMPurify.removeHooks = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        hooks[entryPoint] = [];\n      }\n    };\n    /**\n     * RemoveAllHooks\n     * Public method to remove all DOMPurify hooks\n     *\n     */\n\n\n    DOMPurify.removeAllHooks = function () {\n      hooks = {};\n    };\n\n    return DOMPurify;\n  }\n\n  var purify = createDOMPurify();\n\n  return purify;\n\n}));\n//# sourceMappingURL=purify.js.map\n","/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? value.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // global for any kind of environment.\n    var _global= new Function('','return this')();\n    _global.EventEmitter2 = EventEmitter;\n  }\n}();\n","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./style.less\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","import { storageInterface } from './storageInterface';\n\ndeclare let i18n: string[];\n\nexport const webextension: storageInterface = {\n  async set(key: string, value: string): Promise<void> {\n    const obj = {} as any;\n    obj[key] = value;\n    return new Promise((resolve, reject) => {\n      getStorage(key).set(obj, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async get(key: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).get(key, function (results) {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve(results[key]);\n      });\n    });\n  },\n\n  async remove(key: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      getStorage(key).remove(key, function () {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n        resolve();\n      });\n    });\n  },\n\n  async list(type = 'local'): Promise<any> {\n    return new Promise((resolve, reject) => {\n      if (type === 'local') {\n        chrome.storage.local.get(null, function (results) {\n          resolve(results);\n        });\n      } else {\n        chrome.storage.sync.get(null, function (results) {\n          resolve(results);\n        });\n      }\n    });\n  },\n\n  async addStyle(css) {\n    try {\n      const style = document.createElement('style');\n      style.textContent = css;\n      (document.head || document.body || document.documentElement || document).appendChild(style);\n    } catch (e) {\n      console.log(`Could not add css:${e}`);\n    }\n  },\n\n  version() {\n    return chrome.runtime.getManifest().version;\n  },\n\n  lang(selector, args) {\n    if (api.settings.get('forceEn') && typeof i18n !== 'undefined') {\n      let message = i18n[selector];\n      if (typeof args !== 'undefined') {\n        for (let argIndex = 0; argIndex < args.length; argIndex++) {\n          message = message.replace(`$${argIndex + 1}`, args[argIndex]);\n        }\n      }\n      return message;\n    }\n    // @ts-ignore\n    return chrome.i18n.getMessage(selector, args);\n  },\n\n  assetUrl(filename) {\n    return chrome.extension.getURL(`assets/${filename}`);\n  },\n\n  injectCssResource(res, head) {\n    alert('injectCssResource not supported in webextension');\n  },\n\n  injectjsResource(res, head) {\n    const s = document.createElement('script');\n    s.src = chrome.extension.getURL(`vendor/${res}`);\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  updateDom(head) {\n    const s = document.createElement('script');\n    s.text = `\n        document.getElementsByTagName('head')[0].onclick = function(e){\n          try{\n            componentHandler.upgradeDom();\n          }catch(e){\n            console.log(e);\n            setTimeout(function(){\n              componentHandler.upgradeDom();\n            },500);\n          }\n        }`;\n    s.onload = function () {\n      // @ts-ignore\n      this.remove();\n    };\n    head.get(0).appendChild(s);\n  },\n\n  storageOnChanged(cb) {\n    chrome.storage.onChanged.addListener(cb);\n  },\n};\n\nfunction getStorage(key: string) {\n  if (utils.syncRegex.test(key)) {\n    return chrome.storage.sync;\n  }\n  return chrome.storage.local;\n}\n","import { sendMessageI, responseMessageI } from '../messageInterface';\nimport { requestInterface } from './requestInterface';\n\nexport const requestApi: requestInterface = {\n  async xhr(method, url) {\n    if (typeof requestApi.sendMessage !== 'undefined') {\n      return requestApi.sendMessage({ name: 'xhr', method, url }).then(xhr => {\n        if (xhr.status === 429) throw 'Rate limit Timeout';\n        return xhr;\n      });\n    }\n    throw 'Could not send xhr';\n  },\n\n  async sendMessage(message: sendMessageI): Promise<any> {\n    return new Promise((resolve, reject) => {\n      chrome.runtime.sendMessage(message, function (response: responseMessageI) {\n        resolve(response);\n      });\n    });\n  },\n\n  notification(options) {\n    this.sendMessage({\n      name: 'notification',\n      options,\n    });\n  },\n  database(call, param) {\n    return this.sendMessage({\n      name: 'database',\n      options: {\n        call,\n        param,\n      },\n    });\n  },\n};\n","import { reactive, ref } from 'vue';\n\nexport const settingsObj = {\n  options: reactive({\n    autoTrackingModeanime: 'video',\n    readerTracking: true,\n    autoTrackingModemanga: 'instant',\n    enablePages: {},\n    forceEn: false,\n    rpc: true,\n    presenceLargeImage: 'cover',\n    presenceShowButtons: true,\n    presenceShowMalsync: false,\n    userscriptModeButton: false,\n    syncMode: 'MAL',\n    syncModeSimkl: 'MAL',\n    localSync: true,\n    delay: 0,\n    videoDuration: 85,\n    malTags: false,\n    malContinue: true,\n    malResume: true,\n    usedPage: true,\n    epPredictions: true,\n\n    theme: 'auto',\n    themeSidebars: true,\n    themeColor: '#000000',\n    themeOpacity: 100,\n    themeImage: '',\n\n    minimalWindow: false,\n    posLeft: 'left',\n    miniMALonMal: false,\n    floatButtonStealth: false,\n    minimizeBigPopup: false,\n    floatButtonCorrection: true,\n    floatButtonHide: false,\n    autoCloseMinimal: false,\n    outWay: true,\n    miniMalWidth: '550px',\n    miniMalHeight: '90%',\n    malThumbnail: 100,\n    friendScore: true,\n    loadPTWForProgress: false,\n\n    quicklinks: [\n      '9anime',\n      'Crunchyroll',\n      'Gogoanime',\n      'Twistmoe',\n      'Mangadex',\n      'MangaNato',\n      'MangaFox',\n      'MangaSee',\n      'MangaFire',\n      'YugenAnime',\n      'Zoro',\n      'Funimation',\n      'Hulu',\n      'Netflix',\n      'Hidive',\n      'Vrv',\n      'VIZ',\n      'MangaPlus',\n      'MangaReader',\n      'marin',\n      'ComicK',\n    ],\n    quicklinksPosition: 'default',\n\n    autofull: false,\n    autoresume: false,\n    autoNextEp: false,\n    highlightAllEp: false,\n    checkForFiller: true,\n    crashReport: true,\n\n    introSkip: 85,\n    introSkipFwd: [17, 39],\n    introSkipBwd: [17, 37],\n    nextEpShort: [],\n    correctionShort: [67],\n    syncShort: [],\n\n    progressInterval: 120,\n    progressIntervalDefaultAnime: 'en/sub',\n    progressIntervalDefaultManga: 'en/sub',\n    progressNotificationsAnime: true,\n    progressNotificationsManga: true,\n\n    bookMarksList: false,\n\n    customDomains: [],\n\n    anilistUpdateUi: true,\n\n    anilistToken: '',\n    anilistOptions: {\n      displayAdultContent: true,\n      scoreFormat: 'POINT_10',\n    },\n    kitsuToken: '',\n    kitsuOptions: {\n      titleLanguagePreference: 'canonical',\n      sfwFilter: false,\n      ratingSystem: 'regular',\n    },\n    simklToken: '',\n\n    malToken: '',\n    malRefresh: '',\n\n    shikiToken: '',\n    shikiOptions: {\n      locale: 'ru',\n    },\n  }),\n\n  debounceArray: {},\n\n  isInit: ref(false),\n\n  async init() {\n    const tempSettings = [];\n    for (const key in this.options) {\n      const store = await api.storage.get(`settings/${key}`);\n      if (typeof store !== 'undefined') {\n        this.options[key] = store;\n        tempSettings[key] = /(token|refresh)/i.test(key) && store ? '********' : store;\n      }\n    }\n    con.log('Settings', tempSettings);\n\n    let rateDebounce;\n\n    api.storage.storageOnChanged((changes, namespace) => {\n      if (namespace === 'sync') {\n        for (const key in changes) {\n          const storageChange = changes[key];\n          if (/^settings\\//i.test(key)) {\n            this.options[key.replace('settings/', '')] = storageChange.newValue;\n            con.info(`Update ${key} option to ${storageChange.newValue}`);\n          }\n        }\n      }\n      if (namespace === 'local' && changes.rateLimit) {\n        try {\n          clearTimeout(rateDebounce);\n          if (changes.rateLimit.newValue) {\n            con.log('Rate limited');\n            if (!$('.type-rate').length) {\n              utils.flashm('Rate limited. Retrying in a moment', {\n                error: true,\n                type: 'rate',\n                permanent: true,\n              });\n            }\n          } else {\n            rateDebounce = setTimeout(() => {\n              con.log('No Rate limited');\n              $('.type-rate').remove();\n            }, 5000);\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      }\n    });\n\n    this.isInit.value = true;\n\n    return this;\n  },\n\n  get(name: string) {\n    if (!this.isInit.value) throw 'Settings not initialized';\n    return this.options[name];\n  },\n\n  set(name: string, value: any) {\n    if (!Object.prototype.hasOwnProperty.call(this.options, name)) {\n      const err = Error(`${name} is not a defined option`);\n      con.error(err);\n      throw err;\n    }\n\n    this.options[name] = value;\n    return api.storage.set(`settings/${name}`, value);\n  },\n\n  setDebounce(name: string, value: any) {\n    this.options[name] = value;\n    clearTimeout(this.debounceArray[name]);\n    this.debounceArray[name] = setTimeout(() => {\n      this.set(name, value);\n      delete this.debounceArray[name];\n    }, 1000);\n  },\n\n  async getAsync(name: string) {\n    const value = await api.storage.get(`settings/${name}`);\n    if (typeof value === 'undefined' && typeof this.options[name] !== 'undefined')\n      return this.options[name];\n    return value;\n  },\n};\n","import { webextension } from './storage/webextension';\nimport { requestApi } from './request/requestWebextension';\nimport { settingsObj } from './settings';\n\nexport const storage = webextension;\n\nexport const request = requestApi;\n\nexport const settings = settingsObj;\n\nexport const type = 'webextension';\n","/* eslint-disable no-bitwise */\n\nexport const log = (function () {\n  return Function.prototype.bind.call(\n    console.log,\n    console,\n    '%cMAL-Sync',\n    'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const error = (function () {\n  return Function.prototype.bind.call(\n    console.error,\n    console,\n    '%cMAL-Sync',\n    'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const info = (function () {\n  return Function.prototype.bind.call(\n    console.info,\n    console,\n    '%cMAL-Sync',\n    'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const debug = (function () {\n  return Function.prototype.bind.call(\n    console.debug,\n    console,\n    '%cMAL-Sync',\n    'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n  );\n})();\n\nexport const m = (name, color = '', blocks: { name: string; style: string }[] = []) => {\n  let fontColor = 'white';\n  if (!color) color = stringToColour(name);\n  if (color[0] === '#') fontColor = getColorByBgColor(color);\n  const style = `background-color: ${color}; color: ${fontColor}; padding: 2px 10px; border-radius: 3px; margin-left: -5px; border-left: 1px solid white;`;\n  blocks.push({\n    name,\n    style,\n  });\n\n  const temp: any = {};\n\n  temp.m = (name2, color2 = '') => {\n    return m(name2, color2, [...blocks]);\n  };\n\n  const moduleText = blocks.reduce((sum, el) => `${sum}%c${el.name}`, '');\n  const moduleStyle = blocks.map(el => el.style);\n\n  temp.log = (function () {\n    return Function.prototype.bind.call(\n      console.log,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #2e51a2; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.error = (function () {\n    return Function.prototype.bind.call(\n      console.error,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: #8f0000; color: white; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.info = (function () {\n    return Function.prototype.bind.call(\n      console.info,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: wheat; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  temp.debug = (function () {\n    return Function.prototype.bind.call(\n      console.debug,\n      console,\n      `%cM ${moduleText}`,\n      'background-color: steelblue; color: black; padding: 2px 10px; border-radius: 3px;',\n      ...moduleStyle,\n    );\n  })();\n\n  return temp;\n};\n\nfunction stringToColour(str) {\n  if (!str) return '#ffffff';\n  str = String(str);\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let colour = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xff;\n    colour += `00${value.toString(16)}`.substr(-2);\n  }\n  return colour;\n}\n\nfunction getColorByBgColor(bgColor) {\n  return parseInt(bgColor.replace('#', ''), 16) > 0xffffff / 2 ? '#000' : '#fff';\n}\n","declare let browser: any;\n\nexport function urlPart(url: string, part: number) {\n  if (!url) return '';\n\n  const urlParts = url.split('/');\n\n  if (!urlParts[part]) return '';\n\n  return urlParts[part].replace(/[#?].*/, '');\n}\n\nexport function urlStrip(url: string) {\n  return url.replace(/[#?].*/, '');\n}\n\nexport function urlParam(url, name) {\n  const results = new RegExp(`[?&]${name}=([^&#]*)`).exec(url);\n  if (results === null) {\n    return null;\n  }\n  return decodeURI(results[1]) || 0;\n}\n\nexport function getBaseText(element) {\n  let text = element.text();\n  element.children().each(function () {\n    // @ts-ignore\n    text = text.replace(j.$(this).text(), '');\n  });\n  return text;\n}\n\n/**\n * Generates a (hex) string ID for randomisation/verification.\n */\nexport function generateUniqueID(arraySize = 10): string {\n  const array = new Uint32Array(arraySize);\n  window.crypto.getRandomValues(array);\n  return Array.from(array, value => value.toString(16)).join('');\n}\n\nexport function favicon(domain) {\n  if (!domain) return '';\n  const res = domain.match(/^(https?:\\/\\/)?[^/]+/);\n\n  if (res) domain = res[0];\n\n  return `https://favicon.malsync.moe/?domain=${domain}`;\n}\n\nexport function watching(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Reading';\n  return 'Watching';\n}\n\nexport function planTo(type: 'anime' | 'manga') {\n  if (type === 'manga') return 'Plan to Read';\n  return 'Plan to Watch';\n}\n\nexport function episode(type: 'anime' | 'manga') {\n  if (type === 'manga') return api.storage.lang('UI_Chapter');\n  return api.storage.lang('UI_Episode');\n}\n\nexport const syncRegex =\n  /(^settings\\/.*|^updateCheckTime$|^tempVersion$|^local:\\/\\/|^list-tagSettings$)/;\n\nexport const rateLimitExclude = /^https:\\/\\/api.malsync.moe\\/(shark|mal\\/|nc\\/mal\\/.*\\/progress$)/i;\n\n// eslint-disable-next-line no-shadow\nexport enum status {\n  // eslint-disable-next-line no-shadow\n  watching = 1,\n  completed = 2,\n  onhold = 3,\n  dropped = 4,\n  planToWatch = 6,\n}\n\nexport function getselect(data, name) {\n  let temp = data.split(`name=\"${name}\"`)[1].split('</select>')[0];\n  if (temp.indexOf('selected=\"selected\"') > -1) {\n    temp = temp.split('<option');\n    for (let i = 0; i < temp.length; ++i) {\n      if (temp[i].indexOf('selected=\"selected\"') > -1) {\n        return temp[i].split('value=\"')[1].split('\"')[0];\n      }\n    }\n  }\n  return '';\n}\n\nexport function absoluteLink(url, domain) {\n  if (typeof url === 'undefined') {\n    return url;\n  }\n  if (!url.startsWith('http')) {\n    if (url.charAt(0) !== '/') url = `/${url}`;\n    url = domain + url;\n  }\n  return url;\n}\n\nexport function parseHtml(text) {\n  const parser = new DOMParser();\n  const dom = parser.parseFromString(`<!doctype html><body>${text}`, 'text/html');\n  return dom.body.textContent;\n}\n\nexport function urlChangeDetect(callback) {\n  let currentPage = window.location.href;\n  return setInterval(function () {\n    if (currentPage !== window.location.href) {\n      currentPage = window.location.href;\n      callback();\n    }\n  }, 100);\n}\n\nexport function fullUrlChangeDetect(callback, strip = false) {\n  let currentPage = '';\n  const intervalId = setInterval(function () {\n    const url = strip ? urlStrip(window.location.href) : window.location.href;\n    if (currentPage !== url) {\n      currentPage = url;\n      callback();\n    }\n  }, 100);\n\n  return Number(intervalId);\n}\n\nexport function changeDetect(callback, func, immediate = false) {\n  let currentPage = func();\n  const intervalId = setInterval(function () {\n    const temp = func();\n    if (typeof temp !== 'undefined' && currentPage !== temp) {\n      currentPage = func();\n      callback();\n    }\n  }, 500);\n\n  if (immediate) callback();\n\n  return Number(intervalId);\n}\n\nexport function waitUntilTrue(condition: Function, callback: Function, interval = 100) {\n  const intervalId = setInterval(function () {\n    if (condition()) {\n      clearInterval(intervalId);\n      callback();\n    }\n  }, interval);\n\n  return intervalId;\n}\n\nexport function getAsyncWaitUntilTrue(condition: Function, interval = 100) {\n  let intervalId;\n  let rejectThis;\n  const reset = () => {\n    clearTimeout(intervalId);\n    if (rejectThis) rejectThis('AsyncWait stopped');\n  };\n\n  return {\n    asyncWaitUntilTrue: () => {\n      reset();\n      return new Promise<void>((resolve, reject) => {\n        rejectThis = reject;\n        intervalId = waitUntilTrue(condition, () => resolve(), interval);\n      });\n    },\n    reset,\n  };\n}\n\nconst doubleId = Math.random();\nexport function checkDoubleExecution() {\n  if ($('.mal-sync-double-detect').length) {\n    $('.mal-sync-double-detect').each(function (index) {\n      if ($(this).text() !== doubleId.toString()) {\n        alert('Double execution detected! Please run MAL-Sync once only.');\n      }\n    });\n  }\n  $('body').after(\n    j.html(\n      `<div class=\"mal-sync-double-detect\" style=\"display: none;\">${doubleId.toString()}</div>`,\n    ),\n  );\n}\n\nexport function getUrlFromTags(tags: string) {\n  if (/malSync::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('malSync::')[1].split('::')[0]);\n  }\n  if (/last::[\\d\\D]+::/.test(tags)) {\n    return atobURL(tags.split('last::')[1].split('::')[0]);\n  }\n  return undefined;\n\n  function atobURL(encoded) {\n    try {\n      return atob(encoded);\n    } catch (e) {\n      return encoded;\n    }\n  }\n}\n\nexport function setUrlInTags(url: string, tags: string) {\n  if (url === '') {\n    tags = tags.replace(/,?(malSync|last)::[^ \\n]+?::/, '');\n    return tags;\n  }\n  if (!api.settings.get('malTags')) return tags;\n  const addition = `malSync::${btoa(url)}::`;\n  if (/(last|malSync)::[\\d\\D]+::/.test(tags)) {\n    tags = tags.replace(/(last|malSync)::[^^]*?::/, addition);\n  } else {\n    tags = `${tags},${addition}`;\n  }\n  return tags;\n}\n\nexport async function setResumeWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`resume/${type}/${id}`, { url, ep });\n}\n\nexport async function getResumeWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malResume')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`resume/${type}/${id}`);\n}\n\nexport async function setContinueWaching(url: string, ep: number, type, id) {\n  return api.storage.set(`continue/${type}/${id}`, { url, ep });\n}\n\nexport async function getContinueWaching(type, id): Promise<{ url?: string; ep?: number } | void> {\n  if (!api.settings.get('malContinue')) return;\n\n  /* eslint-disable-next-line consistent-return */\n  return api.storage.get(`continue/${type}/${id}`);\n}\n\nexport async function setEntrySettings(type, id, options, tags = '') {\n  const tempOptions = {};\n  if (options) {\n    for (const key in options) {\n      switch (key) {\n        case 'u':\n        case 'p':\n          tempOptions[key] = options[key];\n          break;\n        default:\n      }\n    }\n\n    if (api.settings.get('malTags')) {\n      // TAG mode\n      tags = setUrlInTags(JSON.stringify(tempOptions), tags);\n    } else {\n      // No TAG mode\n      await api.storage.set(`tagSettings/${type}/${id}`, JSON.stringify(tempOptions));\n    }\n  }\n\n  if (!Object.values(tempOptions).find(el => Boolean(el))) {\n    tags = setUrlInTags('', tags);\n    if (!api.settings.get('malTags')) {\n      await api.storage.remove(`tagSettings/${type}/${id}`);\n    }\n  }\n\n  return tags;\n}\n\nexport async function getEntrySettings(type, id, tags = '') {\n  const tempOptions: any = {\n    u: null, // url\n    c: null, // Continue Url\n    r: null, // Resume Url\n    p: '', // Progress Mode\n  };\n\n  if (api.settings.get('malTags')) {\n    // TAG mode\n    const tagString = getUrlFromTags(tags);\n    if (tagString) {\n      if (tagString[0] === '{') {\n        try {\n          const temp = JSON.parse(tagString);\n          for (const key in tempOptions) {\n            if (temp[key]) tempOptions[key] = temp[key];\n          }\n        } catch (e) {\n          con.error(e);\n        }\n      } else {\n        tempOptions.u = tagString;\n      }\n    }\n  } else {\n    // No TAG mode\n    let temp: any = await api.storage.get(`tagSettings/${type}/${id}`);\n\n    if (temp) {\n      temp = JSON.parse(temp);\n\n      for (const key in tempOptions) {\n        if (temp[key]) tempOptions[key] = temp[key];\n      }\n    }\n  }\n\n  const continueUrlObj = await getContinueWaching(type, id);\n  if (continueUrlObj) tempOptions.c = continueUrlObj;\n  const resumeUrlObj = await getResumeWaching(type, id);\n  if (resumeUrlObj) tempOptions.r = resumeUrlObj;\n\n  if (!api.settings.get('usedPage')) tempOptions.u = null;\n\n  return tempOptions;\n}\n\nexport function handleMalImages(url) {\n  if (url.indexOf('questionmark') !== -1) return api.storage.assetUrl('questionmark.gif');\n  return url;\n}\n\nexport function getTooltip(text, style = '', direction = 'top') {\n  const rNumber = Math.floor(Math.random() * 1000 + 1);\n  return `<div id=\"tt${rNumber}\" class=\"icon material-icons\" style=\"font-size:16px; line-height: 0; color: #7f7f7f; padding-bottom: 20px; padding-left: 3px; ${style}\">contact_support</div>\\\n  <div class=\"mdl-tooltip mdl-tooltip--${direction} mdl-tooltip--large\" for=\"tt${rNumber}\">${text}</div>`;\n}\n\nexport function timeDiffToText(delta) {\n  let text = '';\n\n  delta /= 1000;\n\n  const diffYears = Math.floor(delta / 31536000);\n  delta -= diffYears * 31536000;\n  if (diffYears) {\n    text += `${diffYears}y `;\n  }\n\n  const diffDays = Math.floor(delta / 86400);\n  delta -= diffDays * 86400;\n  if (diffDays) {\n    text += `${diffDays}d `;\n  }\n\n  const diffHours = Math.floor(delta / 3600) % 24;\n  delta -= diffHours * 3600;\n  if (diffHours && diffDays < 2) {\n    text += `${diffHours}h `;\n  }\n\n  const diffMinutes = Math.floor(delta / 60) % 60;\n  delta -= diffMinutes * 60;\n  if (diffMinutes && !diffDays && diffHours < 3) {\n    text += `${diffMinutes}min `;\n  }\n\n  return text;\n}\n\nexport function canHideTabs() {\n  if (typeof browser !== 'undefined' && typeof browser.tabs.hide !== 'undefined') {\n    return true;\n  }\n  return false;\n}\n\n// eslint-disable-next-line no-shadow\nexport function statusTag(status, type, id) {\n  const info = {\n    anime: {\n      1: {\n        class: 'watching',\n        text: 'CW',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantowatch',\n        text: 'PTW',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n    manga: {\n      1: {\n        class: 'reading',\n        text: 'CR',\n        title: api.storage.lang(`UI_Status_watching_${type}`),\n      },\n      2: {\n        class: 'completed',\n        text: 'CMPL',\n        title: api.storage.lang('UI_Status_Completed'),\n      },\n      3: {\n        class: 'on-hold',\n        text: 'HOLD',\n        title: api.storage.lang('UI_Status_OnHold'),\n      },\n      4: {\n        class: 'dropped',\n        text: 'DROP',\n        title: api.storage.lang('UI_Status_Dropped'),\n      },\n      6: {\n        class: 'plantoread',\n        text: 'PTR',\n        title: api.storage.lang(`UI_Status_planTo_${type}`),\n      },\n      23: {\n        class: 'rewatching',\n        text: 'RE',\n        title: api.storage.lang(`UI_Status_Rewatching_${type}`),\n      },\n    },\n  };\n\n  $.each([1, 2, 3, 4, 6, 23], function (i, el) {\n    info.anime[info.anime[el].title] = info.anime[el];\n    info.manga[info.manga[el].title] = info.manga[el];\n  });\n\n  if (status && info[type][status]) {\n    const tempInfo = info[type][status];\n    return ` <a href=\"https://myanimelist.net/ownlist/${type}/${id}/edit?hideLayout=1\" title=\"${tempInfo.title}\" class=\"Lightbox_AddEdit button_edit ${tempInfo.class}\">${tempInfo.text}</a>`;\n  }\n  return false;\n}\n\nexport function getStatusText(type: 'anime' | 'manga', state) {\n  switch (state) {\n    case 1:\n      return api.storage.lang(`UI_Status_watching_${type}`);\n    case 2:\n      return api.storage.lang('UI_Status_Completed');\n    case 3:\n      return api.storage.lang('UI_Status_OnHold');\n    case 4:\n      return api.storage.lang('UI_Status_Dropped');\n    case 6:\n      return api.storage.lang(`UI_Status_planTo_${type}`);\n    case 7:\n      return api.storage.lang(`UI_Status_All`);\n    case 23:\n      return api.storage.lang(`UI_Status_Rewatching_${type}`);\n    default:\n      return '';\n  }\n}\n\n// eslint-disable-next-line consistent-return\nexport function notifications(url: string, title: string, message: string, iconUrl = '') {\n  const messageObj: chrome.notifications.NotificationOptions<true> = {\n    type: 'basic',\n    title,\n    message,\n    iconUrl,\n  };\n\n  con.log('Notification', url, messageObj);\n\n  api.storage.get('notificationHistory').then(history => {\n    if (history === undefined) {\n      history = [];\n    }\n\n    if (typeof history !== 'object') return;\n\n    if (history.length >= 10) {\n      history.shift();\n    }\n    history.push({\n      url,\n      title: messageObj.title,\n      message: messageObj.message,\n      iconUrl: messageObj.iconUrl,\n      timestamp: Date.now(),\n    });\n    api.storage.set('notificationHistory', history);\n  });\n\n  try {\n    return chrome.notifications.create(url, messageObj);\n  } catch (e) {\n    con.error(e);\n  }\n}\n\nexport async function timeCache(key, dataFunction, ttl) {\n  const value = await api.storage.get(key);\n  if (typeof value === 'object' && new Date().getTime() < value.timestamp) {\n    return value.data;\n  }\n  const result = await dataFunction();\n  return api.storage.set(key, { data: result, timestamp: new Date().getTime() + ttl }).then(() => {\n    return result;\n  });\n}\n\n// flashm\nexport function flashm(\n  text,\n  options?: {\n    error?: boolean;\n    type?: string;\n    permanent?: boolean;\n    hoverInfo?: boolean;\n    position?: 'top' | 'bottom';\n    minimized?: boolean;\n  },\n) {\n  if (!j.$('#flash-div-top').length) {\n    initflashm();\n  }\n  con.log('[Flash] Message:', text);\n\n  let colorF = '#323232';\n  if (typeof options !== 'undefined' && typeof options.error !== 'undefined' && options.error) {\n    colorF = '#3e0808';\n  }\n\n  let flashdiv = '#flash-div-bottom';\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.position !== 'undefined' &&\n    options.position\n  ) {\n    flashdiv = `#flash-div-${options.position}`;\n  }\n\n  let messClass = 'flash';\n  if (typeof options !== 'undefined' && typeof options.type !== 'undefined' && options.type) {\n    const tempClass = `type-${options.type}`;\n    j.$(`${flashdiv} .${tempClass}, #flashinfo-div .${tempClass}`)\n      .removeClass(tempClass)\n      .fadeOut({\n        duration: 1000,\n        queue: false,\n        complete() {\n          j.$(this).remove();\n        },\n      });\n\n    messClass += ` ${tempClass}`;\n  }\n\n  let mess = `<div class=\"${messClass}\" style=\"display:none;\">\\\n        <div style=\"display:table; pointer-events: all; padding: 14px 24px 14px 24px; margin: 0 auto; margin-top: 5px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; \">\\\n          ${text}\\\n        </div>\\\n      </div>`;\n\n  let flashmEl;\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    messClass += ' flashinfo';\n    mess = `<div class=\"${messClass}\" style=\"display:none; max-height: 5000px; overflow: hidden;\"><div style=\"display:table; pointer-events: all; margin: 0 auto; margin-top: -2px; max-width: 60%; -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 2px;color: white;background:${colorF}; position: relative;\"><div style=\"max-height: 60vh; overflow-y: auto; padding: 14px 24px 14px 24px;\">${text}</div></div></div>`;\n    j.$('#flashinfo-div').addClass('hover');\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo('#flashinfo-div');\n    if (\n      typeof options !== 'undefined' &&\n      typeof options.minimized !== 'undefined' &&\n      options.minimized\n    )\n      flashmEl.css('max-height', '8px');\n  } else {\n    // eslint-disable-next-line jquery-unsafe-malsync/no-xss-jquery\n    flashmEl = j.$(j.html(mess)).appendTo(flashdiv);\n  }\n\n  if (\n    typeof options !== 'undefined' &&\n    typeof options.permanent !== 'undefined' &&\n    options.permanent\n  ) {\n    flashmEl.slideDown(800);\n  } else if (\n    typeof options !== 'undefined' &&\n    typeof options.hoverInfo !== 'undefined' &&\n    options.hoverInfo\n  ) {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .queue(function () {\n        j.$('#flashinfo-div').removeClass('hover');\n        flashmEl.css('max-height', '8px');\n      });\n  } else {\n    flashmEl\n      .slideDown(800)\n      .delay(4000)\n      .slideUp(800, () => {\n        // @ts-ignore\n        j.$(this).remove();\n      });\n  }\n  return flashmEl;\n}\n\nexport async function flashConfirm(\n  message,\n  type,\n  yesCall = () => {\n    /* Placeholder */\n  },\n  cancelCall = () => {\n    /* Placeholder */\n  },\n  yesNo = false,\n): Promise<boolean> {\n  return new Promise(function (resolve, reject) {\n    let yesText = api.storage.lang('Ok');\n    let noText = api.storage.lang('Cancel');\n    if (yesNo) {\n      yesText = api.storage.lang('Yes');\n      noText = api.storage.lang('No');\n    }\n    message = `<div style=\"text-align: center;\">${message}</div><div style=\"display: flex; justify-content: space-around;\"><button class=\"Yes\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${yesText}</button><button class=\"Cancel\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px; cursor:pointer;\">${noText}</button></div>`;\n    const flasmessage = flashm(message, {\n      permanent: true,\n      position: 'top',\n      type,\n    });\n    flasmessage.find('.Yes').click(function (evt) {\n      resolve(true);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      yesCall();\n    });\n    flasmessage.find('.Cancel').click(function (evt) {\n      resolve(false);\n      j.$(evt.target)\n        .parentsUntil('.flash')\n        .fadeOut(300, function () {\n          // @ts-ignore\n          j.$(this).remove();\n        });\n      cancelCall();\n    });\n  });\n}\n\nfunction initflashm() {\n  api.storage.addStyle(\n    `.flashinfo{\n                    transition: max-height 2s, opacity 2s 2s;\n                 }\n                 .mini-stealth .flashinfo{\n                    opacity: 0;\n                 }\n                  #flashinfo-div.hover.mini-stealth .flashinfo.type-update{\n                    opacity: 0.7;\n                 }\n                 #flashinfo-div.hover .flashinfo{\n                    opacity: 1;\n                 }\n                 .flashinfo:hover{\n                    max-height:5000px !important;\n                    z-index: 2147483647;\n                    opacity: 1;\n                    transition: max-height 2s;\n                 }\n                 .flashinfo .synopsis{\n                    transition: max-height 2s, max-width 2s ease 2s;\n                 }\n                 .flashinfo:hover .synopsis{\n                    max-height:9999px !important;\n                    max-width: 500px !important;\n                    transition: max-height 2s;\n                 }\n                 #flashinfo-div{\n                  z-index: 2;\n                  transition: 2s;\n                 }\n                 #flashinfo-div:hover, #flashinfo-div.hover{\n                  z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error {\n                   z-index: 2147483647;\n                 }\n                 #flashinfo-div.player-error .type-update{\n                  overflow: visible !important;\n                  opacity: 1 !important;\n                 }\n                 #flashinfo-div.player-error .player-error{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-missing-permissions{\n                  display: block !important\n                 }\n                 #flashinfo-div.player-error-missing-permissions .player-error-default{\n                  display: none !important\n                 }\n\n                 #flash-div-top, #flash-div-bottom, #flashinfo-div{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 400;\n                    line-height: 17px;\n                 }\n                 #flash-div-top h2, #flash-div-bottom h2, #flashinfo-div h2{\n                    font-family: \"Helvetica\",\"Arial\",sans-serif;\n                    color: white;\n                    font-size: 14px;\n                    font-weight: 700;\n                    line-height: 17px;\n                    padding: 0;\n                    margin: 0;\n                 }\n                 #flash-div-top a, #flash-div-bottom a, #flashinfo-div a{\n                    color: #DF6300;\n                 }`,\n  );\n\n  let extraClass = '';\n  if (api.settings.get('floatButtonStealth')) extraClass = 'mini-stealth';\n\n  j.$('body').after(\n    j.html(\n      `<div id=\"flash-div-top\" style=\"text-align: center;pointer-events: none;position: fixed;top:-5px;width:100%;z-index: 2147483647;left: 0;\"></div>\\\n        <div id=\"flash-div-bottom\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;z-index: 2147483647;left: 0;\"><div id=\"flash\" style=\"display:none;  background-color: red;padding: 20px; margin: 0 auto;max-width: 60%;          -webkit-border-radius: 20px;-moz-border-radius: 20px;border-radius: 20px;background:rgba(227,0,0,0.6);\"></div></div>\\\n        <div id=\"flashinfo-div\" class=\"${extraClass}\" style=\"text-align: center;pointer-events: none;position: fixed;bottom:0px;width:100%;left: 0;\">`,\n    ),\n  );\n}\n\nlet lazyloaded = false;\nlet lazyimages: any[] = [];\n\nexport function lazyload(doc, scrollElement = '.mdl-layout__content') {\n  /* lazyload.js (c) Lorenzo Giuliani\n   * MIT License (http://www.opensource.org/licenses/mit-license.html)\n   *\n   * expects a list of:\n   * `<img src=\"blank.gif\" data-src=\"my_image.png\" width=\"600\" height=\"400\" class=\"lazy\">`\n   */\n  // eslint-disable-next-line\n  function loadImage(el, fn) {\n    if (!j.$(el).is(':visible')) return false;\n    if (j.$(el).hasClass('lazyBack')) {\n      j.$(el)\n        .css('background-image', `url(${el.getAttribute('data-src')})`)\n        .removeClass('lazyBack');\n    } else {\n      const img = new Image();\n      const src = el.getAttribute('data-src');\n      img.onload = function () {\n        if (el.parent) el.parent.replaceChild(img, el);\n        else el.src = src;\n        // eslint-disable-next-line\n        fn ? fn() : null;\n      };\n      img.src = src;\n    }\n  }\n\n  for (let i = 0; i < lazyimages.length; i++) {\n    $(lazyimages[i]).addClass('init');\n  }\n\n  lazyimages = [];\n  const query = doc.find('img.lazy.init, .lazyBack.init');\n  const processScroll = function () {\n    for (let i = 0; i < lazyimages.length; i++) {\n      if (utils.elementInViewport(lazyimages[i], 600)) {\n        // eslint-disable-next-line\n        loadImage(lazyimages[i], function() {\n          lazyimages.splice(i, i);\n        });\n      }\n      if (!$(lazyimages[i]).length) {\n        lazyimages.splice(i, i);\n      }\n    }\n  };\n  // Array.prototype.slice.call is not callable under our lovely IE8\n  for (let i = 0; i < query.length; i++) {\n    lazyimages.push(query[i]);\n    $(query[i]).removeClass('init');\n  }\n\n  processScroll();\n\n  if (!lazyloaded) {\n    lazyloaded = true;\n    doc.find(scrollElement).scroll(function () {\n      processScroll();\n    });\n  }\n}\n\nexport function elementInViewport(el, horizontalOffset = 0) {\n  const rect = el.getBoundingClientRect();\n\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    // @ts-ignore\n    rect.top - horizontalOffset <= (window.innerHeight || document.documentElement.clientHeight)\n  );\n}\n\nexport function wait(ms: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport function pageUrl(\n  page: 'mal' | 'anilist' | 'kitsu' | 'simkl',\n  type: 'anime' | 'manga',\n  id: string | number,\n) {\n  switch (page) {\n    case 'mal':\n      return `https://myanimelist.net/${type}/${id}`;\n    case 'anilist':\n      return `https://anilist.co/${type}/${id}`;\n    case 'kitsu':\n      return `https://kitsu.io/${type}/${id}`;\n    case 'simkl':\n      return `https://simkl.com/${type}/${id}`;\n    default:\n      throw `${page} not a valid page`;\n  }\n}\n\nexport function returnYYYYMMDD(numFromToday = 0) {\n  const d = new Date();\n  d.setDate(d.getDate() + numFromToday);\n  const month = d.getMonth() < 9 ? `0${d.getMonth() + 1}` : d.getMonth() + 1;\n  const day = d.getDate() < 10 ? `0${d.getDate()}` : d.getDate();\n  return `${d.getFullYear()}-${month}-${day}`;\n}\n\nexport function htmlDecode(text) {\n  return $('<textarea/>').html(j.html(text)).text();\n}\n\nexport function isFirefox(): boolean {\n  return Boolean(typeof browser !== 'undefined' && typeof chrome !== 'undefined');\n}\n\nexport function waitForPageToBeVisible() {\n  const condition = () =>\n    Boolean(!document.visibilityState || document.visibilityState === 'visible');\n\n  if (condition()) return Promise.resolve();\n\n  con.log('Page in background');\n\n  const { asyncWaitUntilTrue: awaitUi } = getAsyncWaitUntilTrue(() => condition());\n\n  return awaitUi().then(() => {\n    con.log('Page is visible');\n  });\n}\n\nexport function makeDomainCompatible(domain: string) {\n  // Add '/' to end of origin if it doesn't exist\n  if (domain.split('/').length < 4) {\n    domain += '/';\n  }\n\n  // Remove all after ?\n  domain = domain.replace(/\\?.*/, '?');\n  return domain;\n}\n\nexport async function clearCache() {\n  const cacheArray = await api.storage.list();\n  let deleted = 0;\n\n  j.$.each(cacheArray, function (index, cache) {\n    if (!utils.syncRegex.test(String(index)) && !/(^tagSettings\\/.*)/.test(String(index))) {\n      api.storage.remove(String(index));\n      deleted++;\n    }\n  });\n\n  utils.flashm(`Cache Cleared [${deleted}]`);\n}\n\nexport function sortAlphabetically(a, b) {\n  if (a.toLowerCase() < b.toLowerCase()) return -1;\n  if (a.toLowerCase() > b.toLowerCase()) return 1;\n  return 0;\n}\n\nexport function isDomainMatching(url, domain) {\n  const urlObj = new URL(url);\n  const { host } = urlObj;\n  return host === domain || host.endsWith(`.${domain}`);\n}\n\nexport function upperCaseFirstLetter(string) {\n  if (!string || string.length < 2) return string;\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import * as DOMPurify from 'dompurify';\n\nexport const $ = jQuery;\n\nexport function html(htmlContent) {\n  return DOMPurify.sanitize(htmlContent, {\n    SAFE_FOR_JQUERY: true,\n    ALLOW_UNKNOWN_PROTOCOLS: true,\n    ADD_ATTR: ['target'],\n  });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable no-shadow */\n/* export enum type {\n  Anime = \"anime\",\n  Manga = \"manga\"\n} */\n\nimport { Component } from 'vue';\n\nexport type contentType = 'anime' | 'manga';\n\nexport enum status {\n  NoState = 0,\n  Watching = 1,\n  Completed = 2,\n  Onhold = 3,\n  Dropped = 4,\n  PlanToWatch = 6,\n  All = 7,\n  Rewatching = 23,\n}\n\nexport enum score {\n  NoScore = 0,\n  R1 = 1,\n  R2 = 2,\n  R3 = 3,\n  R4 = 4,\n  R5 = 5,\n  R6 = 6,\n  R7 = 7,\n  R8 = 8,\n  R9 = 9,\n  R10 = 10,\n}\n\n// score range 0 - 100\nexport type score100 = number;\n\nexport type searchResult = {\n  id: number;\n  name: string;\n  altNames: string[];\n  url: string;\n  malUrl: () => Promise<string | null>;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  media_type: string;\n  isNovel: boolean;\n  score: string;\n  year: string;\n  totalEp?: number;\n  list?: {\n    status: status;\n    score: score;\n    episode: number;\n  };\n};\n\nexport type searchInterface = (\n  keyword: string,\n  type: 'anime' | 'manga',\n  options?: {},\n  sync?: boolean,\n) => Promise<searchResult[]>;\n\nexport interface ConfObj {\n  key: string;\n  title: string | (() => string);\n  system?: 'userscript' | 'webextension';\n  component: Component;\n  condition?: () => boolean;\n  change?: () => void;\n  props?: { [key: string]: any };\n  children?: ConfObj[];\n}\n","let store: Pick<Storage, 'getItem' | 'setItem' | 'clear' | 'removeItem'>;\n\nif (checkLocalStorageIsAvailable()) {\n  store = localStorage;\n} else {\n  let storage = {};\n  store = {\n    getItem(key) {\n      return key in storage ? storage[key] : null;\n    },\n    setItem(key, value) {\n      storage[key] = value;\n    },\n    removeItem(key) {\n      if (key in storage) delete storage[key];\n    },\n    clear() {\n      storage = {};\n    },\n  };\n}\n\nexport const localStore = store;\n\nfunction checkLocalStorageIsAvailable() {\n  try {\n    localStorage.getItem('x');\n    return true;\n  } catch (e) {\n    con.info('Local storage is not available', e);\n    return false;\n  }\n}\n","import { localStore } from './localStore';\n\nexport class Cache {\n  constructor(\n    protected key: string,\n    protected ttl: number,\n    protected localStorage: boolean = true,\n    protected refetchTtl: number = 0,\n  ) {\n    return this;\n  }\n\n  protected containsValue(value) {\n    return typeof value !== 'undefined' && value !== null;\n  }\n\n  protected valueValid(value, ttl) {\n    if (!value || !value.timestamp) return false;\n    return new Date().getTime() < value.timestamp + ttl;\n  }\n\n  protected ttlValid(value) {\n    return this.valueValid(value, this.ttl);\n  }\n\n  protected refetchTtlValid(value) {\n    return this.valueValid(value, this.refetchTtl);\n  }\n\n  async hasValue() {\n    const value = await this.getStorage();\n    if (this.containsValue(value) && this.ttlValid(value)) {\n      return true;\n    }\n    return false;\n  }\n\n  async hasValueAndIsNotEmpty() {\n    const value = await this.getStorage();\n    if (\n      this.containsValue(value) &&\n      typeof value.data !== 'undefined' &&\n      value.data !== null &&\n      Object.keys(value.data).length &&\n      this.ttlValid(value)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  async fullState() {\n    const value = await this.getStorage();\n    const hasValue = this.containsValue(value) && this.refetchTtlValid(value);\n    const isValid = this.ttlValid(value);\n    return {\n      value,\n      hasValue,\n      isValid,\n      refetch: hasValue && !isValid,\n    };\n  }\n\n  async getValue() {\n    const value = await this.getStorage();\n    return value.data;\n  }\n\n  async setValue(result) {\n    const save = { data: result, timestamp: new Date().getTime() };\n    if (this.localStorage) {\n      return localStore.setItem(this.key, JSON.stringify(save));\n    }\n    return api.storage.set(this.key, save);\n  }\n\n  async clearValue() {\n    if (this.localStorage) {\n      return localStore.removeItem(this.key);\n    }\n    return api.storage.remove(this.key);\n  }\n\n  protected async getStorage() {\n    if (this.localStorage) {\n      return JSON.parse(localStore.getItem(this.key)!);\n    }\n    return api.storage.get(this.key);\n  }\n}\n","import { EventEmitter2 } from 'eventemitter2';\n\nconst scriptId = Math.floor(Math.random() * 1000000000);\n\nexport const emitter = new EventEmitter2({\n  wildcard: true,\n});\n\nexport function globalEmit(eventName: string, ...params) {\n  con\n    .m('Global')\n    .m('Emit')\n    .debug(eventName, ...params);\n\n  emitter.emit(`${eventName}`, ...params);\n\n  if (typeof api !== 'undefined' && api && api.type === 'webextension') {\n    chrome.runtime.sendMessage({\n      name: 'emitter',\n      item: { event: eventName, params, id: scriptId },\n    });\n  }\n}\n\nif (typeof api !== 'undefined' && api && api.type === 'webextension') {\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.name && message.name === 'emitter') {\n      con.m('Global').m('Event').debug(message.item.id, message.item.event, message.item.params);\n\n      if (message.item.id !== scriptId) {\n        emitter.emit(message.item.event, ...message.item.params);\n      }\n    }\n  });\n}\n","/* eslint-disable max-classes-per-file */\nexport class NotAutenticatedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotAutenticatedError';\n  }\n}\n\nexport class UrlNotSupportedError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UrlNotSupportedError';\n  }\n}\n\nexport class ServerOfflineError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'ServerOfflineError';\n  }\n}\n\nexport class NotFoundError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class UnexpectedResponseError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'UnexpectedResponseError';\n  }\n}\n\nexport function parseJson(json) {\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    throw new UnexpectedResponseError(e.message);\n  }\n}\n\nexport function errorMessage(error, authenticationUrl: string) {\n  if (error instanceof NotAutenticatedError) {\n    return api.storage.lang('Error_Authenticate', [authenticationUrl]);\n  }\n  if (error instanceof ServerOfflineError) {\n    return `Server Offline`;\n  }\n  if (error instanceof UrlNotSupportedError) {\n    return `Incorrect url provided [${error.message}]`;\n  }\n  if (error instanceof NotFoundError) {\n    return `Could not find this entry`;\n  }\n  return error.message;\n}\n","/* eslint-disable no-shadow */\nimport { status } from '../definitions';\nimport { clientId } from '../../utils/oauth';\nimport { NotAutenticatedError, NotFoundError, parseJson, ServerOfflineError } from '../Errors';\n\nexport const apiDomain = 'https://api.myanimelist.net/v2/';\n\nexport const authenticationUrl = 'https://malsync.moe/mal/oauth';\n\nexport async function apiCall(options: {\n  type: 'GET' | 'PUT' | 'DELETE' | 'POST';\n  path: string;\n  fields?: string[];\n  dataObj?: { [key: string]: string };\n}) {\n  let url = apiDomain + options.path;\n  if (options.fields && options.fields.length) {\n    url += url.includes('?') ? '&' : '?';\n    url += `fields=${options.fields.join(',')}`;\n  }\n  const headers: any = {\n    Authorization: `Bearer ${api.settings.get('malToken')}`,\n    'Content-Type': 'application/x-www-form-urlencoded',\n  };\n  let data = '';\n  if (options.dataObj) {\n    const formBody: string[] = [];\n    for (const property in options.dataObj) {\n      const encodedKey = encodeURIComponent(property);\n      const encodedValue = encodeURIComponent(options.dataObj[property]);\n      formBody.push(`${encodedKey}=${encodedValue}`);\n    }\n    data = formBody.join('&');\n  }\n  return api.request\n    .xhr(options.type, {\n      url,\n      headers,\n      data,\n    })\n    .then(async response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      let res;\n      try {\n        res = JSON.parse(response.responseText);\n      } catch (e) {\n        if (checkIfBanned(response.responseText)) {\n          throw new Error(\n            `Your IP has been banned on MAL, change your IP or wait for it to get unbanned`,\n          );\n        }\n        throw e;\n      }\n\n      if (res && res.error) {\n        switch (res.error) {\n          case 'forbidden':\n          case 'invalid_token':\n            if (await refreshToken(this.logger)) {\n              return this.apiCall(options);\n            }\n            throw new NotAutenticatedError(res.message ?? res.error);\n          case 'not_found':\n            throw new NotFoundError(res.message ?? res.error);\n          case 'invalid_content':\n            throw new Error(\n              `This Entry is currently pending approval. It cant be saved to mal for now`,\n            );\n          default:\n            throw new Error(res.message ?? res.error);\n        }\n      }\n\n      switch (response.status) {\n        case 400:\n          throw new Error('Invalid Parameters');\n        case 403:\n        default:\n      }\n\n      return res;\n    });\n}\n\nasync function refreshToken(logger) {\n  const l = logger.m('Refresh');\n  l.log('Refresh Access Token');\n  const rToken = api.settings.get('malRefresh');\n  if (!rToken) return false;\n  return api.request\n    .xhr('POST', {\n      url: 'https://myanimelist.net/v1/oauth2/token',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      data: `client_id=${clientId}&grant_type=refresh_token&refresh_token=${rToken}`,\n    })\n    .then(res => {\n      try {\n        return parseJson(res.responseText);\n      } catch (e) {\n        if (checkIfBanned(res.responseText)) {\n          throw new Error(\n            `Your IP has been banned on MAL, change your IP or wait for it to get unbanned`,\n          );\n        }\n        throw e;\n      }\n    })\n    .then(json => {\n      if (json && json.refresh_token && json.access_token) {\n        api.settings.set('malToken', json.access_token);\n        api.settings.set('malRefresh', json.refresh_token);\n        return true;\n      }\n      if (json && json.error) {\n        l.error(json.error, '|', json.message);\n        api.settings.set('malRefresh', '');\n        return false;\n      }\n      l.error('Something went wrong');\n      return false;\n    });\n}\n\nfunction checkIfBanned(text: string) {\n  return Boolean(text.includes('Request blocked') || text.includes('your IP has been banned'));\n}\n\nexport enum animeStatus {\n  'watching' = status.Watching,\n  'completed' = status.Completed,\n  'on_hold' = status.Onhold,\n  'dropped' = status.Dropped,\n  'plan_to_watch' = status.PlanToWatch,\n}\n\nexport enum mangaStatus {\n  'reading' = status.Watching,\n  'completed' = status.Completed,\n  'on_hold' = status.Onhold,\n  'dropped' = status.Dropped,\n  'plan_to_read' = status.PlanToWatch,\n}\n","import { Cache } from '../utils/Cache';\nimport { Progress } from '../utils/progress';\nimport { emitter } from '../utils/emitter';\nimport { errorMessage as _errorMessage } from './Errors';\n\nObject.seal(emitter);\n\nexport interface listElement {\n  uid: number;\n  malId: number;\n  apiCacheKey: number | string;\n  cacheKey: any;\n  type: 'anime' | 'manga';\n  title: string;\n  url: string;\n  watchedEp: number;\n  totalEp: number;\n  status: number;\n  score: number;\n  image: string;\n  imageLarge: string;\n  imageBanner?: string;\n  tags: string;\n  airingState: number;\n  fn: {\n    continueUrl: () => string;\n    initProgress: () => void;\n    progress: false | Progress;\n  };\n  options?: {\n    u: string;\n    r: any;\n    c: any;\n    p: any;\n  };\n}\n\nexport abstract class ListAbstract {\n  protected done = false;\n\n  protected loading = false;\n\n  protected firstLoaded = false;\n\n  protected abstract authenticationUrl: string;\n\n  abstract readonly name;\n\n  protected logger;\n\n  public seperateRewatching = false;\n\n  // Modes\n  modes = {\n    frontend: false,\n    sortAiring: false,\n    initProgress: false,\n    cached: false,\n  };\n\n  protected username = '';\n\n  protected offset = 0;\n\n  protected templist: listElement[] = [];\n\n  constructor(\n    protected status: number = 1,\n    protected listType: 'anime' | 'manga' = 'anime',\n    protected sort: string = 'default',\n  ) {\n    this.status = Number(this.status);\n    this.logger = con.m('[S]', '#348fff');\n    return this;\n  }\n\n  public api = api;\n\n  public setTemplist(list) {\n    this.templist = list;\n    return this;\n  }\n\n  public getTemplist() {\n    return this.templist;\n  }\n\n  public setSort(sort) {\n    if (this.firstLoaded || this.loading) throw 'To late to change sort';\n    this.sort = sort;\n  }\n\n  isDone() {\n    return this.done;\n  }\n\n  isLoading() {\n    return this.loading;\n  }\n\n  isFirstLoaded() {\n    return this.firstLoaded;\n  }\n\n  async getCompleteList(): Promise<listElement[]> {\n    do {\n      // eslint-disable-next-line no-await-in-loop\n      await this.getNext();\n    } while (!this.done);\n\n    if (this.modes.sortAiring) await this.sortAiringList();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 18));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  async getNextPage(): Promise<listElement[]> {\n    if (this.done) return this.templist;\n\n    if (\n      this.modes.frontend &&\n      this.status === 1 &&\n      (this.sort === 'default' || this.sort === 'unread')\n    ) {\n      this.modes.sortAiring = true;\n      return this.getCompleteList();\n    }\n\n    await this.getNext();\n\n    if (this.modes.cached) this.getCache().setValue(this.templist.slice(0, 24));\n\n    this.firstLoaded = true;\n\n    return this.templist;\n  }\n\n  private async getNext() {\n    this.loading = true;\n    const retList = await this.getPart();\n    this.templist = this.templist.concat(retList);\n    this.loading = false;\n  }\n\n  async getCached(): Promise<listElement[]> {\n    if (await this.getCache().hasValue()) {\n      const cachelist = await this.getCache().getValue();\n      cachelist.forEach(item => {\n        item = this.fn(item);\n        item.watchedEp = '';\n        item.score = '';\n      });\n      return cachelist;\n    }\n    return [];\n  }\n\n  protected updateListener;\n\n  public initFrontendMode() {\n    this.modes.frontend = true;\n    this.updateListener = emitter.on(\n      'update.*',\n      data => {\n        con.log('update', data);\n        if (data.cacheKey) {\n          const item = this.templist.find(el => el.cacheKey === data.cacheKey);\n          con.log(item);\n          if (item && data.state) {\n            item.watchedEp = data.state.episode;\n            item.score = data.state.score;\n            item.status = data.state.status;\n          }\n        }\n      },\n      { objectify: true },\n    );\n  }\n\n  public destroy() {\n    if (this.updateListener) {\n      this.updateListener.off();\n    }\n  }\n\n  public getUsername() {\n    return this.getUserObject().then(user => user.username);\n  }\n\n  abstract getUserObject(): Promise<{ username: string; picture: string; href: string }>;\n\n  abstract _getSortingOptions(): { icon: string; title: string; value: string; asc?: boolean }[];\n\n  getSortingOptions(\n    simple = false,\n  ): { icon: string; title: string; value: string; asc?: boolean }[] {\n    const res = [\n      {\n        icon: 'filter_list',\n        title: api.storage.lang('settings_progress_default'),\n        value: 'default',\n      },\n    ];\n\n    if (this.status === 1 && this.listType === 'manga') {\n      res.push({\n        icon: 'adjust',\n        title: api.storage.lang('list_sorting_unread'),\n        value: 'unread',\n      });\n    }\n\n    const options = this._getSortingOptions();\n    options.forEach(el => {\n      if (!simple) {\n        if (el.asc) {\n          const asc = { ...el };\n          delete asc.asc;\n          asc.value += '_asc';\n          asc.title += ' Ascending';\n          res.push(asc);\n        }\n        delete el.asc;\n      }\n      res.push(el);\n    });\n    return res;\n  }\n\n  abstract getPart(): Promise<listElement[]>;\n\n  flashmError(error) {\n    utils.flashm(this.errorMessage(error), { error: true, type: 'error' });\n  }\n\n  errorMessage(error) {\n    return _errorMessage(error, this.authenticationUrl);\n  }\n\n  // itemFunctions;\n  async fn(item, streamurl = '') {\n    let continueUrlTemp: any = null;\n    item.fn = {\n      continueUrl: () => {\n        if (continueUrlTemp !== null) return continueUrlTemp;\n        return utils.getContinueWaching(item.type, item.cacheKey).then(obj => {\n          const curEp = parseInt(item.watchedEp.toString());\n\n          if (obj === undefined || obj.ep !== curEp + 1) return '';\n\n          continueUrlTemp = obj.url;\n\n          return continueUrlTemp;\n        });\n      },\n      initProgress: () => {\n        return new Progress(item.cacheKey, item.type).init().then(progress => {\n          item.fn.progress = progress;\n        });\n      },\n      progress: false,\n    };\n    item.options = await utils.getEntrySettings(item.type, item.cacheKey, item.tags);\n    if (streamurl) item.options.u = streamurl;\n    if (this.modes.sortAiring || this.modes.initProgress) await item.fn.initProgress();\n\n    return item;\n  }\n\n  // Modes\n  async initProgress() {\n    const listP: any = [];\n    this.templist.forEach(item => {\n      listP.push(item.fn.initProgress());\n    });\n\n    await Promise.all(listP);\n  }\n\n  async sortAiringList() {\n    if (this.sort === 'unread') {\n      this.sortUnread();\n      return;\n    }\n\n    const normalItems: listElement[] = [];\n    let preItems: listElement[] = [];\n    let watchedItems: listElement[] = [];\n    this.templist.forEach(item => {\n      const prediction = item.fn.progress;\n      if (this.listType === 'anime') {\n        if (prediction && prediction.isAiring() && prediction.getPredictionTimestamp()) {\n          if (item.watchedEp < prediction.getCurrentEpisode()) {\n            preItems.push(item);\n          } else {\n            watchedItems.push(item);\n          }\n        } else {\n          normalItems.push(item);\n        }\n      } else if (\n        // Manga only if less than 5 chapters to read\n        prediction &&\n        prediction.isAiring() &&\n        prediction.getCurrentEpisode() &&\n        item.watchedEp &&\n        item.watchedEp < prediction.getCurrentEpisode() &&\n        item.watchedEp + 6 > prediction.getCurrentEpisode()\n      ) {\n        preItems.push(item);\n      } else {\n        normalItems.push(item);\n      }\n    });\n\n    preItems = preItems.sort(sortItems).reverse();\n    watchedItems = watchedItems.sort(sortItems);\n\n    this.templist = preItems.concat(watchedItems, normalItems);\n\n    function sortItems(a, b) {\n      let valA = a.fn.progress.getPredictionTimestamp();\n      let valB = b.fn.progress.getPredictionTimestamp();\n\n      if (!valA) valA = 999999999999;\n      if (!valB) valB = valA;\n\n      return valA - valB;\n    }\n  }\n\n  sortUnread() {\n    this.templist = this.templist.sort(function (a, b) {\n      let valA = 10000;\n      let valB = 10000;\n\n      if (a.fn.progress && a.fn.progress.getCurrentEpisode()) {\n        const tempA = a.fn.progress.getCurrentEpisode() - a.watchedEp;\n        if (tempA > 0) valA = tempA;\n      }\n      if (b.fn.progress && b.fn.progress.getCurrentEpisode()) {\n        const tempB = b.fn.progress.getCurrentEpisode() - b.watchedEp;\n        if (tempB > 0) valB = tempB;\n      }\n\n      return valA - valB;\n    });\n  }\n\n  cacheObj: any = undefined;\n\n  getCache() {\n    if (this.cacheObj) return this.cacheObj;\n    this.cacheObj = new Cache(\n      `list/${this.name}/${this.listType}/${this.status}/${this.sort}`,\n      48 * 60 * 60 * 1000,\n    );\n    return this.cacheObj;\n  }\n}\n","/* eslint-disable no-shadow */\nimport { status } from '../definitions';\nimport { NotAutenticatedError, NotFoundError, parseJson, ServerOfflineError } from '../Errors';\n\nconst logger = con.m('anilist', '#3db4f2');\n\nexport function translateList(aniStatus, malStatus: null | number = null) {\n  const list = {\n    CURRENT: 1,\n    PLANNING: 6,\n    COMPLETED: 2,\n    DROPPED: 4,\n    PAUSED: 3,\n    REPEATING: 1,\n  };\n  if (malStatus !== null) {\n    return Object.keys(list).find(key => list[key] === malStatus);\n  }\n  return list[aniStatus];\n}\n\nexport enum statusTranslate {\n  'CURRENT' = status.Watching,\n  'PLANNING' = status.PlanToWatch,\n  'COMPLETED' = status.Completed,\n  'DROPPED' = status.Dropped,\n  'PAUSED' = status.Onhold,\n  'REPEATING' = status.Rewatching,\n}\n\nexport function aniListToMal(anilistId: number, type: 'anime' | 'manga') {\n  const query = `\n  query ($id: Int, $type: MediaType) {\n    Media (id: $id, type: $type) {\n      id\n      idMal\n    }\n  }\n  `;\n\n  const variables = {\n    id: anilistId,\n    type: type.toUpperCase(),\n  };\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      const res = parseJson(response.responseText);\n      con.log(res);\n      return res.data.Media.idMal;\n    });\n}\n\nexport function malToAnilist(malId: number, type: 'anime' | 'manga') {\n  const query = `\n  query ($id: Int, $type: MediaType) {\n    Media (idMal: $id, type: $type) {\n      id\n      idMal\n    }\n  }\n  `;\n\n  const variables = {\n    id: malId,\n    type: type.toUpperCase(),\n  };\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      if (response.status === 404) return NaN;\n      const res = parseJson(response.responseText);\n      con.log(res);\n      return res.data.Media.id;\n    });\n}\n\nexport function getCacheKey(id, kitsuId) {\n  if (Number.isNaN(id) || !id) {\n    return `anilist:${kitsuId}`;\n  }\n  return id;\n}\n\nexport async function apiCall(query, variables, requiresAuthentication = true) {\n  if (requiresAuthentication && !api.settings.get('anilistToken')) {\n    throw new NotAutenticatedError('No token found');\n  }\n\n  const headers: any = {\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n  };\n\n  if (api.settings.get('anilistToken'))\n    headers.Authorization = `Bearer ${api.settings.get('anilistToken')}`;\n\n  return api.request\n    .xhr('POST', {\n      url: 'https://graphql.anilist.co',\n      headers,\n      data: JSON.stringify({\n        query,\n        variables,\n      }),\n    })\n    .then(response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n      if (response.status === 403) {\n        throw new Error(\n          `Your IP has been banned on ANILIST, change your IP or wait for it to get unbanned`,\n        );\n      }\n\n      const res = parseJson(response.responseText);\n\n      if (typeof res.errors !== 'undefined' && res.errors.length) {\n        logger.error('[SINGLE]', 'Error', res.errors);\n        const error = res.errors[0];\n        switch (error.status) {\n          case 400:\n            if (error.message === 'Invalid token' && !requiresAuthentication) {\n              api.settings.set('anilistToken', null);\n              return apiCall(query, variables, requiresAuthentication);\n            }\n            if (error.message === 'validation') throw new Error('Wrong request format');\n            if (error.message.includes('invalid')) throw new Error('Wrong request format');\n            throw new NotAutenticatedError(error.message);\n          case 404:\n            throw new NotFoundError(error.message);\n          default:\n            throw new Error(error.message);\n        }\n      }\n\n      return res;\n    });\n}\n\nexport function imgCheck(url: string) {\n  if (!url || url.endsWith('/default.jpg')) return '';\n  return url;\n}\n","import { NotAutenticatedError, NotFoundError, parseJson, ServerOfflineError } from '../Errors';\n\nconst logger = con.m('kitsu', '#d65e43');\n\nexport function translateList(aniStatus, malStatus: null | number = null) {\n  const list = {\n    current: 1,\n    planned: 6,\n    completed: 2,\n    dropped: 4,\n    on_hold: 3,\n  };\n  if (malStatus !== null) {\n    return Object.keys(list).find(key => list[key] === malStatus);\n  }\n  return list[aniStatus];\n}\n\nexport function getTitle(titles, canonicalTitle) {\n  let title: string;\n  switch (api.settings.get('kitsuOptions').titleLanguagePreference) {\n    case 'english':\n      title = titles.en;\n      break;\n    case 'romanized':\n      title = titles.en_jp;\n      break;\n    case 'canonical':\n    default:\n      title = canonicalTitle;\n  }\n\n  if (typeof title === 'undefined' || !title) title = titles.en;\n  if (typeof title === 'undefined' || !title) title = titles.en_jp;\n  if (typeof title === 'undefined' || !title) title = titles.ja_jp;\n  if (typeof title === 'undefined' || !title) {\n    const keys = Object.keys(titles);\n    if (!keys.length) {\n      return 'No Title';\n    }\n    title = titles[keys[0]];\n  }\n\n  return title;\n}\n\nexport function getCacheKey(id, kitsuId) {\n  if (Number.isNaN(id) || !id) {\n    return `kitsu:${kitsuId}`;\n  }\n  return id;\n}\n\nexport function malToKitsu(malid: number, type: 'anime' | 'manga') {\n  return apiCall(\n    'GET',\n    `https://kitsu.io/api/edge/mappings?filter[externalSite]=myanimelist/${type}&filter[externalId]=${malid}&include=item&fields[item]=id`,\n    {},\n    false,\n  );\n}\n\nexport function kitsuToMal(kitsuId: number, type: 'anime' | 'manga') {\n  return api.request\n    .xhr('GET', {\n      url: `https://kitsu.io/api/edge/${type}/${kitsuId}/mappings?filter[externalSite]=myanimelist/${type}`,\n      headers: {\n        'Content-Type': 'application/vnd.api+json',\n        Accept: 'application/vnd.api+json',\n      },\n    })\n    .then(response => {\n      const res = JSON.parse(response.responseText);\n      con.log('[KtoM]', res);\n      if (typeof res.data === 'undefined' || !res.data.length) return null;\n      return Number(res.data[0].attributes.externalId);\n    });\n}\n\nexport function apiCall(mode, url, variables = {}, authentication = true) {\n  const headers: any = {\n    'Content-Type': 'application/vnd.api+json',\n    Accept: 'application/vnd.api+json',\n  };\n  if (authentication) headers.Authorization = `Bearer ${api.settings.get('kitsuToken')}`;\n  return api.request\n    .xhr(mode, {\n      url,\n      headers,\n      data: JSON.stringify(variables),\n    })\n    .then(response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      if (response.status === 204) {\n        return {};\n      }\n\n      const res = parseJson(response.responseText);\n\n      if (typeof res.errors !== 'undefined' && res.errors.length) {\n        logger.error('[SINGLE]', 'Error', res.errors);\n        const error = res.errors[0];\n        switch (parseInt(error.status)) {\n          case 401:\n          case 403:\n            throw new NotAutenticatedError(error.detail);\n          case 404:\n            throw new NotFoundError(error.detail);\n          default:\n            throw new Error(error.detail);\n        }\n      }\n\n      return res;\n    });\n}\n","import { NotAutenticatedError, NotFoundError, ServerOfflineError } from '../Errors';\nimport { status } from '../definitions';\nimport { Cache } from '../../utils/Cache';\n\nconst clientId = 'z3NJ84kK9iy5NU6SnhdCDB38rr4-jFIJ67bMIUDzdoo';\n\nexport const authUrl = `https://shikimori.one/oauth/authorize?client_id=${clientId}&redirect_uri=https%3A%2F%2Fmalsync.moe%2Fshikimori%2Foauth&response_type=code&scope=user_rates`;\n\nconst apiDomain = 'https://shikimori.one/api/';\n\nexport const domain = 'https://shikimori.one';\n\nexport async function apiCall(options: {\n  type: 'GET' | 'PUT' | 'DELETE' | 'POST';\n  path: string;\n  parameter?: { [key: string]: string | number };\n  dataObj?: { [key: string]: any };\n  auth?: boolean;\n}) {\n  const type = options.type || 'GET';\n  const token = api.settings.get('shikiToken');\n\n  if (!token && !token.access_token && !options.auth) {\n    throw new NotAutenticatedError('No token set');\n  }\n\n  let url = apiDomain + options.path;\n  if (options.parameter && Object.keys(options.parameter).length) {\n    url += url.includes('?') ? '&' : '?';\n    const params = [] as string[];\n    for (const key in options.parameter) {\n      params.push(`${key}=${options.parameter[key]}`);\n    }\n    url += params.join('&');\n  }\n\n  const headers: any = {\n    Authorization: `Bearer ${token.access_token}`,\n    'User-Agent': 'MAL-Sync',\n    'Content-Type': 'application/json',\n  };\n\n  let data = '';\n  if (options.dataObj) {\n    data = JSON.stringify(options.dataObj);\n  }\n\n  if (options.auth) {\n    delete headers.Authorization;\n    url = 'https://shikimori.one/oauth/token';\n  }\n\n  return api.request\n    .xhr(type, {\n      url,\n      headers,\n      data,\n    })\n    .then(async response => {\n      if ((response.status > 499 && response.status < 600) || response.status === 0) {\n        throw new ServerOfflineError(`Server Offline status: ${response.status}`);\n      }\n\n      let res: any = null;\n      if (response.responseText) {\n        res = JSON.parse(response.responseText);\n      }\n\n      if (res && res.error) {\n        switch (res.error) {\n          case 'forbidden':\n          case 'invalid_token':\n            if (options.auth) throw new NotAutenticatedError(res.message ?? res.error);\n            await refreshToken(token.refresh_token);\n            return apiCall(options);\n          case 'not_found':\n            throw new NotFoundError(res.message ?? res.error);\n          default:\n            throw new Error(res.message ?? res.error);\n        }\n      }\n\n      switch (response.status) {\n        case 400:\n          throw new Error('Invalid Parameters');\n        case 403:\n        default:\n      }\n\n      return res;\n    });\n}\n\nexport function authRequest(data: { code: string } | { refresh_token: string }) {\n  const dataObj: any = {\n    client_id: clientId,\n    client_secret: '6vkFaJN_wxQHmBoq23ac1z6tZKiAD7xqsXGudkkOqTg',\n    redirect_uri: 'https://malsync.moe/shikimori/oauth',\n  };\n\n  if ('code' in data) {\n    dataObj.code = data.code;\n    dataObj.grant_type = 'authorization_code';\n  }\n\n  if ('refresh_token' in data) {\n    dataObj.refresh_token = data.refresh_token;\n    dataObj.grant_type = 'refresh_token';\n  }\n\n  return apiCall({\n    type: 'POST',\n    path: 'oauth/token',\n    auth: true,\n    dataObj,\n  });\n}\n\nasync function refreshToken(refresh_token: string) {\n  const res = authRequest({ refresh_token });\n  await api.settings.set('shikiToken', {\n    access_token: res.access_token,\n    refresh_token: res.refresh_token,\n  });\n}\n\nexport function userRequest(): Promise<userRequest> {\n  return apiCall({\n    type: 'GET',\n    path: 'users/whoami',\n  }).then(res => {\n    if (res.locale) {\n      api.settings.set('shikiOptions', {\n        locale: res.locale,\n      });\n    }\n    return res;\n  });\n}\n\nexport async function userId() {\n  const cacheObj = new Cache(`shiki/userId`, 4 * 60 * 60 * 1000);\n\n  if (await cacheObj.hasValue()) {\n    return cacheObj.getValue();\n  }\n\n  const res = await userRequest();\n  if (res.id) {\n    cacheObj.setValue(res.id);\n  }\n  return res.id;\n}\n\nexport function title(rus: string, eng: string, headline = false) {\n  const options = api.settings.get('shikiOptions');\n  const locale = options && options.locale ? options.locale : 'ru';\n  if (locale === 'ru') return rus || eng;\n  if (headline && eng && rus) return `${eng} / ${rus}`;\n  return eng || rus;\n}\n\nexport type StatusType =\n  | 'planned'\n  | 'watching'\n  | 'rewatching'\n  | 'completed'\n  | 'on_hold'\n  | 'dropped';\n\n// eslint-disable-next-line no-shadow\nexport enum statusTranslate {\n  'watching' = status.Watching,\n  'planned' = status.PlanToWatch,\n  'completed' = status.Completed,\n  'dropped' = status.Dropped,\n  'on_hold' = status.Onhold,\n  'rewatching' = status.Rewatching,\n}\n\nexport interface StatusRequest {\n  id?: number;\n  user_id: number;\n  target_id: number;\n  target_type: 'Anime' | 'Manga';\n  score: number;\n  status: StatusType;\n  rewatches: number;\n  episodes: number;\n  volumes: number;\n  chapters: number;\n  text: string;\n  text_html?: string;\n  created_at?: Date;\n  updated_at?: Date;\n}\n\nexport interface Image {\n  original: string;\n  preview: string;\n  x96: string;\n  x48: string;\n}\n\nexport interface MetaRequest {\n  id: number;\n  name: string;\n  russian: string;\n  image: Image;\n  url: string;\n  kind: string;\n  score: string;\n  status: string;\n  volumes: number;\n  chapters: number;\n  episodes: number;\n  aired_on: string;\n  released_on: string;\n}\n\nexport interface userRequest {\n  id: number;\n  nickname: string;\n  avatar: string;\n  image: {\n    x80: string;\n  };\n  url: string;\n  locale: string;\n}\n","import { NotAutenticatedError } from '../Errors';\nimport { ListAbstract, listElement } from '../listAbstract';\nimport * as helper from './helper';\n\nexport class UserList extends ListAbstract {\n  name = 'Kitsu';\n\n  authenticationUrl = 'https://kitsu.io/404?mal-sync=authentication';\n\n  async getUserObject() {\n    const user = await this.userRequest();\n\n    const opt = api.settings.get('kitsuOptions');\n    opt.titleLanguagePreference = user.attributes.titleLanguagePreference;\n    opt.sfwFilter = user.attributes.sfwFilter;\n    opt.ratingSystem = user.attributes.ratingSystem;\n    api.settings.set('kitsuOptions', opt);\n\n    return {\n      username: user.attributes.name,\n      picture: user.attributes.avatar?.large || '',\n      href: `https://kitsu.io/users/${user.attributes.slug}`,\n    };\n    return user.attributes.name;\n  }\n\n  async getUserId() {\n    const userId = await api.storage.get('kitsuUserId');\n    if (typeof userId !== 'undefined' && userId) {\n      return userId;\n    }\n    const user = await this.userRequest();\n    api.storage.set('kitsuUserId', user.id);\n    return user.id;\n  }\n\n  private userRequest() {\n    return helper.apiCall('GET', 'https://kitsu.io/api/edge/users?filter[self]=true').then(res => {\n      con.log(res);\n      if (typeof res.data[0] === 'undefined') {\n        throw new NotAutenticatedError('Not Authenticated');\n      }\n      return res.data[0];\n    });\n  }\n\n  deauth() {\n    return api.settings.set('kitsuToken', '').then(() => api.storage.set('kitsuUserId', ''));\n  }\n\n  accessToken() {\n    return api.settings.get('kitsuToken');\n  }\n\n  _getSortingOptions() {\n    return [\n      {\n        icon: 'sort_by_alpha',\n        title: api.storage.lang('list_sorting_alpha'),\n        value: 'alpha',\n        asc: true,\n      },\n      {\n        icon: 'history',\n        title: api.storage.lang('list_sorting_history'),\n        value: 'updated',\n        asc: true,\n      },\n      {\n        icon: 'score',\n        title: api.storage.lang('list_sorting_score'),\n        value: 'score',\n        asc: true,\n      },\n    ];\n  }\n\n  getOrder(sort) {\n    let pre = '';\n\n    if (!sort.endsWith('_asc')) pre = '-';\n\n    const sortString = sort.replace('_asc', '');\n    switch (sortString) {\n      case 'alpha':\n        pre = pre ? '' : '-';\n        return `${pre}${this.listType}.titles.en`;\n      case 'updated':\n        return `${pre}progressed_at`;\n      case 'score':\n        return `${pre}rating`;\n      default:\n        if (this.status === 1) return this.getOrder('updated');\n        if (this.status === 6) return this.getOrder('updated');\n        return this.getOrder('alpha');\n    }\n  }\n\n  async getPart() {\n    const userid = await this.getUserId();\n\n    let statusPart = '';\n    let sorting = '';\n\n    const order = this.getOrder(this.sort);\n    if (order) {\n      sorting = `&sort=${order}`;\n    }\n\n    if (this.status !== 7) {\n      const statusTemp = helper.translateList(this.status, this.status);\n      statusPart = `&filter[status]=${statusTemp}`;\n    }\n\n    con.log(\n      '[UserList][Kitsu]',\n      `user: ${userid}`,\n      `status: ${this.status}`,\n      `offset: ${this.offset}`,\n    );\n\n    return helper\n      .apiCall(\n        'GET',\n        `https://kitsu.io/api/edge/library-entries?filter[user_id]=${userid}${statusPart}&filter[kind]=${\n          this.listType\n        }&page[offset]=${this.offset}&page[limit]=50${sorting}&include=${this.listType},${\n          this.listType\n        }.mappings,${this.listType}.mappings.item&fields[${\n          this.listType\n        }]=slug,titles,canonicalTitle,averageRating,posterImage,coverImage,${\n          this.listType === 'anime' ? 'episodeCount' : 'chapterCount,volumeCount'\n        }`,\n      )\n      .then(res => {\n        con.log(res);\n\n        this.offset += 50;\n\n        if (!(res.meta.count > this.offset)) {\n          this.done = true;\n        }\n\n        return this.prepareData(res, this.listType);\n      });\n  }\n\n  private async prepareData(data, listType): Promise<listElement[]> {\n    const newData = [] as listElement[];\n    for (let i = 0; i < data.data.length; i++) {\n      const list = data.data[i];\n      const el = data.included[i];\n\n      const name = helper.getTitle(el.attributes.titles, el.attributes.canonicalTitle);\n\n      let malId = NaN;\n      for (let k = 0; k < data.included.length; k++) {\n        const mapping = data.included[k];\n        if (mapping.type === 'mappings') {\n          if (mapping.attributes.externalSite === `myanimelist/${listType}`) {\n            if (mapping.relationships.item.data.id === el.id) {\n              malId = Number(mapping.attributes.externalId);\n              data.included.splice(k, 1);\n              break;\n            }\n          }\n        }\n      }\n      let tempData;\n      if (listType === 'anime') {\n        tempData = await this.fn({\n          malId,\n          apiCacheKey: malId,\n          uid: Number(el.id),\n          cacheKey: helper.getCacheKey(malId, el.id),\n          kitsuSlug: el.attributes.slug,\n          type: listType,\n          title: name,\n          url: `https://kitsu.io/${listType}/${el.attributes.slug}`,\n          watchedEp: list.attributes.progress,\n          totalEp: el.attributes.episodeCount,\n          status: helper.translateList(list.attributes.status),\n          score: Math.round(list.attributes.ratingTwenty / 2),\n          image:\n            el.attributes.posterImage && el.attributes.posterImage.small\n              ? el.attributes.posterImage.small\n              : '',\n          imageLarge:\n            el.attributes.posterImage && el.attributes.posterImage.original\n              ? el.attributes.posterImage.original\n              : '',\n          imageBanner:\n            el.attributes.coverImage && el.attributes.coverImage.large\n              ? el.attributes.coverImage.large\n              : '',\n          tags: list.attributes.notes,\n          airingState: el.anime_airing_status,\n        });\n      } else {\n        tempData = await this.fn({\n          malId,\n          apiCacheKey: malId,\n          uid: Number(el.id),\n          cacheKey: helper.getCacheKey(malId, el.id),\n          kitsuSlug: el.attributes.slug,\n          type: listType,\n          title: name,\n          url: `https://kitsu.io/${listType}/${el.attributes.slug}`,\n          watchedEp: list.attributes.progress,\n          totalEp: el.attributes.chapterCount,\n          status: helper.translateList(list.attributes.status),\n          score: Math.round(list.attributes.ratingTwenty / 2),\n          image:\n            el.attributes.posterImage && el.attributes.posterImage.small\n              ? el.attributes.posterImage.small\n              : '',\n          imageLarge:\n            el.attributes.posterImage && el.attributes.posterImage.original\n              ? el.attributes.posterImage.original\n              : '',\n          imageBanner:\n            el.attributes.coverImage && el.attributes.coverImage.large\n              ? el.attributes.coverImage.large\n              : '',\n          tags: list.attributes.notes,\n          airingState: el.anime_airing_status,\n        });\n      }\n\n      if (tempData.totalEp === null) {\n        tempData.totalEp = 0;\n      }\n\n      newData.push(tempData);\n    }\n    return newData;\n  }\n}\n","import { Cache } from '../utils/Cache';\nimport { getList } from '../_provider/listFactory';\nimport { listElement } from '../_provider/listAbstract';\nimport { xhrResponseI } from '../api/messageInterface';\n\nexport interface releaseItemInterface {\n  timestamp: number;\n  value: any;\n  finished: boolean;\n  mode: string;\n}\n\nexport function initProgressScheduler() {\n  chrome.alarms.get('progressSync', async a => {\n    const progressInterval = parseInt(await api.settings.getAsync('progressInterval'));\n    const progressSyncLast = await api.storage.get('progressSyncLast');\n    if (!progressInterval) {\n      con.log('progressSync disabled', progressInterval);\n      if (a) chrome.alarms.clear('progressSync');\n      return;\n    }\n\n    if (typeof a !== 'undefined' && Date.now() - progressSyncLast < progressInterval * 60 * 1000) {\n      con.log('progressSync already set and on time', progressSyncLast, a);\n      return;\n    }\n\n    if (a) chrome.alarms.clear('progressSync');\n\n    con.log('Create progressSync Alarm', progressInterval, progressSyncLast);\n    chrome.alarms.create('progressSync', {\n      periodInMinutes: progressInterval,\n      when: Date.now() + 1000,\n    });\n  });\n\n  chrome.alarms.onAlarm.addListener(alarm => {\n    if (alarm.name === 'progressSync') {\n      api.storage.set('progressSyncLast', Date.now());\n      api.settings.init().then(async () => {\n        console.groupCollapsed('Progress');\n        await main();\n        console.groupEnd();\n      });\n    }\n  });\n}\n\nexport async function initUserProgressScheduler() {\n  setTimeout(async () => {\n    const progressInterval = await api.settings.getAsync('progressInterval');\n    const progressSyncLast = await api.storage.get('progressSyncLast');\n    if (Date.now() - progressSyncLast < progressInterval * 60 * 1000) {\n      con.log('Progress on time');\n      return;\n    }\n    if (await main()) {\n      api.storage.set('progressSyncLast', Date.now());\n    }\n  }, 30 * 1000);\n}\n\nexport async function main() {\n  try {\n    setBadgeText('');\n    await api.settings.init();\n    if (!api.settings.get('epPredictions')) {\n      throw 'epPredictions disabled';\n    }\n    await listUpdateWithPOST(1, 'anime');\n    await listUpdateWithPOST(1, 'manga');\n    if (api.settings.get('loadPTWForProgress')) {\n      await listUpdateWithPOST(6, 'anime');\n      await listUpdateWithPOST(6, 'manga');\n    }\n    con.log('Progress done');\n    setBadgeText('');\n    return true;\n  } catch (e) {\n    con.log('Progress Failed', e);\n  }\n  setBadgeText('');\n  return false;\n}\n\n/*\nexport async function listUpdate(state, type) {\n  const logger = con.m('release').m(type);\n  logger.log('Start', type, state);\n  const listProvider = await getList(state, type);\n  return listProvider\n    .get()\n    .then(async list => {\n      for (let i = 0; i < list.length; i++) {\n        try {\n          if (list[i].options) {\n            await single(list[i], type, list[i].options!.p, logger);\n          }\n        } catch (e) {\n          logger.error(e);\n        }\n      }\n    })\n    .catch(e => {\n      logger.error(e);\n    });\n}\n*/\n\nexport async function listUpdateWithPOST(state, type) {\n  const logger = con.m('release').m(type);\n  logger.log('Start', type, state);\n  const listProvider = await getList(state, type);\n  return listProvider\n    .getCompleteList()\n    .then(async list => {\n      if (list.length > 0) {\n        try {\n          await multiple(list, type, logger);\n        } catch (e) {\n          logger.error(e);\n        }\n      }\n    })\n    .catch(e => {\n      logger.error(e);\n    });\n}\n\nexport async function predictionXhrGET(type: string, apiCacheKey: number | string | null) {\n  if (!apiCacheKey) return {};\n  const response = await api.request.xhr(\n    'GET',\n    `https://api.malsync.moe/nc/mal/${type}/${apiCacheKey}/pr`,\n  );\n  return JSON.parse(response.responseText);\n}\n\nexport async function predictionXhrPOST(type: string, malDATA: listElement[] | null) {\n  if (malDATA === null) return [];\n  if (malDATA.length <= 0) return [];\n  const malDATAID = malDATA.map(el => el.apiCacheKey);\n  const returnArray: xhrResponseI[] = [];\n  for (let i = 0; i <= malDATAID.length; ) {\n    const tempArray = malDATAID.slice(i, i + 49);\n    const Request = {\n      url: `https://api.malsync.moe/nc/mal/${type}/POST/pr`,\n      data: JSON.stringify({ malids: tempArray }),\n      headers: { 'Content-Type': 'application/json' },\n    };\n    await utils.wait(5000);\n    const response = await api.request.xhr('POST', Request);\n    returnArray.push(JSON.parse(response.responseText));\n    i += 50;\n  }\n\n  return returnArray.reduce((acc: xhrResponseI[], val) => acc.concat(val), []);\n}\n\nexport async function multiple(Array: listElement[], type, logger = con.m('release')) {\n  if (!Array) {\n    logger.log('No MAL Id List');\n  } else {\n    Array.forEach(el => {\n      let mode = el.options!.p;\n      if (!mode) mode = 'default';\n      logger.m(el.apiCacheKey).log(el.title, el.cacheKey, el.apiCacheKey, `Mode: ${mode}`);\n    });\n  }\n\n  if (!api.settings.get('epPredictions')) {\n    logger.log('epPredictions disabled');\n    return;\n  }\n\n  async function asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  const remoteUpdateList: listElement[] = [];\n  await asyncForEach(Array, async el => {\n    if (!el.apiCacheKey) return;\n\n    const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n      `release/${type}/${el.cacheKey}`,\n    );\n\n    if (releaseItem && releaseItem.value) {\n      el.fn.progress = releaseItem.value;\n    }\n\n    let mode = el.options!.p;\n    if (!mode) mode = 'default';\n    logger.m(el.apiCacheKey).m('Load').log(releaseItem);\n\n    if (releaseItem && releaseItem.mode && releaseItem.mode !== mode) {\n      remoteUpdateList.push(el);\n    } else if (\n      releaseItem &&\n      releaseItem.timestamp &&\n      Date.now() - releaseItem.timestamp < 2 * 60 * 1000\n    ) {\n      logger.m(el.apiCacheKey).log('Up to date');\n    } else if (\n      releaseItem &&\n      releaseItem.finished &&\n      releaseItem.timestamp &&\n      Date.now() - releaseItem.timestamp < 7 * 24 * 60 * 60 * 1000\n    ) {\n      logger.m(el.apiCacheKey).log('Fininshed');\n    } else if (\n      releaseItem &&\n      !releaseItem.value &&\n      releaseItem.timestamp &&\n      Date.now() - releaseItem.timestamp < 1 * 24 * 60 * 60 * 1000\n    ) {\n      logger.m(el.apiCacheKey).log('Nulled');\n    } else {\n      remoteUpdateList.push(el);\n    }\n  });\n\n  let xhrArray: any = [];\n  if (remoteUpdateList.length > 0) {\n    xhrArray = await predictionXhrPOST(type, remoteUpdateList);\n    await utils.wait(500);\n  }\n\n  xhrArray.forEach(async xhr => {\n    const elRef = remoteUpdateList.find(el => xhr.malid === el.apiCacheKey);\n    if (!elRef) {\n      return;\n    }\n    logger.m(elRef.malId).log(xhr.data);\n    let mode = elRef.options!.p;\n    if (!mode) mode = 'default';\n    const progressValue = getProgress(xhr.data, mode, type);\n\n    if (!progressValue) {\n      logger.m(elRef.malId).log('No value for the selected mode');\n    }\n    let finished = false;\n\n    if (progressValue && progressValue.state && progressValue.state === 'complete') finished = true;\n\n    logger.m(elRef.malId).m('Save').log(progressValue);\n    if (elRef.cacheKey) {\n      if (elRef && elRef.fn && elRef.fn.progress) {\n        notificationCheck(elRef, elRef.fn.progress, progressValue, type);\n      }\n      await api.storage.set(`release/${type}/${elRef.cacheKey}`, {\n        timestamp: Date.now(),\n        value: progressValue,\n        mode,\n        finished,\n      } as releaseItemInterface);\n    }\n  });\n}\n\nexport async function single(\n  el: {\n    uid: number;\n    apiCacheKey: number | string | null;\n    title: string;\n    cacheKey: string;\n    watchedEp: number;\n    single: any;\n    xhr?: object;\n  },\n  type,\n  mode = 'default',\n  logger = con.m('release'),\n) {\n  if (!mode) mode = 'default';\n  logger = logger.m(el.uid.toString());\n  logger.log(el.title, el.cacheKey, el.apiCacheKey, `Mode: ${mode}`);\n  if (!el.apiCacheKey) {\n    logger.log('No Api Cache Id');\n    return;\n  }\n  if (!api.settings.get('epPredictions')) {\n    logger.log('epPredictions disabled');\n    return;\n  }\n  const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n    `release/${type}/${el.cacheKey}`,\n  );\n\n  logger.m('Load').log(releaseItem);\n\n  let force = false;\n\n  if (releaseItem && releaseItem.mode && releaseItem.mode !== mode) force = true;\n\n  if (\n    releaseItem &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 2 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Up to date');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    releaseItem.finished &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 7 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Fininshed');\n    return;\n  }\n\n  if (\n    releaseItem &&\n    !releaseItem.value &&\n    releaseItem.timestamp &&\n    Date.now() - releaseItem.timestamp < 1 * 24 * 60 * 60 * 1000 &&\n    !force\n  ) {\n    logger.log('Nulled');\n    return;\n  }\n\n  if (force) logger.log('Update forced');\n\n  if (mode === 'off') {\n    logger.log('Disabled');\n    el.xhr = [];\n  }\n\n  let xhr;\n  if (typeof el.xhr !== 'undefined') {\n    xhr = el.xhr;\n  } else {\n    xhr = await predictionXhrGET(type, el.apiCacheKey);\n    await utils.wait(500);\n  }\n  logger.log(xhr);\n\n  const progressValue = getProgress(xhr, mode, type);\n\n  if (!progressValue) {\n    logger.log('No value for the selected mode');\n  }\n\n  let finished = false;\n\n  if (progressValue && progressValue.state && progressValue.state === 'complete') finished = true;\n\n  logger.m('Save').log(progressValue);\n  if (releaseItem && releaseItem.value) {\n    notificationCheck(el, releaseItem.value, progressValue, type);\n  }\n\n  await api.storage.set(`release/${type}/${el.cacheKey}`, {\n    timestamp: Date.now(),\n    value: progressValue,\n    mode,\n    finished,\n  } as releaseItemInterface);\n}\n\nexport function progressIsOld(releaseItem: releaseItemInterface) {\n  if (releaseItem && releaseItem.timestamp) {\n    const diff = new Date().getTime() - releaseItem.timestamp;\n\n    if (releaseItem.finished && diff < 7 * 24 * 60 * 60 * 1000) {\n      // logger.log('Fininshed');\n      return false;\n    }\n\n    if (!releaseItem.value && diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('Nulled');\n      return false;\n    }\n\n    if (diff < 1 * 24 * 60 * 60 * 1000) {\n      // logger.log('not old');\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function getProgress(res, mode, type) {\n  const config: {\n    mainId?: string;\n    fallbackPrediction?: string;\n    fallback?: string;\n  } = {};\n\n  if (!res.length) return null;\n\n  if (mode === 'default') {\n    if (type === 'anime') {\n      config.mainId = api.settings.get('progressIntervalDefaultAnime');\n    } else {\n      config.mainId = api.settings.get('progressIntervalDefaultManga');\n    }\n    config.fallback = 'en/sub';\n  } else {\n    config.mainId = mode;\n  }\n\n  config.fallbackPrediction = 'jp/dub';\n\n  let top;\n\n  if (config.mainId) {\n    const mainTemp = res.find(el => el.id === config.mainId);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallback && !top) {\n    const mainTemp = res.find(el => el.id === config.fallback);\n    if (mainTemp) top = mainTemp;\n  }\n\n  if (config.fallbackPrediction && top && !top.predicition && top.lastEp && top.lastEp.timestamp) {\n    const predTemp = res.find(el => el.id === config.fallbackPrediction);\n    const predTime = top.lastEp.timestamp + 7 * 24 * 60 * 60 * 1000;\n    if (predTime && predTemp && predTemp.predicition) {\n      if (top.lastEp.total === predTemp.lastEp.total) {\n        if (Math.abs(predTime - predTemp.predicition.timestamp) < 30 * 60 * 60 * 1000) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      } else if (predTemp.lastEp.total && top.lastEp.total === predTemp.lastEp.total - 1) {\n        if (\n          Math.abs(predTime - (predTemp.predicition.timestamp - 7 * 24 * 60 * 60 * 1000)) <\n          30 * 60 * 60 * 1000\n        ) {\n          top.predicition = {\n            timestamp: predTime,\n            probability: 'medium',\n          };\n        }\n      }\n    }\n  }\n\n  // Fallback to jp if no other language found and episode 0 -> Before release\n  if (config.fallbackPrediction && !top) {\n    const predSoon = res.find(el => el.id === config.fallbackPrediction);\n    if (predSoon && predSoon.lastEp && predSoon.predicition && predSoon.lastEp.total === 0) {\n      top = predSoon;\n      top.predicition.probability = 'medium';\n    }\n  }\n\n  if (!top) return null;\n\n  return top;\n}\n\nexport async function getProgressTypeList(\n  type: 'anime' | 'manga',\n): Promise<{ key: string; label: string }[]> {\n  const cacheObj = new Cache(`ProgressTypeList${type}`, 24 * 60 * 60 * 1000, false);\n  if (!(await cacheObj.hasValueAndIsNotEmpty())) {\n    con.log('Getting new ProgressTypeList Cache');\n    const url = `https://api.malsync.moe/general/progress/${type}`;\n    const request = await api.request.xhr('GET', url).then(async response => {\n      if (response.status === 200 && response.responseText) {\n        return JSON.parse(response.responseText);\n      }\n      return [];\n    });\n    await cacheObj.setValue(request);\n    return request;\n  }\n  con.log('PageSearch Cached');\n  return cacheObj.getValue();\n}\n\nasync function notificationCheck(el, cProgress, nProgress, type) {\n  try {\n    if (\n      (type === 'anime' && !api.settings.get('progressNotificationsAnime')) ||\n      (type === 'manga' && !api.settings.get('progressNotificationsManga'))\n    ) {\n      return;\n    }\n    if (el && nProgress && nProgress) {\n      if (\n        cProgress.lastEp &&\n        typeof cProgress.lastEp.total !== 'undefined' &&\n        nProgress.lastEp &&\n        nProgress.lastEp.total &&\n        cProgress.lang === nProgress.lang &&\n        cProgress.type === nProgress.type\n      ) {\n        if (cProgress.lastEp.total < nProgress.lastEp.total) {\n          // Check if new ep is one higher than the watched one\n          if (el.watchedEp + 1 === nProgress.lastEp.total) {\n            let noti;\n            if (el.single) {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: true,\n                image: await el.single.getImage(),\n                url: el.single.getStreamingUrl() ? el.single.getStreamingUrl() : el.single.getUrl(),\n              };\n            } else {\n              noti = {\n                title: el.title,\n                text: api.storage.lang(`syncPage_malObj_nextEp_${type}`, [nProgress.lastEp.total]),\n                sticky: true,\n                image: el.image,\n                url: el.options && el.options.u ? el.options.u : el.url,\n              };\n            }\n            api.request.notification(noti);\n          }\n        }\n      }\n    }\n  } catch (e) {\n    con.error('Could not check notification Progress', e);\n  }\n}\n\nfunction setBadgeText(text: string) {\n  // @ts-ignore\n  if (api.type === 'userscript') return;\n  try {\n    chrome.browserAction.setBadgeText({ text });\n  } catch (e) {\n    con.error(e);\n  }\n}\n","/* eslint-disable operator-assignment */\n\nexport interface timeElement {\n  y: number;\n  d: number;\n  h: number;\n  m: number;\n  s: number;\n}\n\nexport function msToTime(milliseconds: number): timeElement {\n  let day;\n  let hour;\n  let minute;\n  let seconds;\n  seconds = Math.floor(milliseconds / 1000);\n  minute = Math.floor(seconds / 60);\n  seconds = seconds % 60;\n  hour = Math.floor(minute / 60);\n  minute = minute % 60;\n  day = Math.floor(hour / 24);\n  hour = hour % 24;\n  const year = Math.floor(day / 365);\n  day = day % 365;\n  return {\n    y: year,\n    d: day,\n    h: hour,\n    m: minute,\n    s: seconds,\n  };\n}\n\nexport function shortTime(el: timeElement): timeElement {\n  if (el.y > 1) {\n    if (el.d > 182) {\n      return {\n        y: el.y + 1,\n        d: 0,\n        h: 0,\n        m: 0,\n        s: 0,\n      };\n    }\n    return {\n      y: el.y,\n      d: 0,\n      h: 0,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.y) {\n    return {\n      y: el.y,\n      d: el.d,\n      h: 0,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.d > 3) {\n    if (el.h > 11) {\n      return {\n        y: 0,\n        d: el.d + 1,\n        h: 0,\n        m: 0,\n        s: 0,\n      };\n    }\n    return {\n      y: 0,\n      d: el.d,\n      h: 0,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.d) {\n    return {\n      y: 0,\n      d: el.d,\n      h: el.h,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.h > 5) {\n    if (el.m > 29) {\n      return {\n        y: 0,\n        d: 0,\n        h: el.h + 1,\n        m: 0,\n        s: 0,\n      };\n    }\n    return {\n      y: 0,\n      d: 0,\n      h: el.h,\n      m: 0,\n      s: 0,\n    };\n  }\n  if (el.h) {\n    return {\n      y: 0,\n      d: 0,\n      h: el.h,\n      m: el.m,\n      s: 0,\n    };\n  }\n  if (el.m > 14) {\n    return {\n      y: 0,\n      d: 0,\n      h: 0,\n      m: el.m,\n      s: 0,\n    };\n  }\n  return {\n    y: 0,\n    d: 0,\n    h: 0,\n    m: el.m,\n    s: el.s,\n  };\n}\n\nexport function timeToString(el: timeElement): string {\n  let output = '';\n\n  if (el.y === 1) {\n    output += ` ${el.y} ${api.storage.lang('bookmarksItem_Year')}`;\n  } else if (el.y > 1) {\n    output += ` ${el.y} ${api.storage.lang('bookmarksItem_Years')}`;\n  }\n\n  if (el.d === 1) {\n    output += ` ${el.d} ${api.storage.lang('bookmarksItem_Day')}`;\n  } else if (el.d > 1) {\n    output += ` ${el.d} ${api.storage.lang('bookmarksItem_Days')}`;\n  }\n\n  if (el.h === 1) {\n    output += ` ${el.h} ${api.storage.lang('bookmarksItem_Hour')}`;\n  } else if (el.h > 1) {\n    output += ` ${el.h} ${api.storage.lang('bookmarksItem_Hours')}`;\n  }\n\n  if (el.m === 1) {\n    output += ` ${el.m} ${api.storage.lang('bookmarksItem_min')}`;\n  } else if (el.m > 1) {\n    output += ` ${el.m} ${api.storage.lang('bookmarksItem_mins')}`;\n  }\n\n  if (el.s === 1) {\n    output += ` ${el.s} ${api.storage.lang('bookmarksItem_sec')}`;\n  } else if (el.s > 1) {\n    output += ` ${el.s} ${api.storage.lang('bookmarksItem_secs')}`;\n  }\n\n  return output.trim();\n}\n\nexport function msDiffToShortTimeString(ms: number): string {\n  return timeToString(shortTime(msToTime(ms)));\n}\n\nexport function timestampToShortTime(tm: number, ago = true): string {\n  if (!tm) return '';\n  const curTime = Date.now();\n  let diff;\n  let future;\n  if (curTime > tm) {\n    future = false;\n    diff = curTime - tm;\n  } else {\n    future = true;\n    diff = tm - curTime;\n  }\n\n  if (diff < 30 * 1000) return api.storage.lang('bookmarksItem_now');\n\n  let short = msDiffToShortTimeString(diff);\n\n  if (!future && ago) short = api.storage.lang('bookmarksItem_ago', [short]);\n\n  return short;\n}\n\nexport function timestampToShortDate(ts: number): string {\n  const date = new Date(ts);\n\n  const monthAbbreviation = date.toLocaleString('default', { month: 'short' });\n  const dayOfMonth = date.getDate();\n  const year = date.getFullYear();\n\n  return `${monthAbbreviation} ${dayOfMonth}, ${year}`;\n}\n","import {\n  releaseItemInterface,\n  progressIsOld,\n  single as updateProgress,\n} from '../background/releaseProgress';\nimport { timestampToShortTime } from './time';\n\nexport class Progress {\n  protected logger;\n\n  protected releaseItem: undefined | releaseItemInterface = undefined;\n\n  constructor(protected cacheKey: string, protected type: 'anime' | 'manga') {\n    this.logger = con.m('progress').m(cacheKey.toString());\n    return this;\n  }\n\n  // Progress\n  protected async initReleaseProgress(liveData) {\n    if (liveData) await updateProgress(liveData, this.type, liveData.progressMode);\n\n    const releaseItem: undefined | releaseItemInterface = await api.storage.get(\n      `release/${this.type}/${this.cacheKey}`,\n    );\n\n    this.logger.m('Init Release').log(releaseItem);\n    if (!releaseItem) return;\n    if (progressIsOld(releaseItem)) {\n      this.logger.log('Too old');\n      return;\n    }\n\n    this.releaseItem = releaseItem;\n  }\n\n  protected getProgressCurrentEpisode() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.total) return re.value.lastEp.total;\n    return null;\n  }\n\n  protected isProgressFinished() {\n    const re = this.releaseItem;\n    if (re && re.finished) return true;\n    return false;\n  }\n\n  protected getProgressPrediction() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.predicition && re.value.predicition.timestamp)\n      return re.value.predicition.timestamp;\n    return null;\n  }\n\n  protected getProgressLastTimestamp() {\n    const re = this.releaseItem;\n    if (re && re.value && re.value.lastEp && re.value.lastEp.timestamp)\n      return re.value.lastEp.timestamp;\n    return null;\n  }\n\n  // General\n  async init(\n    live:\n      | {\n          uid: number;\n          apiCacheKey: number | string | null;\n          title: string;\n          cacheKey: string;\n          progressMode: string;\n          watchedEp: number;\n          single: any;\n          xhr?: object;\n        }\n      | false = false,\n  ) {\n    await Promise.all([this.initReleaseProgress(live)]);\n\n    return this;\n  }\n\n  getCurrentEpisode(): number {\n    // @ts-ignore\n    if (!api.settings.get('epPredictions')) return null;\n    return this.getProgressCurrentEpisode();\n  }\n\n  isFinished(): boolean {\n    return this.isProgressFinished();\n  }\n\n  isAiring(): boolean {\n    return !this.isFinished();\n  }\n\n  getPredictionTimestamp(): number {\n    if (!this.getProgressPrediction() || new Date().getTime() > this.getProgressPrediction())\n      return NaN;\n    return this.getProgressPrediction();\n  }\n\n  getPrediction(): string {\n    return timestampToShortTime(this.getPredictionTimestamp());\n  }\n\n  getPredictionText(): string {\n    const pre = this.getPrediction();\n    if (pre) return api.storage.lang(`prediction_Episode_${this.type}`, [pre]);\n    return '';\n  }\n\n  getLastTimestamp(): number {\n    return this.getProgressLastTimestamp();\n  }\n\n  getLast(ago = true): string {\n    return timestampToShortTime(this.getLastTimestamp(), ago);\n  }\n\n  getLastText(): string {\n    const last = this.getLast(false);\n    if (last) return api.storage.lang(`prediction_Last_${this.type}`, [last]);\n    return '';\n  }\n\n  getAuto(): string {\n    const preT = this.getPrediction();\n    if (preT) return preT;\n    const lastT = this.getLast();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getAutoText(): string {\n    const preT = this.getPredictionText();\n    if (preT) return preT;\n    const lastT = this.getLastText();\n    if (lastT) return lastT;\n    return '';\n  }\n\n  getColor(): string {\n    return '#f57c00';\n  }\n\n  getBars(curEp, totalEp): { totalWidth: number; epWidth: number; predWidth: number } {\n    const predEp = this.getCurrentEpisode();\n    const res = {\n      totalWidth: 100,\n      epWidth: 0,\n      predWidth: 0,\n    };\n    if (!totalEp) {\n      res.totalWidth = 0;\n      if (curEp && (!predEp || curEp >= predEp)) {\n        totalEp = Math.ceil(curEp * 1.2);\n      } else if (predEp && (!curEp || curEp < predEp)) {\n        totalEp = Math.ceil(predEp * 1.2);\n      } else {\n        return res;\n      }\n    }\n    if (curEp) {\n      res.epWidth = (curEp / totalEp) * 100;\n      if (res.epWidth > 100) res.epWidth = 100;\n    }\n    if (predEp) {\n      res.predWidth = (predEp / totalEp) * 100;\n      if (res.predWidth > 100) res.predWidth = 100;\n    }\n    return res;\n  }\n}\n","/* eslint-disable max-classes-per-file */\nexport class MissingPlayerError extends Error {\n  public url;\n\n  constructor(url: string) {\n    const parts = url.split('/');\n    let domain = url;\n    if (parts.length > 2) domain = parts[2];\n    super(domain);\n    this.url = url;\n    this.name = 'MissingPlayerError';\n  }\n}\n\nexport class SafeError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'SafeError';\n  }\n}\n\nexport class MissingDataError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'MissingDataError';\n  }\n}\n\nexport class CustomDomainError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'CustomDomainError';\n  }\n}\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const point10: ScoreModeStrategy = {\n  ui: {\n    module: 'dropdown',\n  },\n  getOptions() {\n    return [\n      { value: 0, label: api.storage.lang('UI_Score_Not_Rated') },\n      { value: 100, label: api.storage.lang('UI_Score_Masterpiece') },\n      { value: 90, label: api.storage.lang('UI_Score_Great') },\n      { value: 80, label: api.storage.lang('UI_Score_VeryGood') },\n      { value: 70, label: api.storage.lang('UI_Score_Good') },\n      { value: 60, label: api.storage.lang('UI_Score_Fine') },\n      { value: 50, label: api.storage.lang('UI_Score_Average') },\n      { value: 40, label: api.storage.lang('UI_Score_Bad') },\n      { value: 30, label: api.storage.lang('UI_Score_VeryBad') },\n      { value: 20, label: api.storage.lang('UI_Score_Horrible') },\n      { value: 10, label: api.storage.lang('UI_Score_Appalling') },\n    ];\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 10) return 10;\n    return Math.round(value / 10) * 10;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import * as definitions from './definitions';\n\nimport { Progress } from '../utils/progress';\nimport { predictionXhrGET } from '../background/releaseProgress';\n\nimport { emitter, globalEmit } from '../utils/emitter';\nimport { SafeError } from '../utils/errors';\nimport { errorMessage as _errorMessage } from './Errors';\nimport { point10 } from './ScoreMode/point10';\nimport { SyncTypes } from './helper';\n\nObject.seal(emitter);\n\nexport abstract class SingleAbstract {\n  constructor(protected url: string) {\n    this.handleUrl(url);\n    this.logger = con.m('[S]', '#348fff');\n    return this;\n  }\n\n  protected logger;\n\n  protected type: definitions.contentType | null = null;\n\n  protected persistanceState;\n\n  protected undoState;\n\n  protected lastError;\n\n  public abstract shortName: string;\n\n  protected abstract authenticationUrl: string;\n\n  protected rewatchingSupport = true;\n\n  protected ids = {\n    mal: NaN,\n    ani: NaN,\n    kitsu: {\n      id: NaN,\n      slug: '',\n    },\n    simkl: NaN,\n  };\n\n  protected options: {\n    u: string;\n    c: any;\n    r: any;\n    p: any;\n  } | null = null;\n\n  protected abstract handleUrl(url: string);\n\n  public getType() {\n    return this.type;\n  }\n\n  public getUrl() {\n    return this.url;\n  }\n\n  public supportsRewatching() {\n    return this.rewatchingSupport;\n  }\n\n  public abstract getCacheKey();\n\n  public abstract getPageId();\n\n  public getApiCacheKey(): string | number {\n    return this.getKey(['ANILIST']);\n  }\n\n  public getRulesCacheKey(): string | number {\n    return this.getKey(['ANILIST', 'KITSU'], false);\n  }\n\n  abstract _setStatus(status: definitions.status): void;\n\n  public setStatus(status: definitions.status): SingleAbstract {\n    status = Number(status);\n    this._setStatus(status);\n    return this;\n  }\n\n  abstract _getStatus(): definitions.status | number;\n\n  public getStatus(): definitions.status {\n    if (!this.isOnList()) return definitions.status.NoState;\n    return this._getStatus();\n  }\n\n  public getScoreMode() {\n    return point10;\n  }\n\n  abstract _setScore(score: definitions.score): void;\n\n  /**\n   * @deprecated Use setAbsoluteScore instead\n   */\n  public setScore(score: definitions.score): SingleAbstract {\n    score = parseInt(`${score}`);\n    if (!score) score = 0;\n    this._setScore(score);\n    return this;\n  }\n\n  abstract _getScore(): definitions.score;\n\n  /**\n   * @deprecated Use getAbsoluteScore instead\n   */\n  public getScore(): definitions.score {\n    const score = this._getScore();\n    if (!score) return 0;\n    return score;\n  }\n\n  abstract _setAbsoluteScore(score: definitions.score100): void;\n\n  public setAbsoluteScore(score: definitions.score100): SingleAbstract {\n    score = parseInt(`${score}`);\n    this._setAbsoluteScore(score);\n    return this;\n  }\n\n  abstract _getAbsoluteScore(): definitions.score100;\n\n  public getAbsoluteScore(): definitions.score100 {\n    const score = this._getAbsoluteScore();\n    if (!score) return 0;\n    return score;\n  }\n\n  abstract _setEpisode(episode: number): void;\n\n  public setEpisode(episode: number): SingleAbstract {\n    episode = parseInt(`${episode}`);\n    if (this.getTotalEpisodes() && episode > this.getTotalEpisodes())\n      episode = this.getTotalEpisodes();\n    this._setEpisode(episode);\n    return this;\n  }\n\n  abstract _getEpisode(): number;\n\n  public getEpisode(): number {\n    return this._getEpisode();\n  }\n\n  abstract _setVolume(volume: number): void;\n\n  public setVolume(volume: number): SingleAbstract {\n    this._setVolume(volume);\n    return this;\n  }\n\n  abstract _getVolume(): number;\n\n  public getVolume(): number {\n    return this._getVolume();\n  }\n\n  abstract _setTags(tags: string): void;\n\n  abstract _getTags(): string;\n\n  public setStreamingUrl(streamingUrl: string): SingleAbstract {\n    if (this.options) {\n      this.options.u = streamingUrl;\n    }\n    return this;\n  }\n\n  public getStreamingUrl(): string | undefined {\n    if (this.options && this.options.u) {\n      return this.options.u;\n    }\n\n    return undefined;\n  }\n\n  public cleanTags() {\n    this.options = null;\n  }\n\n  protected progress: false | Progress = false;\n\n  protected progressXhr;\n\n  public async initProgress() {\n    const xhr = await predictionXhrGET(this.getType()!, this.getApiCacheKey());\n    return new Progress(this.getCacheKey(), this.getType()!)\n      .init({\n        uid: this.getCacheKey(),\n        apiCacheKey: this.getApiCacheKey(),\n        title: this.getTitle(),\n        cacheKey: this.getCacheKey(),\n        progressMode: this.getProgressMode(),\n        watchedEp: this.getEpisode(),\n        single: this,\n        xhr,\n      })\n      .then(progress => {\n        this.updateProgress = false;\n        this.progress = progress;\n        this.progressXhr = xhr;\n      });\n  }\n\n  public getProgress() {\n    if (!this.progress) return false;\n    return this.progress;\n  }\n\n  public getProgressFormated() {\n    const op: {\n      label: string;\n      key: string;\n      state: 'complete' | 'ongoing' | 'dropped' | 'discontinued';\n      type: 'dub' | 'sub';\n      dropped: boolean;\n      episode: Number;\n      lastEp?: {\n        total: number;\n        timestamp?: number;\n      };\n      predicition?: {\n        timestamp: number;\n        probability: 'low' | 'medium' | 'high';\n      };\n    }[] = [];\n    const languageNames = new Intl.DisplayNames('en', { type: 'language' });\n    con.log(this.progressXhr);\n    if (this.progressXhr && Object.keys(this.progressXhr).length) {\n      this.progressXhr.forEach(el => {\n        op.push({\n          type: el.type,\n          key: el.id,\n          state: el.state,\n          label: languageNames.of(el.lang.replace(/^jp$/, 'ja')) || el.lang,\n          dropped: el.state === 'dropped' || el.state === 'discontinued',\n          episode: el.lastEp && el.lastEp.total ? el.lastEp.total : 0,\n          lastEp: el.lastEp,\n          predicition: el.prediction,\n        });\n      });\n    }\n    return op;\n  }\n\n  public getProgressOptions() {\n    return this.getProgressFormated().filter(el => el.state !== 'complete');\n  }\n\n  public getProgressCompleted() {\n    return this.getProgressFormated().filter(el => el.state === 'complete');\n  }\n\n  private updateProgress = false;\n\n  public getProgressMode(): string {\n    if (this.options && this.options.p) {\n      return this.options.p;\n    }\n\n    return '';\n  }\n\n  public setProgressMode(mode: string): void {\n    if (this.options) {\n      this.options.p = mode;\n      this.updateProgress = true;\n    }\n    if (!api.settings.get('malTags')) {\n      utils\n        .setEntrySettings(this.type, this.getCacheKey(), this.options, this._getTags())\n        .then(() => this.initProgress());\n    }\n  }\n\n  public getProgressKey() {\n    let mode = this.getProgressMode();\n\n    if (!mode) {\n      if (this.getType() === 'anime') {\n        mode = api.settings.get('progressIntervalDefaultAnime');\n      } else {\n        mode = api.settings.get('progressIntervalDefaultManga');\n      }\n    }\n\n    if (!mode) return null;\n\n    const res = /^([^/]*)\\/(.*)$/.exec(mode);\n\n    if (!res) return null;\n\n    return {\n      key: mode,\n      lang: res[1],\n      type: res[2],\n    };\n  }\n\n  public getPageRelations(): { name: string; icon: string; link: string }[] {\n    const name = this.shortName;\n    const res: { name: string; icon: string; link: string }[] = [];\n\n    if (this.ids.mal && name !== 'MAL') {\n      res.push({\n        name: 'MAL',\n        icon: 'https://cdn.myanimelist.net/images/favicon.ico',\n        link: `https://myanimelist.net/${this.type}/${this.ids.mal}`,\n      });\n    }\n\n    if (this.ids.ani && name !== 'AniList') {\n      res.push({\n        name: 'AniList',\n        icon: 'https://anilist.co/img/icons/favicon-32x32.png',\n        link: `https://anilist.co/${this.type}/${this.ids.ani}`,\n      });\n    }\n\n    if (this.ids.kitsu.id && name !== 'Kitsu') {\n      res.push({\n        name: 'Kitsu',\n        icon: 'https://kitsu.io/favicon-32x32-3e0ecb6fc5a6ae681e65dcbc2bdf1f17.png',\n        link: `https://kitsu.io/${this.type}/${this.ids.kitsu.id}`,\n      });\n    }\n\n    if (this.ids.simkl && name !== 'Simkl') {\n      res.push({\n        name: 'Simkl',\n        icon: 'https://eu.simkl.in/img_favicon/v2/favicon-32x32.png',\n        link: `https://simkl.com/${this.type}/${this.ids.simkl}`,\n      });\n    }\n\n    return res;\n  }\n\n  public fillRelations(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  abstract _update(): Promise<void>;\n\n  public update(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Update info', this.ids);\n    this.lastError = null;\n    return this._update()\n      .catch(e => {\n        this.lastError = e;\n        throw e;\n      })\n      .then(() => {\n        this.persistanceState = this.getStateEl();\n\n        return utils.getEntrySettings(this.type, this.getCacheKey(), this._getTags());\n      })\n      .then(options => {\n        this.options = options;\n        this.registerEvent();\n        this.emitUpdate('state');\n      });\n  }\n\n  abstract _sync(): Promise<void>;\n\n  public async sync(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Sync', this.ids);\n    this.lastError = null;\n    this._setTags(\n      await utils.setEntrySettings(this.type, this.getCacheKey(), this.options, this._getTags()),\n    );\n    return this._sync()\n      .catch(e => {\n        this.lastError = e;\n        throw e;\n      })\n      .then(() => {\n        this.undoState = this.persistanceState;\n        if (this.updateProgress) this.initProgress();\n        this._onList = true;\n        this.emitUpdate();\n      });\n  }\n\n  public emitUpdate(action: 'update' | 'state' = 'update') {\n    globalEmit(`${action}.${this.getCacheKey()}`, {\n      id: this.getPageId(),\n      type: this.getType(),\n      cacheKey: this.getCacheKey(),\n      state: this.getStateEl(),\n      meta: {\n        title: this.getTitle(),\n        image: this.getImage(),\n        malId: this.getMalId(),\n        totalEp: this.getTotalEpisodes(),\n        url: this.getUrl(),\n      },\n    });\n  }\n\n  abstract _delete(): Promise<void>;\n\n  public async delete(): Promise<void> {\n    return this._delete().then(() => {\n      this._onList = false;\n      globalEmit(`delete.${this.getCacheKey()}`, {\n        id: this.getPageId(),\n        type: this.getType(),\n        cacheKey: this.getCacheKey(),\n      });\n    });\n  }\n\n  protected globalUpdateEvent;\n\n  protected registerEvent() {\n    if (!this.globalUpdateEvent) {\n      this.globalUpdateEvent = emitter.on(`update.${this.getCacheKey()}`, data =>\n        this.updateEvent(data),\n      );\n    }\n  }\n\n  protected updateEvent(data) {\n    if (this.isDirty()) {\n      this.logger.log('Ignore event');\n      return;\n    }\n\n    if (data && data.state) {\n      this.setStateEl(data.state);\n      this.persistanceState = this.getStateEl();\n      emitter.emit('syncPage_fillUi');\n    }\n  }\n\n  public isDirty(): boolean {\n    return (\n      JSON.stringify(this.persistanceState) !== JSON.stringify(this.getStateEl()) ||\n      this.updateProgress\n    );\n  }\n\n  public undo(): Promise<void> {\n    this.logger.log('[SINGLE]', 'Undo', this.undoState);\n    if (!this.undoState) throw new SafeError('No undo state found');\n    if (!this.undoState.onList) {\n      // @ts-ignore\n      if (typeof this.delete === 'undefined') throw new Error('Deleting an entry is not supported');\n      // @ts-ignore\n      return this.delete().then(() => {\n        this.setStateEl(this.undoState);\n        this.undoState = null;\n      });\n    }\n    this.setStateEl(this.undoState);\n    return this.sync().then(() => {\n      this.undoState = null;\n    });\n  }\n\n  abstract _getTitle(raw: boolean): string;\n\n  public getTitle(raw = false) {\n    return this._getTitle(raw);\n  }\n\n  abstract _getTotalEpisodes(): number;\n\n  public getTotalEpisodes() {\n    let eps = this._getTotalEpisodes();\n    if (!eps) eps = 0;\n    return eps;\n  }\n\n  abstract _getTotalVolumes(): number;\n\n  public getTotalVolumes() {\n    return this._getTotalVolumes();\n  }\n\n  protected _onList = false;\n\n  public isOnList() {\n    return this._onList;\n  }\n\n  protected _authenticated = false;\n\n  public isAuthenticated() {\n    return this._authenticated;\n  }\n\n  abstract _getDisplayUrl(): string;\n\n  public getDisplayUrl(): string {\n    return this._getDisplayUrl();\n  }\n\n  public getMalUrl(): string | null {\n    if (!Number.isNaN(this.ids.mal)) {\n      return `https://myanimelist.net/${this.getType()}/${this.ids.mal}`;\n    }\n    return null;\n  }\n\n  public getMalId(): number | null {\n    if (!Number.isNaN(this.ids.mal)) {\n      return this.ids.mal;\n    }\n    return null;\n  }\n\n  public getIds() {\n    return this.ids;\n  }\n\n  abstract _getImage(): string;\n\n  public getImage(): string {\n    return this._getImage();\n  }\n\n  public setImage?(url: string): void;\n\n  abstract _getRating(): Promise<string>;\n\n  public getRating(): Promise<string> {\n    return this._getRating().then(rating => {\n      if (!rating) return 'N/A';\n      return rating;\n    });\n  }\n\n  public setResumeWatching(url: string, ep: number) {\n    return utils.setResumeWaching(url, ep, this.type, this.getCacheKey());\n  }\n\n  public getResumeWatching(): { url: string; ep: number } | null {\n    if (this.options && this.options.r) return this.options.r;\n    return null;\n  }\n\n  public setContinueWatching(url: string, ep: number) {\n    return utils.setContinueWaching(url, ep, this.type, this.getCacheKey());\n  }\n\n  public getContinueWatching(): { url: string; ep: number } | null {\n    if (this.options && this.options.c) return this.options.c;\n    return null;\n  }\n\n  public increaseRewatchCount(): void {\n    //  do nothing\n  }\n\n  getStateEl() {\n    return {\n      onList: this.isOnList(),\n      episode: this.getEpisode(),\n      volume: this.getVolume(),\n      status: this.getStatus(),\n      score: this.getScore(),\n      absoluteScore: this.getAbsoluteScore(),\n    };\n  }\n\n  setStateEl(state) {\n    this._onList = state.onList;\n    this.setEpisode(state.episode);\n    this.setVolume(state.volume);\n    this.setStatus(state.status);\n    this.setScore(state.score);\n    if (state.absoluteScore) this.setAbsoluteScore(state.absoluteScore);\n  }\n\n  getStateDiff() {\n    const persistance = this.getStateEl();\n    if (persistance && this.undoState) {\n      const diff: any = {};\n      for (const key in persistance) {\n        if (persistance[key] !== this.undoState[key]) {\n          diff[key] = persistance[key];\n        }\n      }\n      return diff;\n    }\n    return undefined;\n  }\n\n  public async checkSync(episode: number, volume?: number): Promise<boolean> {\n    const curEpisode = this.getEpisode();\n    const curStatus = this.getStatus();\n    const curVolume = this.getVolume();\n\n    if (curStatus === definitions.status.Completed) {\n      if (episode === 1) {\n        return this.startRewatchingMessage();\n      }\n      return false;\n    }\n\n    if (\n      curEpisode >= episode &&\n      // Novel Volume\n      !(\n        typeof volume !== 'undefined' &&\n        (curVolume || volume > 1 || !episode) &&\n        volume > curVolume\n      )\n    ) {\n      return false;\n    }\n\n    if (episode && episode === this.getTotalEpisodes()) {\n      if (curStatus === definitions.status.Rewatching) {\n        await this.finishRewatchingMessage();\n      } else {\n        await this.finishWatchingMessage();\n      }\n      return true;\n    }\n\n    if (curStatus !== definitions.status.Watching && curStatus !== definitions.status.Rewatching) {\n      return this.startWatchingMessage();\n    }\n\n    return true;\n  }\n\n  public async startWatchingMessage() {\n    return utils\n      .flashConfirm(api.storage.lang(`syncPage_flashConfirm_start_${this.getType()}`), 'add')\n      .then(res => {\n        if (res) this.setStatus(definitions.status.Watching);\n        return res;\n      });\n  }\n\n  public async finishWatchingMessage(): Promise<boolean> {\n    const currentScore = this.getScoreCheckboxValue();\n\n    let checkHtml =\n      '<div><select id=\"finish_score\" style=\"margin-top:5px; color:white; background-color:#4e4e4e; border: none;\">';\n    this.getScoreCheckbox().forEach(el => {\n      checkHtml += `<option value=\"${el.value}\" ${currentScore === el.value ? 'selected' : ''}>${\n        el.label\n      }</option>`;\n    });\n    checkHtml += '</select></div>';\n\n    return utils\n      .flashConfirm(api.storage.lang('syncPage_flashConfirm_complete') + checkHtml, 'complete')\n      .then(res => {\n        if (res) {\n          this.setStatus(definitions.status.Completed);\n          const finishScore = Number(j.$('#finish_score').val());\n          if (finishScore > 0) {\n            this.logger.log(`finish_score: ${j.$('#finish_score :selected').val()}`);\n            this.handleScoreCheckbox(j.$('#finish_score :selected').val());\n          }\n        }\n\n        return res;\n      });\n  }\n\n  public async startRewatchingMessage(): Promise<boolean> {\n    return utils\n      .flashConfirm(\n        api.storage.lang(`syncPage_flashConfirm_rewatch_start_${this.getType()}`),\n        'add',\n      )\n      .then(res => {\n        if (res) this.setStatus(definitions.status.Rewatching);\n        return res;\n      });\n  }\n\n  public async finishRewatchingMessage(): Promise<boolean> {\n    return utils\n      .flashConfirm(\n        api.storage.lang(`syncPage_flashConfirm_rewatch_finish_${this.getType()}`),\n        'complete',\n      )\n      .then(res => {\n        if (res) {\n          this.setStatus(definitions.status.Completed);\n          this.increaseRewatchCount();\n        }\n        return res;\n      });\n  }\n\n  public getScoreCheckbox() {\n    return this.getScoreMode().getOptions();\n  }\n\n  public getScoreCheckboxValue() {\n    return this.getScoreMode().valueToOptionValue(this.getAbsoluteScore());\n  }\n\n  public handleScoreCheckbox(value) {\n    this.setAbsoluteScore(this.getScoreMode().optionValueToValue(value));\n  }\n\n  public getDisplayScoreCheckbox() {\n    const curScore = this.getScoreCheckboxValue();\n    const labelEl = this.getScoreCheckbox().filter(el => el.value === curScore);\n    if (labelEl.length) return labelEl[0].label;\n    return '';\n  }\n\n  public getStatusCheckbox() {\n    const statusEs = [\n      {\n        value: '1',\n        label: api.storage.lang(`UI_Status_watching_${this.getType()}`),\n      },\n      { value: '2', label: api.storage.lang('UI_Status_Completed') },\n      { value: '3', label: api.storage.lang('UI_Status_OnHold') },\n      { value: '4', label: api.storage.lang('UI_Status_Dropped') },\n      {\n        value: '6',\n        label: api.storage.lang(`UI_Status_planTo_${this.getType()}`),\n      },\n    ];\n\n    if (this.rewatchingSupport) {\n      statusEs.push({\n        value: '23',\n        label: api.storage.lang(`UI_Status_Rewatching_${this.getType()}`),\n      });\n    }\n\n    return statusEs;\n  }\n\n  public handleStatusCheckbox(value) {\n    this.setStatus(value);\n  }\n\n  public getStatusCheckboxValue() {\n    return this.getStatus();\n  }\n\n  public getKey(allowed: SyncTypes[], forceMal = true) {\n    if (forceMal && this.ids.mal) return this.ids.mal;\n    if (this.ids.ani && allowed.includes('ANILIST')) return `anilist:${this.ids.ani}`;\n    if (this.ids.kitsu.id && allowed.includes('KITSU')) return `kitsu:${this.ids.kitsu.id}`;\n    if (this.ids.simkl && allowed.includes('SIMKL')) return `simkl:${this.ids.simkl}`;\n    return this.ids.mal;\n  }\n\n  public getLastError() {\n    return this.lastError;\n  }\n\n  public getLastErrorMessage() {\n    return this.errorMessage(this.getLastError());\n  }\n\n  flashmError(error) {\n    utils.flashm(this.errorMessage(error), { error: true, type: 'error' });\n  }\n\n  errorMessage(error) {\n    return _errorMessage(error, this.authenticationUrl);\n  }\n}\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const point20decimal: ScoreModeStrategy = {\n  ui: {\n    module: 'dropdown',\n  },\n  getOptions() {\n    const resArr = [{ value: 0, label: api.storage.lang('UI_Score_Not_Rated') }];\n    for (let i = 2; i < 21; i++) {\n      resArr.push({\n        value: i * 5,\n        label: (i / 2).toFixed(1).toString(),\n      });\n    }\n    return resArr;\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 10) return 10;\n    return Math.round(Number(value) / 5) * 5;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const smiley4: ScoreModeStrategy = {\n  ui: {\n    module: 'click',\n    type: 'smiley',\n  },\n  getOptions() {\n    return [\n      { value: 0, label: api.storage.lang('UI_Score_Not_Rated') },\n      { value: 100, label: '' },\n      { value: 70, label: '' },\n      { value: 40, label: '' },\n      { value: 10, label: '' },\n    ];\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 25) return 10;\n    if (value < 55) return 40;\n    if (value < 85) return 70;\n    return 100;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import { ScoreModeStrategy } from './ScoreModeStrategy';\n\nexport const point10decimal: ScoreModeStrategy = {\n  ui: {\n    module: 'dropdown',\n  },\n  getOptions() {\n    const resArr = [{ value: 0, label: api.storage.lang('UI_Score_Not_Rated') }];\n    for (let i = 1; i < 11; i++) {\n      resArr.push({\n        value: i * 10,\n        label: (i / 2).toFixed(1).toString(),\n      });\n    }\n    return resArr;\n  },\n  valueToOptionValue(value) {\n    if (!value) return 0;\n    if (value < 10) return 10;\n    return Math.round(value / 10) * 10;\n  },\n  optionValueToValue(optionValue) {\n    if (!optionValue) return 0;\n    return Number(optionValue);\n  },\n};\n","import { SingleAbstract } from '../singleAbstract';\nimport * as helper from './helper';\nimport { NotAutenticatedError, NotFoundError, UrlNotSupportedError } from '../Errors';\nimport { point10 } from '../ScoreMode/point10';\nimport { point20decimal } from '../ScoreMode/point20decimal';\nimport { smiley4 } from '../ScoreMode/smiley4';\nimport { point10decimal } from '../ScoreMode/point10decimal';\n\nexport class Single extends SingleAbstract {\n  constructor(protected url: string) {\n    super(url);\n    this.logger = con.m(this.shortName, '#d65e43');\n    return this;\n  }\n\n  private animeInfo: any;\n\n  listI() {\n    return this.animeInfo.data[0];\n  }\n\n  animeI() {\n    return this.animeInfo.included[0];\n  }\n\n  shortName = 'Kitsu';\n\n  authenticationUrl = 'https://kitsu.io/404?mal-sync=authentication';\n\n  protected handleUrl(url) {\n    if (url.match(/kitsu\\.io\\/(anime|manga)\\/.*/i)) {\n      this.type = utils.urlPart(url, 3) === 'anime' ? 'anime' : 'manga';\n      this.ids.kitsu.slug = utils.urlPart(url, 4);\n      return;\n    }\n    if (url.match(/myanimelist\\.net\\/(anime|manga)\\/\\d*/i)) {\n      this.type = utils.urlPart(url, 3) === 'anime' ? 'anime' : 'manga';\n      this.ids.mal = Number(utils.urlPart(url, 4));\n      return;\n    }\n    throw new UrlNotSupportedError(url);\n  }\n\n  getCacheKey() {\n    return this.getKey(['KITSU']);\n  }\n\n  getPageId() {\n    return this.ids.kitsu.id;\n  }\n\n  _getStatus() {\n    if (this.listI().attributes.reconsuming && this.listI().attributes.status === 'current')\n      return 23;\n    return parseInt(helper.translateList(this.listI().attributes.status));\n  }\n\n  _setStatus(status) {\n    if (status === 23) {\n      status = 1;\n      this.listI().attributes.reconsuming = true;\n    } else {\n      this.listI().attributes.reconsuming = false;\n    }\n    this.listI().attributes.status = helper.translateList(status, parseInt(status.toString()));\n  }\n\n  _getScore() {\n    if (!this.listI().attributes.ratingHundred) return 0;\n    const score = Math.round(this.listI().attributes.ratingHundred / 10);\n    if (score === 0) return 1;\n    return score;\n  }\n\n  _setScore(score) {\n    if (!score) {\n      this.listI().attributes.ratingHundred = null;\n      return;\n    }\n    this.listI().attributes.ratingHundred = score * 10;\n  }\n\n  _getAbsoluteScore() {\n    return Number(this.listI().attributes.ratingHundred);\n  }\n\n  _setAbsoluteScore(score) {\n    this.listI().attributes.ratingHundred = Number(score);\n  }\n\n  _getTwentyScore() {\n    const score = this.listI().attributes.ratingHundred;\n    if (!score) return null;\n    if (score < 5) return 1;\n    return Math.round(score / 5);\n  }\n\n  _getEpisode() {\n    return this.listI().attributes.progress;\n  }\n\n  _setEpisode(episode) {\n    this.listI().attributes.progress = parseInt(`${episode}`);\n  }\n\n  _getVolume() {\n    return this.listI().attributes.volumesOwned;\n  }\n\n  _setVolume(volume) {\n    this.listI().attributes.volumesOwned = volume;\n  }\n\n  _getTags() {\n    let tags = this.listI().attributes.notes;\n    if (tags === null || tags === 'null') tags = '';\n    return tags;\n  }\n\n  _setTags(tags) {\n    this.listI().attributes.notes = tags;\n  }\n\n  _getTitle() {\n    try {\n      return helper.getTitle(\n        this.animeI().attributes.titles,\n        this.animeI().attributes.canonicalTitle,\n      );\n    } catch (e) {\n      console.error('title', e);\n      return 'Failed';\n    }\n  }\n\n  _getTotalEpisodes() {\n    const eps = this.animeI().attributes.episodeCount\n      ? this.animeI().attributes.episodeCount\n      : this.animeI().attributes.chapterCount;\n    if (eps === null) return 0;\n    return eps;\n  }\n\n  _getTotalVolumes() {\n    const vol = this.animeI().attributes.volumeCount;\n    if (!vol) return 0;\n    return vol;\n  }\n\n  _getDisplayUrl() {\n    return `https://kitsu.io/${this.getType()}/${this.animeI().attributes.slug}`;\n  }\n\n  _getImage() {\n    return this.animeI().attributes.posterImage && this.animeI().attributes.posterImage.large\n      ? this.animeI().attributes.posterImage.large\n      : '';\n  }\n\n  _getRating() {\n    if (this.animeI().attributes.averageRating === null) return Promise.resolve('');\n    return Promise.resolve(`${this.animeI().attributes.averageRating}%`);\n  }\n\n  async _update() {\n    if (Number.isNaN(this.ids.mal)) {\n      /* eslint-disable-next-line no-var */\n      var kitsuSlugRes = await this.kitsuSlugtoKitsu(this.ids.kitsu.slug, this.getType());\n      try {\n        this.ids.kitsu.id = Number(kitsuSlugRes.res.data[0].id);\n        this.ids.mal = Number(kitsuSlugRes.malId);\n      } catch (e) {\n        this._authenticated = true;\n        throw new NotFoundError('Not found');\n      }\n    }\n    if (Number.isNaN(this.ids.kitsu.id)) {\n      /* eslint-disable-next-line no-var */\n      var kitsuRes = await this.malToKitsu(this.ids.mal, this.getType());\n      try {\n        this.ids.kitsu.id = Number(kitsuRes.data[0].relationships.item.data.id);\n      } catch (e) {\n        this._authenticated = true;\n        throw new NotFoundError('Not found');\n      }\n    }\n\n    this._authenticated = true;\n    return this.userId()\n      .then(userId => {\n        return this.apiCall(\n          'GET',\n          `https://kitsu.io/api/edge/library-entries?filter[user_id]=${userId}&filter[kind]=${this.getType()}&filter[${this.getType()}_id]=${\n            this.ids.kitsu.id\n          }&page[limit]=1&page[limit]=1&include=${this.getType()}&fields[${this.getType()}]=slug,titles,canonicalTitle,averageRating,posterImage,${\n            this.getType() === 'anime' ? 'episodeCount' : 'chapterCount,volumeCount'\n          }`,\n        );\n      })\n      .catch(e => {\n        if (e instanceof NotAutenticatedError) {\n          this._authenticated = false;\n          return { data: [], included: [] };\n        }\n        throw e;\n      })\n      .then(async res => {\n        const tempAnimeInfo = res;\n\n        this._onList = true;\n\n        if (!res.data.length) {\n          this._onList = false;\n          tempAnimeInfo.data[0] = {\n            attributes: {\n              notes: '',\n              progress: 0,\n              volumesOwned: 0,\n              reconsuming: false,\n              reconsumeCount: false,\n              ratingTwenty: null,\n              status: 'planned',\n            },\n          };\n          if (typeof kitsuRes !== 'undefined') {\n            tempAnimeInfo.included = kitsuRes.included;\n          } else if (kitsuSlugRes) {\n            tempAnimeInfo.included = kitsuSlugRes.res.data;\n          } else {\n            kitsuRes = await this.malToKitsu(this.ids.mal, this.getType());\n            tempAnimeInfo.included = kitsuRes.included;\n          }\n        }\n\n        if (tempAnimeInfo.data[0].attributes.ratingHundred) {\n          tempAnimeInfo.data[0].attributes.ratingHundred = 0;\n        } else {\n          tempAnimeInfo.data[0].attributes.ratingHundred = Number(\n            tempAnimeInfo.data[0].attributes.ratingTwenty * 5,\n          );\n        }\n\n        this.animeInfo = tempAnimeInfo;\n\n        try {\n          this.animeI();\n        } catch (e) {\n          this.logger.error(e);\n          throw new NotFoundError('Not found');\n        }\n\n        if (!this._authenticated) throw new NotAutenticatedError('Not Authenticated');\n      });\n  }\n\n  async _sync() {\n    const variables: any = {\n      data: {\n        attributes: {\n          notes: this.listI().attributes.notes,\n          progress: this.listI().attributes.progress,\n          volumesOwned: this.listI().attributes.volumesOwned,\n          reconsuming: this.listI().attributes.reconsuming,\n          reconsumeCount: this.listI().attributes.reconsumeCount,\n          ratingTwenty: this._getTwentyScore(),\n          status: this.listI().attributes.status,\n        },\n        type: 'library-entries',\n      },\n    };\n    const tType = this.getType();\n    if (!tType) return Promise.resolve();\n    let updateUrl;\n    let post;\n    if (this.isOnList()) {\n      updateUrl = `https://kitsu.io/api/edge/library-entries/${this.listI().id}`;\n      variables.data.id = this.listI().id;\n      post = 'PATCH';\n    } else {\n      updateUrl = 'https://kitsu.io/api/edge/library-entries/';\n      variables.data.relationships = {\n        [tType]: {\n          data: {\n            type: tType,\n            id: this.ids.kitsu.id,\n          },\n        },\n        user: {\n          data: {\n            type: 'users',\n            id: await this.userId(),\n          },\n        },\n      };\n      post = 'POST';\n    }\n\n    this.logger.log(post, variables);\n\n    return this.apiCall(post, updateUrl, variables).then(res => {\n      if (res && res.data && res.data.id) {\n        this.listI().id = res.data.id;\n      }\n      return res;\n    });\n  }\n\n  protected apiCall(mode, url, variables = {}, authentication = true) {\n    return helper.apiCall(mode, url, variables, authentication).catch(e => {\n      if (e instanceof NotAutenticatedError) throw new NotAutenticatedError(e.message);\n      throw e;\n    });\n  }\n\n  protected kitsuSlugtoKitsu(kitsuSlug: string, type: any) {\n    return this.apiCall(\n      'Get',\n      `https://kitsu.io/api/edge/${type}?filter[slug]=${kitsuSlug}&page[limit]=1&include=mappings`,\n      {},\n    )\n      .catch(e => {\n        if (e instanceof NotAutenticatedError) {\n          this._authenticated = false;\n          return this.apiCall(\n            'Get',\n            `https://kitsu.io/api/edge/${type}?filter[slug]=${kitsuSlug}&page[limit]=1&include=mappings`,\n            {},\n            false,\n          );\n        }\n        throw e;\n      })\n      .then(res => {\n        let malId = NaN;\n        if (typeof res !== 'undefined' && typeof res.included !== 'undefined') {\n          for (let k = 0; k < res.included.length; k++) {\n            const mapping = res.included[k];\n            if (mapping.type === 'mappings') {\n              if (mapping.attributes.externalSite === `myanimelist/${type}`) {\n                malId = Number(mapping.attributes.externalId);\n                res.included.splice(k, 1);\n                break;\n              } else if (mapping.attributes.externalSite === `anilist/${type}`) {\n                this.ids.ani = Number(mapping.attributes.externalId);\n              }\n            }\n          }\n        }\n        return { res, malId };\n      });\n  }\n\n  protected malToKitsu(malid: number, type: any) {\n    return this.apiCall(\n      'Get',\n      `https://kitsu.io/api/edge/mappings?filter[externalSite]=myanimelist/${type}&filter[externalId]=${malid}&include=item&fields[item]=id`,\n      {},\n    )\n      .catch(e => {\n        if (e instanceof NotAutenticatedError) {\n          this._authenticated = false;\n          return this.apiCall(\n            'Get',\n            `https://kitsu.io/api/edge/mappings?filter[externalSite]=myanimelist/${type}&filter[externalId]=${malid}&include=item&fields[item]=id`,\n            {},\n            false,\n          );\n        }\n        throw e;\n      })\n      .then(res => {\n        return res;\n      });\n  }\n\n  protected async userId() {\n    const userId = await api.storage.get('kitsuUserId');\n    if (typeof userId !== 'undefined' && userId) {\n      return userId;\n    }\n    return this.apiCall('Get', 'https://kitsu.io/api/edge/users?filter[self]=true').then(res => {\n      if (\n        typeof res.data === 'undefined' ||\n        !res.data.length ||\n        typeof res.data[0] === 'undefined'\n      ) {\n        throw new NotAutenticatedError('Not Authenticated');\n      }\n      api.storage.set('kitsuUserId', res.data[0].id);\n      return res.data[0].id;\n    });\n  }\n\n  public getScoreMode() {\n    switch (api.settings.get('kitsuOptions').ratingSystem) {\n      case 'simple':\n        return smiley4;\n      case 'regular':\n        return point10decimal;\n      case 'advanced':\n        return point20decimal;\n      default:\n        return point10;\n    }\n  }\n\n  _delete() {\n    return this.apiCall('DELETE', `https://kitsu.io/api/edge/library-entries/${this.listI().id}`);\n  }\n}\n","// eslint-disable-next-line import/no-unresolved\nexport const quicklinks = require('./quicklinks.json');\n\ntype QuicklinkGroup = 'home' | 'search' | 'link';\n\ninterface Links {\n  name: string;\n  url: string;\n  fn?: (searchTerm: string) => string;\n}\n\nexport interface Quicklink {\n  name: string;\n  domain: string;\n  group: QuicklinkGroup;\n  links: Links[];\n}\n\n/*\n  {searchterm} => 'no%20game%20no%20life'\n  {searchtermPlus} => 'no+game+no+life'\n  {searchtermMinus} => 'no-game-no-life'\n  {searchtermUnderscore} => 'no_game_no_life'\n  {searchtermRaw} => 'no game no life'\n  {cacheId} => '143'\n*/\n\nexport function titleSearch(url, title, id) {\n  return searchSyntax(\n    url\n      .replace('{searchtermPlus}', '{searchterm(+)}')\n      .replace('{searchtermMinus}', '{searchterm(-)}')\n      .replace('{searchtermUnderscore}', '{searchterm(_)}')\n      .replace('{searchtermRaw}', '{searchterm[noEncode,noLowercase]}')\n      .replace('{cacheId}', id),\n    title,\n  );\n}\n\n/*\n  {searchterm(<whitespaceReplacement>)[<options>]}\n  Options:\n    noEncode -> Dont encode characters\n    noSpecial -> Remove special characters\n    specialReplace -> Replace special characters with a <whitespaceReplacement>\n    noLowercase -> Dont lowercase everything\n*/\n\ntype option = 'noEncode' | 'noSpecial' | 'noLowercase' | 'specialReplace';\n\nexport function searchSyntax(url, title) {\n  let resTitle = title.trim();\n  let options: option[] = [];\n\n  const found = url.match(/{searchterm(\\(.\\))?(\\[[^[\\]]*\\])?}/);\n\n  if (!found) return url;\n\n  const [res, space, tempOptions] = found;\n\n  if (tempOptions) {\n    options = tempOptions.substring(1, tempOptions.length - 1).split(',');\n  }\n\n  if (!options.includes('noLowercase')) {\n    resTitle = resTitle.toLowerCase();\n  }\n\n  if (options.includes('noSpecial')) {\n    resTitle = resTitle\n      .replace(/[^a-zA-Z\\d ]/g, '')\n      .replace(/ +/g, ' ')\n      .trim();\n  } else if (options.includes('specialReplace')) {\n    resTitle = resTitle\n      .replace(/[^a-zA-Z\\d ]/g, ' ')\n      .replace(/ +/g, ' ')\n      .trim();\n  }\n\n  if (!options.includes('noEncode')) {\n    resTitle = encodeURIComponent(resTitle);\n  } else {\n    resTitle = resTitle.replace(/\\//g, ' ');\n  }\n\n  if (space) {\n    resTitle = resTitle.replace(/(%20| )/g, space[1]);\n  }\n\n  return url.replace(res, resTitle);\n}\n\nasync function fillFromApi(combined, type, id) {\n  const mal = await getMalToKissApi(type, id);\n\n  return combined.map(el => {\n    if (el.database && mal[el.database]) {\n      el.databaseLinks = mal[el.database];\n    }\n    return el;\n  });\n}\n\nfunction simplifyObject(combined, type, title, id): Quicklink[] {\n  return combined\n    .filter(el => el.search && el.search[type])\n    .map(el => {\n      const links: Links[] = [];\n      let quickGroup: QuicklinkGroup;\n\n      if (el.databaseLinks) {\n        quickGroup = 'link';\n        Object.values(el.databaseLinks).forEach((db: any) => {\n          links.push({\n            name: db.title,\n            url: db.url,\n          });\n        });\n      } else if (el.search[type] === 'home') {\n        quickGroup = 'home';\n        links.push({\n          name: 'Homepage',\n          url: el.domain,\n        });\n      } else {\n        quickGroup = 'search';\n        links.push({\n          name: 'Quicksearch',\n          url: titleSearch(el.search[type], title, id),\n          fn: searchTerm => titleSearch(el.search[type], searchTerm, id),\n        });\n      }\n\n      return {\n        name: el.name,\n        domain: el.domain,\n        group: quickGroup,\n        links,\n      };\n    });\n}\n\nexport async function getMalToKissApi(type, id) {\n  const url = `https://api.malsync.moe/mal/${type}/${id}`;\n  return api.request.xhr('GET', url).then(async response => {\n    con.log('malSync response', response);\n    if (response.status === 400) {\n      return {};\n    }\n    if (response.status === 200) {\n      const data = JSON.parse(response.responseText);\n      if (data && data.Sites) return data.Sites;\n      return {};\n    }\n    throw new Error('malsync offline');\n  });\n}\n\nexport function combinedLinks() {\n  const links = api.settings.get('quicklinks');\n  const comb = links.map(el => optionToCombined(el)).filter(el => el);\n  return JSON.parse(JSON.stringify(comb));\n}\n\nexport function optionToCombined(link) {\n  if (!link) return null;\n  if (link.custom) return link;\n  return quicklinks.find(el => el.name === link);\n}\n\nexport async function activeLinks(\n  type: 'anime' | 'manga',\n  id: any,\n  searchterm: string,\n): Promise<Quicklink[]> {\n  let combined = combinedLinks();\n\n  if (id) {\n    try {\n      combined = await fillFromApi(combined, type, id);\n    } catch (e) {\n      con.m('API Problem').error(e);\n    }\n  }\n\n  return simplifyObject(combined, type, searchterm, id);\n}\n\nexport function removeOptionKey(options, key) {\n  if (!key) return options;\n  return options.filter(el => {\n    if (!el || el === key || (typeof el === 'object' && el.name === key)) return false;\n    return true;\n  });\n}\n\nexport function removeFromOptions(key) {\n  const options = api.settings.get('quicklinks');\n  api.settings.set('quicklinks', removeOptionKey(options, key));\n}\n","import { Single as KitsuSingle } from '../_provider/Kitsu/single';\nimport { UserList } from '../_provider/Kitsu/list';\nimport { activeLinks, removeFromOptions } from '../utils/quicklinksBuilder';\nimport { waitForPageToBeVisible } from '../utils/general';\nimport { NotAutenticatedError } from '../_provider/Errors';\n\nexport class KitsuClass {\n  page: any = null;\n\n  same = false;\n\n  protected authError = false;\n\n  constructor(public url: string) {\n    let oldUrl = window.location.href.split('/').slice(0, 5).join('/');\n    utils.changeDetect(\n      () => {\n        this.same = false;\n        if (this.page !== null && this.page.page === 'detail') {\n          const tempUrl = window.location.href.split('/').slice(0, 5).join('/');\n          if (tempUrl === oldUrl) {\n            this.same = true;\n          }\n          oldUrl = tempUrl;\n        }\n\n        this.url = window.location.href;\n        this.init();\n      },\n      () => {\n        if (this.page !== null && this.page.page === 'bookmarks' && $('.library-content').length) {\n          return $('.library-content').first().height();\n        }\n\n        return window.location.href;\n      },\n    );\n\n    $(document).ready(() => {\n      utils.waitUntilTrue(\n        function () {\n          return $('.global-container').length;\n        },\n        () => {\n          this.init();\n        },\n      );\n    });\n\n    api.storage.addStyle(\n      require('!to-string-loader!css-loader!less-loader!./style.less').toString(),\n    );\n  }\n\n  async init() {\n    await waitForPageToBeVisible();\n    if (this.url.indexOf('?mal-sync=authentication') > -1) {\n      this.authentication();\n    }\n\n    const urlpart = utils.urlPart(this.url, 3);\n    if ((urlpart === 'anime' || urlpart === 'manga') && utils.urlPart(this.url, 4)) {\n      if (this.same && typeof this.page !== 'undefined' && this.page.malObj !== 'undefined') {\n        this.streamingUI();\n        this.malToKiss();\n        this.pageRelation();\n        return;\n      }\n      const malObj = new KitsuSingle(this.url);\n      await malObj.update();\n\n      this.page = {\n        page: 'detail',\n        id: malObj.getIds().kitsu.id,\n        malid: malObj.getIds().mal,\n        apiCacheKey: malObj.getApiCacheKey(),\n        type: urlpart,\n        malObj,\n      };\n      con.log('page', this.page);\n      this.streamingUI();\n      this.malToKiss();\n      this.pageRelation();\n    }\n\n    const urlpart4 = utils.urlPart(this.url, 5);\n    if (urlpart4 === 'library') {\n      let type = 'anime';\n      if (utils.urlParam(this.url, 'media') === 'manga') type = 'manga';\n      this.page = {\n        page: 'bookmarks',\n        type,\n      };\n      con.log('page', this.page);\n      this.bookmarks();\n    }\n  }\n\n  authentication() {\n    try {\n      utils.checkDoubleExecution();\n    } catch (e) {\n      con.error(e);\n    }\n    $(document).ready(function () {\n      $('body').after(\n        j.html(\n          `\n        <div id=\"mal-sync-login\" style=\"text-align: center; margin-top: 50px; background-color: white; border: 1px solid lightgrey; padding: 10px; max-width: 600px; margin-left: auto; margin-right: auto;\">\n          <h1>MAL-Sync</h1>\n          <br>\n          <p style=\"text-align: left;\">\n            ${api.storage.lang('kitsuClass_authentication_text')}\n          </p>\n          <div class=\"modal-content\">\n            <input type=\"email\" id=\"email\" placeholder=\"Email\" required>\n            <input type=\"password\" id=\"pass\" name=\"password\" placeholder=\"${api.storage.lang(\n              'kitsuClass_authentication_Password',\n            )}\" required>\n          </div>\n          <div class=\"form-cta\" style=\"margin-top: 30px;\">\n            <button class=\"btn button--primary\" type=\"submit\" id=\"mal-sync-button\">\n              ${api.storage.lang('kitsuClass_authentication_Login')}\n            </button>\n          </div>\n        </div>\n      `,\n        ),\n      );\n      $('#mal-sync-login #mal-sync-button').click(function () {\n        $('#mal-sync-login #mal-sync-button').attr('disabled', 'disabled');\n        $.ajax({\n          type: 'POST',\n          url: 'https://kitsu.io/api/oauth/token',\n          data: `grant_type=password&username=${encodeURIComponent(\n            String($('#mal-sync-login #email').val()),\n          )}&password=${encodeURIComponent(String($('#mal-sync-login #pass').val()))}`,\n          async success(result) {\n            const token = result.access_token;\n\n            if (!token) return;\n\n            con.info('token', token);\n\n            await api.settings.set('kitsuToken', token);\n\n            $('#mal-sync-login').html(\n              j.html(\n                `<h1>MAL-Sync</h1><br>${api.storage.lang('kitsuClass_authentication_Success')}`,\n              ),\n            );\n          },\n          error(result) {\n            try {\n              con.error(result);\n              $('#mal-sync-login #mal-sync-button').prop('disabled', false);\n              if (result.responseJSON.error === 'invalid_grant') {\n                utils.flashm(api.storage.lang('kitsuClass_authentication_Wrong'));\n                return;\n              }\n              utils.flashm(result.responseJSON.error_description);\n            } catch (e) {\n              con.error(e);\n              utils.flashm(result.responseText);\n            }\n          },\n        });\n      });\n\n      utils.waitUntilTrue(\n        function () {\n          return $('body h1').length;\n        },\n        () => {\n          $('body h1').remove();\n        },\n      );\n    });\n  }\n\n  async getMalUrl() {\n    if (this.page !== null && this.page.page === 'detail' && this.page.malid) {\n      return `https://myanimelist.net/${this.page.type}/${this.page.malid}/${utils.urlPart(\n        this.url,\n        5,\n      )}`;\n    }\n    return '';\n  }\n\n  async streamingUI() {\n    con.log('Streaming UI');\n    $('#mal-sync-stream-div').remove();\n    const { malObj } = this.page;\n\n    const streamUrl = malObj.getStreamingUrl();\n    if (streamUrl) {\n      $(document).ready(async function () {\n        $('.media--title h3')\n          .first()\n          .after(\n            j.html(`\n        <div class=\"data title progress\" id=\"mal-sync-stream-div\" style=\"display: inline-block; position: relative; top: -4px; display: inline;\">\n          <a class=\"mal-sync-stream\" title=\"${\n            streamUrl.split('/')[2]\n          }\" target=\"_blank\" style=\"margin: 0 0;\" href=\"${streamUrl}\">\n            <img src=\"${utils.favicon(streamUrl.split('/')[2])}\">\n          </a>\n        </div>`),\n          );\n\n        const resumeUrlObj = malObj.getResumeWatching();\n        const continueUrlObj = malObj.getContinueWatching();\n        con.log('Resume', resumeUrlObj, 'Continue', continueUrlObj);\n        if (continueUrlObj && continueUrlObj.ep === malObj.getEpisode() + 1) {\n          $('#mal-sync-stream-div').append(\n            j.html(\n              `<a class=\"nextStream\" title=\"${api.storage.lang(\n                `overview_Continue_${malObj.getType()}`,\n              )}\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA;\" href=\"${\n                continueUrlObj.url\n              }\">\n              <img src=\"${api.storage.assetUrl('double-arrow-16px.png')}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        } else if (resumeUrlObj && resumeUrlObj.ep === malObj.getEpisode()) {\n          $('#mal-sync-stream-div').append(\n            j.html(\n              `<a class=\"resumeStream\" title=\"${api.storage.lang(\n                `overview_Resume_Episode_${malObj.getType()}`,\n              )}\" target=\"_blank\" style=\"margin: 0 5px 0 0; color: #BABABA;\" href=\"${\n                resumeUrlObj.url\n              }\">\n              <img src=\"${api.storage.assetUrl('arrow-16px.png')}\" width=\"16\" height=\"16\">\n            </a>`,\n            ),\n          );\n        }\n      });\n    }\n  }\n\n  getImage() {\n    return j.$('.media-poster img').attr('src') || '';\n  }\n\n  getTitle() {\n    return $('meta[property=\"og:title\"]').attr('content') || '';\n  }\n\n  malToKiss() {\n    $(document).ready(() => {\n      con.log('malToKiss');\n      $('.mal_links').remove();\n      const title = this.getTitle();\n\n      activeLinks(this.page!.type, this.page!.apiCacheKey, title).then(links => {\n        let html = '';\n        links.forEach(page => {\n          let tempHtml = '';\n          page.links.forEach(stream => {\n            tempHtml += `\n              <div class=\"mal_links\" style=\"margin-top: 5px;\">\n                <a target=\"_blank\" href=\"${stream.url}\">\n                  ${stream.name}\n                </a>\n              </div>`;\n          });\n          html += `\n            <div id=\"${page.name}Links\" class=\"mal_links library-state with-header\" style=\"\n              background: white;\n              margin-bottom: 15px;\n              border-radius: 3px;\n              display: block;\n              padding: 8px 12px;\n              width: 100%;\n              font-size: 12px;\n              word-break: break-all;\n            \">\n              <img src=\"${utils.favicon(page.domain)}\">\n              <span style=\"font-weight: 500; line-height: 16px; vertical-align: middle;\">${\n                page.name\n              }</span>\n              <span title=\"${\n                page.name\n              }\" class=\"remove-mal-sync\" style=\"float: right; cursor: pointer;\">x</span>\n              ${tempHtml}\n            </div>`;\n        });\n\n        if ($('#mal-sync-search-links').length) {\n          $('#mal-sync-search-links').first().after(j.html(html));\n        } else {\n          $('.media-summary').first().after(j.html(html));\n        }\n\n        $('.remove-mal-sync').click(function () {\n          const key = $(this).attr('title');\n          removeFromOptions(String(key));\n          window.location.reload();\n        });\n      });\n    });\n  }\n\n  async pageRelation() {\n    $('.malsync-rel-link').remove();\n    await this.page.malObj.fillRelations();\n    $('.media-summary h5')\n      .first()\n      .append(\n        j.html(\n          `<div class=\"malsync-rel-link\" style=\"display: inline-block; margin: 0 5px; vertical-align: bottom;\"></div>`,\n        ),\n      );\n\n    this.page.malObj.getPageRelations().forEach(page => {\n      $('.malsync-rel-link').append(\n        j.html(`\n          <a href=\"${page.link}\" target=\"_blank\" title=\"${page.name}\" class=\"link\">\n            <img src=\"${page.icon}\" width=\"16\" height=\"16\">\n          </a>\n\n        `),\n      );\n    });\n  }\n\n  private tempAnimelist: any = null;\n\n  private tempMangalist: any = null;\n\n  bookmarks() {\n    if (this.authError) return;\n    const This = this;\n    $(document).ready(() => {\n      if (this.page!.type === 'anime') {\n        if (this.tempAnimelist !== null) {\n          fullListCallback(this.tempAnimelist);\n          return;\n        }\n      } else if (this.tempMangalist !== null) {\n        fullListCallback(this.tempMangalist);\n        return;\n      }\n\n      const listProvider: UserList = new UserList(1, this.page.type);\n\n      listProvider\n        .getCompleteList()\n        .then(list => {\n          if (this.page!.type === 'anime') {\n            this.tempAnimelist = list;\n          } else {\n            this.tempMangalist = list;\n          }\n          fullListCallback(list);\n        })\n        .catch(e => {\n          if (e instanceof NotAutenticatedError) this.authError = true;\n          con.error(e);\n          listProvider.flashmError(e);\n        });\n\n      function fullListCallback(list) {\n        let cover = true;\n        if ($('.library-list tbody tr').length) cover = false;\n        con.log(list);\n        $.each(list, async (index, en) => {\n          con.log('en', en);\n          if (typeof en.malId !== 'undefined' && en.malId !== null && en.malId) {\n            const element = $(\n              `.library-grid-popover:not(.malSyncDone2) a[href^=\"/${This.page!.type}/${\n                en.kitsuSlug\n              }\"], .library-list tbody tr:not(.malSyncDone2) a[href^=\"/${This.page!.type}/${\n                en.kitsuSlug\n              }\"]`,\n            )\n              .first()\n              .parent()\n              .parent()\n              .parent();\n            con.log(element);\n            element.addClass('malSyncDone2');\n\n            if (en.options && en.options.u) {\n              con.log(en.options.u);\n\n              if (cover) {\n                element.prepend(\n                  j.html(`\n                  <a class=\"mal-sync-stream mal-rem\" title=\"${\n                    en.options.u.split('/')[2]\n                  }\" target=\"_blank\" style=\"margin: 0 0; z-index: 22; position:absolute; left: 0px; top: 0px; background-color: #ffffff5c; padding: 0 5px 3px 5px;\" href=\"${\n                    en.options.u\n                  }\">\n                    <img src=\"${utils.favicon(en.options.u.split('/')[2])}\">\n                  </a>`),\n                );\n              } else {\n                element.find('.title-wrapper').append(\n                  j.html(`\n                  <a class=\"mal-sync-stream mal-rem\" title=\"${\n                    en.options.u.split('/')[2]\n                  }\" target=\"_blank\" style=\"padding: 0 5px;\" href=\"${en.options.u}\">\n                    <img src=\"${utils.favicon(en.options.u.split('/')[2])}\">\n                  </a>`),\n                );\n              }\n            }\n\n            const resumeUrlObj = en.options.r;\n            const continueUrlObj = en.options.c;\n\n            const curEp = en.watchedEp;\n\n            con.log('Resume', resumeUrlObj, 'Continue', continueUrlObj);\n            if (continueUrlObj && continueUrlObj.ep === curEp + 1) {\n              if (cover) {\n                element.prepend(\n                  j.html(\n                    `<a class=\"nextStream mal-rem\" title=\"Continue watching\" target=\"_blank\" style=\"color: #BABABA; z-index: 22; position:absolute; top: 0px; left: 26px; background-color: #ffffff5c; padding: 0 5px 3px 5px;\" href=\"${\n                      continueUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl(\n                      'double-arrow-16px.png',\n                    )}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              } else {\n                element.find('.title-wrapper').append(\n                  j.html(\n                    `<a class=\"nextStream mal-rem\" title=\"Continue watching\" target=\"_blank\" style=\"padding: 0;\" href=\"${\n                      continueUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl(\n                      'double-arrow-16px.png',\n                    )}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              }\n            } else if (resumeUrlObj && resumeUrlObj.ep === curEp) {\n              if (cover) {\n                element.prepend(\n                  j.html(\n                    `<a class=\"resumeStream mal-rem\" title=\"Resume watching\" target=\"_blank\" style=\"color: #BABABA; z-index: 22; position:absolute; top: 0px; left: 26px; background-color: #ffffff5c; padding: 0 5px 3px 5px;\" href=\"${\n                      resumeUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl('arrow-16px.png')}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              } else {\n                element.find('.title-wrapper').append(\n                  j.html(\n                    `<a class=\"resumeStream mal-rem\" title=\"Resume watching\" target=\"_blank\" style=\"padding: 0;\" href=\"${\n                      resumeUrlObj.url\n                    }\">\n                    <img src=\"${api.storage.assetUrl('arrow-16px.png')}\" width=\"16\" height=\"16\">\n                  </a>`,\n                  ),\n                );\n              }\n            }\n\n            await en.fn.initProgress();\n            if (en.fn.progress && en.fn.progress.isAiring() && en.fn.progress.getCurrentEpisode()) {\n              element\n                .parent()\n                .find('.entry-unit, .progress-cell > span:last-of-type')\n                .first()\n                .append(\n                  j.html(\n                    ` <span class=\"mal-sync-ep-pre\" title=\"${en.fn.progress.getAutoText()}\">[<span style=\"border-bottom: 1px dotted ${en.fn.progress.getColor()};\">${en.fn.progress.getCurrentEpisode()}</span>]</span>`,\n                  ),\n                );\n            }\n          }\n        });\n      }\n    });\n  }\n}\n","export async function firebaseNotification() {\n  const schedule = await api.storage.get('timestampUpdate/firebaseNotification');\n  if (typeof schedule === 'undefined' || j.$.now() - schedule > 10 * 60 * 1000) {\n    await checkNotifications();\n    api.storage.set('timestampUpdate/firebaseNotification', j.$.now());\n  }\n}\n\nasync function checkNotifications() {\n  con.log('checkNotifications');\n  const url = 'https://kissanimelist.firebaseio.com/Data2/Notification/Current.json';\n  const response = await api.request.xhr('GET', url);\n  const current = parseInt(JSON.parse(response.responseText));\n  if (Number.isNaN(current)) con.error('Could not read current Notification number');\n\n  con.log('Current Notification', current);\n  const last = parseInt(await api.storage.get('firebaseNotification'));\n  const next = last + 1;\n\n  if (typeof last === 'undefined' || Number.isNaN(last)) {\n    api.storage.set('firebaseNotification', current);\n    return;\n  }\n\n  if (current < next) {\n    con.log('No new notifications');\n\n    return;\n  }\n\n  const notificationUrl = `https://kissanimelist.firebaseio.com/Data2/Notification/list/N${next}.json`;\n  const resNotification = await api.request.xhr('GET', notificationUrl);\n\n  if (!resNotification) return;\n\n  const message = JSON.parse(resNotification.responseText);\n  if (!message) {\n    con.info('Notification empty', resNotification.responseText);\n    api.storage.set('firebaseNotification', next).then(function () {\n      checkNotifications();\n    });\n\n    return;\n  }\n\n  j.$(document).ready(function () {\n    const flashm = utils.flashm(\n      `<div style=\"text-align: left;\">${message}</div><button class=\"okChangelog\" style=\"background-color: transparent; border: none; color: rgb(255,64,129);margin-top: 10px;cursor: pointer;\">Close</button>`,\n      { permanent: true, position: 'top' },\n    );\n    flashm.find('.okChangelog').click(function () {\n      flashm.remove();\n      api.storage.set('firebaseNotification', next).then(function () {\n        checkNotifications();\n      });\n    });\n  });\n}\n","/** An error emitted by Sentry SDKs and related utilities. */\nclass SentryError extends Error {\n  /** Display name of this error instance. */\n\n   constructor( message, logLevel = 'warn') {\n    super(message);this.message = message;;\n\n    this.name = new.target.prototype.constructor.name;\n    // This sets the prototype to be `Error`, not `SentryError`. It's unclear why we do this, but commenting this line\n    // out causes various (seemingly totally unrelated) playwright tests consistently time out. FYI, this makes\n    // instances of `SentryError` fail `obj instanceof SentryError` checks.\n    Object.setPrototypeOf(this, new.target.prototype);\n    this.logLevel = logLevel;\n  }\n}\n\nexport { SentryError };\n//# sourceMappingURL=error.js.map\n","// eslint-disable-next-line @typescript-eslint/unbound-method\nconst objectToString = Object.prototype.toString;\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {@link isError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isError(wat) {\n  switch (objectToString.call(wat)) {\n    case '[object Error]':\n    case '[object Exception]':\n    case '[object DOMException]':\n      return true;\n    default:\n      return isInstanceOf(wat, Error);\n  }\n}\n/**\n * Checks whether given value is an instance of the given built-in class.\n *\n * @param wat The value to be checked\n * @param className\n * @returns A boolean representing the result.\n */\nfunction isBuiltin(wat, className) {\n  return objectToString.call(wat) === `[object ${className}]`;\n}\n\n/**\n * Checks whether given value's type is ErrorEvent\n * {@link isErrorEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isErrorEvent(wat) {\n  return isBuiltin(wat, 'ErrorEvent');\n}\n\n/**\n * Checks whether given value's type is DOMError\n * {@link isDOMError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMError(wat) {\n  return isBuiltin(wat, 'DOMError');\n}\n\n/**\n * Checks whether given value's type is DOMException\n * {@link isDOMException}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMException(wat) {\n  return isBuiltin(wat, 'DOMException');\n}\n\n/**\n * Checks whether given value's type is a string\n * {@link isString}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isString(wat) {\n  return isBuiltin(wat, 'String');\n}\n\n/**\n * Checks whether given value is a primitive (undefined, null, number, boolean, string, bigint, symbol)\n * {@link isPrimitive}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPrimitive(wat) {\n  return wat === null || (typeof wat !== 'object' && typeof wat !== 'function');\n}\n\n/**\n * Checks whether given value's type is an object literal\n * {@link isPlainObject}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPlainObject(wat) {\n  return isBuiltin(wat, 'Object');\n}\n\n/**\n * Checks whether given value's type is an Event instance\n * {@link isEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isEvent(wat) {\n  return typeof Event !== 'undefined' && isInstanceOf(wat, Event);\n}\n\n/**\n * Checks whether given value's type is an Element instance\n * {@link isElement}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isElement(wat) {\n  return typeof Element !== 'undefined' && isInstanceOf(wat, Element);\n}\n\n/**\n * Checks whether given value's type is an regexp\n * {@link isRegExp}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isRegExp(wat) {\n  return isBuiltin(wat, 'RegExp');\n}\n\n/**\n * Checks whether given value has a then function.\n * @param wat A value to be checked.\n */\nfunction isThenable(wat) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return Boolean(wat && wat.then && typeof wat.then === 'function');\n}\n\n/**\n * Checks whether given value's type is a SyntheticEvent\n * {@link isSyntheticEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isSyntheticEvent(wat) {\n  return isPlainObject(wat) && 'nativeEvent' in wat && 'preventDefault' in wat && 'stopPropagation' in wat;\n}\n\n/**\n * Checks whether given value is NaN\n * {@link isNaN}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isNaN(wat) {\n  return typeof wat === 'number' && wat !== wat;\n}\n\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {@link isInstanceOf}.\n *\n * @param wat A value to be checked.\n * @param base A constructor to be used in a check.\n * @returns A boolean representing the result.\n */\nfunction isInstanceOf(wat, base) {\n  try {\n    return wat instanceof base;\n  } catch (_e) {\n    return false;\n  }\n}\n\nexport { isDOMError, isDOMException, isElement, isError, isErrorEvent, isEvent, isInstanceOf, isNaN, isPlainObject, isPrimitive, isRegExp, isString, isSyntheticEvent, isThenable };\n//# sourceMappingURL=is.js.map\n","import { isThenable } from './is.js';\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n\n/** SyncPromise internal states */\nvar States; (function (States) {\n  /** Pending */\n  const PENDING = 0; States[States[\"PENDING\"] = PENDING] = \"PENDING\";\n  /** Resolved / OK */\n  const RESOLVED = 1; States[States[\"RESOLVED\"] = RESOLVED] = \"RESOLVED\";\n  /** Rejected / Error */\n  const REJECTED = 2; States[States[\"REJECTED\"] = REJECTED] = \"REJECTED\";\n})(States || (States = {}));\n\n// Overloads so we can call resolvedSyncPromise without arguments and generic argument\n\n/**\n * Creates a resolved sync promise.\n *\n * @param value the value to resolve the promise with\n * @returns the resolved sync promise\n */\nfunction resolvedSyncPromise(value) {\n  return new SyncPromise(resolve => {\n    resolve(value);\n  });\n}\n\n/**\n * Creates a rejected sync promise.\n *\n * @param value the value to reject the promise with\n * @returns the rejected sync promise\n */\nfunction rejectedSyncPromise(reason) {\n  return new SyncPromise((_, reject) => {\n    reject(reason);\n  });\n}\n\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nclass SyncPromise {\n   __init() {this._state = States.PENDING;}\n   __init2() {this._handlers = [];}\n\n   constructor(\n    executor,\n  ) {;SyncPromise.prototype.__init.call(this);SyncPromise.prototype.__init2.call(this);SyncPromise.prototype.__init3.call(this);SyncPromise.prototype.__init4.call(this);SyncPromise.prototype.__init5.call(this);SyncPromise.prototype.__init6.call(this);\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n\n  /** JSDoc */\n   then(\n    onfulfilled,\n    onrejected,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      this._handlers.push([\n        false,\n        result => {\n          if (!onfulfilled) {\n            // TODO: \\_()_/\n            // TODO: FIXME\n            resolve(result );\n          } else {\n            try {\n              resolve(onfulfilled(result));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n        reason => {\n          if (!onrejected) {\n            reject(reason);\n          } else {\n            try {\n              resolve(onrejected(reason));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n      ]);\n      this._executeHandlers();\n    });\n  }\n\n  /** JSDoc */\n   catch(\n    onrejected,\n  ) {\n    return this.then(val => val, onrejected);\n  }\n\n  /** JSDoc */\n   finally(onfinally) {\n    return new SyncPromise((resolve, reject) => {\n      let val;\n      let isRejected;\n\n      return this.then(\n        value => {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n        reason => {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n      ).then(() => {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve(val );\n      });\n    });\n  }\n\n  /** JSDoc */\n    __init3() {this._resolve = (value) => {\n    this._setResult(States.RESOLVED, value);\n  };}\n\n  /** JSDoc */\n    __init4() {this._reject = (reason) => {\n    this._setResult(States.REJECTED, reason);\n  };}\n\n  /** JSDoc */\n    __init5() {this._setResult = (state, value) => {\n    if (this._state !== States.PENDING) {\n      return;\n    }\n\n    if (isThenable(value)) {\n      void (value ).then(this._resolve, this._reject);\n      return;\n    }\n\n    this._state = state;\n    this._value = value;\n\n    this._executeHandlers();\n  };}\n\n  /** JSDoc */\n    __init6() {this._executeHandlers = () => {\n    if (this._state === States.PENDING) {\n      return;\n    }\n\n    const cachedHandlers = this._handlers.slice();\n    this._handlers = [];\n\n    cachedHandlers.forEach(handler => {\n      if (handler[0]) {\n        return;\n      }\n\n      if (this._state === States.RESOLVED) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        handler[1](this._value );\n      }\n\n      if (this._state === States.REJECTED) {\n        handler[2](this._value);\n      }\n\n      handler[0] = true;\n    });\n  };}\n}\n\nexport { SyncPromise, rejectedSyncPromise, resolvedSyncPromise };\n//# sourceMappingURL=syncpromise.js.map\n","import { SentryError } from './error.js';\n\n/** Regular expression used to parse a Dsn. */\nconst DSN_REGEX = /^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+)?)?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;\n\nfunction isValidProtocol(protocol) {\n  return protocol === 'http' || protocol === 'https';\n}\n\n/**\n * Renders the string representation of this Dsn.\n *\n * By default, this will render the public representation without the password\n * component. To get the deprecated private representation, set `withPassword`\n * to true.\n *\n * @param withPassword When set to true, the password will be included.\n */\nfunction dsnToString(dsn, withPassword = false) {\n  const { host, path, pass, port, projectId, protocol, publicKey } = dsn;\n  return (\n    `${protocol}://${publicKey}${withPassword && pass ? `:${pass}` : ''}` +\n    `@${host}${port ? `:${port}` : ''}/${path ? `${path}/` : path}${projectId}`\n  );\n}\n\n/**\n * Parses a Dsn from a given string.\n *\n * @param str A Dsn as string\n * @returns Dsn as DsnComponents\n */\nfunction dsnFromString(str) {\n  const match = DSN_REGEX.exec(str);\n\n  if (!match) {\n    throw new SentryError(`Invalid Sentry Dsn: ${str}`);\n  }\n\n  const [protocol, publicKey, pass = '', host, port = '', lastPath] = match.slice(1);\n  let path = '';\n  let projectId = lastPath;\n\n  const split = projectId.split('/');\n  if (split.length > 1) {\n    path = split.slice(0, -1).join('/');\n    projectId = split.pop() ;\n  }\n\n  if (projectId) {\n    const projectMatch = projectId.match(/^\\d+/);\n    if (projectMatch) {\n      projectId = projectMatch[0];\n    }\n  }\n\n  return dsnFromComponents({ host, pass, path, projectId, port, protocol: protocol , publicKey });\n}\n\nfunction dsnFromComponents(components) {\n  return {\n    protocol: components.protocol,\n    publicKey: components.publicKey || '',\n    pass: components.pass || '',\n    host: components.host,\n    port: components.port || '',\n    path: components.path || '',\n    projectId: components.projectId,\n  };\n}\n\nfunction validateDsn(dsn) {\n  if (!(typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n    return;\n  }\n\n  const { port, projectId, protocol } = dsn;\n\n  const requiredComponents = ['protocol', 'publicKey', 'host', 'projectId'];\n  requiredComponents.forEach(component => {\n    if (!dsn[component]) {\n      throw new SentryError(`Invalid Sentry Dsn: ${component} missing`);\n    }\n  });\n\n  if (!projectId.match(/^\\d+$/)) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid projectId ${projectId}`);\n  }\n\n  if (!isValidProtocol(protocol)) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid protocol ${protocol}`);\n  }\n\n  if (port && isNaN(parseInt(port, 10))) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid port ${port}`);\n  }\n\n  return true;\n}\n\n/** The Sentry Dsn, identifying a Sentry instance and project. */\nfunction makeDsn(from) {\n  const components = typeof from === 'string' ? dsnFromString(from) : dsnFromComponents(from);\n  validateDsn(components);\n  return components;\n}\n\nexport { dsnFromString, dsnToString, makeDsn };\n//# sourceMappingURL=dsn.js.map\n","import { isString } from './is.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\nconst DEFAULT_MAX_STRING_LENGTH = 80;\n\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nfunction htmlTreeAsString(\n  elem,\n  options = {},\n) {\n\n  // try/catch both:\n  // - accessing event.target (see getsentry/raven-js#838, #768)\n  // - `htmlTreeAsString` because it's complex, and just accessing the DOM incorrectly\n  // - can throw an exception in some circumstances.\n  try {\n    let currentElem = elem ;\n    const MAX_TRAVERSE_HEIGHT = 5;\n    const out = [];\n    let height = 0;\n    let len = 0;\n    const separator = ' > ';\n    const sepLength = separator.length;\n    let nextStr;\n    const keyAttrs = Array.isArray(options) ? options : options.keyAttrs;\n    const maxStringLength = (!Array.isArray(options) && options.maxStringLength) || DEFAULT_MAX_STRING_LENGTH;\n\n    while (currentElem && height++ < MAX_TRAVERSE_HEIGHT) {\n      nextStr = _htmlElementAsString(currentElem, keyAttrs);\n      // bail out if\n      // - nextStr is the 'html' element\n      // - the length of the string that would be created exceeds maxStringLength\n      //   (ignore this limit if we are on the first iteration)\n      if (nextStr === 'html' || (height > 1 && len + out.length * sepLength + nextStr.length >= maxStringLength)) {\n        break;\n      }\n\n      out.push(nextStr);\n\n      len += nextStr.length;\n      currentElem = currentElem.parentNode;\n    }\n\n    return out.reverse().join(separator);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nfunction _htmlElementAsString(el, keyAttrs) {\n  const elem = el\n\n;\n\n  const out = [];\n  let className;\n  let classes;\n  let key;\n  let attr;\n  let i;\n\n  if (!elem || !elem.tagName) {\n    return '';\n  }\n\n  out.push(elem.tagName.toLowerCase());\n\n  // Pairs of attribute keys defined in `serializeAttribute` and their values on element.\n  const keyAttrPairs =\n    keyAttrs && keyAttrs.length\n      ? keyAttrs.filter(keyAttr => elem.getAttribute(keyAttr)).map(keyAttr => [keyAttr, elem.getAttribute(keyAttr)])\n      : null;\n\n  if (keyAttrPairs && keyAttrPairs.length) {\n    keyAttrPairs.forEach(keyAttrPair => {\n      out.push(`[${keyAttrPair[0]}=\"${keyAttrPair[1]}\"]`);\n    });\n  } else {\n    if (elem.id) {\n      out.push(`#${elem.id}`);\n    }\n\n    // eslint-disable-next-line prefer-const\n    className = elem.className;\n    if (className && isString(className)) {\n      classes = className.split(/\\s+/);\n      for (i = 0; i < classes.length; i++) {\n        out.push(`.${classes[i]}`);\n      }\n    }\n  }\n  const allowedAttrs = ['type', 'name', 'title', 'alt'];\n  for (i = 0; i < allowedAttrs.length; i++) {\n    key = allowedAttrs[i];\n    attr = elem.getAttribute(key);\n    if (attr) {\n      out.push(`[${key}=\"${attr}\"]`);\n    }\n  }\n  return out.join('');\n}\n\n/**\n * A safe form of location.href\n */\nfunction getLocationHref() {\n  try {\n    return WINDOW.document.location.href;\n  } catch (oO) {\n    return '';\n  }\n}\n\n/**\n * Gets a DOM element by using document.querySelector.\n *\n * This wrapper will first check for the existance of the function before\n * actually calling it so that we don't have to take care of this check,\n * every time we want to access the DOM.\n *\n * Reason: DOM/querySelector is not available in all environments.\n *\n * We have to cast to any because utils can be consumed by a variety of environments,\n * and we don't want to break TS users. If you know what element will be selected by\n * `document.querySelector`, specify it as part of the generic call. For example,\n * `const element = getDomElement<Element>('selector');`\n *\n * @param selector the selector string passed on to document.querySelector\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getDomElement(selector) {\n  if (WINDOW.document && WINDOW.document.querySelector) {\n    return WINDOW.document.querySelector(selector) ;\n  }\n  return null;\n}\n\nexport { getDomElement, getLocationHref, htmlTreeAsString };\n//# sourceMappingURL=browser.js.map\n","import { isString, isRegExp } from './is.js';\n\n/**\n * Truncates given string to the maximum characters count\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string (0 = unlimited)\n * @returns string Encoded\n */\nfunction truncate(str, max = 0) {\n  if (typeof str !== 'string' || max === 0) {\n    return str;\n  }\n  return str.length <= max ? str : `${str.substr(0, max)}...`;\n}\n\n/**\n * This is basically just `trim_line` from\n * https://github.com/getsentry/sentry/blob/master/src/sentry/lang/javascript/processor.py#L67\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string\n * @returns string Encoded\n */\nfunction snipLine(line, colno) {\n  let newLine = line;\n  const lineLength = newLine.length;\n  if (lineLength <= 150) {\n    return newLine;\n  }\n  if (colno > lineLength) {\n    // eslint-disable-next-line no-param-reassign\n    colno = lineLength;\n  }\n\n  let start = Math.max(colno - 60, 0);\n  if (start < 5) {\n    start = 0;\n  }\n\n  let end = Math.min(start + 140, lineLength);\n  if (end > lineLength - 5) {\n    end = lineLength;\n  }\n  if (end === lineLength) {\n    start = Math.max(end - 140, 0);\n  }\n\n  newLine = newLine.slice(start, end);\n  if (start > 0) {\n    newLine = `'{snip} ${newLine}`;\n  }\n  if (end < lineLength) {\n    newLine += ' {snip}';\n  }\n\n  return newLine;\n}\n\n/**\n * Join values in array\n * @param input array of values to be joined together\n * @param delimiter string to be placed in-between values\n * @returns Joined values\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction safeJoin(input, delimiter) {\n  if (!Array.isArray(input)) {\n    return '';\n  }\n\n  const output = [];\n  // eslint-disable-next-line @typescript-eslint/prefer-for-of\n  for (let i = 0; i < input.length; i++) {\n    const value = input[i];\n    try {\n      output.push(String(value));\n    } catch (e) {\n      output.push('[value cannot be serialized]');\n    }\n  }\n\n  return output.join(delimiter);\n}\n\n/**\n * Checks if the given value matches a regex or string\n *\n * @param value The string to test\n * @param pattern Either a regex or a string against which `value` will be matched\n * @param requireExactStringMatch If true, `value` must match `pattern` exactly. If false, `value` will match\n * `pattern` if it contains `pattern`. Only applies to string-type patterns.\n */\nfunction isMatchingPattern(\n  value,\n  pattern,\n  requireExactStringMatch = false,\n) {\n  if (!isString(value)) {\n    return false;\n  }\n\n  if (isRegExp(pattern)) {\n    return pattern.test(value);\n  }\n  if (isString(pattern)) {\n    return requireExactStringMatch ? value === pattern : value.includes(pattern);\n  }\n\n  return false;\n}\n\n/**\n * Test the given string against an array of strings and regexes. By default, string matching is done on a\n * substring-inclusion basis rather than a strict equality basis\n *\n * @param testString The string to test\n * @param patterns The patterns against which to test the string\n * @param requireExactStringMatch If true, `testString` must match one of the given string patterns exactly in order to\n * count. If false, `testString` will match a string pattern if it contains that pattern.\n * @returns\n */\nfunction stringMatchesSomePattern(\n  testString,\n  patterns = [],\n  requireExactStringMatch = false,\n) {\n  return patterns.some(pattern => isMatchingPattern(testString, pattern, requireExactStringMatch));\n}\n\n/**\n * Given a string, escape characters which have meaning in the regex grammar, such that the result is safe to feed to\n * `new RegExp()`.\n *\n * Based on https://github.com/sindresorhus/escape-string-regexp. Vendored to a) reduce the size by skipping the runtime\n * type-checking, and b) ensure it gets down-compiled for old versions of Node (the published package only supports Node\n * 12+).\n *\n * @param regexString The string to escape\n * @returns An version of the string with all special regex characters escaped\n */\nfunction escapeStringForRegex(regexString) {\n  // escape the hyphen separately so we can also replace it with a unicode literal hyphen, to avoid the problems\n  // discussed in https://github.com/sindresorhus/escape-string-regexp/issues/20.\n  return regexString.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&').replace(/-/g, '\\\\x2d');\n}\n\nexport { escapeStringForRegex, isMatchingPattern, safeJoin, snipLine, stringMatchesSomePattern, truncate };\n//# sourceMappingURL=string.js.map\n","import { htmlTreeAsString } from './browser.js';\nimport { isError, isEvent, isInstanceOf, isElement, isPlainObject, isPrimitive } from './is.js';\nimport { truncate } from './string.js';\n\n/**\n * Replace a method in an object with a wrapped version of itself.\n *\n * @param source An object that contains a method to be wrapped.\n * @param name The name of the method to be wrapped.\n * @param replacementFactory A higher-order function that takes the original version of the given method and returns a\n * wrapped version. Note: The function returned by `replacementFactory` needs to be a non-arrow function, in order to\n * preserve the correct value of `this`, and the original method must be called using `origMethod.call(this, <other\n * args>)` or `origMethod.apply(this, [<other args>])` (rather than being called directly), again to preserve `this`.\n * @returns void\n */\nfunction fill(source, name, replacementFactory) {\n  if (!(name in source)) {\n    return;\n  }\n\n  const original = source[name] ;\n  const wrapped = replacementFactory(original) ;\n\n  // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work\n  // otherwise it'll throw \"TypeError: Object.defineProperties called on non-object\"\n  if (typeof wrapped === 'function') {\n    try {\n      markFunctionWrapped(wrapped, original);\n    } catch (_Oo) {\n      // This can throw if multiple fill happens on a global object like XMLHttpRequest\n      // Fixes https://github.com/getsentry/sentry-javascript/issues/2043\n    }\n  }\n\n  source[name] = wrapped;\n}\n\n/**\n * Defines a non-enumerable property on the given object.\n *\n * @param obj The object on which to set the property\n * @param name The name of the property to be set\n * @param value The value to which to set the property\n */\nfunction addNonEnumerableProperty(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    // enumerable: false, // the default, so we can save on bundle size by not explicitly setting it\n    value: value,\n    writable: true,\n    configurable: true,\n  });\n}\n\n/**\n * Remembers the original function on the wrapped function and\n * patches up the prototype.\n *\n * @param wrapped the wrapper function\n * @param original the original function that gets wrapped\n */\nfunction markFunctionWrapped(wrapped, original) {\n  const proto = original.prototype || {};\n  wrapped.prototype = original.prototype = proto;\n  addNonEnumerableProperty(wrapped, '__sentry_original__', original);\n}\n\n/**\n * This extracts the original function if available.  See\n * `markFunctionWrapped` for more information.\n *\n * @param func the function to unwrap\n * @returns the unwrapped version of the function if available.\n */\nfunction getOriginalFunction(func) {\n  return func.__sentry_original__;\n}\n\n/**\n * Encodes given object into url-friendly format\n *\n * @param object An object that contains serializable values\n * @returns string Encoded\n */\nfunction urlEncode(object) {\n  return Object.keys(object)\n    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(object[key])}`)\n    .join('&');\n}\n\n/**\n * Transforms any `Error` or `Event` into a plain object with all of their enumerable properties, and some of their\n * non-enumerable properties attached.\n *\n * @param value Initial source that we have to transform in order for it to be usable by the serializer\n * @returns An Event or Error turned into an object - or the value argurment itself, when value is neither an Event nor\n *  an Error.\n */\nfunction convertToPlainObject(\n  value,\n)\n\n {\n  if (isError(value)) {\n    return {\n      message: value.message,\n      name: value.name,\n      stack: value.stack,\n      ...getOwnProperties(value),\n    };\n  } else if (isEvent(value)) {\n    const newObj\n\n = {\n      type: value.type,\n      target: serializeEventTarget(value.target),\n      currentTarget: serializeEventTarget(value.currentTarget),\n      ...getOwnProperties(value),\n    };\n\n    if (typeof CustomEvent !== 'undefined' && isInstanceOf(value, CustomEvent)) {\n      newObj.detail = value.detail;\n    }\n\n    return newObj;\n  } else {\n    return value;\n  }\n}\n\n/** Creates a string representation of the target of an `Event` object */\nfunction serializeEventTarget(target) {\n  try {\n    return isElement(target) ? htmlTreeAsString(target) : Object.prototype.toString.call(target);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/** Filters out all but an object's own properties */\nfunction getOwnProperties(obj) {\n  if (typeof obj === 'object' && obj !== null) {\n    const extractedProps = {};\n    for (const property in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, property)) {\n        extractedProps[property] = (obj )[property];\n      }\n    }\n    return extractedProps;\n  } else {\n    return {};\n  }\n}\n\n/**\n * Given any captured exception, extract its keys and create a sorted\n * and truncated list that will be used inside the event message.\n * eg. `Non-error exception captured with keys: foo, bar, baz`\n */\nfunction extractExceptionKeysForMessage(exception, maxLength = 40) {\n  const keys = Object.keys(convertToPlainObject(exception));\n  keys.sort();\n\n  if (!keys.length) {\n    return '[object has no keys]';\n  }\n\n  if (keys[0].length >= maxLength) {\n    return truncate(keys[0], maxLength);\n  }\n\n  for (let includedKeys = keys.length; includedKeys > 0; includedKeys--) {\n    const serialized = keys.slice(0, includedKeys).join(', ');\n    if (serialized.length > maxLength) {\n      continue;\n    }\n    if (includedKeys === keys.length) {\n      return serialized;\n    }\n    return truncate(serialized, maxLength);\n  }\n\n  return '';\n}\n\n/**\n * Given any object, return a new object having removed all fields whose value was `undefined`.\n * Works recursively on objects and arrays.\n *\n * Attention: This function keeps circular references in the returned object.\n */\nfunction dropUndefinedKeys(inputValue) {\n  // This map keeps track of what already visited nodes map to.\n  // Our Set - based memoBuilder doesn't work here because we want to the output object to have the same circular\n  // references as the input object.\n  const memoizationMap = new Map();\n\n  // This function just proxies `_dropUndefinedKeys` to keep the `memoBuilder` out of this function's API\n  return _dropUndefinedKeys(inputValue, memoizationMap);\n}\n\nfunction _dropUndefinedKeys(inputValue, memoizationMap) {\n  if (isPlainObject(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the object it was mapped to in the new object\n    const memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    const returnValue = {};\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    for (const key of Object.keys(inputValue)) {\n      if (typeof inputValue[key] !== 'undefined') {\n        returnValue[key] = _dropUndefinedKeys(inputValue[key], memoizationMap);\n      }\n    }\n\n    return returnValue ;\n  }\n\n  if (Array.isArray(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the array it was mapped to in the new object\n    const memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    const returnValue = [];\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    inputValue.forEach((item) => {\n      returnValue.push(_dropUndefinedKeys(item, memoizationMap));\n    });\n\n    return returnValue ;\n  }\n\n  return inputValue;\n}\n\n/**\n * Ensure that something is an object.\n *\n * Turns `undefined` and `null` into `String`s and all other primitives into instances of their respective wrapper\n * classes (String, Boolean, Number, etc.). Acts as the identity function on non-primitives.\n *\n * @param wat The subject of the objectification\n * @returns A version of `wat` which can safely be used with `Object` class methods\n */\nfunction objectify(wat) {\n  let objectified;\n  switch (true) {\n    case wat === undefined || wat === null:\n      objectified = new String(wat);\n      break;\n\n    // Though symbols and bigints do have wrapper classes (`Symbol` and `BigInt`, respectively), for whatever reason\n    // those classes don't have constructors which can be used with the `new` keyword. We therefore need to cast each as\n    // an object in order to wrap it.\n    case typeof wat === 'symbol' || typeof wat === 'bigint':\n      objectified = Object(wat);\n      break;\n\n    // this will catch the remaining primitives: `String`, `Number`, and `Boolean`\n    case isPrimitive(wat):\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      objectified = new (wat ).constructor(wat);\n      break;\n\n    // by process of elimination, at this point we know that `wat` must already be an object\n    default:\n      objectified = wat;\n      break;\n  }\n  return objectified;\n}\n\nexport { addNonEnumerableProperty, convertToPlainObject, dropUndefinedKeys, extractExceptionKeysForMessage, fill, getOriginalFunction, markFunctionWrapped, objectify, urlEncode };\n//# sourceMappingURL=object.js.map\n","import { _optionalChain } from './buildPolyfills';\n\nconst STACKTRACE_LIMIT = 50;\n\n/**\n * Creates a stack parser with the supplied line parsers\n *\n * StackFrames are returned in the correct order for Sentry Exception\n * frames and with Sentry SDK internal frames removed from the top and bottom\n *\n */\nfunction createStackParser(...parsers) {\n  const sortedParsers = parsers.sort((a, b) => a[0] - b[0]).map(p => p[1]);\n\n  return (stack, skipFirst = 0) => {\n    const frames = [];\n\n    for (const line of stack.split('\\n').slice(skipFirst)) {\n      // https://github.com/getsentry/sentry-javascript/issues/5459\n      // Remove webpack (error: *) wrappers\n      const cleanedLine = line.replace(/\\(error: (.*)\\)/, '$1');\n\n      for (const parser of sortedParsers) {\n        const frame = parser(cleanedLine);\n\n        if (frame) {\n          frames.push(frame);\n          break;\n        }\n      }\n    }\n\n    return stripSentryFramesAndReverse(frames);\n  };\n}\n\n/**\n * Gets a stack parser implementation from Options.stackParser\n * @see Options\n *\n * If options contains an array of line parsers, it is converted into a parser\n */\nfunction stackParserFromStackParserOptions(stackParser) {\n  if (Array.isArray(stackParser)) {\n    return createStackParser(...stackParser);\n  }\n  return stackParser;\n}\n\n/**\n * @hidden\n */\nfunction stripSentryFramesAndReverse(stack) {\n  if (!stack.length) {\n    return [];\n  }\n\n  let localStack = stack;\n\n  const firstFrameFunction = localStack[0].function || '';\n  const lastFrameFunction = localStack[localStack.length - 1].function || '';\n\n  // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)\n  if (firstFrameFunction.indexOf('captureMessage') !== -1 || firstFrameFunction.indexOf('captureException') !== -1) {\n    localStack = localStack.slice(1);\n  }\n\n  // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)\n  if (lastFrameFunction.indexOf('sentryWrapped') !== -1) {\n    localStack = localStack.slice(0, -1);\n  }\n\n  // The frame where the crash happened, should be the last entry in the array\n  return localStack\n    .slice(0, STACKTRACE_LIMIT)\n    .map(frame => ({\n      ...frame,\n      filename: frame.filename || localStack[0].filename,\n      function: frame.function || '?',\n    }))\n    .reverse();\n}\n\nconst defaultFunctionName = '<anonymous>';\n\n/**\n * Safely extract function name from itself\n */\nfunction getFunctionName(fn) {\n  try {\n    if (!fn || typeof fn !== 'function') {\n      return defaultFunctionName;\n    }\n    return fn.name || defaultFunctionName;\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    return defaultFunctionName;\n  }\n}\n\n// eslint-disable-next-line complexity\nfunction node(getModule) {\n  const FILENAME_MATCH = /^\\s*[-]{4,}$/;\n  const FULL_MATCH = /at (?:async )?(?:(.+?)\\s+\\()?(?:(.+):(\\d+):(\\d+)?|([^)]+))\\)?/;\n\n  // eslint-disable-next-line complexity\n  return (line) => {\n    if (line.match(FILENAME_MATCH)) {\n      return {\n        filename: line,\n      };\n    }\n\n    const lineMatch = line.match(FULL_MATCH);\n    if (!lineMatch) {\n      return undefined;\n    }\n\n    let object;\n    let method;\n    let functionName;\n    let typeName;\n    let methodName;\n\n    if (lineMatch[1]) {\n      functionName = lineMatch[1];\n\n      let methodStart = functionName.lastIndexOf('.');\n      if (functionName[methodStart - 1] === '.') {\n        methodStart--;\n      }\n\n      if (methodStart > 0) {\n        object = functionName.substr(0, methodStart);\n        method = functionName.substr(methodStart + 1);\n        const objectEnd = object.indexOf('.Module');\n        if (objectEnd > 0) {\n          functionName = functionName.substr(objectEnd + 1);\n          object = object.substr(0, objectEnd);\n        }\n      }\n      typeName = undefined;\n    }\n\n    if (method) {\n      typeName = object;\n      methodName = method;\n    }\n\n    if (method === '<anonymous>') {\n      methodName = undefined;\n      functionName = undefined;\n    }\n\n    if (functionName === undefined) {\n      methodName = methodName || '<anonymous>';\n      functionName = typeName ? `${typeName}.${methodName}` : methodName;\n    }\n\n    const filename = _optionalChain([lineMatch, 'access', _ => _[2], 'optionalAccess', _2 => _2.startsWith, 'call', _3 => _3('file://')]) ? lineMatch[2].substr(7) : lineMatch[2];\n    const isNative = lineMatch[5] === 'native';\n    const isInternal =\n      isNative || (filename && !filename.startsWith('/') && !filename.startsWith('.') && filename.indexOf(':\\\\') !== 1);\n\n    // in_app is all that's not an internal Node function or a module within node_modules\n    // note that isNative appears to return true even for node core libraries\n    // see https://github.com/getsentry/raven-node/issues/176\n    const in_app = !isInternal && filename !== undefined && !filename.includes('node_modules/');\n\n    return {\n      filename,\n      module: _optionalChain([getModule, 'optionalCall', _4 => _4(filename)]),\n      function: functionName,\n      lineno: parseInt(lineMatch[3], 10) || undefined,\n      colno: parseInt(lineMatch[4], 10) || undefined,\n      in_app,\n    };\n  };\n}\n\n/**\n * Node.js stack line parser\n *\n * This is in @sentry/utils so it can be used from the Electron SDK in the browser for when `nodeIntegration == true`.\n * This allows it to be used without referencing or importing any node specific code which causes bundlers to complain\n */\nfunction nodeStackLineParser(getModule) {\n  return [90, node(getModule)];\n}\n\nexport { createStackParser, getFunctionName, nodeStackLineParser, stackParserFromStackParserOptions, stripSentryFramesAndReverse };\n//# sourceMappingURL=stacktrace.js.map\n","import { isNaN, isSyntheticEvent } from './is.js';\nimport { memoBuilder } from './memo.js';\nimport { convertToPlainObject } from './object.js';\nimport { getFunctionName } from './stacktrace.js';\n\n/**\n * Recursively normalizes the given object.\n *\n * - Creates a copy to prevent original input mutation\n * - Skips non-enumerable properties\n * - When stringifying, calls `toJSON` if implemented\n * - Removes circular references\n * - Translates non-serializable values (`undefined`/`NaN`/functions) to serializable format\n * - Translates known global objects/classes to a string representations\n * - Takes care of `Error` object serialization\n * - Optionally limits depth of final output\n * - Optionally limits number of properties/elements included in any single object/array\n *\n * @param input The object to be normalized.\n * @param depth The max depth to which to normalize the object. (Anything deeper stringified whole.)\n * @param maxProperties The max number of elements or properties to be included in any single array or\n * object in the normallized output.\n * @returns A normalized version of the object, or `\"**non-serializable**\"` if any errors are thrown during normalization.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction normalize(input, depth = +Infinity, maxProperties = +Infinity) {\n  try {\n    // since we're at the outermost level, we don't provide a key\n    return visit('', input, depth, maxProperties);\n  } catch (err) {\n    return { ERROR: `**non-serializable** (${err})` };\n  }\n}\n\n/** JSDoc */\nfunction normalizeToSize(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  object,\n  // Default Node.js REPL depth\n  depth = 3,\n  // 100kB, as 200kB is max payload size, so half sounds reasonable\n  maxSize = 100 * 1024,\n) {\n  const normalized = normalize(object, depth);\n\n  if (jsonSize(normalized) > maxSize) {\n    return normalizeToSize(object, depth - 1, maxSize);\n  }\n\n  return normalized ;\n}\n\n/**\n * Visits a node to perform normalization on it\n *\n * @param key The key corresponding to the given node\n * @param value The node to be visited\n * @param depth Optional number indicating the maximum recursion depth\n * @param maxProperties Optional maximum number of properties/elements included in any single object/array\n * @param memo Optional Memo class handling decycling\n */\nfunction visit(\n  key,\n  value,\n  depth = +Infinity,\n  maxProperties = +Infinity,\n  memo = memoBuilder(),\n) {\n  const [memoize, unmemoize] = memo;\n\n  // Get the simple cases out of the way first\n  if (value === null || (['number', 'boolean', 'string'].includes(typeof value) && !isNaN(value))) {\n    return value ;\n  }\n\n  const stringified = stringifyValue(key, value);\n\n  // Anything we could potentially dig into more (objects or arrays) will have come back as `\"[object XXXX]\"`.\n  // Everything else will have already been serialized, so if we don't see that pattern, we're done.\n  if (!stringified.startsWith('[object ')) {\n    return stringified;\n  }\n\n  // From here on, we can assert that `value` is either an object or an array.\n\n  // Do not normalize objects that we know have already been normalized. As a general rule, the\n  // \"__sentry_skip_normalization__\" property should only be used sparingly and only should only be set on objects that\n  // have already been normalized.\n  if ((value )['__sentry_skip_normalization__']) {\n    return value ;\n  }\n\n  // We're also done if we've reached the max depth\n  if (depth === 0) {\n    // At this point we know `serialized` is a string of the form `\"[object XXXX]\"`. Clean it up so it's just `\"[XXXX]\"`.\n    return stringified.replace('object ', '');\n  }\n\n  // If we've already visited this branch, bail out, as it's circular reference. If not, note that we're seeing it now.\n  if (memoize(value)) {\n    return '[Circular ~]';\n  }\n\n  // If the value has a `toJSON` method, we call it to extract more information\n  const valueWithToJSON = value ;\n  if (valueWithToJSON && typeof valueWithToJSON.toJSON === 'function') {\n    try {\n      const jsonValue = valueWithToJSON.toJSON();\n      // We need to normalize the return value of `.toJSON()` in case it has circular references\n      return visit('', jsonValue, depth - 1, maxProperties, memo);\n    } catch (err) {\n      // pass (The built-in `toJSON` failed, but we can still try to do it ourselves)\n    }\n  }\n\n  // At this point we know we either have an object or an array, we haven't seen it before, and we're going to recurse\n  // because we haven't yet reached the max depth. Create an accumulator to hold the results of visiting each\n  // property/entry, and keep track of the number of items we add to it.\n  const normalized = (Array.isArray(value) ? [] : {}) ;\n  let numAdded = 0;\n\n  // Before we begin, convert`Error` and`Event` instances into plain objects, since some of each of their relevant\n  // properties are non-enumerable and otherwise would get missed.\n  const visitable = convertToPlainObject(value );\n\n  for (const visitKey in visitable) {\n    // Avoid iterating over fields in the prototype if they've somehow been exposed to enumeration.\n    if (!Object.prototype.hasOwnProperty.call(visitable, visitKey)) {\n      continue;\n    }\n\n    if (numAdded >= maxProperties) {\n      normalized[visitKey] = '[MaxProperties ~]';\n      break;\n    }\n\n    // Recursively visit all the child nodes\n    const visitValue = visitable[visitKey];\n    normalized[visitKey] = visit(visitKey, visitValue, depth - 1, maxProperties, memo);\n\n    numAdded++;\n  }\n\n  // Once we've visited all the branches, remove the parent from memo storage\n  unmemoize(value);\n\n  // Return accumulated values\n  return normalized;\n}\n\n/**\n * Stringify the given value. Handles various known special values and types.\n *\n * Not meant to be used on simple primitives which already have a string representation, as it will, for example, turn\n * the number 1231 into \"[Object Number]\", nor on `null`, as it will throw.\n *\n * @param value The value to stringify\n * @returns A stringified representation of the given value\n */\nfunction stringifyValue(\n  key,\n  // this type is a tiny bit of a cheat, since this function does handle NaN (which is technically a number), but for\n  // our internal use, it'll do\n  value,\n) {\n  try {\n    if (key === 'domain' && value && typeof value === 'object' && (value )._events) {\n      return '[Domain]';\n    }\n\n    if (key === 'domainEmitter') {\n      return '[DomainEmitter]';\n    }\n\n    // It's safe to use `global`, `window`, and `document` here in this manner, as we are asserting using `typeof` first\n    // which won't throw if they are not present.\n\n    if (typeof global !== 'undefined' && value === global) {\n      return '[Global]';\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    if (typeof window !== 'undefined' && value === window) {\n      return '[Window]';\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    if (typeof document !== 'undefined' && value === document) {\n      return '[Document]';\n    }\n\n    // React's SyntheticEvent thingy\n    if (isSyntheticEvent(value)) {\n      return '[SyntheticEvent]';\n    }\n\n    if (typeof value === 'number' && value !== value) {\n      return '[NaN]';\n    }\n\n    // this catches `undefined` (but not `null`, which is a primitive and can be serialized on its own)\n    if (value === void 0) {\n      return '[undefined]';\n    }\n\n    if (typeof value === 'function') {\n      return `[Function: ${getFunctionName(value)}]`;\n    }\n\n    if (typeof value === 'symbol') {\n      return `[${String(value)}]`;\n    }\n\n    // stringified BigInts are indistinguishable from regular numbers, so we need to label them to avoid confusion\n    if (typeof value === 'bigint') {\n      return `[BigInt: ${String(value)}]`;\n    }\n\n    // Now that we've knocked out all the special cases and the primitives, all we have left are objects. Simply casting\n    // them to strings means that instances of classes which haven't defined their `toStringTag` will just come out as\n    // `\"[object Object]\"`. If we instead look at the constructor's name (which is the same as the name of the class),\n    // we can make sure that only plain objects come out that way.\n    return `[object ${(Object.getPrototypeOf(value) ).constructor.name}]`;\n  } catch (err) {\n    return `**non-serializable** (${err})`;\n  }\n}\n\n/** Calculates bytes size of input string */\nfunction utf8Length(value) {\n  // eslint-disable-next-line no-bitwise\n  return ~-encodeURI(value).split(/%..|./).length;\n}\n\n/** Calculates bytes size of input object */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction jsonSize(value) {\n  return utf8Length(JSON.stringify(value));\n}\n\nexport { normalize, normalizeToSize, visit as walk };\n//# sourceMappingURL=normalize.js.map\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Helper to decycle json objects\n */\nfunction memoBuilder() {\n  const hasWeakSet = typeof WeakSet === 'function';\n  const inner = hasWeakSet ? new WeakSet() : [];\n  function memoize(obj) {\n    if (hasWeakSet) {\n      if (inner.has(obj)) {\n        return true;\n      }\n      inner.add(obj);\n      return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/prefer-for-of\n    for (let i = 0; i < inner.length; i++) {\n      const value = inner[i];\n      if (value === obj) {\n        return true;\n      }\n    }\n    inner.push(obj);\n    return false;\n  }\n\n  function unmemoize(obj) {\n    if (hasWeakSet) {\n      inner.delete(obj);\n    } else {\n      for (let i = 0; i < inner.length; i++) {\n        if (inner[i] === obj) {\n          inner.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n  return [memoize, unmemoize];\n}\n\nexport { memoBuilder };\n//# sourceMappingURL=memo.js.map\n","import { dsnToString } from './dsn.js';\nimport { normalize } from './normalize.js';\nimport { dropUndefinedKeys } from './object.js';\n\n/**\n * Creates an envelope.\n * Make sure to always explicitly provide the generic to this function\n * so that the envelope types resolve correctly.\n */\nfunction createEnvelope(headers, items = []) {\n  return [headers, items] ;\n}\n\n/**\n * Add an item to an envelope.\n * Make sure to always explicitly provide the generic to this function\n * so that the envelope types resolve correctly.\n */\nfunction addItemToEnvelope(envelope, newItem) {\n  const [headers, items] = envelope;\n  return [headers, [...items, newItem]] ;\n}\n\n/**\n * Convenience function to loop through the items and item types of an envelope.\n * (This function was mostly created because working with envelope types is painful at the moment)\n */\nfunction forEachEnvelopeItem(\n  envelope,\n  callback,\n) {\n  const envelopeItems = envelope[1];\n  envelopeItems.forEach((envelopeItem) => {\n    const envelopeItemType = envelopeItem[0].type;\n    callback(envelopeItem, envelopeItemType);\n  });\n}\n\nfunction encodeUTF8(input, textEncoder) {\n  const utf8 = textEncoder || new TextEncoder();\n  return utf8.encode(input);\n}\n\n/**\n * Serializes an envelope.\n */\nfunction serializeEnvelope(envelope, textEncoder) {\n  const [envHeaders, items] = envelope;\n\n  // Initially we construct our envelope as a string and only convert to binary chunks if we encounter binary data\n  let parts = JSON.stringify(envHeaders);\n\n  function append(next) {\n    if (typeof parts === 'string') {\n      parts = typeof next === 'string' ? parts + next : [encodeUTF8(parts, textEncoder), next];\n    } else {\n      parts.push(typeof next === 'string' ? encodeUTF8(next, textEncoder) : next);\n    }\n  }\n\n  for (const item of items) {\n    const [itemHeaders, payload] = item;\n\n    append(`\\n${JSON.stringify(itemHeaders)}\\n`);\n\n    if (typeof payload === 'string' || payload instanceof Uint8Array) {\n      append(payload);\n    } else {\n      let stringifiedPayload;\n      try {\n        stringifiedPayload = JSON.stringify(payload);\n      } catch (e) {\n        // In case, despite all our efforts to keep `payload` circular-dependency-free, `JSON.strinify()` still\n        // fails, we try again after normalizing it again with infinite normalization depth. This of course has a\n        // performance impact but in this case a performance hit is better than throwing.\n        stringifiedPayload = JSON.stringify(normalize(payload));\n      }\n      append(stringifiedPayload);\n    }\n  }\n\n  return typeof parts === 'string' ? parts : concatBuffers(parts);\n}\n\nfunction concatBuffers(buffers) {\n  const totalLength = buffers.reduce((acc, buf) => acc + buf.length, 0);\n\n  const merged = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const buffer of buffers) {\n    merged.set(buffer, offset);\n    offset += buffer.length;\n  }\n\n  return merged;\n}\n\n/**\n * Parses an envelope\n */\nfunction parseEnvelope(\n  env,\n  textEncoder,\n  textDecoder,\n) {\n  let buffer = typeof env === 'string' ? textEncoder.encode(env) : env;\n\n  function readBinary(length) {\n    const bin = buffer.subarray(0, length);\n    // Replace the buffer with the remaining data excluding trailing newline\n    buffer = buffer.subarray(length + 1);\n    return bin;\n  }\n\n  function readJson() {\n    let i = buffer.indexOf(0xa);\n    // If we couldn't find a newline, we must have found the end of the buffer\n    if (i < 0) {\n      i = buffer.length;\n    }\n\n    return JSON.parse(textDecoder.decode(readBinary(i))) ;\n  }\n\n  const envelopeHeader = readJson();\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const items = [];\n\n  while (buffer.length) {\n    const itemHeader = readJson();\n    const binaryLength = typeof itemHeader.length === 'number' ? itemHeader.length : undefined;\n\n    items.push([itemHeader, binaryLength ? readBinary(binaryLength) : readJson()]);\n  }\n\n  return [envelopeHeader, items];\n}\n\n/**\n * Creates attachment envelope items\n */\nfunction createAttachmentEnvelopeItem(\n  attachment,\n  textEncoder,\n) {\n  const buffer = typeof attachment.data === 'string' ? encodeUTF8(attachment.data, textEncoder) : attachment.data;\n\n  return [\n    dropUndefinedKeys({\n      type: 'attachment',\n      length: buffer.length,\n      filename: attachment.filename,\n      content_type: attachment.contentType,\n      attachment_type: attachment.attachmentType,\n    }),\n    buffer,\n  ];\n}\n\nconst ITEM_TYPE_TO_DATA_CATEGORY_MAP = {\n  session: 'session',\n  sessions: 'session',\n  attachment: 'attachment',\n  transaction: 'transaction',\n  event: 'error',\n  client_report: 'internal',\n  user_report: 'default',\n  profile: 'profile',\n  replay_event: 'replay_event',\n  replay_recording: 'replay_recording',\n};\n\n/**\n * Maps the type of an envelope item to a data category.\n */\nfunction envelopeItemTypeToDataCategory(type) {\n  return ITEM_TYPE_TO_DATA_CATEGORY_MAP[type];\n}\n\n/** Extracts the minimal SDK info from from the metadata or an events */\nfunction getSdkMetadataForEnvelopeHeader(metadataOrEvent) {\n  if (!metadataOrEvent || !metadataOrEvent.sdk) {\n    return;\n  }\n  const { name, version } = metadataOrEvent.sdk;\n  return { name, version };\n}\n\n/**\n * Creates event envelope headers, based on event, sdk info and tunnel\n * Note: This function was extracted from the core package to make it available in Replay\n */\nfunction createEventEnvelopeHeaders(\n  event,\n  sdkInfo,\n  tunnel,\n  dsn,\n) {\n  const dynamicSamplingContext = event.sdkProcessingMetadata && event.sdkProcessingMetadata.dynamicSamplingContext;\n\n  return {\n    event_id: event.event_id ,\n    sent_at: new Date().toISOString(),\n    ...(sdkInfo && { sdk: sdkInfo }),\n    ...(!!tunnel && { dsn: dsnToString(dsn) }),\n    ...(event.type === 'transaction' &&\n      dynamicSamplingContext && {\n        trace: dropUndefinedKeys({ ...dynamicSamplingContext }),\n      }),\n  };\n}\n\nexport { addItemToEnvelope, createAttachmentEnvelopeItem, createEnvelope, createEventEnvelopeHeaders, envelopeItemTypeToDataCategory, forEachEnvelopeItem, getSdkMetadataForEnvelopeHeader, parseEnvelope, serializeEnvelope };\n//# sourceMappingURL=envelope.js.map\n","// Intentionally keeping the key broad, as we don't know for sure what rate limit headers get returned from backend\n\nconst DEFAULT_RETRY_AFTER = 60 * 1000; // 60 seconds\n\n/**\n * Extracts Retry-After value from the request header or returns default value\n * @param header string representation of 'Retry-After' header\n * @param now current unix timestamp\n *\n */\nfunction parseRetryAfterHeader(header, now = Date.now()) {\n  const headerDelay = parseInt(`${header}`, 10);\n  if (!isNaN(headerDelay)) {\n    return headerDelay * 1000;\n  }\n\n  const headerDate = Date.parse(`${header}`);\n  if (!isNaN(headerDate)) {\n    return headerDate - now;\n  }\n\n  return DEFAULT_RETRY_AFTER;\n}\n\n/**\n * Gets the time that given category is disabled until for rate limiting\n */\nfunction disabledUntil(limits, category) {\n  return limits[category] || limits.all || 0;\n}\n\n/**\n * Checks if a category is rate limited\n */\nfunction isRateLimited(limits, category, now = Date.now()) {\n  return disabledUntil(limits, category) > now;\n}\n\n/**\n * Update ratelimits from incoming headers.\n * Returns true if headers contains a non-empty rate limiting header.\n */\nfunction updateRateLimits(\n  limits,\n  { statusCode, headers },\n  now = Date.now(),\n) {\n  const updatedRateLimits = {\n    ...limits,\n  };\n\n  // \"The name is case-insensitive.\"\n  // https://developer.mozilla.org/en-US/docs/Web/API/Headers/get\n  const rateLimitHeader = headers && headers['x-sentry-rate-limits'];\n  const retryAfterHeader = headers && headers['retry-after'];\n\n  if (rateLimitHeader) {\n    /**\n     * rate limit headers are of the form\n     *     <header>,<header>,..\n     * where each <header> is of the form\n     *     <retry_after>: <categories>: <scope>: <reason_code>\n     * where\n     *     <retry_after> is a delay in seconds\n     *     <categories> is the event type(s) (error, transaction, etc) being rate limited and is of the form\n     *         <category>;<category>;...\n     *     <scope> is what's being limited (org, project, or key) - ignored by SDK\n     *     <reason_code> is an arbitrary string like \"org_quota\" - ignored by SDK\n     */\n    for (const limit of rateLimitHeader.trim().split(',')) {\n      const [retryAfter, categories] = limit.split(':', 2);\n      const headerDelay = parseInt(retryAfter, 10);\n      const delay = (!isNaN(headerDelay) ? headerDelay : 60) * 1000; // 60sec default\n      if (!categories) {\n        updatedRateLimits.all = now + delay;\n      } else {\n        for (const category of categories.split(';')) {\n          updatedRateLimits[category] = now + delay;\n        }\n      }\n    }\n  } else if (retryAfterHeader) {\n    updatedRateLimits.all = now + parseRetryAfterHeader(retryAfterHeader, now);\n  } else if (statusCode === 429) {\n    updatedRateLimits.all = now + 60 * 1000;\n  }\n\n  return updatedRateLimits;\n}\n\nexport { DEFAULT_RETRY_AFTER, disabledUntil, isRateLimited, parseRetryAfterHeader, updateRateLimits };\n//# sourceMappingURL=ratelimit.js.map\n","import { GLOBAL_OBJ, getGlobalSingleton } from './worldwide.js';\n\n/** Prefix for logging strings */\nconst PREFIX = 'Sentry Logger ';\n\nconst CONSOLE_LEVELS = ['debug', 'info', 'warn', 'error', 'log', 'assert', 'trace'] ;\n\n/**\n * Temporarily disable sentry console instrumentations.\n *\n * @param callback The function to run against the original `console` messages\n * @returns The results of the callback\n */\nfunction consoleSandbox(callback) {\n  if (!('console' in GLOBAL_OBJ)) {\n    return callback();\n  }\n\n  const originalConsole = GLOBAL_OBJ.console ;\n  const wrappedLevels = {};\n\n  // Restore all wrapped console methods\n  CONSOLE_LEVELS.forEach(level => {\n    // TODO(v7): Remove this check as it's only needed for Node 6\n    const originalWrappedFunc =\n      originalConsole[level] && (originalConsole[level] ).__sentry_original__;\n    if (level in originalConsole && originalWrappedFunc) {\n      wrappedLevels[level] = originalConsole[level] ;\n      originalConsole[level] = originalWrappedFunc ;\n    }\n  });\n\n  try {\n    return callback();\n  } finally {\n    // Revert restoration to wrapped state\n    Object.keys(wrappedLevels).forEach(level => {\n      originalConsole[level] = wrappedLevels[level ];\n    });\n  }\n}\n\nfunction makeLogger() {\n  let enabled = false;\n  const logger = {\n    enable: () => {\n      enabled = true;\n    },\n    disable: () => {\n      enabled = false;\n    },\n  };\n\n  if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n    CONSOLE_LEVELS.forEach(name => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      logger[name] = (...args) => {\n        if (enabled) {\n          consoleSandbox(() => {\n            GLOBAL_OBJ.console[name](`${PREFIX}[${name}]:`, ...args);\n          });\n        }\n      };\n    });\n  } else {\n    CONSOLE_LEVELS.forEach(name => {\n      logger[name] = () => undefined;\n    });\n  }\n\n  return logger ;\n}\n\n// Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\nlet logger;\nif ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n  logger = getGlobalSingleton('logger', makeLogger);\n} else {\n  logger = makeLogger();\n}\n\nexport { CONSOLE_LEVELS, consoleSandbox, logger };\n//# sourceMappingURL=logger.js.map\n","import { forEachEnvelopeItem, envelopeItemTypeToDataCategory, isRateLimited, resolvedSyncPromise, createEnvelope, serializeEnvelope, logger, updateRateLimits, SentryError, makePromiseBuffer } from '@sentry/utils';\n\nconst DEFAULT_TRANSPORT_BUFFER_SIZE = 30;\n\n/**\n * Creates an instance of a Sentry `Transport`\n *\n * @param options\n * @param makeRequest\n */\nfunction createTransport(\n  options,\n  makeRequest,\n  buffer = makePromiseBuffer(options.bufferSize || DEFAULT_TRANSPORT_BUFFER_SIZE),\n) {\n  let rateLimits = {};\n\n  const flush = (timeout) => buffer.drain(timeout);\n\n  function send(envelope) {\n    const filteredEnvelopeItems = [];\n\n    // Drop rate limited items from envelope\n    forEachEnvelopeItem(envelope, (item, type) => {\n      const envelopeItemDataCategory = envelopeItemTypeToDataCategory(type);\n      if (isRateLimited(rateLimits, envelopeItemDataCategory)) {\n        const event = getEventForEnvelopeItem(item, type);\n        options.recordDroppedEvent('ratelimit_backoff', envelopeItemDataCategory, event);\n      } else {\n        filteredEnvelopeItems.push(item);\n      }\n    });\n\n    // Skip sending if envelope is empty after filtering out rate limited events\n    if (filteredEnvelopeItems.length === 0) {\n      return resolvedSyncPromise();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const filteredEnvelope = createEnvelope(envelope[0], filteredEnvelopeItems );\n\n    // Creates client report for each item in an envelope\n    const recordEnvelopeLoss = (reason) => {\n      forEachEnvelopeItem(filteredEnvelope, (item, type) => {\n        const event = getEventForEnvelopeItem(item, type);\n        options.recordDroppedEvent(reason, envelopeItemTypeToDataCategory(type), event);\n      });\n    };\n\n    const requestTask = () =>\n      makeRequest({ body: serializeEnvelope(filteredEnvelope, options.textEncoder) }).then(\n        response => {\n          // We don't want to throw on NOK responses, but we want to at least log them\n          if (response.statusCode !== undefined && (response.statusCode < 200 || response.statusCode >= 300)) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Sentry responded with status code ${response.statusCode} to sent event.`);\n          }\n\n          rateLimits = updateRateLimits(rateLimits, response);\n        },\n        error => {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Failed while sending event:', error);\n          recordEnvelopeLoss('network_error');\n        },\n      );\n\n    return buffer.add(requestTask).then(\n      result => result,\n      error => {\n        if (error instanceof SentryError) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Skipped sending event because buffer is full.');\n          recordEnvelopeLoss('queue_overflow');\n          return resolvedSyncPromise();\n        } else {\n          throw error;\n        }\n      },\n    );\n  }\n\n  return {\n    send,\n    flush,\n  };\n}\n\nfunction getEventForEnvelopeItem(item, type) {\n  if (type !== 'event' && type !== 'transaction') {\n    return undefined;\n  }\n\n  return Array.isArray(item) ? (item )[1] : undefined;\n}\n\nexport { DEFAULT_TRANSPORT_BUFFER_SIZE, createTransport };\n//# sourceMappingURL=base.js.map\n","import { SentryError } from './error.js';\nimport { rejectedSyncPromise, SyncPromise, resolvedSyncPromise } from './syncpromise.js';\n\n/**\n * Creates an new PromiseBuffer object with the specified limit\n * @param limit max number of promises that can be stored in the buffer\n */\nfunction makePromiseBuffer(limit) {\n  const buffer = [];\n\n  function isReady() {\n    return limit === undefined || buffer.length < limit;\n  }\n\n  /**\n   * Remove a promise from the queue.\n   *\n   * @param task Can be any PromiseLike<T>\n   * @returns Removed promise.\n   */\n  function remove(task) {\n    return buffer.splice(buffer.indexOf(task), 1)[0];\n  }\n\n  /**\n   * Add a promise (representing an in-flight action) to the queue, and set it to remove itself on fulfillment.\n   *\n   * @param taskProducer A function producing any PromiseLike<T>; In previous versions this used to be `task:\n   *        PromiseLike<T>`, but under that model, Promises were instantly created on the call-site and their executor\n   *        functions therefore ran immediately. Thus, even if the buffer was full, the action still happened. By\n   *        requiring the promise to be wrapped in a function, we can defer promise creation until after the buffer\n   *        limit check.\n   * @returns The original promise.\n   */\n  function add(taskProducer) {\n    if (!isReady()) {\n      return rejectedSyncPromise(new SentryError('Not adding Promise because buffer limit was reached.'));\n    }\n\n    // start the task and add its promise to the queue\n    const task = taskProducer();\n    if (buffer.indexOf(task) === -1) {\n      buffer.push(task);\n    }\n    void task\n      .then(() => remove(task))\n      // Use `then(null, rejectionHandler)` rather than `catch(rejectionHandler)` so that we can use `PromiseLike`\n      // rather than `Promise`. `PromiseLike` doesn't have a `.catch` method, making its polyfill smaller. (ES5 didn't\n      // have promises, so TS has to polyfill when down-compiling.)\n      .then(null, () =>\n        remove(task).then(null, () => {\n          // We have to add another catch here because `remove()` starts a new promise chain.\n        }),\n      );\n    return task;\n  }\n\n  /**\n   * Wait for all promises in the queue to resolve or for timeout to expire, whichever comes first.\n   *\n   * @param timeout The time, in ms, after which to resolve to `false` if the queue is still non-empty. Passing `0` (or\n   * not passing anything) will make the promise wait as long as it takes for the queue to drain before resolving to\n   * `true`.\n   * @returns A promise which will resolve to `true` if the queue is already empty or drains before the timeout, and\n   * `false` otherwise\n   */\n  function drain(timeout) {\n    return new SyncPromise((resolve, reject) => {\n      let counter = buffer.length;\n\n      if (!counter) {\n        return resolve(true);\n      }\n\n      // wait for `timeout` ms and then resolve to `false` (if not cancelled first)\n      const capturedSetTimeout = setTimeout(() => {\n        if (timeout && timeout > 0) {\n          resolve(false);\n        }\n      }, timeout);\n\n      // if all promises resolve in time, cancel the timer and resolve to `true`\n      buffer.forEach(item => {\n        void resolvedSyncPromise(item).then(() => {\n          if (!--counter) {\n            clearTimeout(capturedSetTimeout);\n            resolve(true);\n          }\n        }, reject);\n      });\n    });\n  }\n\n  return {\n    $: buffer,\n    add,\n    drain,\n  };\n}\n\nexport { makePromiseBuffer };\n//# sourceMappingURL=promisebuffer.js.map\n","import { logger } from './logger.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * Tells whether current environment supports ErrorEvent objects\n * {@link supportsErrorEvent}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsErrorEvent() {\n  try {\n    new ErrorEvent('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMError objects\n * {@link supportsDOMError}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMError() {\n  try {\n    // Chrome: VM89:1 Uncaught TypeError: Failed to construct 'DOMError':\n    // 1 argument required, but only 0 present.\n    // @ts-ignore It really needs 1 argument, not 0.\n    new DOMError('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMException objects\n * {@link supportsDOMException}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMException() {\n  try {\n    new DOMException('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports Fetch API\n * {@link supportsFetch}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsFetch() {\n  if (!('fetch' in WINDOW)) {\n    return false;\n  }\n\n  try {\n    new Headers();\n    new Request('http://www.example.com');\n    new Response();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * isNativeFetch checks if the given function is a native implementation of fetch()\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isNativeFetch(func) {\n  return func && /^function fetch\\(\\)\\s+\\{\\s+\\[native code\\]\\s+\\}$/.test(func.toString());\n}\n\n/**\n * Tells whether current environment supports Fetch API natively\n * {@link supportsNativeFetch}.\n *\n * @returns true if `window.fetch` is natively implemented, false otherwise\n */\nfunction supportsNativeFetch() {\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  // Fast path to avoid DOM I/O\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  if (isNativeFetch(WINDOW.fetch)) {\n    return true;\n  }\n\n  // window.fetch is implemented, but is polyfilled or already wrapped (e.g: by a chrome extension)\n  // so create a \"pure\" iframe to see if that has native fetch\n  let result = false;\n  const doc = WINDOW.document;\n  // eslint-disable-next-line deprecation/deprecation\n  if (doc && typeof (doc.createElement ) === 'function') {\n    try {\n      const sandbox = doc.createElement('iframe');\n      sandbox.hidden = true;\n      doc.head.appendChild(sandbox);\n      if (sandbox.contentWindow && sandbox.contentWindow.fetch) {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        result = isNativeFetch(sandbox.contentWindow.fetch);\n      }\n      doc.head.removeChild(sandbox);\n    } catch (err) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', err);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Tells whether current environment supports ReportingObserver API\n * {@link supportsReportingObserver}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReportingObserver() {\n  return 'ReportingObserver' in WINDOW;\n}\n\n/**\n * Tells whether current environment supports Referrer Policy API\n * {@link supportsReferrerPolicy}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReferrerPolicy() {\n  // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default'\n  // (see https://caniuse.com/#feat=referrer-policy),\n  // it doesn't. And it throws an exception instead of ignoring this parameter...\n  // REF: https://github.com/getsentry/raven-js/issues/1233\n\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  try {\n    new Request('_', {\n      referrerPolicy: 'origin' ,\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports History API\n * {@link supportsHistory}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsHistory() {\n  // NOTE: in Chrome App environment, touching history.pushState, *even inside\n  //       a try/catch block*, will cause Chrome to output an error to console.error\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const chrome = (WINDOW ).chrome;\n  const isChromePackagedApp = chrome && chrome.app && chrome.app.runtime;\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n  const hasHistoryApi = 'history' in WINDOW && !!WINDOW.history.pushState && !!WINDOW.history.replaceState;\n\n  return !isChromePackagedApp && hasHistoryApi;\n}\n\nexport { isNativeFetch, supportsDOMError, supportsDOMException, supportsErrorEvent, supportsFetch, supportsHistory, supportsNativeFetch, supportsReferrerPolicy, supportsReportingObserver };\n//# sourceMappingURL=supports.js.map\n","import { addNonEnumerableProperty } from './object.js';\nimport { snipLine } from './string.js';\nimport { GLOBAL_OBJ } from './worldwide.js';\n\n/**\n * UUID4 generator\n *\n * @returns string Generated UUID4.\n */\nfunction uuid4() {\n  const gbl = GLOBAL_OBJ ;\n  const crypto = gbl.crypto || gbl.msCrypto;\n\n  if (crypto && crypto.randomUUID) {\n    return crypto.randomUUID().replace(/-/g, '');\n  }\n\n  const getRandomByte =\n    crypto && crypto.getRandomValues ? () => crypto.getRandomValues(new Uint8Array(1))[0] : () => Math.random() * 16;\n\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n  // Concatenating the following numbers as strings results in '10000000100040008000100000000000'\n  return (([1e7] ) + 1e3 + 4e3 + 8e3 + 1e11).replace(/[018]/g, c =>\n    // eslint-disable-next-line no-bitwise\n    ((c ) ^ ((getRandomByte() & 15) >> ((c ) / 4))).toString(16),\n  );\n}\n\nfunction getFirstException(event) {\n  return event.exception && event.exception.values ? event.exception.values[0] : undefined;\n}\n\n/**\n * Extracts either message or type+value from an event that can be used for user-facing logs\n * @returns event's description\n */\nfunction getEventDescription(event) {\n  const { message, event_id: eventId } = event;\n  if (message) {\n    return message;\n  }\n\n  const firstException = getFirstException(event);\n  if (firstException) {\n    if (firstException.type && firstException.value) {\n      return `${firstException.type}: ${firstException.value}`;\n    }\n    return firstException.type || firstException.value || eventId || '<unknown>';\n  }\n  return eventId || '<unknown>';\n}\n\n/**\n * Adds exception values, type and value to an synthetic Exception.\n * @param event The event to modify.\n * @param value Value of the exception.\n * @param type Type of the exception.\n * @hidden\n */\nfunction addExceptionTypeValue(event, value, type) {\n  const exception = (event.exception = event.exception || {});\n  const values = (exception.values = exception.values || []);\n  const firstException = (values[0] = values[0] || {});\n  if (!firstException.value) {\n    firstException.value = value || '';\n  }\n  if (!firstException.type) {\n    firstException.type = type || 'Error';\n  }\n}\n\n/**\n * Adds exception mechanism data to a given event. Uses defaults if the second parameter is not passed.\n *\n * @param event The event to modify.\n * @param newMechanism Mechanism data to add to the event.\n * @hidden\n */\nfunction addExceptionMechanism(event, newMechanism) {\n  const firstException = getFirstException(event);\n  if (!firstException) {\n    return;\n  }\n\n  const defaultMechanism = { type: 'generic', handled: true };\n  const currentMechanism = firstException.mechanism;\n  firstException.mechanism = { ...defaultMechanism, ...currentMechanism, ...newMechanism };\n\n  if (newMechanism && 'data' in newMechanism) {\n    const mergedData = { ...(currentMechanism && currentMechanism.data), ...newMechanism.data };\n    firstException.mechanism.data = mergedData;\n  }\n}\n\n// https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string\nconst SEMVER_REGEXP =\n  /^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n\n/**\n * Represents Semantic Versioning object\n */\n\n/**\n * Parses input into a SemVer interface\n * @param input string representation of a semver version\n */\nfunction parseSemver(input) {\n  const match = input.match(SEMVER_REGEXP) || [];\n  const major = parseInt(match[1], 10);\n  const minor = parseInt(match[2], 10);\n  const patch = parseInt(match[3], 10);\n  return {\n    buildmetadata: match[5],\n    major: isNaN(major) ? undefined : major,\n    minor: isNaN(minor) ? undefined : minor,\n    patch: isNaN(patch) ? undefined : patch,\n    prerelease: match[4],\n  };\n}\n\n/**\n * This function adds context (pre/post/line) lines to the provided frame\n *\n * @param lines string[] containing all lines\n * @param frame StackFrame that will be mutated\n * @param linesOfContext number of context lines we want to add pre/post\n */\nfunction addContextToFrame(lines, frame, linesOfContext = 5) {\n  // When there is no line number in the frame, attaching context is nonsensical and will even break grouping\n  if (frame.lineno === undefined) {\n    return;\n  }\n\n  const maxLines = lines.length;\n  const sourceLine = Math.max(Math.min(maxLines, frame.lineno - 1), 0);\n\n  frame.pre_context = lines\n    .slice(Math.max(0, sourceLine - linesOfContext), sourceLine)\n    .map((line) => snipLine(line, 0));\n\n  frame.context_line = snipLine(lines[Math.min(maxLines - 1, sourceLine)], frame.colno || 0);\n\n  frame.post_context = lines\n    .slice(Math.min(sourceLine + 1, maxLines), sourceLine + 1 + linesOfContext)\n    .map((line) => snipLine(line, 0));\n}\n\n/**\n * Checks whether or not we've already captured the given exception (note: not an identical exception - the very object\n * in question), and marks it captured if not.\n *\n * This is useful because it's possible for an error to get captured by more than one mechanism. After we intercept and\n * record an error, we rethrow it (assuming we've intercepted it before it's reached the top-level global handlers), so\n * that we don't interfere with whatever effects the error might have had were the SDK not there. At that point, because\n * the error has been rethrown, it's possible for it to bubble up to some other code we've instrumented. If it's not\n * caught after that, it will bubble all the way up to the global handlers (which of course we also instrument). This\n * function helps us ensure that even if we encounter the same error more than once, we only record it the first time we\n * see it.\n *\n * Note: It will ignore primitives (always return `false` and not mark them as seen), as properties can't be set on\n * them. {@link: Object.objectify} can be used on exceptions to convert any that are primitives into their equivalent\n * object wrapper forms so that this check will always work. However, because we need to flag the exact object which\n * will get rethrown, and because that rethrowing happens outside of the event processing pipeline, the objectification\n * must be done before the exception captured.\n *\n * @param A thrown exception to check or flag as having been seen\n * @returns `true` if the exception has already been captured, `false` if not (with the side effect of marking it seen)\n */\nfunction checkOrSetAlreadyCaught(exception) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (exception && (exception ).__sentry_captured__) {\n    return true;\n  }\n\n  try {\n    // set it this way rather than by assignment so that it's not ennumerable and therefore isn't recorded by the\n    // `ExtraErrorData` integration\n    addNonEnumerableProperty(exception , '__sentry_captured__', true);\n  } catch (err) {\n    // `exception` is a primitive, so we can't mark it seen\n  }\n\n  return false;\n}\n\n/**\n * Checks whether the given input is already an array, and if it isn't, wraps it in one.\n *\n * @param maybeArray Input to turn into an array, if necessary\n * @returns The input, if already an array, or an array with the input as the only element, if not\n */\nfunction arrayify(maybeArray) {\n  return Array.isArray(maybeArray) ? maybeArray : [maybeArray];\n}\n\nexport { addContextToFrame, addExceptionMechanism, addExceptionTypeValue, arrayify, checkOrSetAlreadyCaught, getEventDescription, parseSemver, uuid4 };\n//# sourceMappingURL=misc.js.map\n","import { timestampInSeconds, uuid4, dropUndefinedKeys } from '@sentry/utils';\n\n/**\n * Creates a new `Session` object by setting certain default parameters. If optional @param context\n * is passed, the passed properties are applied to the session object.\n *\n * @param context (optional) additional properties to be applied to the returned session object\n *\n * @returns a new `Session` object\n */\nfunction makeSession(context) {\n  // Both timestamp and started are in seconds since the UNIX epoch.\n  const startingTime = timestampInSeconds();\n\n  const session = {\n    sid: uuid4(),\n    init: true,\n    timestamp: startingTime,\n    started: startingTime,\n    duration: 0,\n    status: 'ok',\n    errors: 0,\n    ignoreDuration: false,\n    toJSON: () => sessionToJSON(session),\n  };\n\n  if (context) {\n    updateSession(session, context);\n  }\n\n  return session;\n}\n\n/**\n * Updates a session object with the properties passed in the context.\n *\n * Note that this function mutates the passed object and returns void.\n * (Had to do this instead of returning a new and updated session because closing and sending a session\n * makes an update to the session after it was passed to the sending logic.\n * @see BaseClient.captureSession )\n *\n * @param session the `Session` to update\n * @param context the `SessionContext` holding the properties that should be updated in @param session\n */\n// eslint-disable-next-line complexity\nfunction updateSession(session, context = {}) {\n  if (context.user) {\n    if (!session.ipAddress && context.user.ip_address) {\n      session.ipAddress = context.user.ip_address;\n    }\n\n    if (!session.did && !context.did) {\n      session.did = context.user.id || context.user.email || context.user.username;\n    }\n  }\n\n  session.timestamp = context.timestamp || timestampInSeconds();\n\n  if (context.ignoreDuration) {\n    session.ignoreDuration = context.ignoreDuration;\n  }\n  if (context.sid) {\n    // Good enough uuid validation.  Kamil\n    session.sid = context.sid.length === 32 ? context.sid : uuid4();\n  }\n  if (context.init !== undefined) {\n    session.init = context.init;\n  }\n  if (!session.did && context.did) {\n    session.did = `${context.did}`;\n  }\n  if (typeof context.started === 'number') {\n    session.started = context.started;\n  }\n  if (session.ignoreDuration) {\n    session.duration = undefined;\n  } else if (typeof context.duration === 'number') {\n    session.duration = context.duration;\n  } else {\n    const duration = session.timestamp - session.started;\n    session.duration = duration >= 0 ? duration : 0;\n  }\n  if (context.release) {\n    session.release = context.release;\n  }\n  if (context.environment) {\n    session.environment = context.environment;\n  }\n  if (!session.ipAddress && context.ipAddress) {\n    session.ipAddress = context.ipAddress;\n  }\n  if (!session.userAgent && context.userAgent) {\n    session.userAgent = context.userAgent;\n  }\n  if (typeof context.errors === 'number') {\n    session.errors = context.errors;\n  }\n  if (context.status) {\n    session.status = context.status;\n  }\n}\n\n/**\n * Closes a session by setting its status and updating the session object with it.\n * Internally calls `updateSession` to update the passed session object.\n *\n * Note that this function mutates the passed session (@see updateSession for explanation).\n *\n * @param session the `Session` object to be closed\n * @param status the `SessionStatus` with which the session was closed. If you don't pass a status,\n *               this function will keep the previously set status, unless it was `'ok'` in which case\n *               it is changed to `'exited'`.\n */\nfunction closeSession(session, status) {\n  let context = {};\n  if (status) {\n    context = { status };\n  } else if (session.status === 'ok') {\n    context = { status: 'exited' };\n  }\n\n  updateSession(session, context);\n}\n\n/**\n * Serializes a passed session object to a JSON object with a slightly different structure.\n * This is necessary because the Sentry backend requires a slightly different schema of a session\n * than the one the JS SDKs use internally.\n *\n * @param session the session to be converted\n *\n * @returns a JSON object of the passed session\n */\nfunction sessionToJSON(session) {\n  return dropUndefinedKeys({\n    sid: `${session.sid}`,\n    init: session.init,\n    // Make sure that sec is converted to ms for date constructor\n    started: new Date(session.started * 1000).toISOString(),\n    timestamp: new Date(session.timestamp * 1000).toISOString(),\n    status: session.status,\n    errors: session.errors,\n    did: typeof session.did === 'number' || typeof session.did === 'string' ? `${session.did}` : undefined,\n    duration: session.duration,\n    attrs: {\n      release: session.release,\n      environment: session.environment,\n      ip_address: session.ipAddress,\n      user_agent: session.userAgent,\n    },\n  });\n}\n\nexport { closeSession, makeSession, updateSession };\n//# sourceMappingURL=session.js.map\n","import { isPlainObject, dateTimestampInSeconds, SyncPromise, logger, isThenable, arrayify, getGlobalSingleton } from '@sentry/utils';\nimport { updateSession } from './session.js';\n\n/**\n * Default value for maximum number of breadcrumbs added to an event.\n */\nconst DEFAULT_MAX_BREADCRUMBS = 100;\n\n/**\n * Holds additional event information. {@link Scope.applyToEvent} will be\n * called by the client before an event will be sent.\n */\nclass Scope  {\n  /** Flag if notifying is happening. */\n\n  /** Callback for client to receive scope changes. */\n\n  /** Callback list that will be called after {@link applyToEvent}. */\n\n  /** Array of breadcrumbs. */\n\n  /** User */\n\n  /** Tags */\n\n  /** Extra */\n\n  /** Contexts */\n\n  /** Attachments */\n\n  /**\n   * A place to stash data which is needed at some point in the SDK's event processing pipeline but which shouldn't get\n   * sent to Sentry\n   */\n\n  /** Fingerprint */\n\n  /** Severity */\n  // eslint-disable-next-line deprecation/deprecation\n\n  /** Transaction Name */\n\n  /** Span */\n\n  /** Session */\n\n  /** Request Mode Session Status */\n\n  // NOTE: Any field which gets added here should get added not only to the constructor but also to the `clone` method.\n\n   constructor() {\n    this._notifyingListeners = false;\n    this._scopeListeners = [];\n    this._eventProcessors = [];\n    this._breadcrumbs = [];\n    this._attachments = [];\n    this._user = {};\n    this._tags = {};\n    this._extra = {};\n    this._contexts = {};\n    this._sdkProcessingMetadata = {};\n  }\n\n  /**\n   * Inherit values from the parent scope.\n   * @param scope to clone.\n   */\n   static clone(scope) {\n    const newScope = new Scope();\n    if (scope) {\n      newScope._breadcrumbs = [...scope._breadcrumbs];\n      newScope._tags = { ...scope._tags };\n      newScope._extra = { ...scope._extra };\n      newScope._contexts = { ...scope._contexts };\n      newScope._user = scope._user;\n      newScope._level = scope._level;\n      newScope._span = scope._span;\n      newScope._session = scope._session;\n      newScope._transactionName = scope._transactionName;\n      newScope._fingerprint = scope._fingerprint;\n      newScope._eventProcessors = [...scope._eventProcessors];\n      newScope._requestSession = scope._requestSession;\n      newScope._attachments = [...scope._attachments];\n      newScope._sdkProcessingMetadata = { ...scope._sdkProcessingMetadata };\n    }\n    return newScope;\n  }\n\n  /**\n   * Add internal on change listener. Used for sub SDKs that need to store the scope.\n   * @hidden\n   */\n   addScopeListener(callback) {\n    this._scopeListeners.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addEventProcessor(callback) {\n    this._eventProcessors.push(callback);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    this._user = user || {};\n    if (this._session) {\n      updateSession(this._session, { user });\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getUser() {\n    return this._user;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getRequestSession() {\n    return this._requestSession;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setRequestSession(requestSession) {\n    this._requestSession = requestSession;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    this._tags = {\n      ...this._tags,\n      ...tags,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this._tags = { ...this._tags, [key]: value };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    this._extra = {\n      ...this._extra,\n      ...extras,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    this._extra = { ...this._extra, [key]: extra };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setFingerprint(fingerprint) {\n    this._fingerprint = fingerprint;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setLevel(\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n  ) {\n    this._level = level;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTransactionName(name) {\n    this._transactionName = name;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setContext(key, context) {\n    if (context === null) {\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this._contexts[key];\n    } else {\n      this._contexts[key] = context;\n    }\n\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSpan(span) {\n    this._span = span;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSpan() {\n    return this._span;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTransaction() {\n    // Often, this span (if it exists at all) will be a transaction, but it's not guaranteed to be. Regardless, it will\n    // have a pointer to the currently-active transaction.\n    const span = this.getSpan();\n    return span && span.transaction;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSession(session) {\n    if (!session) {\n      delete this._session;\n    } else {\n      this._session = session;\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSession() {\n    return this._session;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   update(captureContext) {\n    if (!captureContext) {\n      return this;\n    }\n\n    if (typeof captureContext === 'function') {\n      const updatedScope = (captureContext )(this);\n      return updatedScope instanceof Scope ? updatedScope : this;\n    }\n\n    if (captureContext instanceof Scope) {\n      this._tags = { ...this._tags, ...captureContext._tags };\n      this._extra = { ...this._extra, ...captureContext._extra };\n      this._contexts = { ...this._contexts, ...captureContext._contexts };\n      if (captureContext._user && Object.keys(captureContext._user).length) {\n        this._user = captureContext._user;\n      }\n      if (captureContext._level) {\n        this._level = captureContext._level;\n      }\n      if (captureContext._fingerprint) {\n        this._fingerprint = captureContext._fingerprint;\n      }\n      if (captureContext._requestSession) {\n        this._requestSession = captureContext._requestSession;\n      }\n    } else if (isPlainObject(captureContext)) {\n      // eslint-disable-next-line no-param-reassign\n      captureContext = captureContext ;\n      this._tags = { ...this._tags, ...captureContext.tags };\n      this._extra = { ...this._extra, ...captureContext.extra };\n      this._contexts = { ...this._contexts, ...captureContext.contexts };\n      if (captureContext.user) {\n        this._user = captureContext.user;\n      }\n      if (captureContext.level) {\n        this._level = captureContext.level;\n      }\n      if (captureContext.fingerprint) {\n        this._fingerprint = captureContext.fingerprint;\n      }\n      if (captureContext.requestSession) {\n        this._requestSession = captureContext.requestSession;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clear() {\n    this._breadcrumbs = [];\n    this._tags = {};\n    this._extra = {};\n    this._user = {};\n    this._contexts = {};\n    this._level = undefined;\n    this._transactionName = undefined;\n    this._fingerprint = undefined;\n    this._requestSession = undefined;\n    this._span = undefined;\n    this._session = undefined;\n    this._notifyScopeListeners();\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, maxBreadcrumbs) {\n    const maxCrumbs = typeof maxBreadcrumbs === 'number' ? maxBreadcrumbs : DEFAULT_MAX_BREADCRUMBS;\n\n    // No data has been changed, so don't notify scope listeners\n    if (maxCrumbs <= 0) {\n      return this;\n    }\n\n    const mergedBreadcrumb = {\n      timestamp: dateTimestampInSeconds(),\n      ...breadcrumb,\n    };\n    this._breadcrumbs = [...this._breadcrumbs, mergedBreadcrumb].slice(-maxCrumbs);\n    this._notifyScopeListeners();\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getLastBreadcrumb() {\n    return this._breadcrumbs[this._breadcrumbs.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearBreadcrumbs() {\n    this._breadcrumbs = [];\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addAttachment(attachment) {\n    this._attachments.push(attachment);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getAttachments() {\n    return this._attachments;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearAttachments() {\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * Applies data from the scope to the event and runs all event processors on it.\n   *\n   * @param event Event\n   * @param hint Object containing additional information about the original exception, for use by the event processors.\n   * @hidden\n   */\n   applyToEvent(event, hint = {}) {\n    if (this._extra && Object.keys(this._extra).length) {\n      event.extra = { ...this._extra, ...event.extra };\n    }\n    if (this._tags && Object.keys(this._tags).length) {\n      event.tags = { ...this._tags, ...event.tags };\n    }\n    if (this._user && Object.keys(this._user).length) {\n      event.user = { ...this._user, ...event.user };\n    }\n    if (this._contexts && Object.keys(this._contexts).length) {\n      event.contexts = { ...this._contexts, ...event.contexts };\n    }\n    if (this._level) {\n      event.level = this._level;\n    }\n    if (this._transactionName) {\n      event.transaction = this._transactionName;\n    }\n\n    // We want to set the trace context for normal events only if there isn't already\n    // a trace context on the event. There is a product feature in place where we link\n    // errors with transaction and it relies on that.\n    if (this._span) {\n      event.contexts = { trace: this._span.getTraceContext(), ...event.contexts };\n      const transactionName = this._span.transaction && this._span.transaction.name;\n      if (transactionName) {\n        event.tags = { transaction: transactionName, ...event.tags };\n      }\n    }\n\n    this._applyFingerprint(event);\n\n    event.breadcrumbs = [...(event.breadcrumbs || []), ...this._breadcrumbs];\n    event.breadcrumbs = event.breadcrumbs.length > 0 ? event.breadcrumbs : undefined;\n\n    event.sdkProcessingMetadata = { ...event.sdkProcessingMetadata, ...this._sdkProcessingMetadata };\n\n    return this._notifyEventProcessors([...getGlobalEventProcessors(), ...this._eventProcessors], event, hint);\n  }\n\n  /**\n   * Add data which will be accessible during event processing but won't get sent to Sentry\n   */\n   setSDKProcessingMetadata(newData) {\n    this._sdkProcessingMetadata = { ...this._sdkProcessingMetadata, ...newData };\n\n    return this;\n  }\n\n  /**\n   * This will be called after {@link applyToEvent} is finished.\n   */\n   _notifyEventProcessors(\n    processors,\n    event,\n    hint,\n    index = 0,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      const processor = processors[index];\n      if (event === null || typeof processor !== 'function') {\n        resolve(event);\n      } else {\n        const result = processor({ ...event }, hint) ;\n\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          processor.id &&\n          result === null &&\n          logger.log(`Event processor \"${processor.id}\" dropped event`);\n\n        if (isThenable(result)) {\n          void result\n            .then(final => this._notifyEventProcessors(processors, final, hint, index + 1).then(resolve))\n            .then(null, reject);\n        } else {\n          void this._notifyEventProcessors(processors, result, hint, index + 1)\n            .then(resolve)\n            .then(null, reject);\n        }\n      }\n    });\n  }\n\n  /**\n   * This will be called on every set call.\n   */\n   _notifyScopeListeners() {\n    // We need this check for this._notifyingListeners to be able to work on scope during updates\n    // If this check is not here we'll produce endless recursion when something is done with the scope\n    // during the callback.\n    if (!this._notifyingListeners) {\n      this._notifyingListeners = true;\n      this._scopeListeners.forEach(callback => {\n        callback(this);\n      });\n      this._notifyingListeners = false;\n    }\n  }\n\n  /**\n   * Applies fingerprint from the scope to the event if there's one,\n   * uses message if there's one instead or get rid of empty fingerprint\n   */\n   _applyFingerprint(event) {\n    // Make sure it's an array first and we actually have something in place\n    event.fingerprint = event.fingerprint ? arrayify(event.fingerprint) : [];\n\n    // If we have something on the scope, then merge it with event\n    if (this._fingerprint) {\n      event.fingerprint = event.fingerprint.concat(this._fingerprint);\n    }\n\n    // If we have no data at all, remove empty array default\n    if (event.fingerprint && !event.fingerprint.length) {\n      delete event.fingerprint;\n    }\n  }\n}\n\n/**\n * Returns the global event processors.\n */\nfunction getGlobalEventProcessors() {\n  return getGlobalSingleton('globalEventProcessors', () => []);\n}\n\n/**\n * Add a EventProcessor to be kept globally.\n * @param callback EventProcessor to add\n */\nfunction addGlobalEventProcessor(callback) {\n  getGlobalEventProcessors().push(callback);\n}\n\nexport { Scope, addGlobalEventProcessor };\n//# sourceMappingURL=scope.js.map\n","import { uuid4, dateTimestampInSeconds, consoleSandbox, logger, GLOBAL_OBJ, isNodeEnv, getGlobalSingleton } from '@sentry/utils';\nimport { Scope } from './scope.js';\nimport { closeSession, makeSession, updateSession } from './session.js';\n\n/**\n * API compatibility version of this hub.\n *\n * WARNING: This number should only be increased when the global interface\n * changes and new methods are introduced.\n *\n * @hidden\n */\nconst API_VERSION = 4;\n\n/**\n * Default maximum number of breadcrumbs added to an event. Can be overwritten\n * with {@link Options.maxBreadcrumbs}.\n */\nconst DEFAULT_BREADCRUMBS = 100;\n\n/**\n * A layer in the process stack.\n * @hidden\n */\n\n/**\n * @inheritDoc\n */\nclass Hub  {\n  /** Is a {@link Layer}[] containing the client and scope */\n    __init() {this._stack = [{}];}\n\n  /** Contains the last event id of a captured event.  */\n\n  /**\n   * Creates a new instance of the hub, will push one {@link Layer} into the\n   * internal stack on creation.\n   *\n   * @param client bound to the hub.\n   * @param scope bound to the hub.\n   * @param version number, higher number means higher priority.\n   */\n   constructor(client, scope = new Scope(),   _version = API_VERSION) {;this._version = _version;Hub.prototype.__init.call(this);\n    this.getStackTop().scope = scope;\n    if (client) {\n      this.bindClient(client);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isOlderThan(version) {\n    return this._version < version;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   bindClient(client) {\n    const top = this.getStackTop();\n    top.client = client;\n    if (client && client.setupIntegrations) {\n      client.setupIntegrations();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   pushScope() {\n    // We want to clone the content of prev scope\n    const scope = Scope.clone(this.getScope());\n    this.getStack().push({\n      client: this.getClient(),\n      scope,\n    });\n    return scope;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   popScope() {\n    if (this.getStack().length <= 1) return false;\n    return !!this.getStack().pop();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   withScope(callback) {\n    const scope = this.pushScope();\n    try {\n      callback(scope);\n    } finally {\n      this.popScope();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getClient() {\n    return this.getStackTop().client ;\n  }\n\n  /** Returns the scope of the top stack. */\n   getScope() {\n    return this.getStackTop().scope;\n  }\n\n  /** Returns the scope stack for domains or the process. */\n   getStack() {\n    return this._stack;\n  }\n\n  /** Returns the topmost scope layer in the order domain > local > process. */\n   getStackTop() {\n    return this._stack[this._stack.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n   captureException(exception, hint) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error('Sentry syntheticException');\n    this._withClient((client, scope) => {\n      client.captureException(\n        exception,\n        {\n          originalException: exception,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n    hint,\n  ) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error(message);\n    this._withClient((client, scope) => {\n      client.captureMessage(\n        message,\n        level,\n        {\n          originalException: message,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint) {\n    const eventId = hint && hint.event_id ? hint.event_id : uuid4();\n    if (event.type !== 'transaction') {\n      this._lastEventId = eventId;\n    }\n\n    this._withClient((client, scope) => {\n      client.captureEvent(event, { ...hint, event_id: eventId }, scope);\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   lastEventId() {\n    return this._lastEventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, hint) {\n    const { scope, client } = this.getStackTop();\n\n    if (!scope || !client) return;\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } =\n      (client.getOptions && client.getOptions()) || {};\n\n    if (maxBreadcrumbs <= 0) return;\n\n    const timestamp = dateTimestampInSeconds();\n    const mergedBreadcrumb = { timestamp, ...breadcrumb };\n    const finalBreadcrumb = beforeBreadcrumb\n      ? (consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) )\n      : mergedBreadcrumb;\n\n    if (finalBreadcrumb === null) return;\n\n    scope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    const scope = this.getScope();\n    if (scope) scope.setUser(user);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    const scope = this.getScope();\n    if (scope) scope.setTags(tags);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    const scope = this.getScope();\n    if (scope) scope.setExtras(extras);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    const scope = this.getScope();\n    if (scope) scope.setTag(key, value);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    const scope = this.getScope();\n    if (scope) scope.setExtra(key, extra);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   setContext(name, context) {\n    const scope = this.getScope();\n    if (scope) scope.setContext(name, context);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   configureScope(callback) {\n    const { scope, client } = this.getStackTop();\n    if (scope && client) {\n      callback(scope);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   run(callback) {\n    const oldHub = makeMain(this);\n    try {\n      callback(this);\n    } finally {\n      makeMain(oldHub);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    const client = this.getClient();\n    if (!client) return null;\n    try {\n      return client.getIntegration(integration);\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Hub`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startTransaction(context, customSamplingContext) {\n    return this._callExtensionMethod('startTransaction', context, customSamplingContext);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   traceHeaders() {\n    return this._callExtensionMethod('traceHeaders');\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(endSession = false) {\n    // both send the update and pull the session from the scope\n    if (endSession) {\n      return this.endSession();\n    }\n\n    // only send the update\n    this._sendSessionUpdate();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   endSession() {\n    const layer = this.getStackTop();\n    const scope = layer && layer.scope;\n    const session = scope && scope.getSession();\n    if (session) {\n      closeSession(session);\n    }\n    this._sendSessionUpdate();\n\n    // the session is over; take it off of the scope\n    if (scope) {\n      scope.setSession();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startSession(context) {\n    const { scope, client } = this.getStackTop();\n    const { release, environment } = (client && client.getOptions()) || {};\n\n    // Will fetch userAgent if called from browser sdk\n    const { userAgent } = GLOBAL_OBJ.navigator || {};\n\n    const session = makeSession({\n      release,\n      environment,\n      ...(scope && { user: scope.getUser() }),\n      ...(userAgent && { userAgent }),\n      ...context,\n    });\n\n    if (scope) {\n      // End existing session if there's one\n      const currentSession = scope.getSession && scope.getSession();\n      if (currentSession && currentSession.status === 'ok') {\n        updateSession(currentSession, { status: 'exited' });\n      }\n      this.endSession();\n\n      // Afterwards we set the new session on the scope\n      scope.setSession(session);\n    }\n\n    return session;\n  }\n\n  /**\n   * Returns if default PII should be sent to Sentry and propagated in ourgoing requests\n   * when Tracing is used.\n   */\n   shouldSendDefaultPii() {\n    const client = this.getClient();\n    const options = client && client.getOptions();\n    return Boolean(options && options.sendDefaultPii);\n  }\n\n  /**\n   * Sends the current Session on the scope\n   */\n   _sendSessionUpdate() {\n    const { scope, client } = this.getStackTop();\n    if (!scope) return;\n\n    const session = scope.getSession();\n    if (session) {\n      if (client && client.captureSession) {\n        client.captureSession(session);\n      }\n    }\n  }\n\n  /**\n   * Internal helper function to call a method on the top client if it exists.\n   *\n   * @param method The method to call on the client.\n   * @param args Arguments to pass to the client function.\n   */\n   _withClient(callback) {\n    const { scope, client } = this.getStackTop();\n    if (client) {\n      callback(client, scope);\n    }\n  }\n\n  /**\n   * Calls global extension method and binding current instance to the function call\n   */\n  // @ts-ignore Function lacks ending return statement and return type does not include 'undefined'. ts(2366)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   _callExtensionMethod(method, ...args) {\n    const carrier = getMainCarrier();\n    const sentry = carrier.__SENTRY__;\n    if (sentry && sentry.extensions && typeof sentry.extensions[method] === 'function') {\n      return sentry.extensions[method].apply(this, args);\n    }\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Extension method ${method} couldn't be found, doing nothing.`);\n  }\n}\n\n/**\n * Returns the global shim registry.\n *\n * FIXME: This function is problematic, because despite always returning a valid Carrier,\n * it has an optional `__SENTRY__` property, which then in turn requires us to always perform an unnecessary check\n * at the call-site. We always access the carrier through this function, so we can guarantee that `__SENTRY__` is there.\n **/\nfunction getMainCarrier() {\n  GLOBAL_OBJ.__SENTRY__ = GLOBAL_OBJ.__SENTRY__ || {\n    extensions: {},\n    hub: undefined,\n  };\n  return GLOBAL_OBJ;\n}\n\n/**\n * Replaces the current main hub with the passed one on the global object\n *\n * @returns The old replaced hub\n */\nfunction makeMain(hub) {\n  const registry = getMainCarrier();\n  const oldHub = getHubFromCarrier(registry);\n  setHubOnCarrier(registry, hub);\n  return oldHub;\n}\n\n/**\n * Returns the default hub instance.\n *\n * If a hub is already registered in the global carrier but this module\n * contains a more recent version, it replaces the registered version.\n * Otherwise, the currently registered hub will be returned.\n */\nfunction getCurrentHub() {\n  // Get main carrier (global for every environment)\n  const registry = getMainCarrier();\n\n  // If there's no hub, or its an old API, assign a new one\n  if (!hasHubOnCarrier(registry) || getHubFromCarrier(registry).isOlderThan(API_VERSION)) {\n    setHubOnCarrier(registry, new Hub());\n  }\n\n  // Prefer domains over global if they are there (applicable only to Node environment)\n  if (isNodeEnv()) {\n    return getHubFromActiveDomain(registry);\n  }\n  // Return hub that lives on a global object\n  return getHubFromCarrier(registry);\n}\n\n/**\n * Try to read the hub from an active domain, and fallback to the registry if one doesn't exist\n * @returns discovered hub\n */\nfunction getHubFromActiveDomain(registry) {\n  try {\n    const sentry = getMainCarrier().__SENTRY__;\n    const activeDomain = sentry && sentry.extensions && sentry.extensions.domain && sentry.extensions.domain.active;\n\n    // If there's no active domain, just return global hub\n    if (!activeDomain) {\n      return getHubFromCarrier(registry);\n    }\n\n    // If there's no hub on current domain, or it's an old API, assign a new one\n    if (!hasHubOnCarrier(activeDomain) || getHubFromCarrier(activeDomain).isOlderThan(API_VERSION)) {\n      const registryHubTopStack = getHubFromCarrier(registry).getStackTop();\n      setHubOnCarrier(activeDomain, new Hub(registryHubTopStack.client, Scope.clone(registryHubTopStack.scope)));\n    }\n\n    // Return hub that lives on a domain\n    return getHubFromCarrier(activeDomain);\n  } catch (_Oo) {\n    // Return hub that lives on a global object\n    return getHubFromCarrier(registry);\n  }\n}\n\n/**\n * This will tell whether a carrier has a hub on it or not\n * @param carrier object\n */\nfunction hasHubOnCarrier(carrier) {\n  return !!(carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub);\n}\n\n/**\n * This will create a new {@link Hub} and add to the passed object on\n * __SENTRY__.hub.\n * @param carrier object\n * @hidden\n */\nfunction getHubFromCarrier(carrier) {\n  return getGlobalSingleton('hub', () => new Hub(), carrier);\n}\n\n/**\n * This will set passed {@link Hub} on the passed object's __SENTRY__.hub attribute\n * @param carrier object\n * @param hub Hub\n * @returns A boolean indicating success or failure\n */\nfunction setHubOnCarrier(carrier, hub) {\n  if (!carrier) return false;\n  const __SENTRY__ = (carrier.__SENTRY__ = carrier.__SENTRY__ || {});\n  __SENTRY__.hub = hub;\n  return true;\n}\n\nexport { API_VERSION, Hub, getCurrentHub, getHubFromCarrier, getMainCarrier, makeMain, setHubOnCarrier };\n//# sourceMappingURL=hub.js.map\n","import { withScope, captureException } from '@sentry/core';\nimport { GLOBAL_OBJ, getOriginalFunction, addExceptionTypeValue, addExceptionMechanism, markFunctionWrapped, addNonEnumerableProperty } from '@sentry/utils';\n\nconst WINDOW = GLOBAL_OBJ ;\n\nlet ignoreOnError = 0;\n\n/**\n * @hidden\n */\nfunction shouldIgnoreOnError() {\n  return ignoreOnError > 0;\n}\n\n/**\n * @hidden\n */\nfunction ignoreNextOnError() {\n  // onerror should trigger before setTimeout\n  ignoreOnError++;\n  setTimeout(() => {\n    ignoreOnError--;\n  });\n}\n\n/**\n * Instruments the given function and sends an event to Sentry every time the\n * function throws an exception.\n *\n * @param fn A function to wrap. It is generally safe to pass an unbound function, because the returned wrapper always\n * has a correct `this` context.\n * @returns The wrapped function.\n * @hidden\n */\nfunction wrap(\n  fn,\n  options\n\n = {},\n  before,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  // for future readers what this does is wrap a function and then create\n  // a bi-directional wrapping between them.\n  //\n  // example: wrapped = wrap(original);\n  //  original.__sentry_wrapped__ -> wrapped\n  //  wrapped.__sentry_original__ -> original\n\n  if (typeof fn !== 'function') {\n    return fn;\n  }\n\n  try {\n    // if we're dealing with a function that was previously wrapped, return\n    // the original wrapper.\n    const wrapper = fn.__sentry_wrapped__;\n    if (wrapper) {\n      return wrapper;\n    }\n\n    // We don't wanna wrap it twice\n    if (getOriginalFunction(fn)) {\n      return fn;\n    }\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    // Bail on wrapping and return the function as-is (defers to window.onerror).\n    return fn;\n  }\n\n  /* eslint-disable prefer-rest-params */\n  // It is important that `sentryWrapped` is not an arrow function to preserve the context of `this`\n  const sentryWrapped = function () {\n    const args = Array.prototype.slice.call(arguments);\n\n    try {\n      if (before && typeof before === 'function') {\n        before.apply(this, arguments);\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n      const wrappedArguments = args.map((arg) => wrap(arg, options));\n\n      // Attempt to invoke user-land function\n      // NOTE: If you are a Sentry user, and you are seeing this stack frame, it\n      //       means the sentry.javascript SDK caught an error invoking your application code. This\n      //       is expected behavior and NOT indicative of a bug with sentry.javascript.\n      return fn.apply(this, wrappedArguments);\n    } catch (ex) {\n      ignoreNextOnError();\n\n      withScope((scope) => {\n        scope.addEventProcessor((event) => {\n          if (options.mechanism) {\n            addExceptionTypeValue(event, undefined, undefined);\n            addExceptionMechanism(event, options.mechanism);\n          }\n\n          event.extra = {\n            ...event.extra,\n            arguments: args,\n          };\n\n          return event;\n        });\n\n        captureException(ex);\n      });\n\n      throw ex;\n    }\n  };\n  /* eslint-enable prefer-rest-params */\n\n  // Accessing some objects may throw\n  // ref: https://github.com/getsentry/sentry-javascript/issues/1168\n  try {\n    for (const property in fn) {\n      if (Object.prototype.hasOwnProperty.call(fn, property)) {\n        sentryWrapped[property] = fn[property];\n      }\n    }\n  } catch (_oO) {} // eslint-disable-line no-empty\n\n  // Signal that this function has been wrapped/filled already\n  // for both debugging and to prevent it to being wrapped/filled twice\n  markFunctionWrapped(sentryWrapped, fn);\n\n  addNonEnumerableProperty(fn, '__sentry_wrapped__', sentryWrapped);\n\n  // Restore original function name (not all browsers allow that)\n  try {\n    const descriptor = Object.getOwnPropertyDescriptor(sentryWrapped, 'name') ;\n    if (descriptor.configurable) {\n      Object.defineProperty(sentryWrapped, 'name', {\n        get() {\n          return fn.name;\n        },\n      });\n    }\n    // eslint-disable-next-line no-empty\n  } catch (_oO) {}\n\n  return sentryWrapped;\n}\n\n/**\n * All properties the report dialog supports\n */\n\nexport { WINDOW, ignoreNextOnError, shouldIgnoreOnError, wrap };\n//# sourceMappingURL=helpers.js.map\n","import { isNativeFetch, logger } from '@sentry/utils';\nimport { WINDOW } from '../helpers.js';\n\nlet cachedFetchImpl = undefined;\n\n/**\n * A special usecase for incorrectly wrapped Fetch APIs in conjunction with ad-blockers.\n * Whenever someone wraps the Fetch API and returns the wrong promise chain,\n * this chain becomes orphaned and there is no possible way to capture it's rejections\n * other than allowing it bubble up to this very handler. eg.\n *\n * const f = window.fetch;\n * window.fetch = function () {\n *   const p = f.apply(this, arguments);\n *\n *   p.then(function() {\n *     console.log('hi.');\n *   });\n *\n *   return p;\n * }\n *\n * `p.then(function () { ... })` is producing a completely separate promise chain,\n * however, what's returned is `p` - the result of original `fetch` call.\n *\n * This mean, that whenever we use the Fetch API to send our own requests, _and_\n * some ad-blocker blocks it, this orphaned chain will _always_ reject,\n * effectively causing another event to be captured.\n * This makes a whole process become an infinite loop, which we need to somehow\n * deal with, and break it in one way or another.\n *\n * To deal with this issue, we are making sure that we _always_ use the real\n * browser Fetch API, instead of relying on what `window.fetch` exposes.\n * The only downside to this would be missing our own requests as breadcrumbs,\n * but because we are already not doing this, it should be just fine.\n *\n * Possible failed fetch error messages per-browser:\n *\n * Chrome:  Failed to fetch\n * Edge:    Failed to Fetch\n * Firefox: NetworkError when attempting to fetch resource\n * Safari:  resource blocked by content blocker\n */\nfunction getNativeFetchImplementation() {\n  if (cachedFetchImpl) {\n    return cachedFetchImpl;\n  }\n\n  /* eslint-disable @typescript-eslint/unbound-method */\n\n  // Fast path to avoid DOM I/O\n  if (isNativeFetch(WINDOW.fetch)) {\n    return (cachedFetchImpl = WINDOW.fetch.bind(WINDOW));\n  }\n\n  const document = WINDOW.document;\n  let fetchImpl = WINDOW.fetch;\n  // eslint-disable-next-line deprecation/deprecation\n  if (document && typeof document.createElement === 'function') {\n    try {\n      const sandbox = document.createElement('iframe');\n      sandbox.hidden = true;\n      document.head.appendChild(sandbox);\n      const contentWindow = sandbox.contentWindow;\n      if (contentWindow && contentWindow.fetch) {\n        fetchImpl = contentWindow.fetch;\n      }\n      document.head.removeChild(sandbox);\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', e);\n    }\n  }\n\n  return (cachedFetchImpl = fetchImpl.bind(WINDOW));\n  /* eslint-enable @typescript-eslint/unbound-method */\n}\n\n/** Clears cached fetch impl */\nfunction clearCachedFetchImplementation() {\n  cachedFetchImpl = undefined;\n}\n\nexport { clearCachedFetchImplementation, getNativeFetchImplementation };\n//# sourceMappingURL=utils.js.map\n","import { getCurrentHub } from './hub.js';\n\n// Note: All functions in this file are typed with a return value of `ReturnType<Hub[HUB_FUNCTION]>`,\n// where HUB_FUNCTION is some method on the Hub class.\n//\n// This is done to make sure the top level SDK methods stay in sync with the hub methods.\n// Although every method here has an explicit return type, some of them (that map to void returns) do not\n// contain `return` keywords. This is done to save on bundle size, as `return` is not minifiable.\n\n/**\n * Captures an exception event and sends it to Sentry.\n *\n * @param exception An exception-like object.\n * @param captureContext Additional scope data to apply to exception event.\n * @returns The generated eventId.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction captureException(exception, captureContext) {\n  return getCurrentHub().captureException(exception, { captureContext });\n}\n\n/**\n * Captures a message event and sends it to Sentry.\n *\n * @param message The message to send to Sentry.\n * @param Severity Define the level of the message.\n * @returns The generated eventId.\n */\nfunction captureMessage(\n  message,\n  // eslint-disable-next-line deprecation/deprecation\n  captureContext,\n) {\n  // This is necessary to provide explicit scopes upgrade, without changing the original\n  // arity of the `captureMessage(message, level)` method.\n  const level = typeof captureContext === 'string' ? captureContext : undefined;\n  const context = typeof captureContext !== 'string' ? { captureContext } : undefined;\n  return getCurrentHub().captureMessage(message, level, context);\n}\n\n/**\n * Captures a manually created event and sends it to Sentry.\n *\n * @param event The event to send to Sentry.\n * @returns The generated eventId.\n */\nfunction captureEvent(event, hint) {\n  return getCurrentHub().captureEvent(event, hint);\n}\n\n/**\n * Callback to set context information onto the scope.\n * @param callback Callback function that receives Scope.\n */\nfunction configureScope(callback) {\n  getCurrentHub().configureScope(callback);\n}\n\n/**\n * Records a new breadcrumb which will be attached to future events.\n *\n * Breadcrumbs will be added to subsequent events to provide more context on\n * user's actions prior to an error or crash.\n *\n * @param breadcrumb The breadcrumb to record.\n */\nfunction addBreadcrumb(breadcrumb) {\n  getCurrentHub().addBreadcrumb(breadcrumb);\n}\n\n/**\n * Sets context data with the given name.\n * @param name of the context\n * @param context Any kind of data. This data will be normalized.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction setContext(name, context) {\n  getCurrentHub().setContext(name, context);\n}\n\n/**\n * Set an object that will be merged sent as extra data with the event.\n * @param extras Extras object to merge into current context.\n */\nfunction setExtras(extras) {\n  getCurrentHub().setExtras(extras);\n}\n\n/**\n * Set key:value that will be sent as extra data with the event.\n * @param key String of extra\n * @param extra Any kind of data. This data will be normalized.\n */\nfunction setExtra(key, extra) {\n  getCurrentHub().setExtra(key, extra);\n}\n\n/**\n * Set an object that will be merged sent as tags data with the event.\n * @param tags Tags context object to merge into current context.\n */\nfunction setTags(tags) {\n  getCurrentHub().setTags(tags);\n}\n\n/**\n * Set key:value that will be sent as tags data with the event.\n *\n * Can also be used to unset a tag, by passing `undefined`.\n *\n * @param key String key of tag\n * @param value Value of tag\n */\nfunction setTag(key, value) {\n  getCurrentHub().setTag(key, value);\n}\n\n/**\n * Updates user context information for future events.\n *\n * @param user User context object to be set in the current context. Pass `null` to unset the user.\n */\nfunction setUser(user) {\n  getCurrentHub().setUser(user);\n}\n\n/**\n * Creates a new scope with and executes the given operation within.\n * The scope is automatically removed once the operation\n * finishes or throws.\n *\n * This is essentially a convenience function for:\n *\n *     pushScope();\n *     callback();\n *     popScope();\n *\n * @param callback that will be enclosed into push/popScope.\n */\nfunction withScope(callback) {\n  getCurrentHub().withScope(callback);\n}\n\n/**\n * Starts a new `Transaction` and returns it. This is the entry point to manual tracing instrumentation.\n *\n * A tree structure can be built by adding child spans to the transaction, and child spans to other spans. To start a\n * new child span within the transaction or any span, call the respective `.startChild()` method.\n *\n * Every child span must be finished before the transaction is finished, otherwise the unfinished spans are discarded.\n *\n * The transaction must be finished with a call to its `.finish()` method, at which point the transaction with all its\n * finished child spans will be sent to Sentry.\n *\n * NOTE: This function should only be used for *manual* instrumentation. Auto-instrumentation should call\n * `startTransaction` directly on the hub.\n *\n * @param context Properties of the new `Transaction`.\n * @param customSamplingContext Information given to the transaction sampling function (along with context-dependent\n * default values). See {@link Options.tracesSampler}.\n *\n * @returns The transaction which was just started\n */\nfunction startTransaction(\n  context,\n  customSamplingContext,\n) {\n  return getCurrentHub().startTransaction({ ...context }, customSamplingContext);\n}\n\nexport { addBreadcrumb, captureEvent, captureException, captureMessage, configureScope, setContext, setExtra, setExtras, setTag, setTags, setUser, startTransaction, withScope };\n//# sourceMappingURL=exports.js.map\n","import { createTransport } from '@sentry/core';\nimport { rejectedSyncPromise } from '@sentry/utils';\nimport { clearCachedFetchImplementation, getNativeFetchImplementation } from './utils.js';\n\n/**\n * Creates a Transport that uses the Fetch API to send events to Sentry.\n */\nfunction makeFetchTransport(\n  options,\n  nativeFetch = getNativeFetchImplementation(),\n) {\n  function makeRequest(request) {\n    const requestOptions = {\n      body: request.body,\n      method: 'POST',\n      referrerPolicy: 'origin',\n      headers: options.headers,\n      // Outgoing requests are usually cancelled when navigating to a different page, causing a \"TypeError: Failed to\n      // fetch\" error and sending a \"network_error\" client-outcome - in Chrome, the request status shows \"(cancelled)\".\n      // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're\n      // frequently sending events right before the user is switching pages (eg. whenfinishing navigation transactions).\n      // Gotchas:\n      // - `keepalive` isn't supported by Firefox\n      // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch), a request with `keepalive: true`\n      //   and a content length of > 64 kibibytes returns a network error. We will therefore only activate the flag when\n      //   we're below that limit.\n      keepalive: request.body.length <= 65536,\n      ...options.fetchOptions,\n    };\n\n    try {\n      return nativeFetch(options.url, requestOptions).then(response => ({\n        statusCode: response.status,\n        headers: {\n          'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n          'retry-after': response.headers.get('Retry-After'),\n        },\n      }));\n    } catch (e) {\n      clearCachedFetchImplementation();\n      return rejectedSyncPromise(e);\n    }\n  }\n\n  return createTransport(options, makeRequest);\n}\n\nexport { makeFetchTransport };\n//# sourceMappingURL=fetch.js.map\n","import { logger, getEventDescription, stringMatchesSomePattern } from '@sentry/utils';\n\n// \"Script error.\" is hard coded into browsers for errors that it can't read.\n// this is the result of a script being pulled in from an external domain and CORS.\nconst DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\n\n/** Options for the InboundFilters integration */\n\n/** Inbound filters configurable by the user */\nclass InboundFilters  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'InboundFilters';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = InboundFilters.id;}\n\n   constructor(  _options = {}) {;this._options = _options;InboundFilters.prototype.__init.call(this);}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(addGlobalEventProcessor, getCurrentHub) {\n    const eventProcess = (event) => {\n      const hub = getCurrentHub();\n      if (hub) {\n        const self = hub.getIntegration(InboundFilters);\n        if (self) {\n          const client = hub.getClient();\n          const clientOptions = client ? client.getOptions() : {};\n          const options = _mergeOptions(self._options, clientOptions);\n          return _shouldDropEvent(event, options) ? null : event;\n        }\n      }\n      return event;\n    };\n\n    eventProcess.id = this.name;\n    addGlobalEventProcessor(eventProcess);\n  }\n} InboundFilters.__initStatic();\n\n/** JSDoc */\nfunction _mergeOptions(\n  internalOptions = {},\n  clientOptions = {},\n) {\n  return {\n    allowUrls: [...(internalOptions.allowUrls || []), ...(clientOptions.allowUrls || [])],\n    denyUrls: [...(internalOptions.denyUrls || []), ...(clientOptions.denyUrls || [])],\n    ignoreErrors: [\n      ...(internalOptions.ignoreErrors || []),\n      ...(clientOptions.ignoreErrors || []),\n      ...DEFAULT_IGNORE_ERRORS,\n    ],\n    ignoreInternal: internalOptions.ignoreInternal !== undefined ? internalOptions.ignoreInternal : true,\n  };\n}\n\n/** JSDoc */\nfunction _shouldDropEvent(event, options) {\n  if (options.ignoreInternal && _isSentryError(event)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(`Event dropped due to being internal Sentry Error.\\nEvent: ${getEventDescription(event)}`);\n    return true;\n  }\n  if (_isIgnoredError(event, options.ignoreErrors)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to being matched by \\`ignoreErrors\\` option.\\nEvent: ${getEventDescription(event)}`,\n      );\n    return true;\n  }\n  if (_isDeniedUrl(event, options.denyUrls)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to being matched by \\`denyUrls\\` option.\\nEvent: ${getEventDescription(\n          event,\n        )}.\\nUrl: ${_getEventFilterUrl(event)}`,\n      );\n    return true;\n  }\n  if (!_isAllowedUrl(event, options.allowUrls)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to not being matched by \\`allowUrls\\` option.\\nEvent: ${getEventDescription(\n          event,\n        )}.\\nUrl: ${_getEventFilterUrl(event)}`,\n      );\n    return true;\n  }\n  return false;\n}\n\nfunction _isIgnoredError(event, ignoreErrors) {\n  if (!ignoreErrors || !ignoreErrors.length) {\n    return false;\n  }\n\n  return _getPossibleEventMessages(event).some(message => stringMatchesSomePattern(message, ignoreErrors));\n}\n\nfunction _isDeniedUrl(event, denyUrls) {\n  // TODO: Use Glob instead?\n  if (!denyUrls || !denyUrls.length) {\n    return false;\n  }\n  const url = _getEventFilterUrl(event);\n  return !url ? false : stringMatchesSomePattern(url, denyUrls);\n}\n\nfunction _isAllowedUrl(event, allowUrls) {\n  // TODO: Use Glob instead?\n  if (!allowUrls || !allowUrls.length) {\n    return true;\n  }\n  const url = _getEventFilterUrl(event);\n  return !url ? true : stringMatchesSomePattern(url, allowUrls);\n}\n\nfunction _getPossibleEventMessages(event) {\n  if (event.message) {\n    return [event.message];\n  }\n  if (event.exception) {\n    try {\n      const { type = '', value = '' } = (event.exception.values && event.exception.values[0]) || {};\n      return [`${value}`, `${type}: ${value}`];\n    } catch (oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(`Cannot extract message for event ${getEventDescription(event)}`);\n      return [];\n    }\n  }\n  return [];\n}\n\nfunction _isSentryError(event) {\n  try {\n    // @ts-ignore can't be a sentry error if undefined\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    return event.exception.values[0].type === 'SentryError';\n  } catch (e) {\n    // ignore\n  }\n  return false;\n}\n\nfunction _getLastValidUrl(frames = []) {\n  for (let i = frames.length - 1; i >= 0; i--) {\n    const frame = frames[i];\n\n    if (frame && frame.filename !== '<anonymous>' && frame.filename !== '[native code]') {\n      return frame.filename || null;\n    }\n  }\n\n  return null;\n}\n\nfunction _getEventFilterUrl(event) {\n  try {\n    let frames;\n    try {\n      // @ts-ignore we only care about frames if the whole thing here is defined\n      frames = event.exception.values[0].stacktrace.frames;\n    } catch (e) {\n      // ignore\n    }\n    return frames ? _getLastValidUrl(frames) : null;\n  } catch (oO) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(`Cannot extract url for event ${getEventDescription(event)}`);\n    return null;\n  }\n}\n\nexport { InboundFilters, _mergeOptions, _shouldDropEvent };\n//# sourceMappingURL=inboundfilters.js.map\n","import { getOriginalFunction } from '@sentry/utils';\n\nlet originalFunctionToString;\n\n/** Patch toString calls to return proper name for wrapped functions */\nclass FunctionToString  {constructor() { FunctionToString.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'FunctionToString';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = FunctionToString.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    originalFunctionToString = Function.prototype.toString;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Function.prototype.toString = function ( ...args) {\n      const context = getOriginalFunction(this) || this;\n      return originalFunctionToString.apply(context, args);\n    };\n  }\n} FunctionToString.__initStatic();\n\nexport { FunctionToString };\n//# sourceMappingURL=functiontostring.js.map\n","import { arrayify, logger } from '@sentry/utils';\nimport { getCurrentHub } from './hub.js';\nimport { addGlobalEventProcessor } from './scope.js';\n\nconst installedIntegrations = [];\n\n/** Map of integrations assigned to a client */\n\n/**\n * Remove duplicates from the given array, preferring the last instance of any duplicate. Not guaranteed to\n * preseve the order of integrations in the array.\n *\n * @private\n */\nfunction filterDuplicates(integrations) {\n  const integrationsByName = {};\n\n  integrations.forEach(currentInstance => {\n    const { name } = currentInstance;\n\n    const existingInstance = integrationsByName[name];\n\n    // We want integrations later in the array to overwrite earlier ones of the same type, except that we never want a\n    // default instance to overwrite an existing user instance\n    if (existingInstance && !existingInstance.isDefaultInstance && currentInstance.isDefaultInstance) {\n      return;\n    }\n\n    integrationsByName[name] = currentInstance;\n  });\n\n  return Object.values(integrationsByName);\n}\n\n/** Gets integrations to install */\nfunction getIntegrationsToSetup(options) {\n  const defaultIntegrations = options.defaultIntegrations || [];\n  const userIntegrations = options.integrations;\n\n  // We flag default instances, so that later we can tell them apart from any user-created instances of the same class\n  defaultIntegrations.forEach(integration => {\n    integration.isDefaultInstance = true;\n  });\n\n  let integrations;\n\n  if (Array.isArray(userIntegrations)) {\n    integrations = [...defaultIntegrations, ...userIntegrations];\n  } else if (typeof userIntegrations === 'function') {\n    integrations = arrayify(userIntegrations(defaultIntegrations));\n  } else {\n    integrations = defaultIntegrations;\n  }\n\n  const finalIntegrations = filterDuplicates(integrations);\n\n  // The `Debug` integration prints copies of the `event` and `hint` which will be passed to `beforeSend` or\n  // `beforeSendTransaction`. It therefore has to run after all other integrations, so that the changes of all event\n  // processors will be reflected in the printed values. For lack of a more elegant way to guarantee that, we therefore\n  // locate it and, assuming it exists, pop it out of its current spot and shove it onto the end of the array.\n  const debugIndex = finalIntegrations.findIndex(integration => integration.name === 'Debug');\n  if (debugIndex !== -1) {\n    const [debugInstance] = finalIntegrations.splice(debugIndex, 1);\n    finalIntegrations.push(debugInstance);\n  }\n\n  return finalIntegrations;\n}\n\n/**\n * Given a list of integration instances this installs them all. When `withDefaults` is set to `true` then all default\n * integrations are added unless they were already provided before.\n * @param integrations array of integration instances\n * @param withDefault should enable default integrations\n */\nfunction setupIntegrations(integrations) {\n  const integrationIndex = {};\n\n  integrations.forEach(integration => {\n    integrationIndex[integration.name] = integration;\n\n    if (installedIntegrations.indexOf(integration.name) === -1) {\n      integration.setupOnce(addGlobalEventProcessor, getCurrentHub);\n      installedIntegrations.push(integration.name);\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Integration installed: ${integration.name}`);\n    }\n  });\n\n  return integrationIndex;\n}\n\nexport { getIntegrationsToSetup, installedIntegrations, setupIntegrations };\n//# sourceMappingURL=integration.js.map\n","import { isInstanceOf, isString } from './is.js';\nimport { logger, CONSOLE_LEVELS } from './logger.js';\nimport { fill } from './object.js';\nimport { getFunctionName } from './stacktrace.js';\nimport { supportsNativeFetch, supportsHistory } from './supports.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * Instrument native APIs to call handlers that can be used to create breadcrumbs, APM spans etc.\n *  - Console API\n *  - Fetch API\n *  - XHR API\n *  - History API\n *  - DOM API (click/typing)\n *  - Error API\n *  - UnhandledRejection API\n */\n\nconst handlers = {};\nconst instrumented = {};\n\n/** Instruments given API */\nfunction instrument(type) {\n  if (instrumented[type]) {\n    return;\n  }\n\n  instrumented[type] = true;\n\n  switch (type) {\n    case 'console':\n      instrumentConsole();\n      break;\n    case 'dom':\n      instrumentDOM();\n      break;\n    case 'xhr':\n      instrumentXHR();\n      break;\n    case 'fetch':\n      instrumentFetch();\n      break;\n    case 'history':\n      instrumentHistory();\n      break;\n    case 'error':\n      instrumentError();\n      break;\n    case 'unhandledrejection':\n      instrumentUnhandledRejection();\n      break;\n    default:\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('unknown instrumentation type:', type);\n      return;\n  }\n}\n\n/**\n * Add handler that will be called when given type of instrumentation triggers.\n * Use at your own risk, this might break without changelog notice, only used internally.\n * @hidden\n */\nfunction addInstrumentationHandler(type, callback) {\n  handlers[type] = handlers[type] || [];\n  (handlers[type] ).push(callback);\n  instrument(type);\n}\n\n/** JSDoc */\nfunction triggerHandlers(type, data) {\n  if (!type || !handlers[type]) {\n    return;\n  }\n\n  for (const handler of handlers[type] || []) {\n    try {\n      handler(data);\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.error(\n          `Error while triggering instrumentation handler.\\nType: ${type}\\nName: ${getFunctionName(handler)}\\nError:`,\n          e,\n        );\n    }\n  }\n}\n\n/** JSDoc */\nfunction instrumentConsole() {\n  if (!('console' in WINDOW)) {\n    return;\n  }\n\n  CONSOLE_LEVELS.forEach(function (level) {\n    if (!(level in WINDOW.console)) {\n      return;\n    }\n\n    fill(WINDOW.console, level, function (originalConsoleMethod) {\n      return function (...args) {\n        triggerHandlers('console', { args, level });\n\n        // this fails for some browsers. :(\n        if (originalConsoleMethod) {\n          originalConsoleMethod.apply(WINDOW.console, args);\n        }\n      };\n    });\n  });\n}\n\n/** JSDoc */\nfunction instrumentFetch() {\n  if (!supportsNativeFetch()) {\n    return;\n  }\n\n  fill(WINDOW, 'fetch', function (originalFetch) {\n    return function (...args) {\n      const handlerData = {\n        args,\n        fetchData: {\n          method: getFetchMethod(args),\n          url: getFetchUrl(args),\n        },\n        startTimestamp: Date.now(),\n      };\n\n      triggerHandlers('fetch', {\n        ...handlerData,\n      });\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      return originalFetch.apply(WINDOW, args).then(\n        (response) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            response,\n          });\n          return response;\n        },\n        (error) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            error,\n          });\n          // NOTE: If you are a Sentry user, and you are seeing this stack frame,\n          //       it means the sentry.javascript SDK caught an error invoking your application code.\n          //       This is expected behavior and NOT indicative of a bug with sentry.javascript.\n          throw error;\n        },\n      );\n    };\n  });\n}\n\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/** Extract `method` from fetch call arguments */\nfunction getFetchMethod(fetchArgs = []) {\n  if ('Request' in WINDOW && isInstanceOf(fetchArgs[0], Request) && fetchArgs[0].method) {\n    return String(fetchArgs[0].method).toUpperCase();\n  }\n  if (fetchArgs[1] && fetchArgs[1].method) {\n    return String(fetchArgs[1].method).toUpperCase();\n  }\n  return 'GET';\n}\n\n/** Extract `url` from fetch call arguments */\nfunction getFetchUrl(fetchArgs = []) {\n  if (typeof fetchArgs[0] === 'string') {\n    return fetchArgs[0];\n  }\n  if ('Request' in WINDOW && isInstanceOf(fetchArgs[0], Request)) {\n    return fetchArgs[0].url;\n  }\n  return String(fetchArgs[0]);\n}\n/* eslint-enable @typescript-eslint/no-unsafe-member-access */\n\n/** JSDoc */\nfunction instrumentXHR() {\n  if (!('XMLHttpRequest' in WINDOW)) {\n    return;\n  }\n\n  const xhrproto = XMLHttpRequest.prototype;\n\n  fill(xhrproto, 'open', function (originalOpen) {\n    return function ( ...args) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      const xhr = this;\n      const url = args[1];\n      const xhrInfo = (xhr.__sentry_xhr__ = {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        method: isString(args[0]) ? args[0].toUpperCase() : args[0],\n        url: args[1],\n      });\n\n      // if Sentry key appears in URL, don't capture it as a request\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      if (isString(url) && xhrInfo.method === 'POST' && url.match(/sentry_key/)) {\n        xhr.__sentry_own_request__ = true;\n      }\n\n      const onreadystatechangeHandler = function () {\n        if (xhr.readyState === 4) {\n          try {\n            // touching statusCode in some platforms throws\n            // an exception\n            xhrInfo.status_code = xhr.status;\n          } catch (e) {\n            /* do nothing */\n          }\n\n          triggerHandlers('xhr', {\n            args,\n            endTimestamp: Date.now(),\n            startTimestamp: Date.now(),\n            xhr,\n          });\n        }\n      };\n\n      if ('onreadystatechange' in xhr && typeof xhr.onreadystatechange === 'function') {\n        fill(xhr, 'onreadystatechange', function (original) {\n          return function (...readyStateArgs) {\n            onreadystatechangeHandler();\n            return original.apply(xhr, readyStateArgs);\n          };\n        });\n      } else {\n        xhr.addEventListener('readystatechange', onreadystatechangeHandler);\n      }\n\n      return originalOpen.apply(xhr, args);\n    };\n  });\n\n  fill(xhrproto, 'send', function (originalSend) {\n    return function ( ...args) {\n      if (this.__sentry_xhr__ && args[0] !== undefined) {\n        this.__sentry_xhr__.body = args[0];\n      }\n\n      triggerHandlers('xhr', {\n        args,\n        startTimestamp: Date.now(),\n        xhr: this,\n      });\n\n      return originalSend.apply(this, args);\n    };\n  });\n}\n\nlet lastHref;\n\n/** JSDoc */\nfunction instrumentHistory() {\n  if (!supportsHistory()) {\n    return;\n  }\n\n  const oldOnPopState = WINDOW.onpopstate;\n  WINDOW.onpopstate = function ( ...args) {\n    const to = WINDOW.location.href;\n    // keep track of the current URL state, as we always receive only the updated state\n    const from = lastHref;\n    lastHref = to;\n    triggerHandlers('history', {\n      from,\n      to,\n    });\n    if (oldOnPopState) {\n      // Apparently this can throw in Firefox when incorrectly implemented plugin is installed.\n      // https://github.com/getsentry/sentry-javascript/issues/3344\n      // https://github.com/bugsnag/bugsnag-js/issues/469\n      try {\n        return oldOnPopState.apply(this, args);\n      } catch (_oO) {\n        // no-empty\n      }\n    }\n  };\n\n  /** @hidden */\n  function historyReplacementFunction(originalHistoryFunction) {\n    return function ( ...args) {\n      const url = args.length > 2 ? args[2] : undefined;\n      if (url) {\n        // coerce to string (this is what pushState does)\n        const from = lastHref;\n        const to = String(url);\n        // keep track of the current URL state, as we always receive only the updated state\n        lastHref = to;\n        triggerHandlers('history', {\n          from,\n          to,\n        });\n      }\n      return originalHistoryFunction.apply(this, args);\n    };\n  }\n\n  fill(WINDOW.history, 'pushState', historyReplacementFunction);\n  fill(WINDOW.history, 'replaceState', historyReplacementFunction);\n}\n\nconst debounceDuration = 1000;\nlet debounceTimerID;\nlet lastCapturedEvent;\n\n/**\n * Decide whether the current event should finish the debounce of previously captured one.\n * @param previous previously captured event\n * @param current event to be captured\n */\nfunction shouldShortcircuitPreviousDebounce(previous, current) {\n  // If there was no previous event, it should always be swapped for the new one.\n  if (!previous) {\n    return true;\n  }\n\n  // If both events have different type, then user definitely performed two separate actions. e.g. click + keypress.\n  if (previous.type !== current.type) {\n    return true;\n  }\n\n  try {\n    // If both events have the same type, it's still possible that actions were performed on different targets.\n    // e.g. 2 clicks on different buttons.\n    if (previous.target !== current.target) {\n      return true;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  // If both events have the same type _and_ same `target` (an element which triggered an event, _not necessarily_\n  // to which an event listener was attached), we treat them as the same action, as we want to capture\n  // only one breadcrumb. e.g. multiple clicks on the same button, or typing inside a user input box.\n  return false;\n}\n\n/**\n * Decide whether an event should be captured.\n * @param event event to be captured\n */\nfunction shouldSkipDOMEvent(event) {\n  // We are only interested in filtering `keypress` events for now.\n  if (event.type !== 'keypress') {\n    return false;\n  }\n\n  try {\n    const target = event.target ;\n\n    if (!target || !target.tagName) {\n      return true;\n    }\n\n    // Only consider keypress events on actual input elements. This will disregard keypresses targeting body\n    // e.g.tabbing through elements, hotkeys, etc.\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n      return false;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  return true;\n}\n\n/**\n * Wraps addEventListener to capture UI breadcrumbs\n * @param handler function that will be triggered\n * @param globalListener indicates whether event was captured by the global event listener\n * @returns wrapped breadcrumb events handler\n * @hidden\n */\nfunction makeDOMEventHandler(handler, globalListener = false) {\n  return (event) => {\n    // It's possible this handler might trigger multiple times for the same\n    // event (e.g. event propagation through node ancestors).\n    // Ignore if we've already captured that event.\n    if (!event || lastCapturedEvent === event) {\n      return;\n    }\n\n    // We always want to skip _some_ events.\n    if (shouldSkipDOMEvent(event)) {\n      return;\n    }\n\n    const name = event.type === 'keypress' ? 'input' : event.type;\n\n    // If there is no debounce timer, it means that we can safely capture the new event and store it for future comparisons.\n    if (debounceTimerID === undefined) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n    // If there is a debounce awaiting, see if the new event is different enough to treat it as a unique one.\n    // If that's the case, emit the previous event and store locally the newly-captured DOM event.\n    else if (shouldShortcircuitPreviousDebounce(lastCapturedEvent, event)) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n\n    // Start a new debounce timer that will prevent us from capturing multiple events that should be grouped together.\n    clearTimeout(debounceTimerID);\n    debounceTimerID = WINDOW.setTimeout(() => {\n      debounceTimerID = undefined;\n    }, debounceDuration);\n  };\n}\n\n/** JSDoc */\nfunction instrumentDOM() {\n  if (!('document' in WINDOW)) {\n    return;\n  }\n\n  // Make it so that any click or keypress that is unhandled / bubbled up all the way to the document triggers our dom\n  // handlers. (Normally we have only one, which captures a breadcrumb for each click or keypress.) Do this before\n  // we instrument `addEventListener` so that we don't end up attaching this handler twice.\n  const triggerDOMHandler = triggerHandlers.bind(null, 'dom');\n  const globalDOMEventHandler = makeDOMEventHandler(triggerDOMHandler, true);\n  WINDOW.document.addEventListener('click', globalDOMEventHandler, false);\n  WINDOW.document.addEventListener('keypress', globalDOMEventHandler, false);\n\n  // After hooking into click and keypress events bubbled up to `document`, we also hook into user-handled\n  // clicks & keypresses, by adding an event listener of our own to any element to which they add a listener. That\n  // way, whenever one of their handlers is triggered, ours will be, too. (This is needed because their handler\n  // could potentially prevent the event from bubbling up to our global listeners. This way, our handler are still\n  // guaranteed to fire at least once.)\n  ['EventTarget', 'Node'].forEach((target) => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    const proto = (WINDOW )[target] && (WINDOW )[target].prototype;\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, no-prototype-builtins\n    if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n      return;\n    }\n\n    fill(proto, 'addEventListener', function (originalAddEventListener) {\n      return function (\n\n        type,\n        listener,\n        options,\n      ) {\n        if (type === 'click' || type == 'keypress') {\n          try {\n            const el = this ;\n            const handlers = (el.__sentry_instrumentation_handlers__ = el.__sentry_instrumentation_handlers__ || {});\n            const handlerForType = (handlers[type] = handlers[type] || { refCount: 0 });\n\n            if (!handlerForType.handler) {\n              const handler = makeDOMEventHandler(triggerDOMHandler);\n              handlerForType.handler = handler;\n              originalAddEventListener.call(this, type, handler, options);\n            }\n\n            handlerForType.refCount++;\n          } catch (e) {\n            // Accessing dom properties is always fragile.\n            // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n          }\n        }\n\n        return originalAddEventListener.call(this, type, listener, options);\n      };\n    });\n\n    fill(\n      proto,\n      'removeEventListener',\n      function (originalRemoveEventListener) {\n        return function (\n\n          type,\n          listener,\n          options,\n        ) {\n          if (type === 'click' || type == 'keypress') {\n            try {\n              const el = this ;\n              const handlers = el.__sentry_instrumentation_handlers__ || {};\n              const handlerForType = handlers[type];\n\n              if (handlerForType) {\n                handlerForType.refCount--;\n                // If there are no longer any custom handlers of the current type on this element, we can remove ours, too.\n                if (handlerForType.refCount <= 0) {\n                  originalRemoveEventListener.call(this, type, handlerForType.handler, options);\n                  handlerForType.handler = undefined;\n                  delete handlers[type]; // eslint-disable-line @typescript-eslint/no-dynamic-delete\n                }\n\n                // If there are no longer any custom handlers of any type on this element, cleanup everything.\n                if (Object.keys(handlers).length === 0) {\n                  delete el.__sentry_instrumentation_handlers__;\n                }\n              }\n            } catch (e) {\n              // Accessing dom properties is always fragile.\n              // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n            }\n          }\n\n          return originalRemoveEventListener.call(this, type, listener, options);\n        };\n      },\n    );\n  });\n}\n\nlet _oldOnErrorHandler = null;\n/** JSDoc */\nfunction instrumentError() {\n  _oldOnErrorHandler = WINDOW.onerror;\n\n  WINDOW.onerror = function (msg, url, line, column, error) {\n    triggerHandlers('error', {\n      column,\n      error,\n      line,\n      msg,\n      url,\n    });\n\n    if (_oldOnErrorHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnErrorHandler.apply(this, arguments);\n    }\n\n    return false;\n  };\n}\n\nlet _oldOnUnhandledRejectionHandler = null;\n/** JSDoc */\nfunction instrumentUnhandledRejection() {\n  _oldOnUnhandledRejectionHandler = WINDOW.onunhandledrejection;\n\n  WINDOW.onunhandledrejection = function (e) {\n    triggerHandlers('unhandledrejection', e);\n\n    if (_oldOnUnhandledRejectionHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnUnhandledRejectionHandler.apply(this, arguments);\n    }\n\n    return true;\n  };\n}\n\nexport { addInstrumentationHandler };\n//# sourceMappingURL=instrument.js.map\n","import { urlEncode, makeDsn, dsnToString } from '@sentry/utils';\n\nconst SENTRY_API_VERSION = '7';\n\n/** Returns the prefix to construct Sentry ingestion API endpoints. */\nfunction getBaseApiEndpoint(dsn) {\n  const protocol = dsn.protocol ? `${dsn.protocol}:` : '';\n  const port = dsn.port ? `:${dsn.port}` : '';\n  return `${protocol}//${dsn.host}${port}${dsn.path ? `/${dsn.path}` : ''}/api/`;\n}\n\n/** Returns the ingest API endpoint for target. */\nfunction _getIngestEndpoint(dsn) {\n  return `${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`;\n}\n\n/** Returns a URL-encoded string with auth config suitable for a query string. */\nfunction _encodedAuth(dsn, sdkInfo) {\n  return urlEncode({\n    // We send only the minimum set of required information. See\n    // https://github.com/getsentry/sentry-javascript/issues/2572.\n    sentry_key: dsn.publicKey,\n    sentry_version: SENTRY_API_VERSION,\n    ...(sdkInfo && { sentry_client: `${sdkInfo.name}/${sdkInfo.version}` }),\n  });\n}\n\n/**\n * Returns the envelope endpoint URL with auth in the query string.\n *\n * Sending auth as part of the query string and not as custom HTTP headers avoids CORS preflight requests.\n */\nfunction getEnvelopeEndpointWithUrlEncodedAuth(\n  dsn,\n  // TODO (v8): Remove `tunnelOrOptions` in favor of `options`, and use the substitute code below\n  // options: ClientOptions = {} as ClientOptions,\n  tunnelOrOptions = {} ,\n) {\n  // TODO (v8): Use this code instead\n  // const { tunnel, _metadata = {} } = options;\n  // return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, _metadata.sdk)}`;\n\n  const tunnel = typeof tunnelOrOptions === 'string' ? tunnelOrOptions : tunnelOrOptions.tunnel;\n  const sdkInfo =\n    typeof tunnelOrOptions === 'string' || !tunnelOrOptions._metadata ? undefined : tunnelOrOptions._metadata.sdk;\n\n  return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, sdkInfo)}`;\n}\n\n/** Returns the url to the report dialog endpoint. */\nfunction getReportDialogEndpoint(\n  dsnLike,\n  dialogOptions\n\n,\n) {\n  const dsn = makeDsn(dsnLike);\n  const endpoint = `${getBaseApiEndpoint(dsn)}embed/error-page/`;\n\n  let encodedOptions = `dsn=${dsnToString(dsn)}`;\n  for (const key in dialogOptions) {\n    if (key === 'dsn') {\n      continue;\n    }\n\n    if (key === 'user') {\n      const user = dialogOptions.user;\n      if (!user) {\n        continue;\n      }\n      if (user.name) {\n        encodedOptions += `&name=${encodeURIComponent(user.name)}`;\n      }\n      if (user.email) {\n        encodedOptions += `&email=${encodeURIComponent(user.email)}`;\n      }\n    } else {\n      encodedOptions += `&${encodeURIComponent(key)}=${encodeURIComponent(dialogOptions[key] )}`;\n    }\n  }\n\n  return `${endpoint}?${encodedOptions}`;\n}\n\nexport { getEnvelopeEndpointWithUrlEncodedAuth, getReportDialogEndpoint };\n//# sourceMappingURL=api.js.map\n","import { makeDsn, logger, checkOrSetAlreadyCaught, isPrimitive, resolvedSyncPromise, addItemToEnvelope, createAttachmentEnvelopeItem, SyncPromise, rejectedSyncPromise, SentryError, isThenable, isPlainObject } from '@sentry/utils';\nimport { getEnvelopeEndpointWithUrlEncodedAuth } from './api.js';\nimport { createEventEnvelope, createSessionEnvelope } from './envelope.js';\nimport { setupIntegrations } from './integration.js';\nimport { updateSession } from './session.js';\nimport { prepareEvent } from './utils/prepareEvent.js';\n\nconst ALREADY_SEEN_ERROR = \"Not capturing exception because it's already been captured.\";\n\n/**\n * Base implementation for all JavaScript SDK clients.\n *\n * Call the constructor with the corresponding options\n * specific to the client subclass. To access these options later, use\n * {@link Client.getOptions}.\n *\n * If a Dsn is specified in the options, it will be parsed and stored. Use\n * {@link Client.getDsn} to retrieve the Dsn at any moment. In case the Dsn is\n * invalid, the constructor will throw a {@link SentryException}. Note that\n * without a valid Dsn, the SDK will not send any events to Sentry.\n *\n * Before sending an event, it is passed through\n * {@link BaseClient._prepareEvent} to add SDK information and scope data\n * (breadcrumbs and context). To add more custom information, override this\n * method and extend the resulting prepared event.\n *\n * To issue automatically created events (e.g. via instrumentation), use\n * {@link Client.captureEvent}. It will prepare the event and pass it through\n * the callback lifecycle. To issue auto-breadcrumbs, use\n * {@link Client.addBreadcrumb}.\n *\n * @example\n * class NodeClient extends BaseClient<NodeOptions> {\n *   public constructor(options: NodeOptions) {\n *     super(options);\n *   }\n *\n *   // ...\n * }\n */\nclass BaseClient {\n  /** Options passed to the SDK. */\n\n  /** The client Dsn, if specified in options. Without this Dsn, the SDK will be disabled. */\n\n  /** Array of set up integrations. */\n   __init() {this._integrations = {};}\n\n  /** Indicates whether this client's integrations have been set up. */\n   __init2() {this._integrationsInitialized = false;}\n\n  /** Number of calls being processed */\n   __init3() {this._numProcessing = 0;}\n\n  /** Holds flushable  */\n   __init4() {this._outcomes = {};}\n\n  /**\n   * Initializes this client instance.\n   *\n   * @param options Options for the client.\n   */\n   constructor(options) {;BaseClient.prototype.__init.call(this);BaseClient.prototype.__init2.call(this);BaseClient.prototype.__init3.call(this);BaseClient.prototype.__init4.call(this);\n    this._options = options;\n    if (options.dsn) {\n      this._dsn = makeDsn(options.dsn);\n      const url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, options);\n      this._transport = options.transport({\n        recordDroppedEvent: this.recordDroppedEvent.bind(this),\n        ...options.transportOptions,\n        url,\n      });\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('No DSN provided, client will not do anything.');\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n   captureException(exception, hint, scope) {\n    // ensure we haven't captured this very object before\n    if (checkOrSetAlreadyCaught(exception)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(ALREADY_SEEN_ERROR);\n      return;\n    }\n\n    let eventId = hint && hint.event_id;\n\n    this._process(\n      this.eventFromException(exception, hint)\n        .then(event => this._captureEvent(event, hint, scope))\n        .then(result => {\n          eventId = result;\n        }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n    hint,\n    scope,\n  ) {\n    let eventId = hint && hint.event_id;\n\n    const promisedEvent = isPrimitive(message)\n      ? this.eventFromMessage(String(message), level, hint)\n      : this.eventFromException(message, hint);\n\n    this._process(\n      promisedEvent\n        .then(event => this._captureEvent(event, hint, scope))\n        .then(result => {\n          eventId = result;\n        }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint, scope) {\n    // ensure we haven't captured this very object before\n    if (hint && hint.originalException && checkOrSetAlreadyCaught(hint.originalException)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(ALREADY_SEEN_ERROR);\n      return;\n    }\n\n    let eventId = hint && hint.event_id;\n\n    this._process(\n      this._captureEvent(event, hint, scope).then(result => {\n        eventId = result;\n      }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(session) {\n    if (!this._isEnabled()) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('SDK not enabled, will not capture session.');\n      return;\n    }\n\n    if (!(typeof session.release === 'string')) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Discarded session because of missing or non-string release');\n    } else {\n      this.sendSession(session);\n      // After sending, we set init false to indicate it's not the first occurrence\n      updateSession(session, { init: false });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getDsn() {\n    return this._dsn;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getOptions() {\n    return this._options;\n  }\n\n  /**\n   * @see SdkMetadata in @sentry/types\n   *\n   * @return The metadata of the SDK\n   */\n   getSdkMetadata() {\n    return this._options._metadata;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTransport() {\n    return this._transport;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   flush(timeout) {\n    const transport = this._transport;\n    if (transport) {\n      return this._isClientDoneProcessing(timeout).then(clientFinished => {\n        return transport.flush(timeout).then(transportFlushed => clientFinished && transportFlushed);\n      });\n    } else {\n      return resolvedSyncPromise(true);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   close(timeout) {\n    return this.flush(timeout).then(result => {\n      this.getOptions().enabled = false;\n      return result;\n    });\n  }\n\n  /**\n   * Sets up the integrations\n   */\n   setupIntegrations() {\n    if (this._isEnabled() && !this._integrationsInitialized) {\n      this._integrations = setupIntegrations(this._options.integrations);\n      this._integrationsInitialized = true;\n    }\n  }\n\n  /**\n   * Gets an installed integration by its `id`.\n   *\n   * @returns The installed integration or `undefined` if no integration with that `id` was installed.\n   */\n   getIntegrationById(integrationId) {\n    return this._integrations[integrationId];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    try {\n      return (this._integrations[integration.id] ) || null;\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Client`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendEvent(event, hint = {}) {\n    if (this._dsn) {\n      let env = createEventEnvelope(event, this._dsn, this._options._metadata, this._options.tunnel);\n\n      for (const attachment of hint.attachments || []) {\n        env = addItemToEnvelope(\n          env,\n          createAttachmentEnvelopeItem(\n            attachment,\n            this._options.transportOptions && this._options.transportOptions.textEncoder,\n          ),\n        );\n      }\n\n      this._sendEnvelope(env);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendSession(session) {\n    if (this._dsn) {\n      const env = createSessionEnvelope(session, this._dsn, this._options._metadata, this._options.tunnel);\n      this._sendEnvelope(env);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   recordDroppedEvent(reason, category, _event) {\n    // Note: we use `event` in replay, where we overwrite this hook.\n\n    if (this._options.sendClientReports) {\n      // We want to track each category (error, transaction, session, replay_event) separately\n      // but still keep the distinction between different type of outcomes.\n      // We could use nested maps, but it's much easier to read and type this way.\n      // A correct type for map-based implementation if we want to go that route\n      // would be `Partial<Record<SentryRequestType, Partial<Record<Outcome, number>>>>`\n      // With typescript 4.1 we could even use template literal types\n      const key = `${reason}:${category}`;\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Adding outcome: \"${key}\"`);\n\n      // The following works because undefined + 1 === NaN and NaN is falsy\n      this._outcomes[key] = this._outcomes[key] + 1 || 1;\n    }\n  }\n\n  /** Updates existing session based on the provided event */\n   _updateSessionFromEvent(session, event) {\n    let crashed = false;\n    let errored = false;\n    const exceptions = event.exception && event.exception.values;\n\n    if (exceptions) {\n      errored = true;\n\n      for (const ex of exceptions) {\n        const mechanism = ex.mechanism;\n        if (mechanism && mechanism.handled === false) {\n          crashed = true;\n          break;\n        }\n      }\n    }\n\n    // A session is updated and that session update is sent in only one of the two following scenarios:\n    // 1. Session with non terminal status and 0 errors + an error occurred -> Will set error count to 1 and send update\n    // 2. Session with non terminal status and 1 error + a crash occurred -> Will set status crashed and send update\n    const sessionNonTerminal = session.status === 'ok';\n    const shouldUpdateAndSend = (sessionNonTerminal && session.errors === 0) || (sessionNonTerminal && crashed);\n\n    if (shouldUpdateAndSend) {\n      updateSession(session, {\n        ...(crashed && { status: 'crashed' }),\n        errors: session.errors || Number(errored || crashed),\n      });\n      this.captureSession(session);\n    }\n  }\n\n  /**\n   * Determine if the client is finished processing. Returns a promise because it will wait `timeout` ms before saying\n   * \"no\" (resolving to `false`) in order to give the client a chance to potentially finish first.\n   *\n   * @param timeout The time, in ms, after which to resolve to `false` if the client is still busy. Passing `0` (or not\n   * passing anything) will make the promise wait as long as it takes for processing to finish before resolving to\n   * `true`.\n   * @returns A promise which will resolve to `true` if processing is already done or finishes before the timeout, and\n   * `false` otherwise\n   */\n   _isClientDoneProcessing(timeout) {\n    return new SyncPromise(resolve => {\n      let ticked = 0;\n      const tick = 1;\n\n      const interval = setInterval(() => {\n        if (this._numProcessing == 0) {\n          clearInterval(interval);\n          resolve(true);\n        } else {\n          ticked += tick;\n          if (timeout && ticked >= timeout) {\n            clearInterval(interval);\n            resolve(false);\n          }\n        }\n      }, tick);\n    });\n  }\n\n  /** Determines whether this SDK is enabled and a valid Dsn is present. */\n   _isEnabled() {\n    return this.getOptions().enabled !== false && this._dsn !== undefined;\n  }\n\n  /**\n   * Adds common information to events.\n   *\n   * The information includes release and environment from `options`,\n   * breadcrumbs and context (extra, tags and user) from the scope.\n   *\n   * Information that is already present in the event is never overwritten. For\n   * nested objects, such as the context, keys are merged.\n   *\n   * @param event The original event.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A new event with more information.\n   */\n   _prepareEvent(event, hint, scope) {\n    const options = this.getOptions();\n    return prepareEvent(options, event, hint, scope);\n  }\n\n  /**\n   * Processes the event and logs an error in case of rejection\n   * @param event\n   * @param hint\n   * @param scope\n   */\n   _captureEvent(event, hint = {}, scope) {\n    return this._processEvent(event, hint, scope).then(\n      finalEvent => {\n        return finalEvent.event_id;\n      },\n      reason => {\n        if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n          // If something's gone wrong, log the error as a warning. If it's just us having used a `SentryError` for\n          // control flow, log just the message (no stack) as a log-level log.\n          const sentryError = reason ;\n          if (sentryError.logLevel === 'log') {\n            logger.log(sentryError.message);\n          } else {\n            logger.warn(sentryError);\n          }\n        }\n        return undefined;\n      },\n    );\n  }\n\n  /**\n   * Processes an event (either error or message) and sends it to Sentry.\n   *\n   * This also adds breadcrumbs and context information to the event. However,\n   * platform specific meta data (such as the User's IP address) must be added\n   * by the SDK implementor.\n   *\n   *\n   * @param event The event to send to Sentry.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A SyncPromise that resolves with the event or rejects in case event was/will not be send.\n   */\n   _processEvent(event, hint, scope) {\n    const options = this.getOptions();\n    const { sampleRate } = options;\n\n    if (!this._isEnabled()) {\n      return rejectedSyncPromise(new SentryError('SDK not enabled, will not capture event.', 'log'));\n    }\n\n    const isTransaction = isTransactionEvent(event);\n    const isError = isErrorEvent(event);\n    const eventType = event.type || 'error';\n    const beforeSendLabel = `before send for type \\`${eventType}\\``;\n\n    // 1.0 === 100% events are sent\n    // 0.0 === 0% events are sent\n    // Sampling for transaction happens somewhere else\n    if (isError && typeof sampleRate === 'number' && Math.random() > sampleRate) {\n      this.recordDroppedEvent('sample_rate', 'error', event);\n      return rejectedSyncPromise(\n        new SentryError(\n          `Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`,\n          'log',\n        ),\n      );\n    }\n\n    return this._prepareEvent(event, hint, scope)\n      .then(prepared => {\n        if (prepared === null) {\n          this.recordDroppedEvent('event_processor', eventType, event);\n          throw new SentryError('An event processor returned `null`, will not send event.', 'log');\n        }\n\n        const isInternalException = hint.data && (hint.data ).__sentry__ === true;\n        if (isInternalException) {\n          return prepared;\n        }\n\n        const result = processBeforeSend(options, prepared, hint);\n        return _validateBeforeSendResult(result, beforeSendLabel);\n      })\n      .then(processedEvent => {\n        if (processedEvent === null) {\n          this.recordDroppedEvent('before_send', event.type || 'error', event);\n          throw new SentryError(`${beforeSendLabel} returned \\`null\\`, will not send event.`, 'log');\n        }\n\n        const session = scope && scope.getSession();\n        if (!isTransaction && session) {\n          this._updateSessionFromEvent(session, processedEvent);\n        }\n\n        // None of the Sentry built event processor will update transaction name,\n        // so if the transaction name has been changed by an event processor, we know\n        // it has to come from custom event processor added by a user\n        const transactionInfo = processedEvent.transaction_info;\n        if (isTransaction && transactionInfo && processedEvent.transaction !== event.transaction) {\n          const source = 'custom';\n          processedEvent.transaction_info = {\n            ...transactionInfo,\n            source,\n            changes: [\n              ...transactionInfo.changes,\n              {\n                source,\n                // use the same timestamp as the processed event.\n                timestamp: processedEvent.timestamp ,\n                propagations: transactionInfo.propagations,\n              },\n            ],\n          };\n        }\n\n        this.sendEvent(processedEvent, hint);\n        return processedEvent;\n      })\n      .then(null, reason => {\n        if (reason instanceof SentryError) {\n          throw reason;\n        }\n\n        this.captureException(reason, {\n          data: {\n            __sentry__: true,\n          },\n          originalException: reason ,\n        });\n        throw new SentryError(\n          `Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: ${reason}`,\n        );\n      });\n  }\n\n  /**\n   * Occupies the client with processing and event\n   */\n   _process(promise) {\n    this._numProcessing++;\n    void promise.then(\n      value => {\n        this._numProcessing--;\n        return value;\n      },\n      reason => {\n        this._numProcessing--;\n        return reason;\n      },\n    );\n  }\n\n  /**\n   * @inheritdoc\n   */\n   _sendEnvelope(envelope) {\n    if (this._transport && this._dsn) {\n      this._transport.send(envelope).then(null, reason => {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Error while sending event:', reason);\n      });\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Transport disabled');\n    }\n  }\n\n  /**\n   * Clears outcomes on this client and returns them.\n   */\n   _clearOutcomes() {\n    const outcomes = this._outcomes;\n    this._outcomes = {};\n    return Object.keys(outcomes).map(key => {\n      const [reason, category] = key.split(':') ;\n      return {\n        reason,\n        category,\n        quantity: outcomes[key],\n      };\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n\n}\n\n/**\n * Verifies that return value of configured `beforeSend` or `beforeSendTransaction` is of expected type, and returns the value if so.\n */\nfunction _validateBeforeSendResult(\n  beforeSendResult,\n  beforeSendLabel,\n) {\n  const invalidValueError = `${beforeSendLabel} must return \\`null\\` or a valid event.`;\n  if (isThenable(beforeSendResult)) {\n    return beforeSendResult.then(\n      event => {\n        if (!isPlainObject(event) && event !== null) {\n          throw new SentryError(invalidValueError);\n        }\n        return event;\n      },\n      e => {\n        throw new SentryError(`${beforeSendLabel} rejected with ${e}`);\n      },\n    );\n  } else if (!isPlainObject(beforeSendResult) && beforeSendResult !== null) {\n    throw new SentryError(invalidValueError);\n  }\n  return beforeSendResult;\n}\n\n/**\n * Process the matching `beforeSendXXX` callback.\n */\nfunction processBeforeSend(\n  options,\n  event,\n  hint,\n) {\n  const { beforeSend, beforeSendTransaction } = options;\n\n  if (isErrorEvent(event) && beforeSend) {\n    return beforeSend(event, hint);\n  }\n\n  if (isTransactionEvent(event) && beforeSendTransaction) {\n    return beforeSendTransaction(event, hint);\n  }\n\n  return event;\n}\n\nfunction isErrorEvent(event) {\n  return event.type === undefined;\n}\n\nfunction isTransactionEvent(event) {\n  return event.type === 'transaction';\n}\n\nexport { BaseClient };\n//# sourceMappingURL=baseclient.js.map\n","import { getSdkMetadataForEnvelopeHeader, dsnToString, createEnvelope, createEventEnvelopeHeaders } from '@sentry/utils';\n\n/**\n * Apply SdkInfo (name, version, packages, integrations) to the corresponding event key.\n * Merge with existing data if any.\n **/\nfunction enhanceEventWithSdkInfo(event, sdkInfo) {\n  if (!sdkInfo) {\n    return event;\n  }\n  event.sdk = event.sdk || {};\n  event.sdk.name = event.sdk.name || sdkInfo.name;\n  event.sdk.version = event.sdk.version || sdkInfo.version;\n  event.sdk.integrations = [...(event.sdk.integrations || []), ...(sdkInfo.integrations || [])];\n  event.sdk.packages = [...(event.sdk.packages || []), ...(sdkInfo.packages || [])];\n  return event;\n}\n\n/** Creates an envelope from a Session */\nfunction createSessionEnvelope(\n  session,\n  dsn,\n  metadata,\n  tunnel,\n) {\n  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);\n  const envelopeHeaders = {\n    sent_at: new Date().toISOString(),\n    ...(sdkInfo && { sdk: sdkInfo }),\n    ...(!!tunnel && { dsn: dsnToString(dsn) }),\n  };\n\n  const envelopeItem =\n    'aggregates' in session ? [{ type: 'sessions' }, session] : [{ type: 'session' }, session];\n\n  return createEnvelope(envelopeHeaders, [envelopeItem]);\n}\n\n/**\n * Create an Envelope from an event.\n */\nfunction createEventEnvelope(\n  event,\n  dsn,\n  metadata,\n  tunnel,\n) {\n  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);\n  const eventType = event.type || 'event';\n\n  enhanceEventWithSdkInfo(event, metadata && metadata.sdk);\n\n  const envelopeHeaders = createEventEnvelopeHeaders(event, sdkInfo, tunnel, dsn);\n\n  // Prevent this data (which, if it exists, was used in earlier steps in the processing pipeline) from being sent to\n  // sentry. (Note: Our use of this property comes and goes with whatever we might be debugging, whatever hacks we may\n  // have temporarily added, etc. Even if we don't happen to be using it at some point in the future, let's not get rid\n  // of this `delete`, lest we miss putting it back in the next time the property is in use.)\n  delete event.sdkProcessingMetadata;\n\n  const eventItem = [{ type: eventType }, event];\n  return createEnvelope(envelopeHeaders, [eventItem]);\n}\n\nexport { createEventEnvelope, createSessionEnvelope };\n//# sourceMappingURL=envelope.js.map\n","import { uuid4, dateTimestampInSeconds, resolvedSyncPromise, truncate, normalize } from '@sentry/utils';\nimport { Scope } from '../scope.js';\n\n/**\n * Adds common information to events.\n *\n * The information includes release and environment from `options`,\n * breadcrumbs and context (extra, tags and user) from the scope.\n *\n * Information that is already present in the event is never overwritten. For\n * nested objects, such as the context, keys are merged.\n *\n * Note: This also triggers callbacks for `addGlobalEventProcessor`, but not `beforeSend`.\n *\n * @param event The original event.\n * @param hint May contain additional information about the original exception.\n * @param scope A scope containing event metadata.\n * @returns A new event with more information.\n * @hidden\n */\nfunction prepareEvent(\n  options,\n  event,\n  hint,\n  scope,\n) {\n  const { normalizeDepth = 3, normalizeMaxBreadth = 1000 } = options;\n  const prepared = {\n    ...event,\n    event_id: event.event_id || hint.event_id || uuid4(),\n    timestamp: event.timestamp || dateTimestampInSeconds(),\n  };\n\n  applyClientOptions(prepared, options);\n  applyIntegrationsMetadata(\n    prepared,\n    options.integrations.map(i => i.name),\n  );\n\n  // If we have scope given to us, use it as the base for further modifications.\n  // This allows us to prevent unnecessary copying of data if `captureContext` is not provided.\n  let finalScope = scope;\n  if (hint.captureContext) {\n    finalScope = Scope.clone(finalScope).update(hint.captureContext);\n  }\n\n  // We prepare the result here with a resolved Event.\n  let result = resolvedSyncPromise(prepared);\n\n  // This should be the last thing called, since we want that\n  // {@link Hub.addEventProcessor} gets the finished prepared event.\n  //\n  // We need to check for the existence of `finalScope.getAttachments`\n  // because `getAttachments` can be undefined if users are using an older version\n  // of `@sentry/core` that does not have the `getAttachments` method.\n  // See: https://github.com/getsentry/sentry-javascript/issues/5229\n  if (finalScope) {\n    // Collect attachments from the hint and scope\n    if (finalScope.getAttachments) {\n      const attachments = [...(hint.attachments || []), ...finalScope.getAttachments()];\n\n      if (attachments.length) {\n        hint.attachments = attachments;\n      }\n    }\n\n    // In case we have a hub we reassign it.\n    result = finalScope.applyToEvent(prepared, hint);\n  }\n\n  return result.then(evt => {\n    if (typeof normalizeDepth === 'number' && normalizeDepth > 0) {\n      return normalizeEvent(evt, normalizeDepth, normalizeMaxBreadth);\n    }\n    return evt;\n  });\n}\n\n/**\n *  Enhances event using the client configuration.\n *  It takes care of all \"static\" values like environment, release and `dist`,\n *  as well as truncating overly long values.\n * @param event event instance to be enhanced\n */\nfunction applyClientOptions(event, options) {\n  const { environment, release, dist, maxValueLength = 250 } = options;\n\n  if (!('environment' in event)) {\n    event.environment = 'environment' in options ? environment : 'production';\n  }\n\n  if (event.release === undefined && release !== undefined) {\n    event.release = release;\n  }\n\n  if (event.dist === undefined && dist !== undefined) {\n    event.dist = dist;\n  }\n\n  if (event.message) {\n    event.message = truncate(event.message, maxValueLength);\n  }\n\n  const exception = event.exception && event.exception.values && event.exception.values[0];\n  if (exception && exception.value) {\n    exception.value = truncate(exception.value, maxValueLength);\n  }\n\n  const request = event.request;\n  if (request && request.url) {\n    request.url = truncate(request.url, maxValueLength);\n  }\n}\n\n/**\n * This function adds all used integrations to the SDK info in the event.\n * @param event The event that will be filled with all integrations.\n */\nfunction applyIntegrationsMetadata(event, integrationNames) {\n  if (integrationNames.length > 0) {\n    event.sdk = event.sdk || {};\n    event.sdk.integrations = [...(event.sdk.integrations || []), ...integrationNames];\n  }\n}\n\n/**\n * Applies `normalize` function on necessary `Event` attributes to make them safe for serialization.\n * Normalized keys:\n * - `breadcrumbs.data`\n * - `user`\n * - `contexts`\n * - `extra`\n * @param event Event\n * @returns Normalized event\n */\nfunction normalizeEvent(event, depth, maxBreadth) {\n  if (!event) {\n    return null;\n  }\n\n  const normalized = {\n    ...event,\n    ...(event.breadcrumbs && {\n      breadcrumbs: event.breadcrumbs.map(b => ({\n        ...b,\n        ...(b.data && {\n          data: normalize(b.data, depth, maxBreadth),\n        }),\n      })),\n    }),\n    ...(event.user && {\n      user: normalize(event.user, depth, maxBreadth),\n    }),\n    ...(event.contexts && {\n      contexts: normalize(event.contexts, depth, maxBreadth),\n    }),\n    ...(event.extra && {\n      extra: normalize(event.extra, depth, maxBreadth),\n    }),\n  };\n\n  // event.contexts.trace stores information about a Transaction. Similarly,\n  // event.spans[] stores information about child Spans. Given that a\n  // Transaction is conceptually a Span, normalization should apply to both\n  // Transactions and Spans consistently.\n  // For now the decision is to skip normalization of Transactions and Spans,\n  // so this block overwrites the normalized event to add back the original\n  // Transaction information prior to normalization.\n  if (event.contexts && event.contexts.trace && normalized.contexts) {\n    normalized.contexts.trace = event.contexts.trace;\n\n    // event.contexts.trace.data may contain circular/dangerous data so we need to normalize it\n    if (event.contexts.trace.data) {\n      normalized.contexts.trace.data = normalize(event.contexts.trace.data, depth, maxBreadth);\n    }\n  }\n\n  // event.spans[].data may contain circular/dangerous data so we need to normalize it\n  if (event.spans) {\n    normalized.spans = event.spans.map(span => {\n      // We cannot use the spread operator here because `toJSON` on `span` is non-enumerable\n      if (span.data) {\n        span.data = normalize(span.data, depth, maxBreadth);\n      }\n      return span;\n    });\n  }\n\n  return normalized;\n}\n\nexport { prepareEvent };\n//# sourceMappingURL=prepareEvent.js.map\n","const SDK_VERSION = '7.29.0';\n\nexport { SDK_VERSION };\n//# sourceMappingURL=version.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { isEvent, extractExceptionKeysForMessage, normalizeToSize, addExceptionMechanism, resolvedSyncPromise, isErrorEvent, isDOMError, isDOMException, addExceptionTypeValue, isError, isPlainObject } from '@sentry/utils';\n\n/**\n * This function creates an exception from a JavaScript Error\n */\nfunction exceptionFromError(stackParser, ex) {\n  // Get the frames first since Opera can lose the stack if we touch anything else first\n  const frames = parseStackFrames(stackParser, ex);\n\n  const exception = {\n    type: ex && ex.name,\n    value: extractMessage(ex),\n  };\n\n  if (frames.length) {\n    exception.stacktrace = { frames };\n  }\n\n  if (exception.type === undefined && exception.value === '') {\n    exception.value = 'Unrecoverable error caught';\n  }\n\n  return exception;\n}\n\n/**\n * @hidden\n */\nfunction eventFromPlainObject(\n  stackParser,\n  exception,\n  syntheticException,\n  isUnhandledRejection,\n) {\n  const hub = getCurrentHub();\n  const client = hub.getClient();\n  const normalizeDepth = client && client.getOptions().normalizeDepth;\n\n  const event = {\n    exception: {\n      values: [\n        {\n          type: isEvent(exception) ? exception.constructor.name : isUnhandledRejection ? 'UnhandledRejection' : 'Error',\n          value: `Non-Error ${\n            isUnhandledRejection ? 'promise rejection' : 'exception'\n          } captured with keys: ${extractExceptionKeysForMessage(exception)}`,\n        },\n      ],\n    },\n    extra: {\n      __serialized__: normalizeToSize(exception, normalizeDepth),\n    },\n  };\n\n  if (syntheticException) {\n    const frames = parseStackFrames(stackParser, syntheticException);\n    if (frames.length) {\n      // event.exception.values[0] has been set above\n      (event.exception ).values[0].stacktrace = { frames };\n    }\n  }\n\n  return event;\n}\n\n/**\n * @hidden\n */\nfunction eventFromError(stackParser, ex) {\n  return {\n    exception: {\n      values: [exceptionFromError(stackParser, ex)],\n    },\n  };\n}\n\n/** Parses stack frames from an error */\nfunction parseStackFrames(\n  stackParser,\n  ex,\n) {\n  // Access and store the stacktrace property before doing ANYTHING\n  // else to it because Opera is not very good at providing it\n  // reliably in other circumstances.\n  const stacktrace = ex.stacktrace || ex.stack || '';\n\n  const popSize = getPopSize(ex);\n\n  try {\n    return stackParser(stacktrace, popSize);\n  } catch (e) {\n    // no-empty\n  }\n\n  return [];\n}\n\n// Based on our own mapping pattern - https://github.com/getsentry/sentry/blob/9f08305e09866c8bd6d0c24f5b0aabdd7dd6c59c/src/sentry/lang/javascript/errormapping.py#L83-L108\nconst reactMinifiedRegexp = /Minified React error #\\d+;/i;\n\nfunction getPopSize(ex) {\n  if (ex) {\n    if (typeof ex.framesToPop === 'number') {\n      return ex.framesToPop;\n    }\n\n    if (reactMinifiedRegexp.test(ex.message)) {\n      return 1;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * There are cases where stacktrace.message is an Event object\n * https://github.com/getsentry/sentry-javascript/issues/1949\n * In this specific case we try to extract stacktrace.message.error.message\n */\nfunction extractMessage(ex) {\n  const message = ex && ex.message;\n  if (!message) {\n    return 'No error message';\n  }\n  if (message.error && typeof message.error.message === 'string') {\n    return message.error.message;\n  }\n  return message;\n}\n\n/**\n * Creates an {@link Event} from all inputs to `captureException` and non-primitive inputs to `captureMessage`.\n * @hidden\n */\nfunction eventFromException(\n  stackParser,\n  exception,\n  hint,\n  attachStacktrace,\n) {\n  const syntheticException = (hint && hint.syntheticException) || undefined;\n  const event = eventFromUnknownInput(stackParser, exception, syntheticException, attachStacktrace);\n  addExceptionMechanism(event); // defaults to { type: 'generic', handled: true }\n  event.level = 'error';\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n  return resolvedSyncPromise(event);\n}\n\n/**\n * Builds and Event from a Message\n * @hidden\n */\nfunction eventFromMessage(\n  stackParser,\n  message,\n  // eslint-disable-next-line deprecation/deprecation\n  level = 'info',\n  hint,\n  attachStacktrace,\n) {\n  const syntheticException = (hint && hint.syntheticException) || undefined;\n  const event = eventFromString(stackParser, message, syntheticException, attachStacktrace);\n  event.level = level;\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n  return resolvedSyncPromise(event);\n}\n\n/**\n * @hidden\n */\nfunction eventFromUnknownInput(\n  stackParser,\n  exception,\n  syntheticException,\n  attachStacktrace,\n  isUnhandledRejection,\n) {\n  let event;\n\n  if (isErrorEvent(exception ) && (exception ).error) {\n    // If it is an ErrorEvent with `error` property, extract it to get actual Error\n    const errorEvent = exception ;\n    return eventFromError(stackParser, errorEvent.error );\n  }\n\n  // If it is a `DOMError` (which is a legacy API, but still supported in some browsers) then we just extract the name\n  // and message, as it doesn't provide anything else. According to the spec, all `DOMExceptions` should also be\n  // `Error`s, but that's not the case in IE11, so in that case we treat it the same as we do a `DOMError`.\n  //\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMError\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMException\n  // https://webidl.spec.whatwg.org/#es-DOMException-specialness\n  if (isDOMError(exception ) || isDOMException(exception )) {\n    const domException = exception ;\n\n    if ('stack' in (exception )) {\n      event = eventFromError(stackParser, exception );\n    } else {\n      const name = domException.name || (isDOMError(domException) ? 'DOMError' : 'DOMException');\n      const message = domException.message ? `${name}: ${domException.message}` : name;\n      event = eventFromString(stackParser, message, syntheticException, attachStacktrace);\n      addExceptionTypeValue(event, message);\n    }\n    if ('code' in domException) {\n      event.tags = { ...event.tags, 'DOMException.code': `${domException.code}` };\n    }\n\n    return event;\n  }\n  if (isError(exception)) {\n    // we have a real Error object, do nothing\n    return eventFromError(stackParser, exception);\n  }\n  if (isPlainObject(exception) || isEvent(exception)) {\n    // If it's a plain object or an instance of `Event` (the built-in JS kind, not this SDK's `Event` type), serialize\n    // it manually. This will allow us to group events based on top-level keys which is much better than creating a new\n    // group on any key/value change.\n    const objectException = exception ;\n    event = eventFromPlainObject(stackParser, objectException, syntheticException, isUnhandledRejection);\n    addExceptionMechanism(event, {\n      synthetic: true,\n    });\n    return event;\n  }\n\n  // If none of previous checks were valid, then it means that it's not:\n  // - an instance of DOMError\n  // - an instance of DOMException\n  // - an instance of Event\n  // - an instance of Error\n  // - a valid ErrorEvent (one with an error property)\n  // - a plain Object\n  //\n  // So bail out and capture it as a simple message:\n  event = eventFromString(stackParser, exception , syntheticException, attachStacktrace);\n  addExceptionTypeValue(event, `${exception}`, undefined);\n  addExceptionMechanism(event, {\n    synthetic: true,\n  });\n\n  return event;\n}\n\n/**\n * @hidden\n */\nfunction eventFromString(\n  stackParser,\n  input,\n  syntheticException,\n  attachStacktrace,\n) {\n  const event = {\n    message: input,\n  };\n\n  if (attachStacktrace && syntheticException) {\n    const frames = parseStackFrames(stackParser, syntheticException);\n    if (frames.length) {\n      event.exception = {\n        values: [{ value: input, stacktrace: { frames } }],\n      };\n    }\n  }\n\n  return event;\n}\n\nexport { eventFromError, eventFromException, eventFromMessage, eventFromPlainObject, eventFromString, eventFromUnknownInput, exceptionFromError, parseStackFrames };\n//# sourceMappingURL=eventbuilder.js.map\n","// Note: Ideally the `SeverityLevel` type would be derived from `validSeverityLevels`, but that would mean either\n//\n// a) moving `validSeverityLevels` to `@sentry/types`,\n// b) moving the`SeverityLevel` type here, or\n// c) importing `validSeverityLevels` from here into `@sentry/types`.\n//\n// Option A would make `@sentry/types` a runtime dependency of `@sentry/utils` (not good), and options B and C would\n// create a circular dependency between `@sentry/types` and `@sentry/utils` (also not good). So a TODO accompanying the\n// type, reminding anyone who changes it to change this list also, will have to do.\n\nconst validSeverityLevels = ['fatal', 'error', 'warning', 'log', 'info', 'debug'];\n\n/**\n * Converts a string-based level into a member of the deprecated {@link Severity} enum.\n *\n * @deprecated `severityFromString` is deprecated. Please use `severityLevelFromString` instead.\n *\n * @param level String representation of Severity\n * @returns Severity\n */\nfunction severityFromString(level) {\n  return severityLevelFromString(level) ;\n}\n\n/**\n * Converts a string-based level into a `SeverityLevel`, normalizing it along the way.\n *\n * @param level String representation of desired `SeverityLevel`.\n * @returns The `SeverityLevel` corresponding to the given string, or 'log' if the string isn't a valid level.\n */\nfunction severityLevelFromString(level) {\n  return (level === 'warn' ? 'warning' : validSeverityLevels.includes(level) ? level : 'log') ;\n}\n\nexport { severityFromString, severityLevelFromString, validSeverityLevels };\n//# sourceMappingURL=severity.js.map\n","/**\n * Parses string form of URL into an object\n * // borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n * // intentionally using regex and not <a/> href parsing trick because React Native and other\n * // environments where DOM might not be available\n * @returns parsed URL object\n */\nfunction parseUrl(url)\n\n {\n  if (!url) {\n    return {};\n  }\n\n  const match = url.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n\n  if (!match) {\n    return {};\n  }\n\n  // coerce to undefined values to empty string so we don't get 'undefined'\n  const query = match[6] || '';\n  const fragment = match[8] || '';\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment, // everything minus origin\n  };\n}\n\n/**\n * Strip the query string and fragment off of a given URL or path (if present)\n *\n * @param urlPath Full URL or path, including possible query string and/or fragment\n * @returns URL or path without query string or fragment\n */\nfunction stripUrlQueryAndFragment(urlPath) {\n  // eslint-disable-next-line no-useless-escape\n  return urlPath.split(/[\\?#]/, 1)[0];\n}\n\n/**\n * Returns number of URL segments of a passed string URL.\n */\nfunction getNumberOfUrlSegments(url) {\n  // split at '/' or at '\\/' to split regex urls correctly\n  return url.split(/\\\\?\\//).filter(s => s.length > 0 && s !== ',').length;\n}\n\nexport { getNumberOfUrlSegments, parseUrl, stripUrlQueryAndFragment };\n//# sourceMappingURL=url.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { addInstrumentationHandler, getEventDescription, logger, htmlTreeAsString, severityLevelFromString, safeJoin, parseUrl } from '@sentry/utils';\nimport { WINDOW } from '../helpers.js';\n\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\n/** JSDoc */\n\n/** maxStringLength gets capped to prevent 100 breadcrumbs exceeding 1MB event payload size */\nconst MAX_ALLOWED_STRING_LENGTH = 1024;\n\nconst BREADCRUMB_INTEGRATION_ID = 'Breadcrumbs';\n\n/**\n * Default Breadcrumbs instrumentations\n * TODO: Deprecated - with v6, this will be renamed to `Instrument`\n */\nclass Breadcrumbs  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = BREADCRUMB_INTEGRATION_ID;}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Breadcrumbs.id;}\n\n  /**\n   * Options of the breadcrumbs integration.\n   */\n  // This field is public, because we use it in the browser client to check if the `sentry` option is enabled.\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options) {;Breadcrumbs.prototype.__init.call(this);\n    this.options = {\n      console: true,\n      dom: true,\n      fetch: true,\n      history: true,\n      sentry: true,\n      xhr: true,\n      ...options,\n    };\n  }\n\n  /**\n   * Instrument browser built-ins w/ breadcrumb capturing\n   *  - Console API\n   *  - DOM API (click/typing)\n   *  - XMLHttpRequest API\n   *  - Fetch API\n   *  - History API\n   */\n   setupOnce() {\n    if (this.options.console) {\n      addInstrumentationHandler('console', _consoleBreadcrumb);\n    }\n    if (this.options.dom) {\n      addInstrumentationHandler('dom', _domBreadcrumb(this.options.dom));\n    }\n    if (this.options.xhr) {\n      addInstrumentationHandler('xhr', _xhrBreadcrumb);\n    }\n    if (this.options.fetch) {\n      addInstrumentationHandler('fetch', _fetchBreadcrumb);\n    }\n    if (this.options.history) {\n      addInstrumentationHandler('history', _historyBreadcrumb);\n    }\n  }\n\n  /**\n   * Adds a breadcrumb for Sentry events or transactions if this option is enabled.\n   */\n   addSentryBreadcrumb(event) {\n    if (this.options.sentry) {\n      getCurrentHub().addBreadcrumb(\n        {\n          category: `sentry.${event.type === 'transaction' ? 'transaction' : 'event'}`,\n          event_id: event.event_id,\n          level: event.level,\n          message: getEventDescription(event),\n        },\n        {\n          event,\n        },\n      );\n    }\n  }\n} Breadcrumbs.__initStatic();\n\n/**\n * A HOC that creaes a function that creates breadcrumbs from DOM API calls.\n * This is a HOC so that we get access to dom options in the closure.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _domBreadcrumb(dom) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  function _innerDomBreadcrumb(handlerData) {\n    let target;\n    let keyAttrs = typeof dom === 'object' ? dom.serializeAttribute : undefined;\n\n    let maxStringLength =\n      typeof dom === 'object' && typeof dom.maxStringLength === 'number' ? dom.maxStringLength : undefined;\n    if (maxStringLength && maxStringLength > MAX_ALLOWED_STRING_LENGTH) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(\n          `\\`dom.maxStringLength\\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${maxStringLength} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`,\n        );\n      maxStringLength = MAX_ALLOWED_STRING_LENGTH;\n    }\n\n    if (typeof keyAttrs === 'string') {\n      keyAttrs = [keyAttrs];\n    }\n\n    // Accessing event.target can throw (see getsentry/raven-js#838, #768)\n    try {\n      target = handlerData.event.target\n        ? htmlTreeAsString(handlerData.event.target , { keyAttrs, maxStringLength })\n        : htmlTreeAsString(handlerData.event , { keyAttrs, maxStringLength });\n    } catch (e) {\n      target = '<unknown>';\n    }\n\n    if (target.length === 0) {\n      return;\n    }\n\n    getCurrentHub().addBreadcrumb(\n      {\n        category: `ui.${handlerData.name}`,\n        message: target,\n      },\n      {\n        event: handlerData.event,\n        name: handlerData.name,\n        global: handlerData.global,\n      },\n    );\n  }\n\n  return _innerDomBreadcrumb;\n}\n\n/**\n * Creates breadcrumbs from console API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _consoleBreadcrumb(handlerData) {\n  // This is a hack to fix a Vue3-specific bug that causes an infinite loop of\n  // console warnings. This happens when a Vue template is rendered with\n  // an undeclared variable, which we try to stringify, ultimately causing\n  // Vue to issue another warning which repeats indefinitely.\n  // see: https://github.com/getsentry/sentry-javascript/pull/6010\n  // see: https://github.com/getsentry/sentry-javascript/issues/5916\n  for (let i = 0; i < handlerData.args.length; i++) {\n    if (handlerData.args[i] === 'ref=Ref<') {\n      handlerData.args[i + 1] = 'viewRef';\n      break;\n    }\n  }\n  const breadcrumb = {\n    category: 'console',\n    data: {\n      arguments: handlerData.args,\n      logger: 'console',\n    },\n    level: severityLevelFromString(handlerData.level),\n    message: safeJoin(handlerData.args, ' '),\n  };\n\n  if (handlerData.level === 'assert') {\n    if (handlerData.args[0] === false) {\n      breadcrumb.message = `Assertion failed: ${safeJoin(handlerData.args.slice(1), ' ') || 'console.assert'}`;\n      breadcrumb.data.arguments = handlerData.args.slice(1);\n    } else {\n      // Don't capture a breadcrumb for passed assertions\n      return;\n    }\n  }\n\n  getCurrentHub().addBreadcrumb(breadcrumb, {\n    input: handlerData.args,\n    level: handlerData.level,\n  });\n}\n\n/**\n * Creates breadcrumbs from XHR API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _xhrBreadcrumb(handlerData) {\n  if (handlerData.endTimestamp) {\n    // We only capture complete, non-sentry requests\n    if (handlerData.xhr.__sentry_own_request__) {\n      return;\n    }\n\n    const { method, url, status_code, body } = handlerData.xhr.__sentry_xhr__ || {};\n\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'xhr',\n        data: {\n          method,\n          url,\n          status_code,\n        },\n        type: 'http',\n      },\n      {\n        xhr: handlerData.xhr,\n        input: body,\n      },\n    );\n\n    return;\n  }\n}\n\n/**\n * Creates breadcrumbs from fetch API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _fetchBreadcrumb(handlerData) {\n  // We only capture complete fetch requests\n  if (!handlerData.endTimestamp) {\n    return;\n  }\n\n  if (handlerData.fetchData.url.match(/sentry_key/) && handlerData.fetchData.method === 'POST') {\n    // We will not create breadcrumbs for fetch requests that contain `sentry_key` (internal sentry requests)\n    return;\n  }\n\n  if (handlerData.error) {\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'fetch',\n        data: handlerData.fetchData,\n        level: 'error',\n        type: 'http',\n      },\n      {\n        data: handlerData.error,\n        input: handlerData.args,\n      },\n    );\n  } else {\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'fetch',\n        data: {\n          ...handlerData.fetchData,\n          status_code: handlerData.response.status,\n        },\n        type: 'http',\n      },\n      {\n        input: handlerData.args,\n        response: handlerData.response,\n      },\n    );\n  }\n}\n\n/**\n * Creates breadcrumbs from history API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _historyBreadcrumb(handlerData) {\n  let from = handlerData.from;\n  let to = handlerData.to;\n  const parsedLoc = parseUrl(WINDOW.location.href);\n  let parsedFrom = parseUrl(from);\n  const parsedTo = parseUrl(to);\n\n  // Initial pushState doesn't provide `from` information\n  if (!parsedFrom.path) {\n    parsedFrom = parsedLoc;\n  }\n\n  // Use only the path component of the URL if the URL matches the current\n  // document (almost all the time when using pushState)\n  if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host) {\n    to = parsedTo.relative;\n  }\n  if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host) {\n    from = parsedFrom.relative;\n  }\n\n  getCurrentHub().addBreadcrumb({\n    category: 'navigation',\n    data: {\n      from,\n      to,\n    },\n  });\n}\n\nexport { BREADCRUMB_INTEGRATION_ID, Breadcrumbs };\n//# sourceMappingURL=breadcrumbs.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { BaseClient, SDK_VERSION, getEnvelopeEndpointWithUrlEncodedAuth } from '@sentry/core';\nimport { logger, createClientReportEnvelope, dsnToString, serializeEnvelope } from '@sentry/utils';\nimport { eventFromException, eventFromMessage } from './eventbuilder.js';\nimport { WINDOW } from './helpers.js';\nimport { BREADCRUMB_INTEGRATION_ID } from './integrations/breadcrumbs.js';\n\n/**\n * Configuration options for the Sentry Browser SDK.\n * @see @sentry/types Options for more information.\n */\n\n/**\n * The Sentry Browser SDK Client.\n *\n * @see BrowserOptions for documentation on configuration options.\n * @see SentryClient for usage documentation.\n */\nclass BrowserClient extends BaseClient {\n  /**\n   * Creates a new Browser SDK instance.\n   *\n   * @param options Configuration options for this SDK.\n   */\n   constructor(options) {\n    options._metadata = options._metadata || {};\n    options._metadata.sdk = options._metadata.sdk || {\n      name: 'sentry.javascript.browser',\n      packages: [\n        {\n          name: 'npm:@sentry/browser',\n          version: SDK_VERSION,\n        },\n      ],\n      version: SDK_VERSION,\n    };\n\n    super(options);\n\n    if (options.sendClientReports && WINDOW.document) {\n      WINDOW.document.addEventListener('visibilitychange', () => {\n        if (WINDOW.document.visibilityState === 'hidden') {\n          this._flushOutcomes();\n        }\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   eventFromException(exception, hint) {\n    return eventFromException(this._options.stackParser, exception, hint, this._options.attachStacktrace);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   eventFromMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level = 'info',\n    hint,\n  ) {\n    return eventFromMessage(this._options.stackParser, message, level, hint, this._options.attachStacktrace);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendEvent(event, hint) {\n    // We only want to add the sentry event breadcrumb when the user has the breadcrumb integration installed and\n    // activated its `sentry` option.\n    // We also do not want to use the `Breadcrumbs` class here directly, because we do not want it to be included in\n    // bundles, if it is not used by the SDK.\n    // This all sadly is a bit ugly, but we currently don't have a \"pre-send\" hook on the integrations so we do it this\n    // way for now.\n    const breadcrumbIntegration = this.getIntegrationById(BREADCRUMB_INTEGRATION_ID) ;\n    // We check for definedness of `addSentryBreadcrumb` in case users provided their own integration with id\n    // \"Breadcrumbs\" that does not have this function.\n    _optionalChain([breadcrumbIntegration, 'optionalAccess', _ => _.addSentryBreadcrumb, 'optionalCall', _2 => _2(event)]);\n\n    super.sendEvent(event, hint);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   _prepareEvent(event, hint, scope) {\n    event.platform = event.platform || 'javascript';\n    return super._prepareEvent(event, hint, scope);\n  }\n\n  /**\n   * Sends client reports as an envelope.\n   */\n   _flushOutcomes() {\n    const outcomes = this._clearOutcomes();\n\n    if (outcomes.length === 0) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('No outcomes to send');\n      return;\n    }\n\n    if (!this._dsn) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('No dsn provided, will not send outcomes');\n      return;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Sending outcomes:', outcomes);\n\n    const url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, this._options);\n    const envelope = createClientReportEnvelope(outcomes, this._options.tunnel && dsnToString(this._dsn));\n\n    try {\n      const isRealNavigator = Object.prototype.toString.call(WINDOW && WINDOW.navigator) === '[object Navigator]';\n      const hasSendBeacon = isRealNavigator && typeof WINDOW.navigator.sendBeacon === 'function';\n      // Make sure beacon is not used if user configures custom transport options\n      if (hasSendBeacon && !this._options.transportOptions) {\n        // Prevent illegal invocations - https://xgwang.me/posts/you-may-not-know-beacon/#it-may-throw-error%2C-be-sure-to-catch\n        const sendBeacon = WINDOW.navigator.sendBeacon.bind(WINDOW.navigator);\n        sendBeacon(url, serializeEnvelope(envelope));\n      } else {\n        // If beacon is not supported or if they are using the tunnel option\n        // use our regular transport to send client reports to Sentry.\n        this._sendEnvelope(envelope);\n      }\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(e);\n    }\n  }\n}\n\nexport { BrowserClient };\n//# sourceMappingURL=client.js.map\n","/**\n * Polyfill for the optional chain operator, `?.`, given previous conversion of the expression into an array of values,\n * descriptors, and functions.\n *\n * Adapted from Sucrase (https://github.com/alangpierce/sucrase)\n * See https://github.com/alangpierce/sucrase/blob/265887868966917f3b924ce38dfad01fbab1329f/src/transformers/OptionalChainingNullishTransformer.ts#L15\n *\n * @param ops Array result of expression conversion\n * @returns The value of the expression\n */\nfunction _optionalChain(ops) {\n  let lastAccessLHS = undefined;\n  let value = ops[0];\n  let i = 1;\n  while (i < ops.length) {\n    const op = ops[i] ;\n    const fn = ops[i + 1] ;\n    i += 2;\n    // by checking for loose equality to `null`, we catch both `null` and `undefined`\n    if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n      // really we're meaning to return `undefined` as an actual value here, but it saves bytes not to write it\n      return;\n    }\n    if (op === 'access' || op === 'optionalAccess') {\n      lastAccessLHS = value;\n      value = fn(value);\n    } else if (op === 'call' || op === 'optionalCall') {\n      value = fn((...args) => (value ).call(lastAccessLHS, ...args));\n      lastAccessLHS = undefined;\n    }\n  }\n  return value;\n}\n\n// Sucrase version\n// function _optionalChain(ops) {\n//   let lastAccessLHS = undefined;\n//   let value = ops[0];\n//   let i = 1;\n//   while (i < ops.length) {\n//     const op = ops[i];\n//     const fn = ops[i + 1];\n//     i += 2;\n//     if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n//       return undefined;\n//     }\n//     if (op === 'access' || op === 'optionalAccess') {\n//       lastAccessLHS = value;\n//       value = fn(value);\n//     } else if (op === 'call' || op === 'optionalCall') {\n//       value = fn((...args) => value.call(lastAccessLHS, ...args));\n//       lastAccessLHS = undefined;\n//     }\n//   }\n//   return value;\n// }\n\nexport { _optionalChain };\n//# sourceMappingURL=_optionalChain.js.map\n","import { createEnvelope } from './envelope.js';\nimport { dateTimestampInSeconds } from './time.js';\n\n/**\n * Creates client report envelope\n * @param discarded_events An array of discard events\n * @param dsn A DSN that can be set on the header. Optional.\n */\nfunction createClientReportEnvelope(\n  discarded_events,\n  dsn,\n  timestamp,\n) {\n  const clientReportItem = [\n    { type: 'client_report' },\n    {\n      timestamp: timestamp || dateTimestampInSeconds(),\n      discarded_events,\n    },\n  ];\n  return createEnvelope(dsn ? { dsn } : {}, [clientReportItem]);\n}\n\nexport { createClientReportEnvelope };\n//# sourceMappingURL=clientreport.js.map\n","import { createStackParser } from '@sentry/utils';\n\n// global reference to slice\nconst UNKNOWN_FUNCTION = '?';\n\nconst OPERA10_PRIORITY = 10;\nconst OPERA11_PRIORITY = 20;\nconst CHROME_PRIORITY = 30;\nconst WINJS_PRIORITY = 40;\nconst GECKO_PRIORITY = 50;\n\nfunction createFrame(filename, func, lineno, colno) {\n  const frame = {\n    filename,\n    function: func,\n    // All browser frames are considered in_app\n    in_app: true,\n  };\n\n  if (lineno !== undefined) {\n    frame.lineno = lineno;\n  }\n\n  if (colno !== undefined) {\n    frame.colno = colno;\n  }\n\n  return frame;\n}\n\n// Chromium based browsers: Chrome, Brave, new Opera, new Edge\nconst chromeRegex =\n  /^\\s*at (?:(.*\\).*?|.*?) ?\\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nconst chromeEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\n\nconst chrome = line => {\n  const parts = chromeRegex.exec(line);\n\n  if (parts) {\n    const isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n\n    if (isEval) {\n      const subMatch = chromeEvalRegex.exec(parts[2]);\n\n      if (subMatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = subMatch[1]; // url\n        parts[3] = subMatch[2]; // line\n        parts[4] = subMatch[3]; // column\n      }\n    }\n\n    // Kamil: One more hack won't hurt us right? Understanding and adding more rules on top of these regexps right now\n    // would be way too time consuming. (TODO: Rewrite whole RegExp to be more readable)\n    const [func, filename] = extractSafariExtensionDetails(parts[1] || UNKNOWN_FUNCTION, parts[2]);\n\n    return createFrame(filename, func, parts[3] ? +parts[3] : undefined, parts[4] ? +parts[4] : undefined);\n  }\n\n  return;\n};\n\nconst chromeStackLineParser = [CHROME_PRIORITY, chrome];\n\n// gecko regex: `(?:bundle|\\d+\\.js)`: `bundle` is for react native, `\\d+\\.js` also but specifically for ram bundles because it\n// generates filenames without a prefix like `file://` the filenames in the stacktrace are just 42.js\n// We need this specific case for now because we want no other regex to match.\nconst geckoREgex =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nconst geckoEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\n\nconst gecko = line => {\n  const parts = geckoREgex.exec(line);\n\n  if (parts) {\n    const isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n    if (isEval) {\n      const subMatch = geckoEvalRegex.exec(parts[3]);\n\n      if (subMatch) {\n        // throw out eval line/column and use top-most line number\n        parts[1] = parts[1] || 'eval';\n        parts[3] = subMatch[1];\n        parts[4] = subMatch[2];\n        parts[5] = ''; // no column when eval\n      }\n    }\n\n    let filename = parts[3];\n    let func = parts[1] || UNKNOWN_FUNCTION;\n    [func, filename] = extractSafariExtensionDetails(func, filename);\n\n    return createFrame(filename, func, parts[4] ? +parts[4] : undefined, parts[5] ? +parts[5] : undefined);\n  }\n\n  return;\n};\n\nconst geckoStackLineParser = [GECKO_PRIORITY, gecko];\n\nconst winjsRegex =\n  /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\n\nconst winjs = line => {\n  const parts = winjsRegex.exec(line);\n\n  return parts\n    ? createFrame(parts[2], parts[1] || UNKNOWN_FUNCTION, +parts[3], parts[4] ? +parts[4] : undefined)\n    : undefined;\n};\n\nconst winjsStackLineParser = [WINJS_PRIORITY, winjs];\n\nconst opera10Regex = / line (\\d+).*script (?:in )?(\\S+)(?:: in function (\\S+))?$/i;\n\nconst opera10 = line => {\n  const parts = opera10Regex.exec(line);\n  return parts ? createFrame(parts[2], parts[3] || UNKNOWN_FUNCTION, +parts[1]) : undefined;\n};\n\nconst opera10StackLineParser = [OPERA10_PRIORITY, opera10];\n\nconst opera11Regex =\n  / line (\\d+), column (\\d+)\\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\\(.*\\))? in (.*):\\s*$/i;\n\nconst opera11 = line => {\n  const parts = opera11Regex.exec(line);\n  return parts ? createFrame(parts[5], parts[3] || parts[4] || UNKNOWN_FUNCTION, +parts[1], +parts[2]) : undefined;\n};\n\nconst opera11StackLineParser = [OPERA11_PRIORITY, opera11];\n\nconst defaultStackLineParsers = [chromeStackLineParser, geckoStackLineParser, winjsStackLineParser];\n\nconst defaultStackParser = createStackParser(...defaultStackLineParsers);\n\n/**\n * Safari web extensions, starting version unknown, can produce \"frames-only\" stacktraces.\n * What it means, is that instead of format like:\n *\n * Error: wat\n *   at function@url:row:col\n *   at function@url:row:col\n *   at function@url:row:col\n *\n * it produces something like:\n *\n *   function@url:row:col\n *   function@url:row:col\n *   function@url:row:col\n *\n * Because of that, it won't be captured by `chrome` RegExp and will fall into `Gecko` branch.\n * This function is extracted so that we can use it in both places without duplicating the logic.\n * Unfortunately \"just\" changing RegExp is too complicated now and making it pass all tests\n * and fix this case seems like an impossible, or at least way too time-consuming task.\n */\nconst extractSafariExtensionDetails = (func, filename) => {\n  const isSafariExtension = func.indexOf('safari-extension') !== -1;\n  const isSafariWebExtension = func.indexOf('safari-web-extension') !== -1;\n\n  return isSafariExtension || isSafariWebExtension\n    ? [\n        func.indexOf('@') !== -1 ? func.split('@')[0] : UNKNOWN_FUNCTION,\n        isSafariExtension ? `safari-extension:${filename}` : `safari-web-extension:${filename}`,\n      ]\n    : [func, filename];\n};\n\nexport { chromeStackLineParser, defaultStackLineParsers, defaultStackParser, geckoStackLineParser, opera10StackLineParser, opera11StackLineParser, winjsStackLineParser };\n//# sourceMappingURL=stack-parsers.js.map\n","import { fill, getFunctionName, getOriginalFunction } from '@sentry/utils';\nimport { WINDOW, wrap } from '../helpers.js';\n\nconst DEFAULT_EVENT_TARGET = [\n  'EventTarget',\n  'Window',\n  'Node',\n  'ApplicationCache',\n  'AudioTrackList',\n  'ChannelMergerNode',\n  'CryptoOperation',\n  'EventSource',\n  'FileReader',\n  'HTMLUnknownElement',\n  'IDBDatabase',\n  'IDBRequest',\n  'IDBTransaction',\n  'KeyOperation',\n  'MediaController',\n  'MessagePort',\n  'ModalWindow',\n  'Notification',\n  'SVGElementInstance',\n  'Screen',\n  'TextTrack',\n  'TextTrackCue',\n  'TextTrackList',\n  'WebSocket',\n  'WebSocketWorker',\n  'Worker',\n  'XMLHttpRequest',\n  'XMLHttpRequestEventTarget',\n  'XMLHttpRequestUpload',\n];\n\n/** Wrap timer functions and event targets to catch errors and provide better meta data */\nclass TryCatch  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'TryCatch';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = TryCatch.id;}\n\n  /** JSDoc */\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options) {;TryCatch.prototype.__init.call(this);\n    this._options = {\n      XMLHttpRequest: true,\n      eventTarget: true,\n      requestAnimationFrame: true,\n      setInterval: true,\n      setTimeout: true,\n      ...options,\n    };\n  }\n\n  /**\n   * Wrap timer functions and event targets to catch errors\n   * and provide better metadata.\n   */\n   setupOnce() {\n    if (this._options.setTimeout) {\n      fill(WINDOW, 'setTimeout', _wrapTimeFunction);\n    }\n\n    if (this._options.setInterval) {\n      fill(WINDOW, 'setInterval', _wrapTimeFunction);\n    }\n\n    if (this._options.requestAnimationFrame) {\n      fill(WINDOW, 'requestAnimationFrame', _wrapRAF);\n    }\n\n    if (this._options.XMLHttpRequest && 'XMLHttpRequest' in WINDOW) {\n      fill(XMLHttpRequest.prototype, 'send', _wrapXHR);\n    }\n\n    const eventTargetOption = this._options.eventTarget;\n    if (eventTargetOption) {\n      const eventTarget = Array.isArray(eventTargetOption) ? eventTargetOption : DEFAULT_EVENT_TARGET;\n      eventTarget.forEach(_wrapEventTarget);\n    }\n  }\n} TryCatch.__initStatic();\n\n/** JSDoc */\nfunction _wrapTimeFunction(original) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function ( ...args) {\n    const originalCallback = args[0];\n    args[0] = wrap(originalCallback, {\n      mechanism: {\n        data: { function: getFunctionName(original) },\n        handled: true,\n        type: 'instrument',\n      },\n    });\n    return original.apply(this, args);\n  };\n}\n\n/** JSDoc */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _wrapRAF(original) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function ( callback) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    return original.apply(this, [\n      wrap(callback, {\n        mechanism: {\n          data: {\n            function: 'requestAnimationFrame',\n            handler: getFunctionName(original),\n          },\n          handled: true,\n          type: 'instrument',\n        },\n      }),\n    ]);\n  };\n}\n\n/** JSDoc */\nfunction _wrapXHR(originalSend) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function ( ...args) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const xhr = this;\n    const xmlHttpRequestProps = ['onload', 'onerror', 'onprogress', 'onreadystatechange'];\n\n    xmlHttpRequestProps.forEach(prop => {\n      if (prop in xhr && typeof xhr[prop] === 'function') {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        fill(xhr, prop, function (original) {\n          const wrapOptions = {\n            mechanism: {\n              data: {\n                function: prop,\n                handler: getFunctionName(original),\n              },\n              handled: true,\n              type: 'instrument',\n            },\n          };\n\n          // If Instrument integration has been called before TryCatch, get the name of original function\n          const originalFunction = getOriginalFunction(original);\n          if (originalFunction) {\n            wrapOptions.mechanism.data.handler = getFunctionName(originalFunction);\n          }\n\n          // Otherwise wrap directly\n          return wrap(original, wrapOptions);\n        });\n      }\n    });\n\n    return originalSend.apply(this, args);\n  };\n}\n\n/** JSDoc */\nfunction _wrapEventTarget(target) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const globalObject = WINDOW ;\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  const proto = globalObject[target] && globalObject[target].prototype;\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, no-prototype-builtins\n  if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n    return;\n  }\n\n  fill(proto, 'addEventListener', function (original)\n\n {\n    return function (\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      eventName,\n      fn,\n      options,\n    ) {\n      try {\n        if (typeof fn.handleEvent === 'function') {\n          // ESlint disable explanation:\n          //  First, it is generally safe to call `wrap` with an unbound function. Furthermore, using `.bind()` would\n          //  introduce a bug here, because bind returns a new function that doesn't have our\n          //  flags(like __sentry_original__) attached. `wrap` checks for those flags to avoid unnecessary wrapping.\n          //  Without those flags, every call to addEventListener wraps the function again, causing a memory leak.\n          // eslint-disable-next-line @typescript-eslint/unbound-method\n          fn.handleEvent = wrap(fn.handleEvent, {\n            mechanism: {\n              data: {\n                function: 'handleEvent',\n                handler: getFunctionName(fn),\n                target,\n              },\n              handled: true,\n              type: 'instrument',\n            },\n          });\n        }\n      } catch (err) {\n        // can sometimes get 'Permission denied to access property \"handle Event'\n      }\n\n      return original.apply(this, [\n        eventName,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        wrap(fn , {\n          mechanism: {\n            data: {\n              function: 'addEventListener',\n              handler: getFunctionName(fn),\n              target,\n            },\n            handled: true,\n            type: 'instrument',\n          },\n        }),\n        options,\n      ]);\n    };\n  });\n\n  fill(\n    proto,\n    'removeEventListener',\n    function (\n      originalRemoveEventListener,\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n      return function (\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        eventName,\n        fn,\n        options,\n      ) {\n        /**\n         * There are 2 possible scenarios here:\n         *\n         * 1. Someone passes a callback, which was attached prior to Sentry initialization, or by using unmodified\n         * method, eg. `document.addEventListener.call(el, name, handler). In this case, we treat this function\n         * as a pass-through, and call original `removeEventListener` with it.\n         *\n         * 2. Someone passes a callback, which was attached after Sentry was initialized, which means that it was using\n         * our wrapped version of `addEventListener`, which internally calls `wrap` helper.\n         * This helper \"wraps\" whole callback inside a try/catch statement, and attached appropriate metadata to it,\n         * in order for us to make a distinction between wrapped/non-wrapped functions possible.\n         * If a function was wrapped, it has additional property of `__sentry_wrapped__`, holding the handler.\n         *\n         * When someone adds a handler prior to initialization, and then do it again, but after,\n         * then we have to detach both of them. Otherwise, if we'd detach only wrapped one, it'd be impossible\n         * to get rid of the initial handler and it'd stick there forever.\n         */\n        const wrappedEventHandler = fn ;\n        try {\n          const originalEventHandler = wrappedEventHandler && wrappedEventHandler.__sentry_wrapped__;\n          if (originalEventHandler) {\n            originalRemoveEventListener.call(this, eventName, originalEventHandler, options);\n          }\n        } catch (e) {\n          // ignore, accessing __sentry_wrapped__ will throw in some Selenium environments\n        }\n        return originalRemoveEventListener.call(this, eventName, wrappedEventHandler, options);\n      };\n    },\n  );\n}\n\nexport { TryCatch };\n//# sourceMappingURL=trycatch.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { addInstrumentationHandler, isString, isPrimitive, isErrorEvent, getLocationHref, logger, addExceptionMechanism } from '@sentry/utils';\nimport { eventFromUnknownInput } from '../eventbuilder.js';\nimport { shouldIgnoreOnError } from '../helpers.js';\n\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\n/** Global handlers */\nclass GlobalHandlers  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'GlobalHandlers';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = GlobalHandlers.id;}\n\n  /** JSDoc */\n\n  /**\n   * Stores references functions to installing handlers. Will set to undefined\n   * after they have been run so that they are not used twice.\n   */\n   __init2() {this._installFunc = {\n    onerror: _installGlobalOnErrorHandler,\n    onunhandledrejection: _installGlobalOnUnhandledRejectionHandler,\n  };}\n\n  /** JSDoc */\n   constructor(options) {;GlobalHandlers.prototype.__init.call(this);GlobalHandlers.prototype.__init2.call(this);\n    this._options = {\n      onerror: true,\n      onunhandledrejection: true,\n      ...options,\n    };\n  }\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    Error.stackTraceLimit = 50;\n    const options = this._options;\n\n    // We can disable guard-for-in as we construct the options object above + do checks against\n    // `this._installFunc` for the property.\n    // eslint-disable-next-line guard-for-in\n    for (const key in options) {\n      const installFunc = this._installFunc[key ];\n      if (installFunc && options[key ]) {\n        globalHandlerLog(key);\n        installFunc();\n        this._installFunc[key ] = undefined;\n      }\n    }\n  }\n} GlobalHandlers.__initStatic();\n\n/** JSDoc */\nfunction _installGlobalOnErrorHandler() {\n  addInstrumentationHandler(\n    'error',\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (data) => {\n      const [hub, stackParser, attachStacktrace] = getHubAndOptions();\n      if (!hub.getIntegration(GlobalHandlers)) {\n        return;\n      }\n      const { msg, url, line, column, error } = data;\n      if (shouldIgnoreOnError() || (error && error.__sentry_own_request__)) {\n        return;\n      }\n\n      const event =\n        error === undefined && isString(msg)\n          ? _eventFromIncompleteOnError(msg, url, line, column)\n          : _enhanceEventWithInitialFrame(\n              eventFromUnknownInput(stackParser, error || msg, undefined, attachStacktrace, false),\n              url,\n              line,\n              column,\n            );\n\n      event.level = 'error';\n\n      addMechanismAndCapture(hub, error, event, 'onerror');\n    },\n  );\n}\n\n/** JSDoc */\nfunction _installGlobalOnUnhandledRejectionHandler() {\n  addInstrumentationHandler(\n    'unhandledrejection',\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (e) => {\n      const [hub, stackParser, attachStacktrace] = getHubAndOptions();\n      if (!hub.getIntegration(GlobalHandlers)) {\n        return;\n      }\n      let error = e;\n\n      // dig the object of the rejection out of known event types\n      try {\n        // PromiseRejectionEvents store the object of the rejection under 'reason'\n        // see https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n        if ('reason' in e) {\n          error = e.reason;\n        }\n        // something, somewhere, (likely a browser extension) effectively casts PromiseRejectionEvents\n        // to CustomEvents, moving the `promise` and `reason` attributes of the PRE into\n        // the CustomEvent's `detail` attribute, since they're not part of CustomEvent's spec\n        // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent and\n        // https://github.com/getsentry/sentry-javascript/issues/2380\n        else if ('detail' in e && 'reason' in e.detail) {\n          error = e.detail.reason;\n        }\n      } catch (_oO) {\n        // no-empty\n      }\n\n      if (shouldIgnoreOnError() || (error && error.__sentry_own_request__)) {\n        return true;\n      }\n\n      const event = isPrimitive(error)\n        ? _eventFromRejectionWithPrimitive(error)\n        : eventFromUnknownInput(stackParser, error, undefined, attachStacktrace, true);\n\n      event.level = 'error';\n\n      addMechanismAndCapture(hub, error, event, 'onunhandledrejection');\n      return;\n    },\n  );\n}\n\n/**\n * Create an event from a promise rejection where the `reason` is a primitive.\n *\n * @param reason: The `reason` property of the promise rejection\n * @returns An Event object with an appropriate `exception` value\n */\nfunction _eventFromRejectionWithPrimitive(reason) {\n  return {\n    exception: {\n      values: [\n        {\n          type: 'UnhandledRejection',\n          // String() is needed because the Primitive type includes symbols (which can't be automatically stringified)\n          value: `Non-Error promise rejection captured with value: ${String(reason)}`,\n        },\n      ],\n    },\n  };\n}\n\n/**\n * This function creates a stack from an old, error-less onerror handler.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _eventFromIncompleteOnError(msg, url, line, column) {\n  const ERROR_TYPES_RE =\n    /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n\n  // If 'message' is ErrorEvent, get real message from inside\n  let message = isErrorEvent(msg) ? msg.message : msg;\n  let name = 'Error';\n\n  const groups = message.match(ERROR_TYPES_RE);\n  if (groups) {\n    name = groups[1];\n    message = groups[2];\n  }\n\n  const event = {\n    exception: {\n      values: [\n        {\n          type: name,\n          value: message,\n        },\n      ],\n    },\n  };\n\n  return _enhanceEventWithInitialFrame(event, url, line, column);\n}\n\n/** JSDoc */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _enhanceEventWithInitialFrame(event, url, line, column) {\n  // event.exception\n  const e = (event.exception = event.exception || {});\n  // event.exception.values\n  const ev = (e.values = e.values || []);\n  // event.exception.values[0]\n  const ev0 = (ev[0] = ev[0] || {});\n  // event.exception.values[0].stacktrace\n  const ev0s = (ev0.stacktrace = ev0.stacktrace || {});\n  // event.exception.values[0].stacktrace.frames\n  const ev0sf = (ev0s.frames = ev0s.frames || []);\n\n  const colno = isNaN(parseInt(column, 10)) ? undefined : column;\n  const lineno = isNaN(parseInt(line, 10)) ? undefined : line;\n  const filename = isString(url) && url.length > 0 ? url : getLocationHref();\n\n  // event.exception.values[0].stacktrace.frames\n  if (ev0sf.length === 0) {\n    ev0sf.push({\n      colno,\n      filename,\n      function: '?',\n      in_app: true,\n      lineno,\n    });\n  }\n\n  return event;\n}\n\nfunction globalHandlerLog(type) {\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Global Handler attached: ${type}`);\n}\n\nfunction addMechanismAndCapture(hub, error, event, type) {\n  addExceptionMechanism(event, {\n    handled: false,\n    type,\n  });\n  hub.captureEvent(event, {\n    originalException: error,\n  });\n}\n\nfunction getHubAndOptions() {\n  const hub = getCurrentHub();\n  const client = hub.getClient();\n  const options = (client && client.getOptions()) || {\n    stackParser: () => [],\n    attachStacktrace: false,\n  };\n  return [hub, options.stackParser, options.attachStacktrace];\n}\n\nexport { GlobalHandlers };\n//# sourceMappingURL=globalhandlers.js.map\n","import { getCurrentHub, addGlobalEventProcessor } from '@sentry/core';\nimport { isInstanceOf } from '@sentry/utils';\nimport { exceptionFromError } from '../eventbuilder.js';\n\nconst DEFAULT_KEY = 'cause';\nconst DEFAULT_LIMIT = 5;\n\n/** Adds SDK info to an event. */\nclass LinkedErrors  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'LinkedErrors';}\n\n  /**\n   * @inheritDoc\n   */\n    __init() {this.name = LinkedErrors.id;}\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options = {}) {;LinkedErrors.prototype.__init.call(this);\n    this._key = options.key || DEFAULT_KEY;\n    this._limit = options.limit || DEFAULT_LIMIT;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    const client = getCurrentHub().getClient();\n    if (!client) {\n      return;\n    }\n    addGlobalEventProcessor((event, hint) => {\n      const self = getCurrentHub().getIntegration(LinkedErrors);\n      return self ? _handler(client.getOptions().stackParser, self._key, self._limit, event, hint) : event;\n    });\n  }\n} LinkedErrors.__initStatic();\n\n/**\n * @inheritDoc\n */\nfunction _handler(\n  parser,\n  key,\n  limit,\n  event,\n  hint,\n) {\n  if (!event.exception || !event.exception.values || !hint || !isInstanceOf(hint.originalException, Error)) {\n    return event;\n  }\n  const linkedErrors = _walkErrorTree(parser, limit, hint.originalException , key);\n  event.exception.values = [...linkedErrors, ...event.exception.values];\n  return event;\n}\n\n/**\n * JSDOC\n */\nfunction _walkErrorTree(\n  parser,\n  limit,\n  error,\n  key,\n  stack = [],\n) {\n  if (!isInstanceOf(error[key], Error) || stack.length + 1 >= limit) {\n    return stack;\n  }\n  const exception = exceptionFromError(parser, error[key]);\n  return _walkErrorTree(parser, limit, error[key], key, [exception, ...stack]);\n}\n\nexport { LinkedErrors, _handler, _walkErrorTree };\n//# sourceMappingURL=linkederrors.js.map\n","import { logger } from '@sentry/utils';\n\n/** Deduplication filter */\nclass Dedupe  {constructor() { Dedupe.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Dedupe';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Dedupe.id;}\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(addGlobalEventProcessor, getCurrentHub) {\n    const eventProcessor = currentEvent => {\n      const self = getCurrentHub().getIntegration(Dedupe);\n      if (self) {\n        // Juuust in case something goes wrong\n        try {\n          if (_shouldDropEvent(currentEvent, self._previousEvent)) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Event dropped due to being a duplicate of previously captured event.');\n            return null;\n          }\n        } catch (_oO) {\n          return (self._previousEvent = currentEvent);\n        }\n\n        return (self._previousEvent = currentEvent);\n      }\n      return currentEvent;\n    };\n\n    eventProcessor.id = this.name;\n    addGlobalEventProcessor(eventProcessor);\n  }\n} Dedupe.__initStatic();\n\n/** JSDoc */\nfunction _shouldDropEvent(currentEvent, previousEvent) {\n  if (!previousEvent) {\n    return false;\n  }\n\n  if (_isSameMessageEvent(currentEvent, previousEvent)) {\n    return true;\n  }\n\n  if (_isSameExceptionEvent(currentEvent, previousEvent)) {\n    return true;\n  }\n\n  return false;\n}\n\n/** JSDoc */\nfunction _isSameMessageEvent(currentEvent, previousEvent) {\n  const currentMessage = currentEvent.message;\n  const previousMessage = previousEvent.message;\n\n  // If neither event has a message property, they were both exceptions, so bail out\n  if (!currentMessage && !previousMessage) {\n    return false;\n  }\n\n  // If only one event has a stacktrace, but not the other one, they are not the same\n  if ((currentMessage && !previousMessage) || (!currentMessage && previousMessage)) {\n    return false;\n  }\n\n  if (currentMessage !== previousMessage) {\n    return false;\n  }\n\n  if (!_isSameFingerprint(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  if (!_isSameStacktrace(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameExceptionEvent(currentEvent, previousEvent) {\n  const previousException = _getExceptionFromEvent(previousEvent);\n  const currentException = _getExceptionFromEvent(currentEvent);\n\n  if (!previousException || !currentException) {\n    return false;\n  }\n\n  if (previousException.type !== currentException.type || previousException.value !== currentException.value) {\n    return false;\n  }\n\n  if (!_isSameFingerprint(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  if (!_isSameStacktrace(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameStacktrace(currentEvent, previousEvent) {\n  let currentFrames = _getFramesFromEvent(currentEvent);\n  let previousFrames = _getFramesFromEvent(previousEvent);\n\n  // If neither event has a stacktrace, they are assumed to be the same\n  if (!currentFrames && !previousFrames) {\n    return true;\n  }\n\n  // If only one event has a stacktrace, but not the other one, they are not the same\n  if ((currentFrames && !previousFrames) || (!currentFrames && previousFrames)) {\n    return false;\n  }\n\n  currentFrames = currentFrames ;\n  previousFrames = previousFrames ;\n\n  // If number of frames differ, they are not the same\n  if (previousFrames.length !== currentFrames.length) {\n    return false;\n  }\n\n  // Otherwise, compare the two\n  for (let i = 0; i < previousFrames.length; i++) {\n    const frameA = previousFrames[i];\n    const frameB = currentFrames[i];\n\n    if (\n      frameA.filename !== frameB.filename ||\n      frameA.lineno !== frameB.lineno ||\n      frameA.colno !== frameB.colno ||\n      frameA.function !== frameB.function\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameFingerprint(currentEvent, previousEvent) {\n  let currentFingerprint = currentEvent.fingerprint;\n  let previousFingerprint = previousEvent.fingerprint;\n\n  // If neither event has a fingerprint, they are assumed to be the same\n  if (!currentFingerprint && !previousFingerprint) {\n    return true;\n  }\n\n  // If only one event has a fingerprint, but not the other one, they are not the same\n  if ((currentFingerprint && !previousFingerprint) || (!currentFingerprint && previousFingerprint)) {\n    return false;\n  }\n\n  currentFingerprint = currentFingerprint ;\n  previousFingerprint = previousFingerprint ;\n\n  // Otherwise, compare the two\n  try {\n    return !!(currentFingerprint.join('') === previousFingerprint.join(''));\n  } catch (_oO) {\n    return false;\n  }\n}\n\n/** JSDoc */\nfunction _getExceptionFromEvent(event) {\n  return event.exception && event.exception.values && event.exception.values[0];\n}\n\n/** JSDoc */\nfunction _getFramesFromEvent(event) {\n  const exception = event.exception;\n\n  if (exception) {\n    try {\n      // @ts-ignore Object could be undefined\n      return exception.values[0].stacktrace.frames;\n    } catch (_oO) {\n      return undefined;\n    }\n  }\n  return undefined;\n}\n\nexport { Dedupe };\n//# sourceMappingURL=dedupe.js.map\n","import { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { WINDOW } from '../helpers.js';\n\n/** HttpContext integration collects information about HTTP request headers */\nclass HttpContext  {constructor() { HttpContext.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'HttpContext';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = HttpContext.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    addGlobalEventProcessor((event) => {\n      if (getCurrentHub().getIntegration(HttpContext)) {\n        // if none of the information we want exists, don't bother\n        if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n          return event;\n        }\n\n        // grab as much info as exists and add it to the event\n        const url = (event.request && event.request.url) || (WINDOW.location && WINDOW.location.href);\n        const { referrer } = WINDOW.document || {};\n        const { userAgent } = WINDOW.navigator || {};\n\n        const headers = {\n          ...(event.request && event.request.headers),\n          ...(referrer && { Referer: referrer }),\n          ...(userAgent && { 'User-Agent': userAgent }),\n        };\n        const request = { ...(url && { url }), headers };\n\n        return { ...event, request };\n      }\n      return event;\n    });\n  }\n} HttpContext.__initStatic();\n\nexport { HttpContext };\n//# sourceMappingURL=httpcontext.js.map\n","import { createTransport } from '@sentry/core';\nimport { SyncPromise } from '@sentry/utils';\n\n/**\n * The DONE ready state for XmlHttpRequest\n *\n * Defining it here as a constant b/c XMLHttpRequest.DONE is not always defined\n * (e.g. during testing, it is `undefined`)\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState}\n */\nconst XHR_READYSTATE_DONE = 4;\n\n/**\n * Creates a Transport that uses the XMLHttpRequest API to send events to Sentry.\n */\nfunction makeXHRTransport(options) {\n  function makeRequest(request) {\n    return new SyncPromise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n\n      xhr.onerror = reject;\n\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState === XHR_READYSTATE_DONE) {\n          resolve({\n            statusCode: xhr.status,\n            headers: {\n              'x-sentry-rate-limits': xhr.getResponseHeader('X-Sentry-Rate-Limits'),\n              'retry-after': xhr.getResponseHeader('Retry-After'),\n            },\n          });\n        }\n      };\n\n      xhr.open('POST', options.url);\n\n      for (const header in options.headers) {\n        if (Object.prototype.hasOwnProperty.call(options.headers, header)) {\n          xhr.setRequestHeader(header, options.headers[header]);\n        }\n      }\n\n      xhr.send(request.body);\n    });\n  }\n\n  return createTransport(options, makeRequest);\n}\n\nexport { makeXHRTransport };\n//# sourceMappingURL=xhr.js.map\n","import { Integrations, getIntegrationsToSetup, initAndBind, getReportDialogEndpoint, getCurrentHub } from '@sentry/core';\nimport { stackParserFromStackParserOptions, supportsFetch, logger, resolvedSyncPromise, addInstrumentationHandler } from '@sentry/utils';\nimport { BrowserClient } from './client.js';\nimport { WINDOW, wrap as wrap$1 } from './helpers.js';\nimport './integrations/index.js';\nimport { defaultStackParser } from './stack-parsers.js';\nimport './transports/index.js';\nimport { TryCatch } from './integrations/trycatch.js';\nimport { Breadcrumbs } from './integrations/breadcrumbs.js';\nimport { GlobalHandlers } from './integrations/globalhandlers.js';\nimport { LinkedErrors } from './integrations/linkederrors.js';\nimport { Dedupe } from './integrations/dedupe.js';\nimport { HttpContext } from './integrations/httpcontext.js';\nimport { makeFetchTransport } from './transports/fetch.js';\nimport { makeXHRTransport } from './transports/xhr.js';\n\nconst defaultIntegrations = [\n  new Integrations.InboundFilters(),\n  new Integrations.FunctionToString(),\n  new TryCatch(),\n  new Breadcrumbs(),\n  new GlobalHandlers(),\n  new LinkedErrors(),\n  new Dedupe(),\n  new HttpContext(),\n];\n\n/**\n * A magic string that build tooling can leverage in order to inject a release value into the SDK.\n */\n\n/**\n * The Sentry Browser SDK Client.\n *\n * To use this SDK, call the {@link init} function as early as possible when\n * loading the web page. To set context information or send manual events, use\n * the provided methods.\n *\n * @example\n *\n * ```\n *\n * import { init } from '@sentry/browser';\n *\n * init({\n *   dsn: '__DSN__',\n *   // ...\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { configureScope } from '@sentry/browser';\n * configureScope((scope: Scope) => {\n *   scope.setExtra({ battery: 0.7 });\n *   scope.setTag({ user_mode: 'admin' });\n *   scope.setUser({ id: '4711' });\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { addBreadcrumb } from '@sentry/browser';\n * addBreadcrumb({\n *   message: 'My Breadcrumb',\n *   // ...\n * });\n * ```\n *\n * @example\n *\n * ```\n *\n * import * as Sentry from '@sentry/browser';\n * Sentry.captureMessage('Hello, world!');\n * Sentry.captureException(new Error('Good bye'));\n * Sentry.captureEvent({\n *   message: 'Manual',\n *   stacktrace: [\n *     // ...\n *   ],\n * });\n * ```\n *\n * @see {@link BrowserOptions} for documentation on configuration options.\n */\nfunction init(options = {}) {\n  if (options.defaultIntegrations === undefined) {\n    options.defaultIntegrations = defaultIntegrations;\n  }\n  if (options.release === undefined) {\n    // This allows build tooling to find-and-replace __SENTRY_RELEASE__ to inject a release value\n    if (typeof __SENTRY_RELEASE__ === 'string') {\n      options.release = __SENTRY_RELEASE__;\n    }\n\n    // This supports the variable that sentry-webpack-plugin injects\n    if (WINDOW.SENTRY_RELEASE && WINDOW.SENTRY_RELEASE.id) {\n      options.release = WINDOW.SENTRY_RELEASE.id;\n    }\n  }\n  if (options.autoSessionTracking === undefined) {\n    options.autoSessionTracking = true;\n  }\n  if (options.sendClientReports === undefined) {\n    options.sendClientReports = true;\n  }\n\n  const clientOptions = {\n    ...options,\n    stackParser: stackParserFromStackParserOptions(options.stackParser || defaultStackParser),\n    integrations: getIntegrationsToSetup(options),\n    transport: options.transport || (supportsFetch() ? makeFetchTransport : makeXHRTransport),\n  };\n\n  initAndBind(BrowserClient, clientOptions);\n\n  if (options.autoSessionTracking) {\n    startSessionTracking();\n  }\n}\n\n/**\n * Present the user with a report dialog.\n *\n * @param options Everything is optional, we try to fetch all info need from the global scope.\n */\nfunction showReportDialog(options = {}, hub = getCurrentHub()) {\n  // doesn't work without a document (React Native)\n  if (!WINDOW.document) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Global document not defined in showReportDialog call');\n    return;\n  }\n\n  const { client, scope } = hub.getStackTop();\n  const dsn = options.dsn || (client && client.getDsn());\n  if (!dsn) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('DSN not configured for showReportDialog call');\n    return;\n  }\n\n  if (scope) {\n    options.user = {\n      ...scope.getUser(),\n      ...options.user,\n    };\n  }\n\n  if (!options.eventId) {\n    options.eventId = hub.lastEventId();\n  }\n\n  const script = WINDOW.document.createElement('script');\n  script.async = true;\n  script.src = getReportDialogEndpoint(dsn, options);\n\n  if (options.onLoad) {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    script.onload = options.onLoad;\n  }\n\n  const injectionPoint = WINDOW.document.head || WINDOW.document.body;\n  if (injectionPoint) {\n    injectionPoint.appendChild(script);\n  } else {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Not injecting report dialog. No injection point found in HTML');\n  }\n}\n\n/**\n * This is the getter for lastEventId.\n *\n * @returns The last event id of a captured event.\n */\nfunction lastEventId() {\n  return getCurrentHub().lastEventId();\n}\n\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\nfunction forceLoad() {\n  // Noop\n}\n\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\nfunction onLoad(callback) {\n  callback();\n}\n\n/**\n * Call `flush()` on the current client, if there is one. See {@link Client.flush}.\n *\n * @param timeout Maximum time in ms the client should wait to flush its event queue. Omitting this parameter will cause\n * the client to wait until all events are sent before resolving the promise.\n * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it\n * doesn't (or if there's no client defined).\n */\nfunction flush(timeout) {\n  const client = getCurrentHub().getClient();\n  if (client) {\n    return client.flush(timeout);\n  }\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Cannot flush events. No client defined.');\n  return resolvedSyncPromise(false);\n}\n\n/**\n * Call `close()` on the current client, if there is one. See {@link Client.close}.\n *\n * @param timeout Maximum time in ms the client should wait to flush its event queue before shutting down. Omitting this\n * parameter will cause the client to wait until all events are sent before disabling itself.\n * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it\n * doesn't (or if there's no client defined).\n */\nfunction close(timeout) {\n  const client = getCurrentHub().getClient();\n  if (client) {\n    return client.close(timeout);\n  }\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Cannot flush events and disable SDK. No client defined.');\n  return resolvedSyncPromise(false);\n}\n\n/**\n * Wrap code within a try/catch block so the SDK is able to capture errors.\n *\n * @param fn A function to wrap.\n *\n * @returns The result of wrapped function call.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction wrap(fn) {\n  return wrap$1(fn)();\n}\n\nfunction startSessionOnHub(hub) {\n  hub.startSession({ ignoreDuration: true });\n  hub.captureSession();\n}\n\n/**\n * Enable automatic Session Tracking for the initial page load.\n */\nfunction startSessionTracking() {\n  if (typeof WINDOW.document === 'undefined') {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn('Session tracking in non-browser environment with @sentry/browser is not supported.');\n    return;\n  }\n\n  const hub = getCurrentHub();\n\n  // The only way for this to be false is for there to be a version mismatch between @sentry/browser (>= 6.0.0) and\n  // @sentry/hub (< 5.27.0). In the simple case, there won't ever be such a mismatch, because the two packages are\n  // pinned at the same version in package.json, but there are edge cases where it's possible. See\n  // https://github.com/getsentry/sentry-javascript/issues/3207 and\n  // https://github.com/getsentry/sentry-javascript/issues/3234 and\n  // https://github.com/getsentry/sentry-javascript/issues/3278.\n  if (!hub.captureSession) {\n    return;\n  }\n\n  // The session duration for browser sessions does not track a meaningful\n  // concept that can be used as a metric.\n  // Automatically captured sessions are akin to page views, and thus we\n  // discard their duration.\n  startSessionOnHub(hub);\n\n  // We want to create a session for every navigation as well\n  addInstrumentationHandler('history', ({ from, to }) => {\n    // Don't create an additional session for the initial route or if the location did not change\n    if (!(from === undefined || from === to)) {\n      startSessionOnHub(getCurrentHub());\n    }\n  });\n}\n\nexport { close, defaultIntegrations, flush, forceLoad, init, lastEventId, onLoad, showReportDialog, wrap };\n//# sourceMappingURL=sdk.js.map\n","import './exports.js';\nimport { Integrations } from '@sentry/core';\nexport { FunctionToString, Hub, InboundFilters, SDK_VERSION, Scope, addBreadcrumb, addGlobalEventProcessor, captureEvent, captureException, captureMessage, configureScope, createTransport, getCurrentHub, getHubFromCarrier, makeMain, setContext, setExtra, setExtras, setTag, setTags, setUser, startTransaction, withScope } from '@sentry/core';\nimport { WINDOW } from './helpers.js';\nexport { WINDOW } from './helpers.js';\nimport * as index from './integrations/index.js';\nexport { Replay } from '@sentry/replay';\nexport { BrowserClient } from './client.js';\nexport { makeFetchTransport } from './transports/fetch.js';\nexport { makeXHRTransport } from './transports/xhr.js';\nexport { chromeStackLineParser, defaultStackLineParsers, defaultStackParser, geckoStackLineParser, opera10StackLineParser, opera11StackLineParser, winjsStackLineParser } from './stack-parsers.js';\nexport { eventFromException, eventFromMessage } from './eventbuilder.js';\nexport { close, defaultIntegrations, flush, forceLoad, init, lastEventId, onLoad, showReportDialog, wrap } from './sdk.js';\nexport { GlobalHandlers } from './integrations/globalhandlers.js';\nexport { TryCatch } from './integrations/trycatch.js';\nexport { Breadcrumbs } from './integrations/breadcrumbs.js';\nexport { LinkedErrors } from './integrations/linkederrors.js';\nexport { HttpContext } from './integrations/httpcontext.js';\nexport { Dedupe } from './integrations/dedupe.js';\n\nlet windowIntegrations = {};\n\n// This block is needed to add compatibility with the integrations packages when used with a CDN\nif (WINDOW.Sentry && WINDOW.Sentry.Integrations) {\n  windowIntegrations = WINDOW.Sentry.Integrations;\n}\n\nconst INTEGRATIONS = {\n  ...windowIntegrations,\n  ...Integrations,\n  ...index,\n};\n// __ROLLUP_EXCLUDE_FROM_BUNDLES_END__\n\nexport { INTEGRATIONS as Integrations };\n//# sourceMappingURL=index.js.map\n","import * as Sentry from '@sentry/browser';\n\nconst normalizeUrl = url => {\n  return url.replace(/(webpack_require__@)?(moz|chrome)-extension:\\/\\/[^/]+\\//, '~/');\n};\n\nfunction makeFakeFetchTransport(options, _fetchImpl): any {\n  return Sentry.makeFetchTransport(options, (url: any, opt: any) => {\n    const retObj = {\n      status: 200,\n      headers: {\n        get: type => '',\n      },\n    };\n\n    return api.request\n      .xhr(opt.method ?? 'GET', {\n        url,\n        data: opt.body,\n      })\n      .catch(e => {\n        retObj.status = 429;\n        return retObj;\n      })\n      .then(res => retObj) as any;\n  });\n}\n\nexport async function initShark() {\n  if (!(await api.settings.getAsync('crashReport'))) {\n    con.info('Crash reports disabled');\n    return;\n  }\n\n  if (utils.isDomainMatching(window.location.href, 'wakanim.tv') && utils.isFirefox()) {\n    con.info('Crash reports disabled for wakanim.tv');\n    return;\n  }\n\n  if (utils.isDomainMatching(window.location.href, 'simkl.com') && utils.isFirefox()) {\n    con.info('Crash reports disabled for simkl.com');\n    return;\n  }\n\n  Sentry.init({\n    dsn: 'https://blood@shark.malsync.moe/1337',\n    tunnel: 'https://api.malsync.moe/shark',\n    transport: makeFakeFetchTransport as any,\n    release: `malsync@${api.storage.version()}`,\n    integrations: [\n      new Sentry.Integrations.Breadcrumbs({ console: false, dom: false }),\n      new Sentry.Integrations.GlobalHandlers({ onerror: false, onunhandledrejection: false }),\n    ],\n    // eslint-disable-next-line no-undef\n    environment: env.CONTEXT,\n    autoSessionTracking: false,\n    ignoreErrors: ['SafeError'],\n  });\n\n  Sentry.configureScope(scope => {\n    scope.addEventProcessor(async (event: any) => {\n      if (event.culprit) {\n        event.culprit = normalizeUrl(event.culprit);\n      }\n\n      if (\n        event.exception &&\n        event.exception.values &&\n        event.exception.values[0] &&\n        event.exception.values[0].stacktrace &&\n        event.exception.values[0].stacktrace.frames\n      ) {\n        event.exception.values[0].stacktrace.frames =\n          event.exception.values[0].stacktrace.frames.map(frame => {\n            frame.filename = normalizeUrl(frame.filename);\n            return frame;\n          });\n      }\n\n      return event;\n    });\n  });\n}\n\nexport const Shark = Sentry;\n\nexport function bloodTrail(options: Sentry.Breadcrumb) {\n  try {\n    Shark.addBreadcrumb(options);\n  } catch (e) {\n    console.error(e);\n  }\n}\n","import { KitsuClass } from '../kitsu/kitsuClass';\nimport { firebaseNotification } from '../utils/firebaseNotification';\nimport { initShark } from '../utils/shark';\n\ninitShark();\n\nlet lastFocus;\n\nfunction main() {\n  if (api.settings.get('userscriptModeButton')) throw 'Userscript mode';\n  const kitsu = new KitsuClass(window.location.href);\n  messageKitsuListener(kitsu);\n  firebaseNotification();\n\n  $(window).blur(function () {\n    lastFocus = Date.now();\n  });\n}\n\nconst css =\n  'font-size: 40px; padding-bottom: 3px; color: white; text-shadow: -1px -1px #2e51a2, 1px -1px #2e51a2, -1px 1px #2e51a2, 1px 1px #2e51a2, 2px 2px #2e51a2, 3px 3px #2e51a2;';\nconsole.log('%cMAL-Sync', css, `Version: ${api.storage.version()}`);\n\napi.settings.init().then(() => {\n  main();\n});\n\nfunction messageKitsuListener(kitsu: KitsuClass) {\n  // @ts-ignore\n  chrome.runtime.onMessage.addListener(function (msg, sender, sendResponse) {\n    if (msg.action === 'TabMalUrl') {\n      if (Date.now() - lastFocus < 3 * 1000) {\n        con.info('miniMAL');\n        kitsu.getMalUrl().then(malUrl => {\n          const res = {\n            url: malUrl,\n            image: kitsu.getImage(),\n            title: kitsu.getTitle(),\n          };\n          if (!malUrl && api.settings.get('syncMode') === 'KITSU') {\n            res.url = kitsu.url;\n          }\n          sendResponse(res);\n        });\n        return true;\n      }\n    }\n    return false;\n  });\n}\n","import { logger } from '@sentry/utils';\nimport { getCurrentHub } from './hub.js';\n\n/** A class object that can instantiate Client objects. */\n\n/**\n * Internal function to create a new SDK client instance. The client is\n * installed and then bound to the current scope.\n *\n * @param clientClass The client class to instantiate.\n * @param options Options to pass to the client.\n */\nfunction initAndBind(\n  clientClass,\n  options,\n) {\n  if (options.debug === true) {\n    if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n      logger.enable();\n    } else {\n      // use `console.warn` rather than `logger.warn` since by non-debug bundles have all `logger.x` statements stripped\n      // eslint-disable-next-line no-console\n      console.warn('[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.');\n    }\n  }\n  const hub = getCurrentHub();\n  const scope = hub.getScope();\n  if (scope) {\n    scope.update(options.initialScope);\n  }\n\n  const client = new clientClass(options);\n  hub.bindClient(client);\n}\n\nexport { initAndBind };\n//# sourceMappingURL=sdk.js.map\n"],"names":["isNodeEnv","__SENTRY_BROWSER_BUNDLE__","Object","prototype","toString","call","process","dynamicRequire","mod","request","require","WINDOW","dateTimestampSource","nowSeconds","Date","now","platformPerformance","module","performance","_","getNodePerformance","timeOrigin","getBrowserPerformance","timestampSource","undefined","dateTimestampInSeconds","bind","timestampInSeconds","_browserPerformanceTimeOriginMode","threshold","performanceNow","dateNow","timeOriginDelta","Math","abs","timeOriginIsReliable","navigationStart","timing","navigationStartDelta","isGlobalObj","obj","GLOBAL_OBJ","globalThis","window","self","g","this","getGlobalObject","getGlobalSingleton","name","creator","gbl","__SENTRY__","createDep","effects","dep","Set","w","n","wasTracked","trackOpBit","newTracked","targetMap","WeakMap","effectTrackDepth","maxMarkerBits","activeEffect","ITERATE_KEY","Symbol","MAP_KEY_ITERATE_KEY","shouldTrack","trackStack","track","target","type","key","depsMap","get","set","Map","trackEffects","debuggerEventExtraInfo","has","add","deps","push","trigger","newValue","oldValue","oldTarget","values","newLength","Number","forEach","length","triggerEffects","effect","computed","triggerEffect","allowRecurse","scheduler","run","isNonTrackableKeys","builtInSymbols","getOwnPropertyNames","filter","map","get$1","createGetter","readonlyGet","arrayInstrumentations","createArrayInstrumentations","instrumentations","args","arr","toRaw","i","l","res","apply","last","pop","resetTracking","hasOwnProperty","isReadonly","shallow","receiver","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","targetIsArray","Reflect","isRef","value","readonly","reactive","createSetter","isShallow","hadKey","result","mutableHandlers","deleteProperty","ownKeys","readonlyHandlers","toShallow","getProto","v","getPrototypeOf","rawTarget","rawKey","wrap","toReadonly","toReactive","size","deleteEntry","delete","clear","hadItems","createForEach","callback","thisArg","observed","createIterableMethod","method","targetIsMap","isPair","iterator","isKeyOnly","innerIterator","next","done","createReadonlyMethod","createInstrumentations","mutableInstrumentations","shallowInstrumentations","readonlyInstrumentations","shallowReadonlyInstrumentations","createInstrumentationGetter","mutableCollectionHandlers","readonlyCollectionHandlers","createReactiveObject","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","isExtensible","rawType","targetTypeMap","getTargetType","proxy","Proxy","raw","r","__v_isRef","ref","rawValue","RefImpl","constructor","__v_isShallow","_rawValue","_value","trackRefValue","newVal","useDirectValue","triggerRefValue","makeMap","str","expectsLowerCase","create","list","split","val","toLowerCase","extend","assign","hasOwn","isArray","Array","isMap","toTypeString","isSymbol","isObject","objectToString","toRawType","slice","isIntegerKey","parseInt","cacheStringFunction","fn","cache","camelizeRE","hyphenateRE","replace","c","toUpperCase","capitalize","charAt","hasChanged","is","___CSS_LOADER_EXPORT___","id","exports","cssWithMappingToString","item","content","needLayer","concat","join","modules","media","dedupe","supports","layer","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","_typeof","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_construct","Parent","Class","construct","sham","Boolean","valueOf","e","_isNativeReflectConstruct","a","instance","Function","arguments","_slicedToArray","_arrayWithHoles","_i","_s","_e","_arr","_n","_d","err","_iterableToArrayLimit","_unsupportedIterableToArray","TypeError","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","minLen","test","len","arr2","entries","isFrozen","getOwnPropertyDescriptor","freeze","seal","_ref","fun","thisValue","x","Func","func","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","String","stringToString","stringMatch","match","stringReplace","stringIndexOf","indexOf","stringTrim","trim","regExpTest","RegExp","typeErrorCreate","_len2","_key2","_len","_key","addToSet","array","transformCaseFunc","element","lcElement","clone","object","_step","newObject","_iterator","allowArrayLike","it","F","s","f","normalCompletion","didErr","step","return","_createForOfIteratorHelper","_step$value","property","lookupGetter","prop","desc","console","warn","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","text","html","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","getGlobal","_createTrustedTypesPolicy","trustedTypes","document","createPolicy","suffix","ATTR_NAME","currentScript","hasAttribute","getAttribute","policyName","createHTML","createScriptURL","scriptUrl","createDOMPurify","DOMPurify","root","version","removed","nodeType","isSupported","originalDocument","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","createElement","ownerDocument","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","createHTMLDocument","PARSER_MEDIA_TYPE","MUSTACHE_EXPR$1","ERB_EXPR$1","TMPLIT_EXPR$1","DATA_ATTR$1","ARIA_ATTR$1","IS_SCRIPT_OR_DATA$1","ATTR_WHITESPACE$1","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","SUPPORTED_PARSER_MEDIA_TYPES","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_forceRemove","node","parentNode","removeChild","remove","_removeAttribute","attribute","getAttributeNode","removeAttribute","setAttribute","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","parseFromString","documentElement","createDocument","innerHTML","body","insertBefore","createTextNode","childNodes","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isNode","nodeName","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","elm","textContent","attributes","namespaceURI","hasChildNodes","tagName","allowedTags","firstElementChild","_basicCustomElementTest","parent","parentTagName","_checkValidNamespace","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attr","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_attr","forceKeepAttr","getAttributeType","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","returnNode","appendChild","firstChild","nodeIterator","shadowroot","shadowrootmod","serializedHTML","outerHTML","doctype","setConfig","clearConfig","isValidAttribute","tag","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","factory","nextTickSupported","nextTick","symbolsSupported","reflectSupported","_setImmediate","setImmediate","setTimeout","getOwnPropertySymbols","keys","init","_events","_conf","configure","conf","delimiter","maxListeners","_maxListeners","wildcard","newListener","_newListener","removeListener","_removeListener","verboseMemoryLeak","ignoreErrors","listenerTree","logPossibleMemoryLeak","count","eventName","errorMsg","emitWarning","Error","emitter","error","trace","toArray","b","toObject","valuesCount","TargetObserver","options","on","off","_emitter","_target","_listeners","_listenersCount","addEventListener","removeEventListener","addListener","_on","_off","_observers","resolveOptions","schema","reducers","allowUnknown","computedOptions","option","reducer","reject","reason","constructorReducer","makeTypeReducer","types","message","firstType","secondType","kind","subscribe","event","localEvent","observer","listeners","handler","eventObj","original","emit","_onNewListener","_event","_onRemoveListener","hasListeners","unsubscribe","events","clearRefs","index","findTargetIndex","splice","functionReducer","objectFunctionReducer","makeCancelablePromise","Promise","executor","isCancelable","callbacks","subscriptionClosed","timer","promise","resolve","onCancel","cleanup","clearTimeout","timeout","overload","isFinite","cancel","_resolve","_reject","cb","code","observers","searchListenerTree","handlers","tree","typeLength","ns","j","dl","branch","xTree","xxTree","isolatedBranch","endReached","branches","currentType","nextType","growListenerTree","listener","prepend","unshift","warned","collectTreeEvents","asArray","branchName","path","isArrayPath","recursivelyGarbageCollect","flag","Listener","setupListener","promisify","async","objectify","_listener","_origin","context","then","_async","EventEmitter","EventEmitter2","listenTo","listen","isSingleReducer","stopListeningTo","matched","setMaxListeners","getMaxListeners","once","_once","prependOnceListener","_many","many","ttl","prependMany","_all","containsSymbol","al","emitAsync","promises","all","prependListener","onAny","_onAny","prependAny","temp","returnValue","leafs","iLeaf","leaf","position","offAny","fns","removeAllListeners","allListeners","eventNames","nsAsArray","listenerCount","listenersAny","waitFor","handleError","defineProperties","defaultMaxListeners","isNaN","errorListener","eventListener","__esModule","default","webextension","getStorage","chrome","runtime","lastError","results","storage","local","sync","addStyle","css","style","head","log","getManifest","lang","selector","api","settings","i18n","argIndex","getMessage","assetUrl","filename","extension","getURL","injectCssResource","alert","injectjsResource","src","onload","updateDom","storageOnChanged","onChanged","utils","syncRegex","requestApi","xhr","url","sendMessage","status","response","notification","database","param","settingsObj","autoTrackingModeanime","readerTracking","autoTrackingModemanga","enablePages","forceEn","rpc","presenceLargeImage","presenceShowButtons","presenceShowMalsync","userscriptModeButton","syncMode","syncModeSimkl","localSync","delay","videoDuration","malTags","malContinue","malResume","usedPage","epPredictions","theme","themeSidebars","themeColor","themeOpacity","themeImage","minimalWindow","posLeft","miniMALonMal","floatButtonStealth","minimizeBigPopup","floatButtonCorrection","floatButtonHide","autoCloseMinimal","outWay","miniMalWidth","miniMalHeight","malThumbnail","friendScore","loadPTWForProgress","quicklinks","quicklinksPosition","autofull","autoresume","autoNextEp","highlightAllEp","checkForFiller","crashReport","introSkip","introSkipFwd","introSkipBwd","nextEpShort","correctionShort","syncShort","progressInterval","progressIntervalDefaultAnime","progressIntervalDefaultManga","progressNotificationsAnime","progressNotificationsManga","bookMarksList","customDomains","anilistUpdateUi","anilistToken","anilistOptions","displayAdultContent","scoreFormat","kitsuToken","kitsuOptions","titleLanguagePreference","sfwFilter","ratingSystem","simklToken","malToken","malRefresh","shikiToken","shikiOptions","locale","debounceArray","isInit","tempSettings","store","rateDebounce","con","changes","namespace","storageChange","info","rateLimit","$","flashm","permanent","setDebounce","getAsync","debug","m","color","blocks","fontColor","hash","charCodeAt","colour","substr","stringToColour","name2","color2","moduleText","reduce","sum","el","moduleStyle","urlPart","part","urlParts","urlStrip","urlParam","exec","decodeURI","getBaseText","children","each","generateUniqueID","arraySize","Uint32Array","crypto","getRandomValues","favicon","domain","watching","planTo","episode","rateLimitExclude","getselect","absoluteLink","startsWith","parseHtml","urlChangeDetect","currentPage","location","href","setInterval","fullUrlChangeDetect","strip","intervalId","changeDetect","immediate","waitUntilTrue","condition","interval","clearInterval","getAsyncWaitUntilTrue","rejectThis","reset","asyncWaitUntilTrue","doubleId","random","checkDoubleExecution","after","getUrlFromTags","tags","atobURL","encoded","atob","setUrlInTags","addition","setResumeWaching","ep","getResumeWaching","setContinueWaching","getContinueWaching","setEntrySettings","tempOptions","find","getEntrySettings","u","tagString","parse","continueUrlObj","resumeUrlObj","handleMalImages","getTooltip","direction","rNumber","floor","timeDiffToText","delta","diffYears","diffDays","diffHours","diffMinutes","canHideTabs","browser","tabs","hide","statusTag","anime","class","title","manga","tempInfo","getStatusText","state","notifications","iconUrl","messageObj","history","shift","timestamp","timeCache","dataFunction","getTime","extraClass","initflashm","colorF","flashdiv","messClass","tempClass","removeClass","fadeOut","duration","queue","complete","flashmEl","mess","hoverInfo","addClass","appendTo","minimized","slideDown","slideUp","flashConfirm","yesCall","cancelCall","yesNo","yesText","noText","flasmessage","click","evt","parentsUntil","lazyloaded","lazyimages","lazyload","scrollElement","loadImage","hasClass","img","Image","replaceChild","query","processScroll","elementInViewport","scroll","horizontalOffset","rect","getBoundingClientRect","top","left","innerHeight","clientHeight","wait","ms","pageUrl","page","returnYYYYMMDD","numFromToday","d","setDate","getDate","month","getMonth","day","getFullYear","htmlDecode","isFirefox","waitForPageToBeVisible","visibilityState","awaitUi","makeDomainCompatible","clearCache","cacheArray","deleted","sortAlphabetically","isDomainMatching","urlObj","URL","host","endsWith","upperCaseFirstLetter","string","jQuery","htmlContent","SAFE_FOR_JQUERY","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","getter","definition","defineProperty","hmd","toStringTag","score","localStorage","getItem","checkLocalStorageIsAvailable","setItem","removeItem","localStore","refetchTtl","containsValue","valueValid","ttlValid","refetchTtlValid","hasValue","hasValueAndIsNotEmpty","fullState","isValid","refetch","getValue","setValue","save","clearValue","scriptId","globalEmit","params","onMessage","sender","sendResponse","super","UrlNotSupportedError","UnexpectedResponseError","errorMessage","authenticationUrl","animeStatus","mangaStatus","listType","sort","loading","firstLoaded","seperateRewatching","modes","frontend","sortAiring","initProgress","cached","username","offset","templist","cacheObj","logger","setTemplist","getTemplist","setSort","isDone","isLoading","isFirstLoaded","getCompleteList","getNext","sortAiringList","getCache","getNextPage","retList","getPart","getCached","cachelist","watchedEp","initFrontendMode","updateListener","cacheKey","destroy","getUsername","getUserObject","user","getSortingOptions","simple","icon","_getSortingOptions","asc","flashmError","streamurl","continueUrlTemp","continueUrl","curEp","Progress","progress","listP","sortUnread","normalItems","preItems","watchedItems","sortItems","valA","getPredictionTimestamp","valB","prediction","isAiring","getCurrentEpisode","reverse","tempA","tempB","statusTranslate","aniStatus","malStatus","current","planned","completed","dropped","on_hold","getTitle","titles","canonicalTitle","en","en_jp","ja_jp","kitsuId","mode","variables","authentication","headers","Accept","Authorization","json","responseText","errors","detail","userRequest","opt","picture","avatar","large","slug","getUserId","userId","deauth","accessToken","getOrder","pre","userid","statusPart","sorting","order","meta","prepareData","newData","included","tempData","malId","NaN","mapping","externalSite","relationships","externalId","apiCacheKey","uid","kitsuSlug","totalEp","episodeCount","round","ratingTwenty","image","posterImage","small","imageLarge","imageBanner","coverImage","notes","airingState","anime_airing_status","chapterCount","predictionXhrGET","timestampToShortTime","tm","ago","curTime","diff","future","short","output","y","h","timeToString","milliseconds","hour","minute","seconds","year","msToTime","releaseItem","initReleaseProgress","liveData","force","finished","progressValue","config","mainId","fallback","fallbackPrediction","mainTemp","predicition","lastEp","predTemp","predTime","total","probability","predSoon","getProgress","cProgress","nProgress","noti","single","sticky","getImage","getStreamingUrl","getUrl","notificationCheck","progressMode","progressIsOld","getProgressCurrentEpisode","re","isProgressFinished","getProgressPrediction","getProgressLastTimestamp","live","isFinished","getPrediction","getPredictionText","getLastTimestamp","getLast","getLastText","getAuto","preT","getAutoText","getColor","getBars","predEp","totalWidth","epWidth","predWidth","ceil","MissingPlayerError","parts","SafeError","MissingDataError","CustomDomainError","point10","ui","getOptions","label","valueToOptionValue","optionValueToValue","optionValue","SingleAbstract","rewatchingSupport","ids","mal","ani","kitsu","simkl","updateProgress","_onList","_authenticated","handleUrl","getType","supportsRewatching","getApiCacheKey","getKey","getRulesCacheKey","setStatus","_setStatus","getStatus","isOnList","_getStatus","getScoreMode","setScore","_setScore","getScore","_getScore","setAbsoluteScore","_setAbsoluteScore","getAbsoluteScore","_getAbsoluteScore","setEpisode","getTotalEpisodes","_setEpisode","getEpisode","_getEpisode","setVolume","volume","_setVolume","getVolume","_getVolume","setStreamingUrl","streamingUrl","cleanTags","getCacheKey","getProgressMode","progressXhr","getProgressFormated","op","languageNames","Intl","DisplayNames","of","getProgressOptions","getProgressCompleted","setProgressMode","_getTags","getProgressKey","getPageRelations","shortName","link","fillRelations","update","_update","catch","persistanceState","getStateEl","registerEvent","emitUpdate","_setTags","_sync","undoState","action","getPageId","getMalId","_delete","globalUpdateEvent","updateEvent","isDirty","setStateEl","undo","onList","_getTitle","eps","_getTotalEpisodes","getTotalVolumes","_getTotalVolumes","isAuthenticated","getDisplayUrl","_getDisplayUrl","getMalUrl","getIds","_getImage","getRating","_getRating","rating","setResumeWatching","getResumeWatching","setContinueWatching","getContinueWatching","increaseRewatchCount","absoluteScore","getStateDiff","persistance","checkSync","curEpisode","curStatus","curVolume","startRewatchingMessage","finishRewatchingMessage","finishWatchingMessage","startWatchingMessage","currentScore","getScoreCheckboxValue","checkHtml","getScoreCheckbox","handleScoreCheckbox","getDisplayScoreCheckbox","curScore","labelEl","getStatusCheckbox","statusEs","handleStatusCheckbox","getStatusCheckboxValue","allowed","forceMal","includes","getLastError","getLastErrorMessage","point20decimal","resArr","toFixed","smiley4","point10decimal","Single","listI","animeInfo","animeI","reconsuming","ratingHundred","_getTwentyScore","volumesOwned","volumeCount","averageRating","kitsuSlugRes","kitsuSlugtoKitsu","kitsuRes","malToKitsu","apiCall","tempAnimeInfo","reconsumeCount","tType","updateUrl","post","malid","titleSearch","resTitle","found","space","substring","searchSyntax","activeLinks","searchterm","combined","comb","optionToCombined","custom","combinedLinks","Sites","getMalToKissApi","databaseLinks","fillFromApi","search","links","quickGroup","db","searchTerm","group","simplifyObject","KitsuClass","same","authError","tempAnimelist","tempMangalist","oldUrl","tempUrl","first","height","ready","urlpart","malObj","streamingUI","malToKiss","pageRelation","bookmarks","ajax","success","token","access_token","responseJSON","error_description","streamUrl","append","tempHtml","stream","removeOptionKey","removeFromOptions","reload","This","fullListCallback","listProvider","cover","firebaseNotification","schedule","checkNotifications","notificationUrl","resNotification","SentryError","logLevel","isError","wat","isInstanceOf","isBuiltin","className","isErrorEvent","isDOMError","isString","isPlainObject","isEvent","Event","isThenable","base","States","SyncPromise","rejectedSyncPromise","__init","_state","PENDING","__init2","_handlers","__init3","__init4","__init5","__init6","onfulfilled","onrejected","_executeHandlers","finally","onfinally","isRejected","_setResult","RESOLVED","REJECTED","cachedHandlers","DSN_REGEX","dsn","withPassword","pass","port","projectId","protocol","publicKey","dsnFromComponents","components","DEFAULT_MAX_STRING_LENGTH","htmlTreeAsString","elem","currentElem","MAX_TRAVERSE_HEIGHT","out","separator","sepLength","nextStr","keyAttrs","maxStringLength","_htmlElementAsString","_oO","classes","keyAttrPairs","keyAttr","keyAttrPair","allowedAttrs","truncate","max","safeJoin","input","stringMatchesSomePattern","testString","patterns","requireExactStringMatch","some","pattern","isMatchingPattern","fill","source","replacementFactory","wrapped","markFunctionWrapped","_Oo","addNonEnumerableProperty","proto","getOriginalFunction","__sentry_original__","convertToPlainObject","stack","getOwnProperties","newObj","serializeEventTarget","currentTarget","CustomEvent","extractedProps","extractExceptionKeysForMessage","exception","maxLength","includedKeys","serialized","dropUndefinedKeys","inputValue","_dropUndefinedKeys","memoizationMap","memoVal","STACKTRACE_LIMIT","createStackParser","parsers","sortedParsers","skipFirst","frames","line","cleanedLine","parser","frame","localStack","firstFrameFunction","function","lastFrameFunction","stripSentryFramesAndReverse","defaultFunctionName","getFunctionName","normalize","depth","maxProperties","visit","ERROR","normalizeToSize","maxSize","normalized","encodeURI","utf8Length","jsonSize","memo","hasWeakSet","WeakSet","inner","memoBuilder","memoize","unmemoize","stringified","isSyntheticEvent","stringifyValue","valueWithToJSON","toJSON","numAdded","visitable","visitKey","visitValue","createEnvelope","items","addItemToEnvelope","envelope","newItem","forEachEnvelopeItem","envelopeItem","envelopeItemType","encodeUTF8","textEncoder","TextEncoder","encode","serializeEnvelope","envHeaders","itemHeaders","payload","Uint8Array","stringifiedPayload","buffers","totalLength","acc","buf","merged","buffer","concatBuffers","createAttachmentEnvelopeItem","attachment","content_type","contentType","attachment_type","attachmentType","ITEM_TYPE_TO_DATA_CATEGORY_MAP","session","sessions","transaction","client_report","user_report","profile","replay_event","replay_recording","envelopeItemTypeToDataCategory","getSdkMetadataForEnvelopeHeader","metadataOrEvent","sdk","DEFAULT_RETRY_AFTER","PREFIX","CONSOLE_LEVELS","consoleSandbox","originalConsole","wrappedLevels","level","originalWrappedFunc","makeLogger","enabled","enable","disable","__SENTRY_DEBUG__","DEFAULT_TRANSPORT_BUFFER_SIZE","createTransport","makeRequest","limit","task","taskProducer","drain","counter","capturedSetTimeout","makePromiseBuffer","bufferSize","rateLimits","send","filteredEnvelopeItems","envelopeItemDataCategory","limits","category","disabledUntil","isRateLimited","getEventForEnvelopeItem","recordDroppedEvent","filteredEnvelope","recordEnvelopeLoss","statusCode","updatedRateLimits","rateLimitHeader","retryAfterHeader","retryAfter","categories","headerDelay","header","headerDate","parseRetryAfterHeader","updateRateLimits","flush","supportsFetch","Headers","Request","Response","isNativeFetch","uuid4","msCrypto","randomUUID","getRandomByte","getFirstException","getEventDescription","event_id","eventId","firstException","addExceptionTypeValue","addExceptionMechanism","newMechanism","currentMechanism","mechanism","handled","mergedData","checkOrSetAlreadyCaught","__sentry_captured__","arrayify","maybeArray","updateSession","ipAddress","ip_address","did","email","time","ignoreDuration","sid","started","release","environment","userAgent","Scope","_notifyingListeners","_scopeListeners","_eventProcessors","_breadcrumbs","_attachments","_user","_tags","_extra","_contexts","_sdkProcessingMetadata","static","scope","newScope","_level","_span","_session","_transactionName","_fingerprint","_requestSession","addScopeListener","addEventProcessor","setUser","_notifyScopeListeners","getUser","getRequestSession","setRequestSession","requestSession","setTags","setTag","setExtras","extras","setExtra","extra","setFingerprint","fingerprint","setLevel","setTransactionName","setContext","setSpan","span","getSpan","getTransaction","setSession","getSession","captureContext","updatedScope","contexts","addBreadcrumb","breadcrumb","maxBreadcrumbs","maxCrumbs","mergedBreadcrumb","getLastBreadcrumb","clearBreadcrumbs","addAttachment","getAttachments","clearAttachments","applyToEvent","hint","getTraceContext","transactionName","_applyFingerprint","breadcrumbs","sdkProcessingMetadata","_notifyEventProcessors","getGlobalEventProcessors","setSDKProcessingMetadata","processors","processor","final","addGlobalEventProcessor","API_VERSION","DEFAULT_BREADCRUMBS","Hub","_stack","client","_version","getStackTop","bindClient","isOlderThan","setupIntegrations","pushScope","getScope","getStack","getClient","popScope","withScope","captureException","_lastEventId","syntheticException","_withClient","originalException","captureMessage","captureEvent","lastEventId","beforeBreadcrumb","finalBreadcrumb","configureScope","oldHub","makeMain","getIntegration","integration","startTransaction","customSamplingContext","_callExtensionMethod","traceHeaders","captureSession","endSession","_sendSessionUpdate","closeSession","startSession","startingTime","toISOString","attrs","user_agent","sessionToJSON","makeSession","currentSession","shouldSendDefaultPii","sendDefaultPii","sentry","getMainCarrier","extensions","hub","registry","getHubFromCarrier","setHubOnCarrier","hasHubOnCarrier","activeDomain","active","registryHubTopStack","getHubFromActiveDomain","carrier","cachedFetchImpl","ignoreOnError","shouldIgnoreOnError","before","wrapper","__sentry_wrapped__","sentryWrapped","wrappedArguments","arg","ex","makeFetchTransport","nativeFetch","fetchImpl","sandbox","hidden","contentWindow","fetch","getNativeFetchImplementation","requestOptions","referrerPolicy","keepalive","fetchOptions","DEFAULT_IGNORE_ERRORS","InboundFilters","_options","setupOnce","getCurrentHub","eventProcess","clientOptions","internalOptions","allowUrls","denyUrls","ignoreInternal","_mergeOptions","_isSentryError","oO","_getPossibleEventMessages","_isIgnoredError","_getEventFilterUrl","_isDeniedUrl","_isAllowedUrl","_shouldDropEvent","stacktrace","_getLastValidUrl","originalFunctionToString","__initStatic","FunctionToString","installedIntegrations","getIntegrationsToSetup","defaultIntegrations","userIntegrations","integrations","isDefaultInstance","finalIntegrations","integrationsByName","currentInstance","existingInstance","filterDuplicates","debugIndex","findIndex","debugInstance","instrumented","addInstrumentationHandler","originalConsoleMethod","triggerHandlers","triggerDOMHandler","globalDOMEventHandler","makeDOMEventHandler","originalAddEventListener","__sentry_instrumentation_handlers__","handlerForType","refCount","originalRemoveEventListener","instrumentDOM","xhrproto","XMLHttpRequest","originalOpen","xhrInfo","__sentry_xhr__","__sentry_own_request__","onreadystatechangeHandler","readyState","status_code","endTimestamp","startTimestamp","onreadystatechange","readyStateArgs","originalSend","instrumentXHR","supportsNativeFetch","originalFetch","handlerData","fetchData","getFetchMethod","getFetchUrl","isChromePackagedApp","app","hasHistoryApi","pushState","replaceState","supportsHistory","oldOnPopState","onpopstate","historyReplacementFunction","originalHistoryFunction","lastHref","to","instrumentHistory","_oldOnErrorHandler","onerror","msg","column","_oldOnUnhandledRejectionHandler","onunhandledrejection","instrument","fetchArgs","debounceDuration","debounceTimerID","lastCapturedEvent","globalListener","isContentEditable","shouldSkipDOMEvent","previous","shouldShortcircuitPreviousDebounce","global","SENTRY_API_VERSION","getEnvelopeEndpointWithUrlEncodedAuth","tunnelOrOptions","tunnel","sdkInfo","_metadata","getBaseApiEndpoint","_getIngestEndpoint","sentry_key","sentry_version","sentry_client","_encodedAuth","ALREADY_SEEN_ERROR","BaseClient","_integrations","_integrationsInitialized","_numProcessing","_outcomes","_dsn","lastPath","projectMatch","dsnFromString","component","isValidProtocol","validateDsn","_transport","transport","transportOptions","_process","eventFromException","_captureEvent","promisedEvent","eventFromMessage","_isEnabled","sendSession","getDsn","getSdkMetadata","getTransport","_isClientDoneProcessing","clientFinished","transportFlushed","close","integrationIndex","getIntegrationById","integrationId","sendEvent","env","metadata","eventType","packages","enhanceEventWithSdkInfo","envelopeHeaders","dynamicSamplingContext","sent_at","createEventEnvelopeHeaders","createEventEnvelope","attachments","_sendEnvelope","createSessionEnvelope","sendClientReports","_updateSessionFromEvent","crashed","errored","exceptions","sessionNonTerminal","ticked","_prepareEvent","normalizeDepth","normalizeMaxBreadth","prepared","dist","maxValueLength","applyClientOptions","integrationNames","applyIntegrationsMetadata","finalScope","maxBreadth","spans","normalizeEvent","prepareEvent","_processEvent","finalEvent","sentryError","sampleRate","isTransaction","isTransactionEvent","beforeSendLabel","__sentry__","beforeSend","beforeSendTransaction","processBeforeSend","beforeSendResult","invalidValueError","_validateBeforeSendResult","processedEvent","transactionInfo","transaction_info","propagations","_clearOutcomes","outcomes","quantity","SDK_VERSION","exceptionFromError","stackParser","parseStackFrames","extractMessage","eventFromError","popSize","framesToPop","reactMinifiedRegexp","getPopSize","eventFromUnknownInput","attachStacktrace","isUnhandledRejection","domException","eventFromString","__serialized__","eventFromPlainObject","synthetic","validSeverityLevels","parseUrl","relative","MAX_ALLOWED_STRING_LENGTH","BREADCRUMB_INTEGRATION_ID","Breadcrumbs","dom","_consoleBreadcrumb","serializeAttribute","_xhrBreadcrumb","_fetchBreadcrumb","_historyBreadcrumb","addSentryBreadcrumb","parsedLoc","parsedFrom","parsedTo","BrowserClient","_flushOutcomes","ops","lastAccessLHS","_2","platform","discarded_events","sendBeacon","UNKNOWN_FUNCTION","createFrame","lineno","colno","in_app","chromeRegex","chromeEvalRegex","geckoREgex","geckoEvalRegex","winjsRegex","defaultStackParser","subMatch","extractSafariExtensionDetails","isSafariExtension","isSafariWebExtension","DEFAULT_EVENT_TARGET","TryCatch","eventTarget","requestAnimationFrame","_wrapTimeFunction","_wrapRAF","_wrapXHR","eventTargetOption","_wrapEventTarget","originalCallback","wrapOptions","originalFunction","globalObject","handleEvent","wrappedEventHandler","originalEventHandler","GlobalHandlers","_installFunc","_installGlobalOnErrorHandler","_installGlobalOnUnhandledRejectionHandler","stackTraceLimit","installFunc","getHubAndOptions","groups","_enhanceEventWithInitialFrame","_eventFromIncompleteOnError","addMechanismAndCapture","ev","ev0","ev0s","ev0sf","getLocationHref","LinkedErrors","_limit","linkedErrors","_walkErrorTree","_handler","Dedupe","eventProcessor","currentEvent","previousEvent","currentMessage","previousMessage","_isSameFingerprint","_isSameStacktrace","_isSameMessageEvent","previousException","_getExceptionFromEvent","currentException","_isSameExceptionEvent","_previousEvent","currentFrames","_getFramesFromEvent","previousFrames","frameA","frameB","currentFingerprint","previousFingerprint","HttpContext","referrer","Referer","XHR_READYSTATE_DONE","makeXHRTransport","getResponseHeader","open","setRequestHeader","startSessionOnHub","windowIntegrations","INTEGRATIONS","normalizeUrl","makeFakeFetchTransport","_fetchImpl","retObj","lastFocus","__SENTRY_RELEASE__","autoSessionTracking","clientClass","initialScope","initAndBind","startSessionTracking","culprit","initShark","malUrl","blur"],"sourceRoot":""}